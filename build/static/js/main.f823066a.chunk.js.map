{"version":3,"sources":["firebase.config.js","contexts/AuthContext.jsx","PrivateRoute.jsx","components/layout/Footer.jsx","components/reservations/SearchTripForm.jsx","components/layout/Sidebar.jsx","components/reservations/DataGrid.jsx","pages/reservations/Data.jsx","components/reservations/ConfirmReservation.jsx","components/reservations/ReservationAdd.jsx","pages/reservations/AddReservation.jsx","components/accounts/Login.jsx","pages/accounts/login.jsx","components/trips/TripsTable.jsx","pages/trips/Trips.jsx","components/trips/MultipleTimeSelect.jsx","components/trips/TripCreateForm.jsx","pages/trips/AddTrip.jsx","components/trips/TripStopsTable.jsx","pages/trips/TripStops.jsx","components/trips/TripStopCreateForm.jsx","pages/trips/AddTripStop.jsx","components/fares/FareCreateForm.jsx","pages/fares/AddFare.jsx","components/home/Home.jsx","pages/home/homepage.jsx","components/statistics/ActivityChart.jsx","components/statistics/StatsChart.jsx","components/statistics/StackedBar.jsx","components/statistics/BarGraph.jsx","components/statistics/StatsData.jsx","pages/statistics/Statistics.jsx","components/payments/PaymentsData.jsx","pages/payments/Payments.jsx","components/fares/FaresGrid.jsx","pages/fares/Grid.jsx","components/trips/DeleteModal.jsx","components/trips/EditModal.jsx","components/trips/TripsGrid.jsx","pages/trips/TripGrid.jsx","App.jsx","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","AuthContext","React","createContext","useAuth","useContext","AuthProvider","children","useState","currentUser","setCurrentUser","loading","setLoading","useEffect","onAuthStateChanged","user","value","login","email","password","signInWithEmailAndPassword","logout","signOut","Provider","PrivateRoute","Component","component","rest","render","props","to","useStyles","makeStyles","theme","root","flexGrow","marginTop","marginBottom","backgroundColor","Footer","classes","AppBar","className","position","color","Container","maxWidth","Toolbar","Typography","variant","Date","getFullYear","moment","require","uuidv4","v4","display","flexWrap","margin","spacing","withoutLabel","textField","width","table","pricesContainer","padding","SearchTripForm","db","firestore","fare","setFare","seats","error","setSeats","history","useHistory","date","setDate","time","trip","route","paymentReference","currency","values","setValues","routes","setRoutes","a","collection","get","data","docs","map","doc","fetchRoutes","handleChange","prop","event","str","possibleTrips","target","undefined","where","limit","then","refs","size","alert","seatsAvailable","momentTravelDate","toDate","name","times","paidCount","d","setMinutes","getMinutes","pendingCount","num","submitButton","selectedTripInfo","Modal","FormControl","clsx","labelId","onChange","required","Array","from","Map","Object","entries","prices","keys","item","FormHelperText","id","Input","placeholder","pickUp","endAdornment","InputAdornment","aria-describedby","inputProps","Button","onClick","ticketId","dateString","y","toString","m","getMonth","getDate","length","formatDate","Math","floor","random","ticketID","arr","split","timestamp","seatNo","seat_letter","seat_number","generateRandomSeatNumber","refNo","replace","c","r","add","ID","TicketID","Currency","Amount","status","Trip","TravellingFrom","TravellingTo","BookingTime","TravelTime","platform","ref","push","button","key","counter","aria-labelledby","centered","class","Header","closeButton","Title","Body","console","log","newMap","forEach","v","k","amount","align","Intl","NumberFormat","style","format","disp","displayFares","drawerWidth","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","easeOut","enteringScreen","menuButton","marginRight","hide","drawer","flexShrink","drawerPaper","drawerHeader","alignItems","mixins","toolbar","justifyContent","content","contentShift","LogoutButton","profileButton","dropdownTitle","dropDownMenu","ListItemLink","ListItem","Sidebar","modalShow","setModalShow","useTheme","open","setOpen","setError","anchorEl","setAnchorEl","Alert","CssBaseline","IconButton","aria-label","edge","noWrap","aria-controls","aria-haspopup","currentTarget","endIcon","keepMounted","Boolean","onClose","MenuItem","Link","href","textDecoration","Drawer","anchor","paper","direction","Divider","List","ListItemIcon","ListItemText","primary","show","onHide","height","filterBox","grid","headCells","field","headerName","description","sortable","valueGetter","params","row","firstName","lastName","DataTable","reservations","setReservations","search","fetchReservations","rts","property","queryRef","orderBy","toDateString","min","max","toUpperCase","query","empty","Grid","container","justify","e","rows","columns","Data","control","fullWidth","handleSubmit","formatter","reservation","lg","xs","firstname","lastname","phoneNumber","paymentMethod","card","ReservationAdd","useParams","setReservation","exists","Card","input","type","update","fullname","Email","PhoneNumber","PaymentMethod","encodeURIComponent","catch","AddReservation","Login","emailRef","useRef","passwordRef","preventDefault","current","Form","onSubmit","Group","Label","Control","disabled","minHeight","descendingComparator","b","getComparator","order","stableSort","array","comparator","stabilizedThis","el","index","sort","numeric","disablePadding","label","EnhancedTableHead","onSelectAllClick","numSelected","rowCount","onRequestSort","TableHead","TableRow","TableCell","Checkbox","indeterminate","checked","headCell","sortDirection","TableSortLabel","active","visuallyHidden","useToolbarStyles","paddingLeft","paddingRight","highlight","palette","secondary","main","lighten","light","text","dark","title","flex","EnhancedTableToolbar","Tooltip","minWidth","border","clip","overflow","top","TripsTable","setOrder","setOrderBy","selected","setSelected","page","setPage","dense","setDense","rowsPerPage","setRowsPerPage","trips","setTrips","fetchTrips","emptyRows","Paper","TableContainer","Table","newSelecteds","n","TableBody","slice","tripRef","isItemSelected","indexOf","link","hover","selectedIndex","newSelected","concat","handleClick","role","aria-checked","tabIndex","scope","join","displayStops","stops","colSpan","TablePagination","rowsPerPageOptions","count","onChangePage","newPage","onChangeRowsPerPage","parseInt","FormControlLabel","Switch","Trips","MultipleTimeSelect","options","x","setTimes","labelledBy","uuid","TripCreateForm","setName","setTo","setFrom","t","AddTrip","addLink","TripStopsTable","stop","displayTimes","TripStops","setTrip","TripStopCreateForm","fromEntries","to_to_stops","from_to_stops","stops_to_stops","docID","delete","set","AddTripStop","setDocID","FareCreateForm","updatePrices","cities","AddFare","Home","Homepage","ActivityChart","setActivityData","byoData","setByoData","harareData","setHarareData","vicfallsData","setVicfallsData","gweruData","setGweruData","kadomaData","setKadomaData","chegutuData","setChegutuData","kwekweData","setKwekweData","hwangeData","setHwangeData","labels","setLabels","dates","minDate","subtract","activitiesTotal","snapshot","state","byoTotal","harareTotal","vicfallsTotal","gweruTotal","kwekweTotal","kadomaTotal","chegutuTotal","hwangeTotal","fetchStats","datasets","fill","borderColor","fontColor","responsive","fontSize","legend","scales","yAxes","ticks","beginAtZero","stepSize","xAxes","StatsChart","activityData","borderWidth","pointRadius","stacked","StackedBar","BarGraph","inputPaymentMethodRef","period","inputPeriodRef","setState","getChartData","createRef","colors","totalReservations","this","total","pickupPoint","reservationsRef","startAt","endAt","paddingTop","select","option","md","CardContent","withStyles","withTheme","StatsData","Statistics","PaymentsData","Payments","USD","ZAR","ZWL","FaresGrid","fares","setFares","setCities","fetchFares","dataRef","DeleteModal","EditModal","dname","dto","dfrom","dtimes","dseats","customButton","disableClickEventBubbling","renderCell","TripsGrid","editShow","setEditShow","deleteShow","setDeleteShow","deleteTrip","setDeleteTrip","deleteID","setDeleteID","editTrip","setEditTrip","editID","setEditID","setOptions","handleDelete","handleEdit","closeMenuOnSelect","isMulti","selectedOptions","TripGrid","createMuiTheme","contrastText","body","fontFamily","App","ThemeProvider","exact","path","window","match","location","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f823066a.chunk.js","sourcesContent":["import firebase from \"firebase\"; //firebase/app\r\n// import \"firebase/firestore\";\r\n\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_SENDER_ID,\r\n  appId: process.env.REACT_APP_MESSAGING_APP_ID,\r\n  // measurementId: \"G-776MMG1FPL\",\r\n};\r\n\r\n//Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase;\r\n","import React from \"react\";\r\nimport firebase from \"../firebase.config\";\r\n\r\nconst auth = firebase.auth();\r\n\r\nconst AuthContext = React.createContext();\r\n\r\nexport function useAuth() {\r\n  return React.useContext(AuthContext);\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [currentUser, setCurrentUser] = React.useState();\r\n  const [loading, setLoading] = React.useState(true);\r\n\r\n  // function register(email, password) {\r\n  //   return auth.createUserWithEmailAndPassword(email, password);\r\n  // }\r\n\r\n  function login(email, password) {\r\n    return auth.signInWithEmailAndPassword(email, password);\r\n  }\r\n\r\n  function logout() {\r\n    return auth.signOut();\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged((user) => {\r\n      setCurrentUser(user);\r\n      setLoading(false);\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const value = {\r\n    currentUser,\r\n    // register,\r\n    login,\r\n    logout,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\n// export default AuthProvider;\r\n","import React from 'react'\r\nimport { Redirect, Route } from 'react-router'\r\nimport { useAuth } from './contexts/AuthContext'\r\n\r\nexport default function PrivateRoute({ component: Component, ...rest }) {\r\n    const { currentUser } = useAuth()\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={(props) => {\r\n                return currentUser ? (\r\n                    <Component {...props} />\r\n                ) : (\r\n                    <Redirect to='/login' />\r\n                );\r\n            }}\r\n        ></Route>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        marginTop: '15%', //100px\r\n        marginBottom: \"10px\",\r\n        backgroundColor: \"#ad1457\",\r\n    },\r\n}));\r\n\r\nexport default function Footer() {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <AppBar className={classes.root} position=\"relative\" color=\"primary\">\r\n            <Container maxWidth=\"sm\">\r\n                <Toolbar>\r\n                    <Typography variant=\"body1\" color=\"inherit\">\r\n                        First Source Technology {new Date().getFullYear()}\r\n                    </Typography>\r\n                </Toolbar>\r\n            </Container>\r\n        </AppBar>\r\n    );\r\n}\r\n\r\nexport { Footer };\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport DatePicker from 'react-date-picker';\r\nimport firebase from \"../../firebase.config\";\r\nimport { useHistory } from 'react-router-dom';\r\nvar moment = require(\"moment\");\r\nconst { v4: uuidv4 } = require(\"uuid\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  margin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  withoutLabel: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  textField: {\r\n    width: '25ch', //25ch\r\n    // fontSize: '11',\r\n  },\r\n  table: {\r\n    width: '100%',\r\n  },\r\n  pricesContainer: {\r\n    padding: theme.spacing(1),\r\n  }\r\n}));\r\n\r\n\r\nexport default function SearchTripForm(props) {\r\n  const db = firebase.firestore();\r\n  const classes = useStyles();\r\n  const [fare, setFare] = React.useState(null);\r\n  const [seats, setSeats] = React.useState({\r\n    seats: null, error: \"\"\r\n  });\r\n  const history = useHistory();\r\n  const [date, setDate] = React.useState(new Date());\r\n  const [values, setValues] = React.useState({\r\n    time: null,\r\n    trip: null,\r\n    route: null,\r\n    paymentReference: null,\r\n    currency: null\r\n  });\r\n  const [routes, setRoutes] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    const fetchRoutes = async () => {\r\n      const data = await db.collection(\"trips\").get();\r\n      setRoutes(data.docs.map((doc) => (doc.data())));\r\n    };\r\n    fetchRoutes();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const handleChange = (prop) => (event) => {\r\n    if (prop === \"trip\") {\r\n      //check if this trip has a fare\r\n      let str = routes[values.route]?.possibleTrips[event.target.value];\r\n\r\n      if (str !== undefined) {\r\n        db\r\n          .collection(\"fares\")\r\n          .where(\"possibleTrips\", \"array-contains\", str)\r\n          .limit(1)\r\n          .get().then(\r\n            (refs) => {\r\n              if (refs.size === 0) {\r\n                setFare(null);\r\n                setValues({ ...values, [prop]: null });\r\n                alert(\"Sorry the trip you selected does not have a fare associated with it, please select another one!\");\r\n              }\r\n              else {\r\n                setValues({ ...values, [prop]: event.target.value });\r\n                setFare(refs.docs[0].data());\r\n              }\r\n            }\r\n          );\r\n      }\r\n      else {\r\n        setFare(null);\r\n        setValues({ ...values, [prop]: null });\r\n        alert(\"Sorry the trip you selected does not have a fare associated with it, please select another one!\");\r\n      }\r\n    }\r\n    else setValues({ ...values, [prop]: event.target.value });\r\n\r\n    if (prop === \"time\") seatsAvailable(event.target.value);\r\n  };\r\n\r\n  const handleReserve = () => {\r\n    if (values.currency === null || values.trip === null || values.time === null || date === '' || values.route === null || fare === null || values.paymentReference === null) alert(\"Please fill in all input fields!\");\r\n    else {\r\n      //now reserve\r\n      const id = uuidv4();\r\n      var ticketId = ticketID();\r\n      let arr = routes[values.route].possibleTrips[values.trip].split('-');\r\n      let momentTravelDate = moment(date, \"YYYY-MM-DD\").toDate();\r\n      const timestamp = new Date();\r\n      var seatNo = generateRandomSeatNumber();\r\n      var refNo = generateRandomReferenceNumber();\r\n      let platform = 'Walk-in clients'\r\n\r\n      db\r\n        .collection(\"reservations\")\r\n        .add({\r\n          ID: id,\r\n          paymentReference: values.paymentReference,\r\n          TicketID: ticketId,\r\n          Currency: values.currency,\r\n          Amount: fare.prices[values.currency],\r\n          status: \"paid\",\r\n          Trip: routes[values.route].name,\r\n          TravellingFrom: arr[0],\r\n          TravellingTo: arr[1],\r\n          BookingTime: timestamp,\r\n          TravelTime: routes[values.route].times[values.time],\r\n          Date: momentTravelDate,\r\n          platform: platform,\r\n          seatNo: seatNo,\r\n          refNo: refNo,\r\n        })\r\n        .then((ref) => history.push(\"/reservations/\" + ref.id + \"/add\")\r\n        );\r\n    }\r\n  }\r\n\r\n  const seatsAvailable = (time) => {\r\n    let momentTravelDate = moment(date, \"YYYY-MM-DD\").toDate();\r\n    let trip = routes[values.route];\r\n\r\n    db\r\n      .collection(\"reservations\")\r\n      .where(\"Trip\", \"==\", trip.name)\r\n      .where(\"status\", \"==\", \"paid\")\r\n      .where(\"Date\", \"==\", momentTravelDate)\r\n      .where(\"TravelTime\", \"==\", trip.times[time])\r\n      .get().then((refs) => {\r\n        var paidCount = refs.size;\r\n\r\n        let d = new Date();\r\n        d.setMinutes(d.getMinutes() - 5);\r\n\r\n        db\r\n          .collection(\"reservations\")\r\n          .where(\"Trip\", \"==\", routes[values.route].name)\r\n          .where(\"status\", \"==\", \"pending\")\r\n          .where(\"Date\", \"==\", momentTravelDate)\r\n          .where(\"TravelTime\", \"==\", routes[values.route].times[time])\r\n          .where(\"BookingTime\", \">=\", d)\r\n          .get().then((refs) => {\r\n            let pendingCount = refs.size;\r\n\r\n            let num = trip.seats - paidCount - pendingCount;\r\n            let error = \"\";\r\n\r\n            if (num < 1) {\r\n              if (trip.seats === paidCount) {\r\n                error = \"There are no more seats available for the trip you selected!\"\r\n              }\r\n              else {\r\n                error = \"There are no seats available at the moment. Please check after 5 or so minutes\";\r\n              }\r\n            }\r\n\r\n            setSeats({ seats: num, error: error });\r\n          });\r\n      });\r\n\r\n  }\r\n\r\n  const displayFares = () => {\r\n    const getPrice = (currency, amount) => {\r\n      if (amount === undefined) return (<p>--</p>);\r\n\r\n      let formatter = new Intl.NumberFormat(\"en-US\", {\r\n        style: \"currency\",\r\n        currency: currency,\r\n      });\r\n\r\n      return formatter.format(amount).replace(currency, \"\").replace(\"$\", \"\");\r\n    }\r\n\r\n    const disp = () => {\r\n      if (fare.prices === undefined) return [];\r\n      let newMap = new Map(Object.entries(fare.prices));\r\n      let arr = [];\r\n\r\n      newMap.forEach((v, k) => {\r\n        arr.push((<tr><th>{k}</th><td align=\"right\">{getPrice(k, v)}</td></tr>));\r\n      });\r\n      return arr;\r\n    }\r\n\r\n    if (fare !== null) {\r\n      console.log(fare);\r\n      var arr = disp();\r\n      return (\r\n        <div className={clsx(classes.pricesContainer)}>\r\n          <h1>Prices</h1>\r\n          <table className={clsx(classes.table)}>\r\n            <tbody>\r\n              {\r\n                arr.map((item) => item)\r\n              }\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  let submitButton = null;\r\n  let selectedTripInfo = null;\r\n\r\n  if (values.route !== null) {\r\n    if (values.trip !== null && values.time !== null && date !== '' && fare !== null) {\r\n      if (seats['seats'] > 0) {\r\n        submitButton = (<Modal.Footer>\r\n          <p><b>Note:</b> Only click this button after the customer has made the necessary payments and please make sure the information entered is correct.</p>\r\n          <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n            <select\r\n              labelId=\"id\"\r\n              value={values.currency}\r\n              onChange={handleChange('currency')}\r\n              required\r\n            >\r\n              <option value=\"\">Select ...</option>\r\n              {(Array.from((new Map(Object.entries(fare?.prices ?? {}))).keys())).map((item) => {\r\n                return <option value={item}>{item}</option>;\r\n              })}\r\n            </select>\r\n            <FormHelperText id=\"standard-currency-helper-text\">Currency</FormHelperText>\r\n          </FormControl>\r\n          <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n            <Input\r\n              id=\"standard-adornment-payment-reference\"\r\n              placeholder=\"Payment reference\"\r\n              value={values.pickUp}\r\n              required\r\n              onChange={handleChange('paymentReference')}\r\n              endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n              aria-describedby=\"standard-payment-reference-helper-text\"\r\n              inputProps={{\r\n                'aria-label': 'Payment Reference',\r\n              }}\r\n            >\r\n            </Input>\r\n            <FormHelperText id=\"standard-payment-reference-helper-text\">Payment Reference</FormHelperText>\r\n          </FormControl>\r\n          <br />\r\n          <Button\r\n            onClick={handleReserve}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.button}>\r\n            Reserve\r\n            </Button>\r\n        </Modal.Footer>);\r\n      }\r\n      else {\r\n        if (seats['error'] !== '') alert(seats['error']);\r\n      }\r\n    }\r\n\r\n    selectedTripInfo = (\r\n      <div>\r\n        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n          <select\r\n            labelId=\"id\"\r\n            value={values.trip}\r\n            onChange={handleChange('trip')}\r\n            required\r\n          >\r\n            <option value=\"\">Select ...</option>\r\n            {routes[values.route]?.possibleTrips?.map((item, key) => {\r\n              return <option value={key}>{item.replace('-', \" to \")}</option>;\r\n            })}\r\n          </select>\r\n          <FormHelperText id=\"standard-date-helper-text\">Trips</FormHelperText>\r\n        </FormControl>\r\n        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n          <select\r\n            labelId=\"id\"\r\n            value={values.time}\r\n            onChange={handleChange('time')}\r\n            required\r\n          >\r\n            <option value=\"\">Select ...</option>\r\n            {routes[values.route]?.times?.map((item, counter) => {\r\n              return <option value={counter}>{item}</option>;\r\n            })}\r\n          </select>\r\n          <FormHelperText id=\"standard-date-helper-text\">Time (Bus leaves {routes[values.route]?.from} at )</FormHelperText>\r\n        </FormControl>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n      class=\"modal\"\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          Add a reservation\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <div className={classes.root}>\r\n          <div>\r\n            <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n              <select\r\n                labelId=\"id\"\r\n                value={values.route}\r\n                onChange={handleChange('route')}\r\n                required\r\n              >\r\n                <option value=\"\">Select ...</option>\r\n                {routes.map((item, counter) => {\r\n                  return <option value={counter}>{item.name}</option>;\r\n                })}\r\n              </select>\r\n              <FormHelperText id=\"standard-date-helper-text\">Route</FormHelperText>\r\n            </FormControl>\r\n            <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n              <DatePicker\r\n                onChange={setDate}\r\n                value={date}\r\n              />\r\n              <FormHelperText id=\"standard-date-helper-text\">Date of Travel</FormHelperText>\r\n            </FormControl>\r\n          </div>\r\n          {\r\n            selectedTripInfo\r\n          }\r\n          {\r\n            displayFares()\r\n          }\r\n        </div>\r\n      </Modal.Body>\r\n      {\r\n        submitButton\r\n      }\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction ticketID() {\r\n  //format: ExC-yymmdd-count\r\n\r\n  const d = new Date();\r\n  var dateString = formatDate(d);\r\n  var num = (Math.floor(Math.random() * 1000) + 1).toString();\r\n  num.length === 1 && (num = \"0\" + num);\r\n  num.length === 2 && (num = \"0\" + num);\r\n\r\n  return `ExC-${dateString}-${num}`;\r\n}\r\n\r\n//format date\r\nfunction formatDate(data) {\r\n  let str = \"\";\r\n  var y = data.getFullYear().toString();\r\n  var m = (data.getMonth() + 1).toString();\r\n  var d = data.getDate().toString();\r\n\r\n  d.length === 1 && (d = \"0\" + d);\r\n  m.length === 1 && (m = \"0\" + m);\r\n\r\n  str = y + m + d;\r\n  return str;\r\n}\r\n\r\nfunction generateRandomReferenceNumber() {\r\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(\r\n    /[xy]/g,\r\n    function (c) {\r\n      var r = (Math.random() * 16) | 0,\r\n        v = c === \"x\" ? r : (r & 0x3) | 0x8;\r\n      return v.toString(16);\r\n    }\r\n  );\r\n}\r\n\r\nfunction generateRandomSeatNumber() {\r\n  //temporary fix\r\n  var letters = [\r\n    \"A\",\r\n    \"B\",\r\n    \"C\",\r\n    \"D\",\r\n    \"E\",\r\n    \"F\",\r\n    \"G\",\r\n    \"H\",\r\n    \"I\",\r\n    \"J\",\r\n    \"K\",\r\n    \"L\",\r\n    \"M\",\r\n    \"N\",\r\n    \"O\",\r\n    \"P\",\r\n    \"Q\",\r\n    \"R\",\r\n    \"S\",\r\n    \"T\",\r\n    \"U\",\r\n    \"V\",\r\n    \"W\",\r\n    \"X\",\r\n    \"Y\",\r\n    \"Z\",\r\n  ];\r\n\r\n  var seat_letter = letters[Math.floor(Math.random() * 25).toString()];\r\n\r\n  var seat_number = (Math.floor(Math.random() * 100) + 1).toString();\r\n  seat_number.length === 1 && (seat_number = \"0\" + seat_number);\r\n\r\n  return seat_letter + seat_number;\r\n}","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport ExploreIcon from '@material-ui/icons/Explore';\r\nimport MonetizationOnIcon from \"@material-ui/icons/MonetizationOn\";\r\nimport DirectionsBusIcon from \"@material-ui/icons/DirectionsBus\";\r\nimport FlightIcon from '@material-ui/icons/Flight';\r\nimport LoyaltyIcon from '@material-ui/icons/Loyalty';\r\nimport AssessmentIcon from '@material-ui/icons/Assessment';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { Alert } from \"react-bootstrap\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport SearchTripForm from \"../reservations/SearchTripForm\";\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\n\r\nconst drawerWidth = 240;\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n\r\n\r\n    },\r\n    appBar: {\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n        backgroundColor: \"#34495E\",\r\n    },\r\n    appBarShift: {\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        marginLeft: drawerWidth,\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    hide: {\r\n        display: 'none',\r\n    },\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n\r\n    },\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n        backgroundColor: \"#34495E\",\r\n        color: \"#ffffff\",\r\n    },\r\n    drawerHeader: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: theme.spacing(0, 1),\r\n        // necessary for content to be below app bar\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: 'flex-end',\r\n    },\r\n    content: {\r\n        flexGrow: 1,\r\n        padding: theme.spacing(3),\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n        marginLeft: -drawerWidth,\r\n    },\r\n    contentShift: {\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n        marginLeft: 0,\r\n    },\r\n    LogoutButton: {\r\n        color: \"#F7F9F9\",\r\n        backgroundColor: \"#E74C3C\",\r\n    },\r\n    profileButton: {\r\n        backgroundColor: \"#2874A6\",\r\n        color: \"#F7F9F9\",\r\n    },\r\n    dropdownTitle: {\r\n        color: \"#ff1744\",\r\n\r\n    },\r\n    dropDownMenu: {\r\n        \"& .MuiPaper-root\": {\r\n            backgroundColor: \"#34495e\",\r\n            color: \"#fff\",\r\n        },\r\n    },\r\n}));\r\n\r\nfunction ListItemLink(props) {\r\n    return <ListItem button component=\"a\" {...props} />;\r\n}\r\n\r\nexport default function Sidebar() {\r\n    const [modalShow, setModalShow] = React.useState(false);\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const [open, setOpen] = React.useState(false);\r\n    const [error, setError] = React.useState();\r\n    const { currentUser, logout } = useAuth();\r\n    const history = useHistory();\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    async function handleLogout() {\r\n        setError(\"\");\r\n\r\n        try {\r\n            await logout();\r\n            history.push(\"/login\");\r\n        } catch {\r\n            setError(\"Failed to log out\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root} >\r\n            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n            <CssBaseline />\r\n            <AppBar\r\n                position=\"fixed\"\r\n                className={clsx(classes.appBar, {\r\n                    [classes.appBarShift]: open,\r\n                })}\r\n            >\r\n                <Toolbar>\r\n                    <IconButton\r\n                        color=\"inherit\"\r\n                        aria-label=\"open drawer\"\r\n                        onClick={handleDrawerOpen}\r\n                        edge=\"start\"\r\n                        className={clsx(classes.menuButton, open && classes.hide)}\r\n                    >\r\n                        <MenuIcon />\r\n                    </IconButton>\r\n                    <Typography variant=\"h6\" noWrap>\r\n                        Extracity Dashboard\r\n          </Typography>\r\n                    <Button\r\n                        aria-controls=\"simple-menu\"\r\n                        aria-haspopup=\"true\"\r\n                        onClick={handleClick}\r\n                        className={classes.dropdownTitle}\r\n                        endIcon={<ExpandMore />}\r\n                    >\r\n                        {currentUser.email}\r\n                    </Button>\r\n                    <Menu\r\n                        id=\"simple-menu\"\r\n                        anchorEl={anchorEl}\r\n                        keepMounted\r\n                        open={Boolean(anchorEl)}\r\n                        onClose={handleClose}\r\n                        className={classes.dropDownMenu}\r\n                    >\r\n                        <MenuItem\r\n                            component={Link}\r\n                            href=\"/update-profile\"\r\n                            style={{ color: \"black\", textDecoration: \"none\" }}\r\n                        >\r\n                            Update profile\r\n                     </MenuItem>\r\n                        <MenuItem\r\n                            component={Link}\r\n                            onClick={handleLogout}\r\n                            href=\"/logout\"\r\n                            style={{ color: \"red\", textDecoration: \"none\" }}\r\n                        >\r\n                            Logout\r\n                        </MenuItem>\r\n                    </Menu>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <Drawer\r\n                className={classes.drawer}\r\n                variant=\"persistent\"\r\n                anchor=\"left\"\r\n                open={open}\r\n                classes={{\r\n                    paper: classes.drawerPaper,\r\n                }}\r\n            >\r\n                <div className={classes.drawerHeader}>\r\n                    <IconButton onClick={handleDrawerClose}>\r\n                        {theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\r\n                    </IconButton>\r\n                </div>\r\n                <Divider />\r\n                <List>\r\n                    <ListItem>\r\n                        <Button variant=\"contained\" color=\"primary\" onClick={() => setModalShow(true)}>\r\n                            <AddCircleIcon />\r\n                            Add a reservation\r\n                        </Button>\r\n                    </ListItem>\r\n                    <ListItemLink href=\"/\">\r\n                        <ListItemIcon>\r\n                            <HomeIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Home\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n\r\n                    <ListItemLink href=\"/reservations\">\r\n                        <ListItemIcon>\r\n                            <ExploreIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Reservations\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n\r\n                    <Divider />\r\n\r\n                    <ListItemLink href=\"/statistics\">\r\n                        <ListItemIcon>\r\n                            <AssessmentIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Statistics\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n\r\n                    <ListItemLink href=\"/payments\">\r\n                        <ListItemIcon>\r\n                            <MonetizationOnIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Payments\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n\r\n                    <ListItemLink href=\"/trips-grid\">\r\n                        <ListItemIcon>\r\n                            <FlightIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Trip Grid\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n                    <ListItemLink href=\"/fares\">\r\n                        <ListItemIcon>\r\n                            <DirectionsBusIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Fares Grid\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n                    <ListItemLink href=\"/trips\">\r\n                        <ListItemIcon>\r\n                            <LoyaltyIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Trip Stops\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n                </List>\r\n                <SearchTripForm\r\n                    show={modalShow}\r\n                    onHide={() => setModalShow(false)}\r\n                />\r\n            </Drawer>\r\n        </div>\r\n    );\r\n}\r\n\r\n// <ListItemLink href=\"/reservations/add-reservation\">\r\n                    //     <ListItemIcon>\r\n                    //         <AirlineSeatReclineNormalSharpIcon color=\"primary\" />\r\n                    //     </ListItemIcon>\r\n                    //     <ListItemText primary=\"Add Reservation\" />\r\n                    // </ListItemLink>","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport firebase from \"../../firebase.config\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport DatePicker from 'react-date-picker';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nvar moment = require(\"moment\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: 400,\r\n        width: '100%',\r\n        marginTop: 80,\r\n\r\n    },\r\n    button: {\r\n        marginBottom: '10px',\r\n    },\r\n    filterBox: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: '#ffcd38',\r\n    },\r\n    grid: {\r\n        backgroundColor: '#008394',\r\n    }\r\n}));\r\n\r\nconst headCells = [\r\n    {\r\n        field: \"fullname\",\r\n        headerName: \"FULL NAME\",\r\n        description: 'This column has a value',\r\n        sortable: false,\r\n        width: 160,\r\n        valueGetter: (params) =>\r\n            `${params.row.firstName}  ${params.row.lastName}`,\r\n    },\r\n    { field: \"PhoneNumber\", headerName: \"PHONE #\", width: 130 },\r\n    { field: \"Trip\", headerName: \"TRIP\", width: 170 },\r\n    {\r\n        field: \"Date\", headerName: \"TRAVEL DATE\", width: 160, valueGetter: params => `${params.row.Date.toDate()}`,\r\n    },\r\n    { field: \"TravelTime\", headerName: \"TIME\", width: 110 },\r\n    { field: \"Amount\", headerName: \"AMOUNT\", width: 110, valueGetter: params => `${params.row.Currency} ${params.row.Amount}` },\r\n    { field: \"TicketID\", headerName: \"TICKET ID\", width: 180 },\r\n]\r\n\r\nexport default function DataTable() {\r\n    const classes = useStyles();\r\n    const [reservations, setReservations] = React.useState([]);\r\n    const [routes, setRoutes] = React.useState([]);\r\n    const [values, setValues] = React.useState({\r\n        route: '',\r\n        trip: '',\r\n        time: '',\r\n        from: '',\r\n        to: '',\r\n        search: '',\r\n    });\r\n    const db = firebase.firestore();\r\n\r\n    const handleChange = (prop, value) => {\r\n        setValues({ ...values, [prop]: value });\r\n        if (prop !== 'search' || (prop === 'search' && (value.length > 14 || value.length === 0))) {\r\n            fetchReservations(null, prop, value);\r\n        }\r\n    }\r\n\r\n    const handleTo = (value) => {\r\n        handleChange(\"to\", value);\r\n    }\r\n    const handleFrom = (value) => {\r\n        handleChange(\"from\", value);\r\n    }\r\n\r\n    React.useState(() => {\r\n        const fetchRoutes = async () => {\r\n            const data = await db.collection(\"trips\").get();\r\n            let rts = data.docs.map((doc) => (doc.data()));\r\n            setRoutes(rts);\r\n            fetchReservations(rts);\r\n        };\r\n\r\n        fetchRoutes();\r\n    }, []);\r\n\r\n    const fetchReservations = async (r = null, property = null, value = null) => {\r\n        let rts;\r\n        if (r === null) rts = routes;\r\n        else rts = r;\r\n\r\n\r\n        let from = values.from;\r\n        let to = values.to;\r\n        let route = values.route;\r\n        let trip = values.trip;\r\n        let time = values.time;\r\n        // eslint-disable-next-line\r\n        let search = values.search;\r\n\r\n        switch (property) {\r\n            case 'to':\r\n                to = value;\r\n                break;\r\n            case 'from':\r\n                from = value;\r\n                break;\r\n            case 'route':\r\n                route = value;\r\n                break;\r\n            case 'trip':\r\n                trip = value;\r\n                break;\r\n            case 'time':\r\n                time = value;\r\n                break;\r\n            case 'search':\r\n                // eslint-disable-next-line\r\n                search = value;\r\n                break;\r\n            default:\r\n                console.log('No data')\r\n        }\r\n\r\n        const data = db.collection('reservations');\r\n        let queryRef = data.where('status', '==', 'paid').orderBy('Date');\r\n\r\n        if (route !== '' && rts[route] !== undefined) {\r\n            queryRef = queryRef.where(\"Trip\", \"==\", rts[route]?.name);\r\n            if (trip !== '' && rts[route].possibleTrips[trip] !== undefined) {\r\n                let arr = rts[route].possibleTrips[trip].split('-');\r\n                queryRef = queryRef\r\n                    .where(\"TravellingFrom\", \"==\", arr[0])\r\n                    .where(\"TravellingTo\", \"==\", arr[1]);\r\n            }\r\n\r\n            if (time !== '' && rts[route].times[time] !== undefined) queryRef = queryRef.where(\"TravelTime\", \"==\", rts[route]?.times[time]);\r\n        }\r\n\r\n        if (from !== '' && from !== null && from !== undefined && to !== '' && to !== null && to !== undefined && from.toDateString() === to.toDateString()) {\r\n            let min = moment(from, \"YYYY-MM-DD\").toDate();\r\n            min.setDate(min.getDate() - 1);\r\n            let max = moment(to, \"YYYY-MM-DD\").toDate();\r\n            max.setDate(max.getDate() + 1);\r\n\r\n            queryRef = queryRef.where(\"Date\", \">\", min).where(\"Date\", \"<\", max);\r\n        }\r\n        else {\r\n            if (from !== '' && from !== null && from !== undefined) queryRef = queryRef.where(\"Date\", \">=\", moment(from, \"YYYY-MM-DD\").toDate());\r\n            if (to !== '' && to !== null && to !== undefined) {\r\n                let max = moment(to, \"YYYY-MM-DD\").toDate();\r\n                max.setDate(max.getDate() + 1);\r\n\r\n                queryRef = queryRef.where(\"Date\", \"<\", max);\r\n            }\r\n        }\r\n\r\n        if (search !== '' && search !== undefined) {\r\n            queryRef = queryRef.where('TicketID', '==', search.toUpperCase().replace('X', 'x'))\r\n        }\r\n\r\n        const query = await queryRef.get();\r\n        console.log(query.size);\r\n        if (query.empty) {\r\n            console.log('No matching documents.');\r\n            setReservations([]);\r\n            return;\r\n        }\r\n\r\n        setReservations(query.docs.map(doc => ({ ...doc.data(), id: doc.id })));\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <h3 style={{ marginBottom: 20, color: \"#fff\", }}>Ticket Reservation List</h3>\r\n            <br />\r\n            <Grid container className={classes.filterBox} spacing={2}>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.route}\r\n                                onChange={(e) => handleChange('route', e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"\">All</option>\r\n                                {routes?.map((item, counter) => {\r\n                                    return <option value={counter}>{item.name}</option>;\r\n                                })}\r\n                            </select>\r\n                            <FormHelperText id=\"standard-date-helper-text\">Route</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.trip}\r\n                                onChange={(e) => handleChange('trip', e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"\">All</option>\r\n                                {routes[values.route]?.possibleTrips?.map((item, key) => {\r\n                                    return <option value={key}>{item.replace('-', \" to \")}</option>;\r\n                                })}\r\n                            </select>\r\n                            <FormHelperText id=\"standard-date-helper-text\">Trip</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.time}\r\n                                onChange={(e) => handleChange('time', e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"\">All</option>\r\n                                {routes[values.route]?.times?.map((item, counter) => {\r\n                                    return <option value={counter}>{item}</option>;\r\n                                })}\r\n                            </select>\r\n                            <FormHelperText id=\"standard-date-helper-text\">Time</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <DatePicker\r\n                                onChange={handleFrom}\r\n                                value={values.from}\r\n                            />\r\n                            <FormHelperText id=\"standard-date-helper-text\">From</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <DatePicker\r\n                                onChange={handleTo}\r\n                                value={values.to}\r\n                            />\r\n                            <FormHelperText id=\"standard-date-helper-text\">To</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"outlined-basic\"\r\n                                placeholder=\"Search...\"\r\n                                value={values.search}\r\n                                required\r\n                                onChange={(e) => handleChange('search', e.target.value)}\r\n                                endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n                                aria-describedby=\"standard-search-bar-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'Ticket ID',\r\n                                }}\r\n                            >\r\n                            </Input>\r\n                            <FormHelperText id=\"standard-search-helper-text\">Search using Ticket ID</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n            <DataGrid className={classes.grid} rows={reservations} columns={headCells} />\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport DataGrid from '../../components/reservations/DataGrid'\r\n\r\nexport default function Data() {\r\n    return (\r\n        <div>\r\n            <Sidebar />\r\n            <DataGrid />\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\n// import clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Grid from '@material-ui/core/Grid';\r\n// import Paper from '@material-ui/core/Paper';\r\nvar moment = require(\"moment\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    flexGrow: 1,\r\n  },\r\n  margin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  withoutLabel: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  table: {\r\n    width: '100%',\r\n  },\r\n  pricesContainer: {\r\n    padding: theme.spacing(1),\r\n  },\r\n  paper: {\r\n    height: 140,\r\n    width: 100,\r\n  },\r\n  control: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  fullWidth: {\r\n    width: '100%',\r\n    margin: theme.spacing(0.5),\r\n  },\r\n}));\r\n\r\n\r\nexport default function SearchTripForm(props) {\r\n  const classes = useStyles();\r\n\r\n  let submitButton = null;\r\n\r\n  if (props.values.trip !== null && props.values.time !== null) {\r\n    submitButton =\r\n      (<Modal.Footer>\r\n        <p><b>Note:</b> Please click the save button after you have confirmed the information displayed above.</p>\r\n        <Button\r\n          onClick={props.handleSubmit}\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          className={classes.button}>\r\n          Save\r\n        </Button>\r\n      </Modal.Footer>);\r\n  }\r\n  else {\r\n\r\n  }\r\n\r\n  let formatter = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: props.reservation.Currency,\r\n  });\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n      size=\"lg\"\r\n      class=\"modal\"\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          Confirm details\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <div className={classes.root}>\r\n          <Grid container className={classes.root} spacing={2}>\r\n            <Grid item lg={6}>\r\n              <Grid container justify=\"left\" spacing={1}>\r\n                <h3>Ticket information</h3>\r\n                <table className={classes.fullWidth}>\r\n                  <tr>\r\n                    <td><b>Route:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.Trip}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Travelling from:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.TravellingFrom}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Travelling to:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.TravellingTo}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Date:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{moment(props.reservation.Date.toDate()).format('LL')}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Time (Leaves Bulawayo at):</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.TravelTime}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Amount:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.Currency}{formatter.format(props.reservation.Amount).replace(props.reservation.Currency, \"\").replace(\"$\", \"\")}</td>\r\n                  </tr>\r\n                </table>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Grid container justify=\"left\" spacing={1}>\r\n                <h3>Personal information</h3>\r\n                <table className={classes.fullWidth}>\r\n                  <tr>\r\n                    <td><b>First name:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.firstname}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Last name:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.lastname}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Email:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.email}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Phone number:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.phoneNumber}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Paid using:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.paymentMethod}</td>\r\n                  </tr>\r\n                </table>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      </Modal.Body>\r\n      {\r\n        submitButton\r\n      }\r\n    </Modal>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { Button, Card } from '@material-ui/core';\r\nimport firebase from \"../../firebase.config\";\r\nimport ConfirmReservation from './ConfirmReservation';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        marginTop: 80,\r\n    },\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    withoutLabel: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    textField: {\r\n        width: '25ch', //25ch\r\n        // fontSize: '11',\r\n    },\r\n    card: {\r\n        marginTop: 80,\r\n    },\r\n}));\r\n\r\nexport default function ReservationAdd() {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const db = firebase.firestore();\r\n    const { id } = useParams();\r\n    const [reservation, setReservation] = React.useState(null);\r\n    const [modalShow, setModalShow] = React.useState(false);\r\n    // eslint-disable-next-line\r\n    const [values, setValues] = React.useState({\r\n        email: null,\r\n        paymentMethod: null,\r\n        phoneNumber: null,\r\n        firstname: null,\r\n        lastname: null,\r\n    });\r\n\r\n    React.useEffect(() => {\r\n        const fetchData = () => {\r\n            db.collection(\"reservations\").doc(id).get().then((doc) => {\r\n                if (doc.exists) {\r\n                    setReservation(doc.data());\r\n                }\r\n            }\r\n            );\r\n        };\r\n        fetchData();\r\n        // eslint-disable-next-line\r\n    }, []);\r\n\r\n    const handleChange = (prop) => (event) => {\r\n        setValues({ ...values, [prop]: event.target.value });\r\n    };\r\n\r\n\r\n    const handleSubmit = () => {\r\n        if (values.firstname === null || values.lastname === null || values.paymentMethod === null || values.phoneNumber === null || values.email === null) {\r\n            alert('Please fill in all input fields.')\r\n        }\r\n        else {\r\n\r\n            // let indexes = Array.from(new Map(Object.entries(values)).values());\r\n            // indexes = [...indexes.concat(Array.from(new Map(Object.entries(reservation)).values()))];\r\n\r\n            db\r\n                .collection(\"reservations\")\r\n                .doc(id)\r\n                .update({\r\n                    firstName: values.firstname,\r\n                    lastName: values.lastname,\r\n                    fullname: `${values.firstname} ${values.lastname}`,\r\n                    Email: values.email,\r\n                    PhoneNumber: values.phoneNumber,\r\n                    PaymentMethod: values.paymentMethod,\r\n                    //indexes: indexes.join(\" \")\r\n                })\r\n                .then(ref => history.push(\"/downloads/\" + id + \"/\" + encodeURIComponent(reservation.TicketID))\r\n                ).catch(\r\n                    e => alert('An error occurred!')\r\n                );\r\n        }\r\n\r\n    }\r\n\r\n    if (reservation !== null) {\r\n        return (\r\n            <Card className={classes.card}>\r\n                <h3 style={{ padding: 20 }}>New Reservation</h3>\r\n                <form className={classes.root} >\r\n                    <div>\r\n\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"standard-adornment-first-name\"\r\n                                // placeholder=\"Andile\"\r\n                                required\r\n                                value={values.firstname}\r\n                                onChange={handleChange('firstname')}\r\n                                endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n                                aria-describedby=\"standard-first-name-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'First name',\r\n                                }}\r\n                            />\r\n                            <FormHelperText id=\"standard-first-name-helper-text\"><b>First Name</b></FormHelperText>\r\n                        </FormControl>\r\n\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"standard-adornment-last-name\"\r\n\r\n                                value={values.lastname}\r\n                                onChange={handleChange('lastname')}\r\n                                required\r\n\r\n                                aria-describedby=\"standard-last-name-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'Last name',\r\n                                }}\r\n                            />\r\n                            <FormHelperText id=\"standard-last-name-helper-text\"><b>Last Name</b></FormHelperText>\r\n                        </FormControl>\r\n\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"standard-adornment-phone-number\"\r\n\r\n                                value={values.phoneNumber}\r\n                                required\r\n                                onChange={handleChange('phoneNumber')}\r\n                                endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n                                aria-describedby=\"standard-phone-number-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'Phone Number',\r\n                                }}\r\n                            />\r\n                            <FormHelperText id=\"standard-phone-number-helper-text\"><b>Phone Number</b></FormHelperText>\r\n                        </FormControl>\r\n\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"standard-adornment-email\"\r\n                                // placeholder=\"andile.m@outlook.com\"\r\n                                value={values.email}\r\n                                required\r\n                                onChange={handleChange('email')}\r\n                                endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n                                aria-describedby=\"standard-email-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'Email',\r\n                                }}\r\n                            />\r\n                            <FormHelperText id=\"standard-email-helper-text\"><b>Email Address</b></FormHelperText>\r\n                        </FormControl>\r\n                    </div>\r\n                    <div>\r\n                        <br />\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.paymentMethod}\r\n                                onChange={handleChange('paymentMethod')}\r\n                                required\r\n                            >\r\n                                <option value=\"\">Select ...</option>\r\n                                <option>Swipe</option>\r\n                                <option>Ecocash</option>\r\n                                <option>One money</option>\r\n                                <option>Telecash</option>\r\n                                <option>Cash</option>\r\n                                <option>Other</option>\r\n                            </select>\r\n                            <FormHelperText id=\"standard-payment-method-helper-text\"><b>Payment Method</b></FormHelperText>\r\n                        </FormControl>\r\n                        <br />\r\n                        <br />\r\n                        <br />\r\n                        <Button\r\n                            input\r\n                            type='button'\r\n                            onClick={() => {\r\n                                if (values.firstname === null || values.lastname === null || values.paymentMethod === null || values.phoneNumber === null || values.email === null) alert(\"Please fill in all input fields.\");\r\n                                else setModalShow(true);\r\n                            }}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            className=\"submitButton\">Submit</Button>\r\n                        <br />\r\n                        <br />\r\n                        {/* <input className='submitButton' type='submit' value='Submit' /> */}\r\n                    </div>\r\n                </form>\r\n                <ConfirmReservation\r\n                    reservation={reservation}\r\n                    values={values}\r\n                    handleSubmit={handleSubmit}\r\n                    show={modalShow}\r\n                    onHide={() => setModalShow(false)} />\r\n            </Card>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <div>\r\n                <h1>404</h1>\r\n                <h2>Page not found!</h2>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\n// import Navbar from '../../components/layout/Navbar'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport ReservationAdd from '../../components/reservations/ReservationAdd'\r\n\r\nexport default function AddReservation() {\r\n    return (\r\n        <div>\r\n            <Sidebar />\r\n            <ReservationAdd />\r\n            <Footer />\r\n        </div>\r\n\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport { Form, Button, Card, Alert } from \"react-bootstrap\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nexport default function Login() {\r\n    const emailRef = React.useRef();\r\n    const passwordRef = React.useRef();\r\n    const { login } = useAuth();\r\n    const [error, setError] = React.useState(\"\");\r\n    const [loading, setLoading] = React.useState(false);\r\n    const history = useHistory();\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            setError(\"\");\r\n            setLoading(true);\r\n            await login(emailRef.current.value, passwordRef.current.value);\r\n            history.push(\"/\");\r\n        } catch {\r\n            setError(\"Failed to log in.\");\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Card className={\"bg-dark text-white\"}>\r\n                <Card.Body>\r\n                    <h4 className=\"text-center mb-4\">Extracity Login</h4>\r\n\r\n                    {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                    <Form onSubmit={handleSubmit}>\r\n                        <Form.Group id=\"email\">\r\n                            <Form.Label>Email</Form.Label>\r\n                            <Form.Control type=\"email\" ref={emailRef} required />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group id=\"password\">\r\n                            <Form.Label>Password</Form.Label>\r\n                            <Form.Control type=\"password\" ref={passwordRef} required />\r\n                        </Form.Group>\r\n                        <Button disabled={loading} type=\"submit\" className=\"w-100\">\r\n                            Login\r\n            </Button>\r\n                    </Form>\r\n                </Card.Body>\r\n                <div className=\"w-100 text-center mt-2\">\r\n                    Forgot password? <Link to=\"/reset-password\">Click here</Link>\r\n                </div>\r\n            </Card>\r\n        </>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport Login from \"../../components/accounts/Login\";\r\nimport { Container } from \"react-bootstrap\";\r\n// import './accountsStyle.css'\r\n\r\nexport default function login() {\r\n    return (\r\n        <Container\r\n            className=\"d-flex align-items-center justify-content-center\"\r\n            style={{ minHeight: \"80vh\" }}\r\n        >\r\n            <div\r\n                className=\"w-100\"\r\n                style={{ maxWidth: \"350px\", alignItems: \"center\" }}\r\n            >\r\n                <Login />\r\n            </div>\r\n        </Container>\r\n    );\r\n}\r\nexport { login };\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport clsx from \"clsx\";\r\nimport { lighten, makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport firebase from \"../../firebase.config\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === \"desc\"\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n}\r\n\r\nconst headCells = [\r\n  {\r\n    id: \"name\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"TRIP\",\r\n  },\r\n  { id: \"from\", numeric: false, disablePadding: true, label: \"FROM\" },\r\n  { id: \"to\", numeric: false, disablePadding: true, label: \"TO\" },\r\n  { id: \"times\", numeric: false, disablePadding: true, label: \"TIMES\" },\r\n  { id: \"stops\", numeric: false, disablePadding: true, label: \"STOPS\" },\r\n  { id: \"date\", numeric: false, disablePadding: true, label: \"DATE\" },\r\n  { id: \"actions\", numeric: false, disablePadding: false, label: \"ACTIONS\" }\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const {\r\n    classes,\r\n    onSelectAllClick,\r\n    order,\r\n    orderBy,\r\n    numSelected,\r\n    rowCount,\r\n    onRequestSort,\r\n  } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n            checked={rowCount > 0 && numSelected === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ \"aria-label\": \"select all trips\" }}\r\n          />\r\n        </TableCell>\r\n        {headCells.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.numeric ? \"right\" : \"left\"}\r\n            padding={headCell.disablePadding ? \"none\" : \"default\"}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : \"asc\"}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === \"desc\" ? \"sorted descending\" : \"sorted ascending\"}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf([\"asc\", \"desc\"]).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === \"dark\" //initially light\r\n      ? {\r\n        color: theme.palette.secondary.main,\r\n        backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n      }\r\n      : {\r\n        color: theme.palette.text.primary,\r\n        backgroundColor: theme.palette.secondary.dark,\r\n      },\r\n  title: {\r\n    flex: \"1 1 100%\",\r\n  },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  const classes = useToolbarStyles();\r\n  const { numSelected } = props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography\r\n          className={classes.title}\r\n          color=\"inherit\"\r\n          variant=\"subtitle1\"\r\n          component=\"div\"\r\n        >\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography\r\n          className={classes.title}\r\n          variant=\"h5\"\r\n          id=\"tableTitle\"\r\n          component=\"div\"\r\n        >\r\n          Trips\r\n          <Link to=\"/trips/add\"><button>Add</button></Link>\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 ? (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      ) : (\r\n        <Tooltip title=\"Filter list\">\r\n          <IconButton aria-label=\"filter list\">\r\n            <FilterListIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};\r\n\r\nconst drawerWidth = 300;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    marginTop: 80,\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750, //750 initially\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\nexport default function TripsTable() {\r\n  const classes = useStyles();\r\n  const [order, setOrder] = React.useState(\"asc\");\r\n  const [orderBy, setOrderBy] = React.useState(\"calories\");\r\n  const [selected, setSelected] = React.useState([]);\r\n  const [page, setPage] = React.useState(0);\r\n  const [dense, setDense] = React.useState(false);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\r\n  //trips state\r\n  const [trips, setTrips] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    const fetchTrips = async () => {\r\n      const db = firebase.firestore();\r\n      await db.collection(\"trips\").get().then(\r\n        (data) => setTrips(data.docs.map((doc) => doc)\r\n        ))\r\n      //setTrips(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n    };\r\n    fetchTrips();\r\n  }, []);\r\n\r\n  // React.useEffect(() => {\r\n  //   fetchTrips();\r\n  // });\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === \"asc\";\r\n    setOrder(isAsc ? \"desc\" : \"asc\");\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = trips.map((n) => n.name);\r\n      setSelected(newSelecteds);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  const handleClick = (event, name) => {\r\n    const selectedIndex = selected.indexOf(name);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, name);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1)\r\n      );\r\n    }\r\n\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const handleChangeDense = (event) => {\r\n    setDense(event.target.checked);\r\n  };\r\n\r\n  const isSelected = (name) => selected.indexOf(name) !== -1;\r\n\r\n  const emptyRows =\r\n    rowsPerPage -\r\n    Math.min(rowsPerPage, trips.length - page * rowsPerPage);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <EnhancedTableToolbar numSelected={selected.length} />\r\n        <TableContainer>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size={dense ? \"small\" : \"medium\"}\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelected={selected.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={trips.length}\r\n            />\r\n            <TableBody>\r\n              {stableSort(trips, getComparator(order, orderBy))\r\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                .map((tripRef, index) => {\r\n                  const trip = tripRef.data();\r\n                  const isItemSelected = isSelected(trip.id);\r\n                  const labelId = `enhanced-table-checkbox-${index}`;\r\n                  let link = `/trips/${tripRef.id}/stops`;\r\n\r\n                  return (\r\n                    <TableRow\r\n                      hover\r\n                      onClick={(event) => handleClick(event, trip.id)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={isItemSelected}\r\n                      tabIndex={-1}\r\n                      key={trip.id}\r\n                      selected={isItemSelected}\r\n                    >\r\n                      <TableCell padding=\"checkbox\">\r\n                        <Checkbox\r\n                          checked={isItemSelected}\r\n                          inputProps={{ \"aria-labelledby\": labelId }}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell\r\n                        component=\"th\"\r\n                        id={labelId}\r\n                        scope=\"row\"\r\n                        padding=\"none\"\r\n                      >\r\n                        {trip.name}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {trip.from}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {trip.to}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {trip.times.join(\", \")}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">{displayStops(trip.stops)}</TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {moment(trip.date.toDate(), \"YYYY-MM-DD\").format(\r\n                          \"LLL\"\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        <Link to={link}><button>Stops</button></Link>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: (dense ? 33 : 53) * emptyRows }}>\r\n                  <TableCell colSpan={11} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[5, 10, 20]}\r\n          component=\"div\"\r\n          count={trips.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onChangePage={handleChangePage}\r\n          onChangeRowsPerPage={handleChangeRowsPerPage}\r\n        />\r\n      </Paper>\r\n      <FormControlLabel\r\n        control={<Switch checked={dense} onChange={handleChangeDense} />}\r\n        label=\"Dense padding\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction displayStops(map) {\r\n  if (map === undefined || map === null) return \"\";\r\n\r\n  var newMap = new Map(Object.entries(map));\r\n  var arr = []; // initially new Array()\r\n\r\n  newMap.forEach((v) => {\r\n    arr.push(v.name);\r\n  });\r\n\r\n  return arr.join(\", \");\r\n}","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripsTable from '../../components/trips/TripsTable'\r\n\r\nexport default function Trips() {\r\n    return (\r\n        <div>\r\n        \t<Sidebar />\r\n            <TripsTable />\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport MultiSelect from \"react-multi-select-component\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginTop: 80,\r\n  },\r\n}));\r\n\r\nexport default function MultipleTimeSelect(props) {\r\n  const classes = useStyles()\r\n  const options = [];\r\n\r\n  for (let x = 0; x < 2400; x = x + 100) {\r\n    for (let y = 0; y < 60; y = y + 15) {\r\n      var str = \"\";\r\n      if (x === 0) {\r\n        str = \"00\";\r\n      }\r\n      else if (x < 1000) {\r\n        str = \"0\"\r\n      }\r\n\r\n      str = str + (x + y);\r\n      if (str.length < 4) str = `0${str}`;\r\n      options.push({ label: str, value: str });\r\n    }\r\n  }\r\n  console.log(options);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <MultiSelect\r\n        options={options}\r\n        value={props.times}\r\n        onChange={e => props.setTimes(e)}\r\n        labelledBy=\"Select\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport MultipleTimeSelect from './MultipleTimeSelect';\r\nimport { useHistory } from 'react-router-dom';\r\nimport firebase from \"../../firebase.config\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nconst { uuid } = require(\"uuidv4\");\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginTop: 80,\r\n  },\r\n}));\r\n\r\nexport default function TripCreateForm(props) {\r\n  const classes = useStyles()\r\n  const history = useHistory();\r\n  const db = firebase.firestore();\r\n  const [name, setName] = useState();\r\n  const [to, setTo] = useState();\r\n  const [from, setFrom] = useState();\r\n  const [times, setTimes] = useState([]);\r\n  const [seats, setSeats] = useState(0);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (name === undefined || name === \"\" || seats === undefined || seats === \"\" || to === undefined || to === \"\" || from === undefined || from === \"\" || times === undefined || times.length === 0) alert(\"Please fill in all input fields!\");\r\n    else {\r\n      let id = uuid();\r\n\r\n      //save\r\n      db\r\n        .collection(\"trips\")\r\n        .add({\r\n          id: id,\r\n          name: name,\r\n          to: to,\r\n          from: from,\r\n          seats: parseInt(seats),\r\n          times: times.map((t) => { console.log(t); return t.value }),\r\n          date: new Date(),\r\n        })\r\n        .then(\r\n          (ref) =>\r\n            // fetching free slots\r\n            history.push(\"/trips/\" + ref.id + \"/stops\")\r\n        )\r\n        .catch(\r\n          (e) => alert(\"An error occurred!\")\r\n        );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={e => { handleSubmit(e) }} className={classes.root}>\r\n      <br />\r\n      <br />\r\n      <label>Trip name</label>\r\n      <br />\r\n      <input\r\n        name='name'\r\n        type='text'\r\n        value={name}\r\n        required\r\n        onChange={e => setName(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>From</label>\r\n      <br />\r\n      <input\r\n        name='from'\r\n        type='text'\r\n        value={from}\r\n        required\r\n        onChange={e => setFrom(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>To</label>\r\n      <br />\r\n      <input\r\n        name='to'\r\n        type='text'\r\n        value={to}\r\n        required\r\n        onChange={e => setTo(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>Number of seats</label>\r\n      <br />\r\n      <input\r\n        name='seats'\r\n        type='number'\r\n        value={seats}\r\n        required\r\n        onChange={e => setSeats(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>Departure times</label>\r\n      <br />\r\n      <MultipleTimeSelect setTimes={setTimes} times={times} />\r\n      <br />\r\n      <br />\r\n      <input\r\n        className='submitButton'\r\n        type='submit'\r\n        value='Save'\r\n      />\r\n    </form>\r\n  )\r\n}","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripCreateForm from '../../components/trips/TripCreateForm'\r\n\r\nexport default function AddTrip() {\r\n    return (\r\n        <div>\r\n            <Sidebar />\r\n            <TripCreateForm />\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport clsx from \"clsx\";\r\nimport { lighten, makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\n// import firebase from \"../../firebase.config\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === \"desc\"\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array?.map((el, index) => [el, index]);\r\n  stabilizedThis?.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis?.map((el) => el[0]);\r\n}\r\n\r\nconst headCells = [\r\n  {\r\n    id: \"name\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"STOP\",\r\n  },\r\n  { id: \"times\", numeric: true, disablePadding: true, label: \"TIMES\" },\r\n  { id: \"date\", numeric: true, disablePadding: false, label: \"DATE\" },\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const {\r\n    classes,\r\n    onSelectAllClick,\r\n    order,\r\n    orderBy,\r\n    numSelected,\r\n    rowCount,\r\n    onRequestSort,\r\n  } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead className={classes.root}>\r\n      <TableRow>\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n            checked={rowCount > 0 && numSelected === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ \"aria-label\": \"select all trips\" }}\r\n          />\r\n        </TableCell>\r\n        {headCells.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.numeric ? \"right\" : \"left\"}\r\n            padding={headCell.disablePadding ? \"none\" : \"default\"}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : \"asc\"}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === \"desc\" ? \"sorted descending\" : \"sorted ascending\"}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf([\"asc\", \"desc\"]).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === \"dark\" //initially light\r\n      ? {\r\n        color: theme.palette.secondary.main,\r\n        backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n      }\r\n      : {\r\n        color: theme.palette.text.primary,\r\n        backgroundColor: theme.palette.secondary.dark,\r\n      },\r\n  title: {\r\n    flex: \"1 1 100%\",\r\n  },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  let { id } = useParams();\r\n  const classes = useToolbarStyles();\r\n  const { numSelected } = props;\r\n  var addLink = `/trips/${id}/stops/add`;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography\r\n          className={classes.title}\r\n          color=\"inherit\"\r\n          variant=\"subtitle1\"\r\n          component=\"div\"\r\n        >\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography\r\n          className={classes.title}\r\n          variant=\"h5\"\r\n          id=\"tableTitle\"\r\n          component=\"div\"\r\n        >\r\n          Stops\r\n          <Link to={addLink}><button>Add</button></Link>\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 ? (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      ) : (\r\n        <Tooltip title=\"Filter list\">\r\n          <IconButton aria-label=\"filter list\">\r\n            <FilterListIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};\r\n\r\nconst drawerWidth = 300;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    marginTop: 80,\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750, //750 initially\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\nexport default function TripStopsTable(props) {\r\n  const classes = useStyles();\r\n  const [order, setOrder] = React.useState(\"asc\");\r\n  const [orderBy, setOrderBy] = React.useState(\"calories\");\r\n  const [selected, setSelected] = React.useState([]);\r\n  const [page, setPage] = React.useState(0);\r\n  const [dense, setDense] = React.useState(false);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\r\n  //trips state\r\n\r\n  // React.useEffect(() => {\r\n  //   const fetchTrips = async () => {\r\n  //     const db = firebase.firestore();\r\n  //     const data = await db.collection(\"trips\").get();\r\n  //     setTrips(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n  //   };\r\n  // }, []);\r\n\r\n  // React.useEffect(() => {\r\n  //   fetchTrips();\r\n  // });\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === \"asc\";\r\n    setOrder(isAsc ? \"desc\" : \"asc\");\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = props.trip.stops?.map((n) => n.name);\r\n      setSelected(newSelecteds);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  const handleClick = (event, name) => {\r\n    const selectedIndex = selected.indexOf(name);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, name);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected?.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1)\r\n      );\r\n    }\r\n\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const handleChangeDense = (event) => {\r\n    setDense(event.target.checked);\r\n  };\r\n\r\n  const isSelected = (name) => selected.indexOf(name) !== -1;\r\n\r\n  const emptyRows =\r\n    rowsPerPage -\r\n    Math.min(rowsPerPage, props.trip.stops?.length - page * rowsPerPage);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <EnhancedTableToolbar numSelected={selected?.length} />\r\n        <TableContainer>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size={dense ? \"small\" : \"medium\"}\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelected={selected?.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={props.trip.stops?.length}\r\n            />\r\n            <TableBody>\r\n              {stableSort((props.trip.stops === undefined || props.trip.stops === null) ? [] : Array.from(new Map(Object.entries(props.trip.stops)).values()), getComparator(order, orderBy))\r\n                ?.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                .map((stop, index) => {\r\n                  const isItemSelected = isSelected(stop.id);\r\n                  const labelId = `enhanced-table-checkbox-${index}`;\r\n\r\n                  stop = new Map(Object.entries(stop));\r\n                  return (\r\n\r\n                    <TableRow\r\n                      hover\r\n                      onClick={(event) => handleClick(event, stop.id)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={isItemSelected}\r\n                      tabIndex={-1}\r\n                      key={stop.get('id')}\r\n                      selected={isItemSelected}\r\n                    >\r\n                      <TableCell padding=\"checkbox\">\r\n                        <Checkbox\r\n                          checked={isItemSelected}\r\n                          inputProps={{ \"aria-labelledby\": labelId }}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell\r\n                        component=\"th\"\r\n                        id={labelId}\r\n                        scope=\"row\"\r\n                        padding=\"none\"\r\n                      >\r\n                        {stop.get('name')}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {displayTimes(stop.get('times'))}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {moment(stop.get('date').toDate(), \"YYYY-MM-DD\").format(\r\n                          \"LLL\"\r\n                        )}\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: (dense ? 33 : 53) * emptyRows }}>\r\n                  <TableCell colSpan={11} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[5, 10, 20]}\r\n          component=\"div\"\r\n          count={props.trip.stops?.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onChangePage={handleChangePage}\r\n          onChangeRowsPerPage={handleChangeRowsPerPage}\r\n        />\r\n      </Paper>\r\n      <FormControlLabel\r\n        control={<Switch checked={dense} onChange={handleChangeDense} />}\r\n        label=\"Dense padding\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction displayTimes(map) {\r\n  if (map === undefined || map === null) return \"\";\r\n  var newMap = new Map(Object.entries(map));\r\n  var arr = [];\r\n\r\n  newMap.forEach((v) => {\r\n    arr.push(v);\r\n  });\r\n\r\n  return arr.join(\", \");\r\n}","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripStopsTable from '../../components/trips/TripStopsTable'\r\nimport firebase from \"../../firebase.config\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nexport default function TripStops() {\r\n\tlet { id } = useParams();\r\n\t// const db = firebase.firestore();\r\n\tconst [trip, setTrip] = React.useState();\r\n\tlet display;\r\n\r\n\t//get the trip\r\n\tReact.useEffect(() => {\r\n\t\tconst fetchData = () => {\r\n\t\t\tconst db = firebase.firestore();\r\n\t\t\tdb.collection(\"trips\").doc(id).get().then((doc) => {\r\n\t\t\t\tconsole.log(doc);\r\n\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\tsetTrip(doc.data());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t);\r\n\t\t};\r\n\t\tfetchData();\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\t//display the stops\r\n\r\n\tif (trip !== undefined && trip !== null) {\r\n\t\tif (trip.stops === undefined || trip.stops === null) {\r\n\t\t\ttrip.stops = [];\r\n\t\t}\r\n\r\n\t\tdisplay = (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>{trip.name}</h1>\r\n\t\t\t\t<TripStopsTable trip={trip} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\telse\r\n\t\tdisplay = (\r\n\t\t\t<h1>Trip not found!</h1>\r\n\t\t);\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Sidebar />\r\n\t\t\t{display}\r\n\t\t\t<Footer />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\n// import MultipleTimeSelect from './MultipleTimeSelect';\r\nimport { useHistory } from 'react-router-dom';\r\nimport firebase from \"../../firebase.config\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nconst { uuid } = require(\"uuidv4\");\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginTop: 80,\r\n  },\r\n}));\r\n\r\n\r\n// eslint-disable-next-line\r\nfunction keyMap(src, target) {\r\n  target = target || {};\r\n  Object.keys(src).forEach(function (propName) {\r\n    var prop = src[propName];\r\n    if (typeof prop == \"object\") {\r\n      target[propName] = Object.keys(prop).join(',');\r\n      keyMap(prop, target);\r\n    }\r\n  });\r\n  return target;\r\n};\r\n\r\nexport default function TripStopCreateForm(props) {\r\n  const classes = useStyles()\r\n  const history = useHistory();\r\n  const db = firebase.firestore();\r\n  const [name, setName] = useState();\r\n  const [\r\n    times,\r\n    setTimes\r\n  ] = useState(new Map());\r\n\r\n  /*\r\n   setFares = (currency, amount) => {\r\n            times.delete(currency);\r\n            if (amount!=\"\" && amount!=undefined && amount!=null){\r\n              times[currency] = amount;\r\n            }\r\n          }\r\n  setTimes = (departure, arrival) => {\r\n            times.delete(\"time\" + departure.toString());\r\n            if (arrival!=\"\" && arrival!=undefined && arrival!=null){\r\n              times[\"time\" + departure.toString()] = arrival;\r\n            }\r\n          }\r\n  */\r\n\r\n\r\n\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (name === undefined || name === \"\" || times === undefined || times.length === 0) alert(\"Please fill in all input fields!\");\r\n    else {\r\n      let id = uuid();\r\n\r\n      var stops = props.trip?.stops ?? {};\r\n\r\n      //console.log(stops);\r\n      //stops.delete(name);\r\n      stops[name] = {\r\n        id: id,\r\n        name: name,\r\n        times: Object.fromEntries(times),\r\n        date: new Date(),\r\n      }\r\n\r\n      //console.log(stops);\r\n      //stops.delete(name);\r\n      //         stops[name] = {\r\n      //           id: id,\r\n      //           name: name,\r\n      //           times: Object.fromEntries(times),\r\n      //           date: new Date(),\r\n      //         }\r\n\r\n      //create possible trips\r\n      //[from] to any other stop including [to]\r\n      //[stop] to any other [stop]\r\n      let arr = Array.from(new Map(Object.entries(stops)).values());\r\n      let to_to_stops = [`${props.trip?.from}-${props.trip?.to}`];\r\n      let from_to_stops = (arr).map((item) => `${props.trip?.from}-${item.name}`);\r\n      let stops_to_stops = []\r\n      for (var x = 0; x < arr.length; x++) {\r\n        stops_to_stops.push(`${arr[x].name}-${props.trip?.to}`);\r\n        if (x < arr.length - 1) {\r\n          for (var y = x + 1; y < arr.length; y++) {\r\n            stops_to_stops.push(`${arr[x].name}-${arr[y].name}`);\r\n          }\r\n        }\r\n      }\r\n\r\n      var possibleTrips = to_to_stops.concat(from_to_stops, stops_to_stops);\r\n\r\n      //save\r\n      db\r\n        .collection(\"trips\")\r\n        .doc(props.docID)\r\n        .update({ stops: stops, possibleTrips: possibleTrips })\r\n        .then(\r\n          (doc) =>\r\n            // fetching free slots\r\n            history.push(\"/trips/\" + props.docID + \"/stops\")\r\n        )\r\n        .catch(\r\n          (e) => { alert(\"An error occurred!\"); console.log(e); }\r\n        );\r\n\r\n    }\r\n\r\n  }\r\n  return (\r\n    <form onSubmit={e => { handleSubmit(e) }} className={classes.root}>\r\n      <br />\r\n      <br />\r\n      <label>City or town name</label>\r\n      <br />\r\n      <input\r\n        name='name'\r\n        type='text'\r\n        value={name}\r\n        required\r\n        onChange={e => setName(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>Times</label>\r\n      <br />\r\n      <table>\r\n        <tr>\r\n          <th>Leaves {props.trip.from} at</th>\r\n          <th>Leaves this stop at</th>\r\n        </tr>\r\n        {\r\n          props.trip.times.map((time) => {\r\n            return (\r\n              <tr>\r\n                <td>{time}</td>\r\n                <td>\r\n                  <input\r\n                    name='to'\r\n                    type=\"number\"\r\n                    onChange={e => {\r\n                      times.delete(time);\r\n                      setTimes(times.set(time, e.target.value))\r\n                    }\r\n                    }\r\n                  />\r\n                </td>\r\n              </tr>\r\n            )\r\n          })\r\n        }\r\n      </table>\r\n      <br />\r\n      <br />\r\n      <input\r\n        className='submitButton'\r\n        type='submit'\r\n        value='Save'\r\n      />\r\n    </form>\r\n  );\r\n}\r\n\r\n","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripStopCreateForm from '../../components/trips/TripStopCreateForm'\r\nimport firebase from \"../../firebase.config\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nexport default function AddTripStop() {\r\n\tlet { id } = useParams();\r\n\t// const db = firebase.firestore();\r\n\tconst [trip, setTrip] = React.useState();\r\n\tconst [docID, setDocID] = React.useState();\r\n\tlet display;\r\n\r\n\t//get the trip\r\n\t// const fetchData = () => {\r\n\t// \tconst db = firebase.firestore();\r\n\t// \tdb.collection(\"trips\").doc(id).get().then((doc) => {\r\n\t// \t\tconsole.log(doc);\r\n\t// \t\tif (doc.exists) {\r\n\t// \t\t\tsetTrip(doc.data());\r\n\t// \t\t\tsetDocID(doc.id);\r\n\t// \t\t}\r\n\t// \t}\r\n\t// \t);\r\n\t// }\r\n\r\n\t// React.useEffect(() => {\r\n\t// \tfetchData();\r\n\t// }, []);\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst fetchData = () => {\r\n\t\t\tconst db = firebase.firestore();\r\n\t\t\tdb.collection(\"trips\").doc(id).get().then((doc) => {\r\n\t\t\t\tconsole.log(doc);\r\n\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\tsetTrip(doc.data());\r\n\t\t\t\t\tsetDocID(doc.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t);\r\n\t\t};\r\n\t\tfetchData();\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\t//display the stops\r\n\r\n\tif (trip !== undefined && trip !== null)\r\n\t\tdisplay = (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>{trip.name}</h1>\r\n\t\t\t\t<TripStopCreateForm trip={trip} docID={docID} />\r\n\t\t\t</div>\r\n\t\t);\r\n\telse\r\n\t\tdisplay = (\r\n\t\t\t<h1>Trip not found!</h1>\r\n\t\t);\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Sidebar />\r\n\t\t\t{display}\r\n\t\t\t<Footer />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport firebase from \"../../firebase.config\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nconst { uuid } = require(\"uuidv4\");\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginTop: 80,\r\n  },\r\n}));\r\n\r\nexport default function FareCreateForm(props) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const db = firebase.firestore();\r\n  const [to, setTo] = useState();\r\n  const [from, setFrom] = useState();\r\n  // eslint-disable-next-line\r\n  const [prices, setPrices] = useState(new Map());\r\n\r\n  const updatePrices = (currency, amount) => {\r\n    prices.delete(currency);\r\n    prices.set(currency, amount);\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (to === undefined || to === \"\" || from === undefined || from === \"\" || prices === undefined || prices.length === 0) alert(\"Please fill in all input fields!\");\r\n    else {\r\n      let id = uuid();\r\n      \r\n      let possibleTrips = [`${to}-${from}`, `${from}-${to}`];\r\n      let cities = [to,from];\r\n\r\n      //save\r\n      db\r\n        .collection(\"fares\")\r\n        .add({\r\n          id: id,\r\n          to: to,\r\n          from: from,\r\n          prices: Object.fromEntries(prices),\r\n          possibleTrips: possibleTrips,\r\n          cities: cities,\r\n          date: new Date(),\r\n        })\r\n        .then(\r\n          (ref) =>\r\n            // fetching free slots\r\n            history.push(\"/fares\")\r\n        )\r\n        .catch(\r\n          (e) => alert(\"An error occurred!\")\r\n        );\r\n\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={e => { handleSubmit(e) }} className={classes.root}>\r\n      <br />\r\n      <br />\r\n      <label>From</label>\r\n      <br />\r\n      <input\r\n        name='from'\r\n        type='text'\r\n        value={from}\r\n        required\r\n        onChange={e => setFrom(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>To</label>\r\n      <br />\r\n      <input\r\n        name='to'\r\n        type='text'\r\n        value={to}\r\n        required\r\n        onChange={e => setTo(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>Fares</label>\r\n      <br />\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Currency</th>\r\n            <th>Price</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>USD</td>\r\n            <td>\r\n              <input\r\n                name='to'\r\n                type='text'\r\n                onChange={e => updatePrices(\"USD\", e.target.value)}\r\n              />\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>ZWL</td>\r\n            <td>\r\n              <input\r\n                name='to'\r\n                type='text'\r\n                onChange={e => updatePrices(\"ZWL\", e.target.value)}\r\n              />\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>ZAR</td>\r\n            <td>\r\n              <input\r\n                name='to'\r\n                type='text'\r\n                onChange={e => updatePrices(\"ZAR\", e.target.value)}\r\n              />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <br />\r\n      <br />\r\n      <input\r\n        className='submitButton'\r\n        type='submit'\r\n        value='Save'\r\n      />\r\n    </form>\r\n  )\r\n}","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport FareCreateForm from '../../components/fares/FareCreateForm'\r\n\r\nexport default function AddFare() {\r\n    return (\r\n        <div>\r\n            <Sidebar />\r\n            <FareCreateForm />\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n","import { makeStyles } from '@material-ui/core'\r\nimport React from 'react'\r\nimport DataTable from '../reservations/DataGrid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        marginTop: 80,\r\n    },\r\n    drawerHeader: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: theme.spacing(0, 1),\r\n        // necessary for content to be below app bar\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: 'flex-end',\r\n    },\r\n}));\r\n\r\nexport default function Home() {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <DataTable />\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\n// import Navbar from \"../../components/layout/Navbar\";\r\nimport Home from \"../../components/home/Home\";\r\nimport Footer from \"../../components/layout/Footer\";\r\nimport { Container } from \"react-bootstrap\";\r\n// import ReservationTable from \"../../components/reservations/ReservationTable\";\r\nimport Sidebar from \"../../components/layout/Sidebar\";\r\n// import DataGrid from '../../components/reservations/DataGrid'\r\n\r\nexport default function Homepage() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <Home />\r\n            {/* <DataGrid /> */}\r\n            <Footer />\r\n        </Container>\r\n    );\r\n}\r\nexport { Homepage };\r\n","import React from 'react';\r\nimport moment from 'moment';\r\nimport firebase from 'firebase';\r\nimport { Line } from \"react-chartjs-2\";\r\n\r\nexport default function ActivityChart() {\r\n    // eslint-disable-next-line\r\n    const [activityData, setActivityData] = React.useState([]);\r\n    const [byoData, setByoData] = React.useState([]);\r\n    const [harareData, setHarareData] = React.useState([]);\r\n    const [vicfallsData, setVicfallsData] = React.useState([]);\r\n    const [gweruData, setGweruData] = React.useState([]);\r\n    const [kadomaData, setKadomaData] = React.useState([]);\r\n    const [chegutuData, setChegutuData] = React.useState([]);\r\n    const [kwekweData, setKwekweData] = React.useState([]);\r\n    const [hwangeData, setHwangeData] = React.useState([]);\r\n\r\n    const [labels, setLabels] = React.useState([]);\r\n\r\n    React.useEffect(() => {\r\n        const fetchStats = async () => {\r\n            const db = firebase.firestore();\r\n            let activitiesRef;\r\n            let byo;\r\n            let hre;\r\n            let gweru;\r\n            let kadoma;\r\n            let vicfalls;\r\n            let kwekwe;\r\n            let chegutu;\r\n            let hwange\r\n            let dates = [];\r\n\r\n            for (var x = 6; x >= 0; x--) {\r\n                var minDate = new moment().subtract(x, \"days\");\r\n                dates.push(minDate.format('ddd'));\r\n                var min = new Date();\r\n                min.setDate(min.getDate() - x - 1);\r\n                var max = new Date();\r\n                max.setDate(max.getDate() - x);\r\n                let activitiesTotal = 0;\r\n                // eslint-disable-next-line\r\n                activitiesRef = db.collection(\"reservations\")\r\n                    .where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n                    .get()\r\n                    .then(snapshot => {\r\n                        activitiesTotal += snapshot.size;\r\n                        setActivityData(state => [...state, activitiesTotal]);\r\n                    }, []);\r\n\r\n                let byoTotal = 0;\r\n                // eslint-disable-next-line\r\n                byo = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Bulawayo\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        byoTotal += snapshot.size;\r\n                        setByoData(state => [...state, byoTotal]);\r\n                    }, []);\r\n                //harare\r\n                let harareTotal = 0;\r\n                // eslint-disable-next-line\r\n                hre = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Harare\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        harareTotal += snapshot.size;\r\n                        setHarareData(state => [...state, harareTotal]);\r\n                    }, []);\r\n                //vicfalls\r\n                let vicfallsTotal = 0;\r\n                // eslint-disable-next-line\r\n                vicfalls = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Victoria Falls\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        vicfallsTotal += snapshot.size;\r\n                        setVicfallsData(state => [...state, vicfallsTotal]);\r\n                    }, []);\r\n                //gweru\r\n                let gweruTotal = 0;\r\n                // eslint-disable-next-line\r\n                gweru = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Gweru\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        gweruTotal += snapshot.size;\r\n                        setGweruData(state => [...state, gweruTotal]);\r\n                    }, []);\r\n                //kwekwe\r\n                let kwekweTotal = 0;\r\n                // eslint-disable-next-line\r\n                kwekwe = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Kwekwe\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        kwekweTotal += snapshot.size;\r\n                        setKwekweData(state => [...state, kwekweTotal]);\r\n                    }, []);\r\n                //kadoma\r\n                let kadomaTotal = 0;\r\n                // eslint-disable-next-line\r\n                kadoma = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Kadoma\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        kadomaTotal += snapshot.size;\r\n                        setKadomaData(state => [...state, kadomaTotal]);\r\n                    }, []);\r\n                //chegutu\r\n                let chegutuTotal = 0;\r\n                // eslint-disable-next-line\r\n                chegutu = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Chegutu\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        chegutuTotal += snapshot.size;\r\n                        setChegutuData(state => [...state, chegutuTotal]);\r\n                    }, []);\r\n                //hwange\r\n                let hwangeTotal = 0;\r\n                // eslint-disable-next-line\r\n                hwange = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Hwange\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        hwangeTotal += snapshot.size;\r\n                        setHwangeData(state => [...state, hwangeTotal]);\r\n                    }, []);\r\n            }\r\n            setLabels(dates);\r\n        };\r\n        fetchStats();\r\n    }, []);\r\n\r\n    const data = {\r\n        labels: labels,\r\n        datasets: [\r\n            // {\r\n            //     label: \"Overall Activity\",\r\n            //     data: activityData,\r\n            //     fill: false,\r\n            //     // backgroundColor: \"rgba(75,192,192,0.2)\",\r\n            //     borderColor: \"#026ca0\"\r\n            // },\r\n            {\r\n                label: \"Bulawayo\",\r\n                data: byoData,\r\n                fill: false,\r\n                // backgroundColor: \"rgba(75,192,192,0.2)\",\r\n                borderColor: \"#33eaff\"\r\n            },\r\n            {\r\n                label: \"Harare\",\r\n                data: harareData,\r\n                fill: false,\r\n                borderColor: \"#f50057\"\r\n            },\r\n            {\r\n                label: \"Victoria Falls\",\r\n                data: vicfallsData,\r\n                fill: false,\r\n                borderColor: \"#ff5722\"\r\n            },\r\n            {\r\n                label: \"Gweru\",\r\n                data: gweruData,\r\n                fill: false,\r\n                borderColor: \"#2196f3\"\r\n            },\r\n            {\r\n                label: \"Kwekwe\",\r\n                data: kwekweData,\r\n                fill: false,\r\n                borderColor: \"#ffea00\"\r\n            },\r\n            {\r\n                label: \"Kadoma\",\r\n                data: kadomaData,\r\n                fill: false,\r\n                borderColor: \"#00a152\"\r\n            },\r\n            {\r\n                label: \"Chegutu\",\r\n                data: chegutuData,\r\n                fill: false,\r\n                borderColor: \"#4615b2\"\r\n            },\r\n            {\r\n                label: \"Hwange\",\r\n                data: hwangeData,\r\n                fill: false,\r\n                borderColor: \"#fff\"\r\n            }\r\n\r\n        ]\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <h5 style={{ color: '#fff' }}>Departure Points Chart</h5>\r\n            <Line\r\n                height={200}\r\n                data={data}\r\n                style={{\r\n                    backgroundColor: '#003c6c',\r\n                    fontColor: '#fff'\r\n                }}\r\n                options={{\r\n                    responsive: true,\r\n                    title: {\r\n                        display: true,\r\n                        text: \"Activity for the past 7 days\",\r\n                        fontSize: 17,\r\n                        color: \"#fff\",\r\n                        padding: 10,\r\n                    },\r\n                    legend: {\r\n                        display: false,\r\n                        position: \"right\",\r\n                        color: '#fff'\r\n                    },\r\n                    scales: {\r\n                        yAxes: [\r\n                            {\r\n                                ticks: {\r\n                                    color: \"white\",\r\n                                    beginAtZero: true,\r\n                                    stepSize: 1\r\n                                },\r\n                            },\r\n                        ],\r\n                        xAxes: [\r\n                            {\r\n                                ticks: {\r\n                                    color: \"white\",\r\n                                },\r\n                            },\r\n                        ],\r\n                    },\r\n                }}\r\n            />\r\n        </>\r\n    )\r\n}","import * as React from 'react';\r\n// import Paper from '@material-ui/core/Paper';\r\nimport firebase from 'firebase';\r\nimport { Line } from \"react-chartjs-2\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport moment from 'moment';\r\n\r\n\r\n\r\nexport default function StatsChart() {\r\n    const [activityData, setActivityData] = React.useState([]);\r\n    const [labels, setLabels] = React.useState([]);\r\n\r\n    React.useEffect(() => {\r\n        const fetchStats = async () => {\r\n            const db = firebase.firestore();\r\n            // eslint-disable-next-line\r\n            // let activitiesRef;\r\n            let dates = [];\r\n\r\n            for (let x = 6; x >= 0; x--) {\r\n                let minDate = new moment().subtract(x, \"days\");\r\n                dates.push(minDate.format('ddd'));\r\n                let min = new Date();\r\n                min.setDate(min.getDate() - x - 1);\r\n                let max = new Date();\r\n                max.setDate(max.getDate() - x);\r\n                // eslint-disable-next-line\r\n                let activitiesRef = db.collection('reservations')\r\n                    .where(\"BookingTime\", \">\", min)\r\n                    .where(\"BookingTime\", \"<\", max)\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        setActivityData(state => [...state, snapshot.size]);\r\n                    });\r\n            }\r\n            setLabels(dates);\r\n        };\r\n        fetchStats();\r\n    }, []);\r\n\r\n    const data = {\r\n        labels: labels,\r\n        datasets: [\r\n            {\r\n                label: \"No. of reservations\",\r\n                fill: true,\r\n                backgroundColor: \"#00a152\",\r\n                borderColor: \"#00a152\",\r\n                data: activityData,\r\n                borderWidth: 1,\r\n                pointRadius: 0,\r\n            }\r\n\r\n        ],\r\n    };\r\n\r\n    return (\r\n        <Grid container style={{ padding: 20 }}>\r\n            <h5 style={{ color: '#fff' }}>Overall Activity Chart</h5>\r\n            <Line\r\n                height={200}\r\n                data={data}\r\n                style={{\r\n                    backgroundColor: '#003c6c'\r\n                }}\r\n                options={{\r\n                    responsive: true,\r\n                    title: {\r\n                        display: true,\r\n                        text: \"Activity for the past 7 days\",\r\n                        fontSize: 17,\r\n                        fontColor: \"#5f0937\",\r\n                        padding: 10,\r\n                    },\r\n                    legend: {\r\n                        display: true,\r\n                        position: \"right\",\r\n                    },\r\n                    scales: {\r\n                        yAxes: [\r\n                            {\r\n                                ticks: {\r\n                                    fontColor: \"white\",\r\n                                    beginAtZero: true,\r\n                                    stepSize: 1\r\n                                },\r\n                            },\r\n                        ],\r\n                        xAxes: [\r\n                            {\r\n                                ticks: {\r\n                                    fontColor: \"white\",\r\n                                },\r\n                            },\r\n                        ],\r\n                    },\r\n                }}\r\n            />\r\n        </Grid>\r\n    )\r\n}\r\n// }","import React from 'react';\r\nimport { Bar } from 'react-chartjs-2';\r\n\r\nconst data = {\r\n    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'],\r\n    datasets: [\r\n        {\r\n            label: 'EcoCash',\r\n            data: [12, 19, 3, 5, 2, 3],\r\n            backgroundColor: 'rgb(255, 99, 132)',\r\n        },\r\n        {\r\n            label: 'Cash',\r\n            data: [2, 3, 20, 5, 1, 4],\r\n            backgroundColor: 'rgb(54, 162, 235)',\r\n        },\r\n        {\r\n            label: 'One Money',\r\n            data: [3, 10, 13, 15, 22, 30],\r\n            backgroundColor: 'rgb(75, 192, 192)',\r\n        },\r\n    ],\r\n};\r\n\r\nconst options = {\r\n    scales: {\r\n        yAxes: [\r\n            {\r\n                stacked: true,\r\n                ticks: {\r\n                    beginAtZero: true,\r\n                },\r\n            },\r\n        ],\r\n        xAxes: [\r\n            {\r\n                stacked: true,\r\n            },\r\n        ],\r\n    },\r\n};\r\n\r\nconst StackedBar = () => (\r\n    <>\r\n        <div className='header'>\r\n            <h5 style={{ color: '#fff' }}>Payment Methods Chart</h5>\r\n            <div className='links'>\r\n                <a\r\n                    className='btn btn-gh'\r\n                    href='https://github.com/reactchartjs/react-chartjs-2/blob/master/example/src/charts/StackedBar.js'\r\n                >\r\n\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <Bar data={data} options={options} />\r\n    </>\r\n);\r\n\r\nexport default StackedBar;","import React from \"react\";\r\nimport firebase from \"firebase\";\r\nimport \"@fontsource/roboto\";\r\nimport moment from \"moment\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport ActivityChart from \"./ActivityChart\";\r\nimport { Bar } from 'react-chartjs-2';\r\nimport StatsChart from \"./StatsChart\";\r\nimport StackedBar from \"./StackedBar\";\r\n\r\nconst styles = (theme) => ({\r\n    select: {\r\n        backgroundColor: \"transparent\",\r\n        color: \"white\",\r\n        borderColor: \"transparent\",\r\n    },\r\n    option: {\r\n        color: \"black\",\r\n    },\r\n    label: {\r\n        color: \"white\",\r\n        fontSize: 14,\r\n    },\r\n    grid: {\r\n        paddingLeft: 20,\r\n        color: \"#fff\"\r\n    },\r\n});\r\n\r\n\r\nclass BarGraph extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.inputPaymentMethodRef = React.createRef();\r\n        this.inputPeriodRef = React.createRef();\r\n        this.labels = [\"Bulawayo\", \"Chegutu\", \"Kadoma\", \"Kwekwe\", \"Harare\", \"Victoria Falls\", \"Hwange\", \"Gweru\", \"Johannesburg\"];\r\n        this.colors = [\"#33eaff\", \"#4615b2\", \"#00a152\", \"#ffea00\", \"#f50057\", \"#ff5722\", \"#fff\", \"#2196f3\", \"#aaa\"];\r\n\r\n        this.state = {\r\n            data: [],\r\n            totalReservations: 0,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getChartData();\r\n    }\r\n\r\n    getChartData(paymentMethod = \"\", period = \"\") {\r\n        const db = firebase.firestore();\r\n        let total = 0;\r\n        this.labels.forEach((pickupPoint) => {\r\n            let reservationsRef = db.collection(\"reservations\");\r\n\r\n            if (paymentMethod !== \"\" && paymentMethod !== \"All\")\r\n                reservationsRef = reservationsRef.where(\"PaymentMethod\", \"==\", paymentMethod);\r\n\r\n            if (period !== \"\" && period !== \"All\") {\r\n                let min = new Date();\r\n                min.setDate(min.getDate() - period);\r\n                console.log(min);\r\n                reservationsRef = reservationsRef\r\n                    .orderBy(\"BookingTime\")\r\n                    .where(\"BookingTime\", \">=\", min);\r\n            }\r\n\r\n            reservationsRef\r\n                .orderBy(\"TravellingFrom\")\r\n                .startAt(pickupPoint)\r\n                .endAt(pickupPoint + \"\\uf8ff\")\r\n                .get()\r\n                .then((snapshot) => {\r\n                    total += snapshot.size;\r\n                    this.setState({\r\n                        data: [...this.state.data, snapshot.size],\r\n                        totalReservations: total,\r\n                    });\r\n                });\r\n        });\r\n    }\r\n\r\n    handleChange = () => {\r\n        let paymentMethod = this.inputPaymentMethodRef.current.value;\r\n        let period = this.inputPeriodRef.current.value;\r\n        this.setState({ data: [] });\r\n        this.getChartData(paymentMethod, period);\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const data = {\r\n            labels: this.labels,\r\n            datasets: [\r\n                {\r\n                    label: \"Cumulative Reservations\",\r\n                    backgroundColor: this.colors,\r\n                    // borderColor: \"#04e7ff\",\r\n                    borderWidth: 1,\r\n                    data: this.state.data,\r\n                },\r\n            ],\r\n        };\r\n\r\n        return (\r\n            <div style={{ paddingTop: 20 }}>\r\n                <Grid container style={{ padding: 20 }}>\r\n                    <Grid item className={classes.grid}>\r\n                        <label className={classes.label}>\r\n                            Date: {moment(new Date()).format(\"DD/MM/YYYY\")}\r\n                        </label>\r\n                    </Grid>\r\n                    <Grid item className={classes.grid}>\r\n                        <label className={classes.label}>\r\n                            Period:\r\n              <select\r\n                                name=\"period\"\r\n                                className={classes.select}\r\n                                onChange={this.handleChange}\r\n                                ref={this.inputPeriodRef}\r\n                            >\r\n                                <option className={classes.option}>All</option>\r\n                                <option className={classes.option} value=\"1\">\r\n                                    1 day\r\n                </option>\r\n                                <option className={classes.option} value=\"7\">\r\n                                    7 days\r\n                </option>\r\n                                <option className={classes.option} value=\"14\">\r\n                                    14 days\r\n                </option>\r\n                                <option className={classes.option} value=\"30\">\r\n                                    30 days\r\n                </option>\r\n                            </select>\r\n                        </label>\r\n                    </Grid>\r\n                    <Grid item className={classes.grid}>\r\n                        <label className={classes.label}>\r\n                            No. of reservations: {this.state.totalReservations}\r\n                        </label>\r\n                    </Grid>\r\n                    <Grid item className={classes.grid}>\r\n                        <label className={classes.label}>\r\n                            Payment Method:\r\n              <select\r\n                                name=\"paymentMethod\"\r\n                                className={classes.select}\r\n                                onChange={this.handleChange}\r\n                                ref={this.inputPaymentMethodRef}\r\n                            >\r\n                                <option className={classes.option}>All</option>\r\n                                <option className={classes.option}>Swipe</option>\r\n                                <option className={classes.option}>Cash</option>\r\n                                <option className={classes.option}>EcoCash</option>\r\n                                <option className={classes.option}>One Money</option>\r\n                                <option className={classes.option}>Telecash</option>\r\n                            </select>\r\n                        </label>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid container>\r\n                    <Grid item md={6}>\r\n\r\n                        <Card\r\n                            style={{\r\n                                backgroundColor: '#003c6c',\r\n\r\n                                color: '#fff',\r\n                                marginRight: 5,\r\n                            }}\r\n                        >\r\n                            <CardContent>\r\n                                <h5 style={{ color: '#fff' }}>Activity Chart</h5>\r\n                                <Bar\r\n                                    height={200}\r\n                                    data={data}\r\n                                    options={{\r\n                                        responsive: true,\r\n                                        title: {\r\n                                            display: true,\r\n                                            text: \"Reservations Summary\",\r\n                                            fontSize: 17,\r\n                                            color: \"white\",\r\n                                            padding: 10,\r\n                                            align: \"start\",\r\n                                        },\r\n                                        legend: {\r\n                                            labels: {\r\n                                                color: \"#fff\",\r\n                                            },\r\n                                            display: false,\r\n                                            position: \"right\",\r\n                                        },\r\n                                        scales: {\r\n                                            yAxes: [\r\n                                                {\r\n                                                    ticks: {\r\n                                                        color: \"#fff\",\r\n                                                        beginAtZero: true,\r\n                                                    },\r\n                                                },\r\n                                            ],\r\n                                            xAxes: [\r\n                                                {\r\n                                                    ticks: {\r\n                                                        color: \"#fff\",\r\n                                                        beginAtZero: true,\r\n                                                    },\r\n                                                },\r\n                                            ],\r\n                                        },\r\n                                    }}\r\n                                />\r\n                            </CardContent>\r\n                        </Card>\r\n                    </Grid>\r\n                    <Grid item md={6}>\r\n                        <Card\r\n                            style={{\r\n                                backgroundColor: '#003c6c',\r\n                                // background: \"linear-gradient(transparent,rgba(0,151,167,1))\",\r\n                                marginLeft: 5,\r\n                            }}\r\n                        >\r\n                            <CardContent>\r\n                                <ActivityChart />\r\n                            </CardContent>\r\n                        </Card>\r\n                    </Grid>\r\n                    <Grid item md={6}>\r\n                        <hr />\r\n                        <Card\r\n                            style={{\r\n                                // backgroundColor: \"#34495e\",\r\n                                // background: \"linear-gradient(transparent,rgba(0,151,167,1))\",\r\n                                backgroundColor: '#003c6c',\r\n                                marginLeft: 5,\r\n                            }}\r\n                        >\r\n                            <CardContent>\r\n                                <StatsChart />\r\n                            </CardContent>\r\n                        </Card>\r\n                    </Grid>\r\n                    <Grid item md={6}>\r\n                        <hr />\r\n                        <Card\r\n                            style={{\r\n                                // backgroundColor: \"#34495e\",\r\n                                // background: \"linear-gradient(transparent,rgba(0,151,167,1))\",\r\n                                backgroundColor: '#003c6c',\r\n                                marginLeft: 5,\r\n                            }}\r\n                        >\r\n                            <CardContent>\r\n                                <StackedBar />\r\n                            </CardContent>\r\n                        </Card>\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(BarGraph);\r\n","import React from 'react'\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n// import StatsChart from './StatsChart';\r\n// import ActivityChart from './ActivityChart';\r\nimport BarGraph from './BarGraph';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        marginTop: 80,\r\n    },\r\n}));\r\n\r\nexport default function StatsData() {\r\n    const classes = useStyles()\r\n    return (\r\n        <div className={classes.root}>\r\n            <h2 style={{ color: '#fff' }}>Statistics</h2>\r\n            <BarGraph />\r\n            <hr />\r\n            {/* <StatsChart /> */}\r\n            {/* <hr /> */}\r\n            {/* <ActivityChart /> */}\r\n        </div>\r\n    )\r\n}\r\n","import { Container } from '@material-ui/core'\r\nimport React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport StatsData from '../../components/statistics/StatsData'\r\n\r\nexport default function Statistics() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <StatsData />\r\n            <Footer />\r\n        </Container>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        marginTop: 80,\r\n    },\r\n}));\r\n\r\nexport default function PaymentsData() {\r\n    const classes = useStyles();\r\n    return (\r\n        <div className={classes.root}>\r\n            <h2>Payments</h2>\r\n            <p>Some payments data is coming here...</p>\r\n        </div>\r\n    )\r\n}\r\n","import { Container } from '@material-ui/core'\r\nimport React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport PaymentsData from '../../components/payments/PaymentsData'\r\n\r\nexport default function Payments() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <PaymentsData />\r\n            <Footer />\r\n        </Container>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport firebase from '../../firebase.config'\r\nimport clsx from 'clsx';\r\n// import moment from 'moment'\r\nimport { Button, makeStyles } from '@material-ui/core';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: 400,\r\n    width: '100%',\r\n    marginTop: 80,\r\n  },\r\n  button: {\r\n    marginBottom: '10px',\r\n  },\r\n  filterBox: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  grid: {\r\n    backgroundColor: '#008394',\r\n  }\r\n}));\r\n\r\nconst columns = [\r\n  { field: 'from', headerName: 'FROM', width: 130, sortable: true },\r\n  { field: 'to', headerName: 'TO', width: 130, sortable: true },\r\n  { field: 'prices', headerName: 'PRICES', width: 200, sortable: true, valueGetter: params => `$${params.row.prices.USD}, ZAR${params.row.prices.ZAR}, ZWL$${params.row.prices.ZWL}` },\r\n  { field: \"date\", headerName: \"DATE\", width: 160, valueGetter: params => `${params.row.date.toDate()}`, },\r\n\r\n\r\n]\r\nexport default function FaresGrid() {\r\n  const classes = useStyles();\r\n  const [fares, setFares] = React.useState([]);\r\n  const [cities, setCities] = React.useState([]);\r\n  const [values, setValues] = React.useState({\r\n    from: '',\r\n    to: ''\r\n  });\r\n\r\n  const handleChange = (prop, value) => {\r\n    setValues({ ...values, [prop]: value });\r\n    fetchFares(prop, value);\r\n  }\r\n\r\n  const fetchFares = async (prop, value) => {\r\n    const db = firebase.firestore();\r\n    let dataRef = db.collection('fares');\r\n    let arr = [];\r\n\r\n    let from = values.from;\r\n    let to = values.to;\r\n\r\n    if (prop === 'from') from = value;\r\n    else if (prop === 'to') to = value;\r\n\r\n    if ((from !== '' && from !== undefined) || (to !== '' && to !== undefined)) {\r\n      if ((from !== '' && from !== undefined) && (to !== '' && to !== undefined)) {\r\n        dataRef = dataRef.where(\"possibleTrips\", 'array-contains', `${cities[from]}-${cities[to]}`);\r\n      }\r\n      else {\r\n        if (from === '' || from === undefined) {\r\n          dataRef = dataRef.where('cities', 'array-contains', cities[to]);\r\n        }\r\n        else {\r\n          dataRef = dataRef.where('cities', 'array-contains', cities[from]);\r\n        }\r\n      }\r\n    }\r\n\r\n    const data = await dataRef.get();\r\n\r\n    setFares(data.docs.map((doc) => {\r\n      let fare = doc.data();\r\n\r\n      if (cities.length === 0 && arr.indexOf(fare.from) === -1) arr.push(fare.from);\r\n      if (cities.length === 0 && arr.indexOf(fare.to) === -1) arr.push(fare.to);\r\n\r\n      return { ...fare, id: doc.id }\r\n    }));\r\n\r\n    if (cities.length === 0) setCities(arr);\r\n  };\r\n\r\n  React.useState(() => {\r\n    fetchFares();\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <h3 style={{ marginBottom: 20, color: '#fff' }}>Fares</h3>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        href=\"/fares/add\"\r\n        className={classes.button}>Add Fare</Button>\r\n      <br />\r\n      <Grid container className={classes.filterBox} spacing={2}>\r\n        <Grid item>\r\n          <Grid container justify=\"left\" spacing={1}>\r\n            <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n              <select\r\n                labelId=\"id\"\r\n                value={values.from}\r\n                onChange={(e) => handleChange('from', e.target.value)}\r\n                required\r\n              >\r\n                <option value=\"\">All</option>\r\n                {cities?.map((item, counter) => {\r\n                  return <option value={counter}>{item}</option>;\r\n                })}\r\n              </select>\r\n              <FormHelperText id=\"standard-date-helper-text\">From</FormHelperText>\r\n            </FormControl>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item>\r\n          <Grid container justify=\"left\" spacing={1}>\r\n            <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n              <select\r\n                labelId=\"id\"\r\n                value={values.to}\r\n                onChange={(e) => handleChange('to', e.target.value)}\r\n                required\r\n              >\r\n                <option value=\"\">All</option>\r\n                {cities?.map((item, counter) => {\r\n                  return <option value={counter}>{item}</option>;\r\n                })}\r\n              </select>\r\n              <FormHelperText id=\"standard-date-helper-text\">To</FormHelperText>\r\n            </FormControl>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n      <DataGrid className={classes.grid} rows={fares} columns={columns} />\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Container } from '@material-ui/core'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport FaresGrid from '../../components/fares/FaresGrid'\r\n\r\nexport default function Grid() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <FaresGrid />\r\n            <Footer />\r\n        </Container>\r\n    )\r\n}\r\n","import React from 'react';\r\n// import clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport firebase from \"../../firebase.config\";\r\nimport { useHistory } from 'react-router-dom';\r\nvar moment = require(\"moment\");\r\n// const { v4: uuidv4 } = require(\"uuid\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  margin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  fullWidth: {\r\n    width: '100%',\r\n    margin: theme.spacing(0.5),\r\n  },\r\n}));\r\n\r\n\r\nexport default function DeleteModal(props) {\r\n  const db = firebase.firestore();\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const handleDelete = () => {\r\n    db.collection('trips').doc(props.id).delete().then((e) => {\r\n      alert(\"Trip deleted successfully!\");\r\n      return history.push(\"/trips-grid\");\r\n    }).catch((e) => alert(\"An error occurred!\"));\r\n  }\r\n\r\n  let title, display, submitButton;\r\n  title = \"Are you sure you want to delete this trip?\";\r\n  display = (<div>\r\n    <h3>Trip information</h3>\r\n    <table className={classes.fullWidth}>\r\n      <tr>\r\n        <td><b>Name:</b></td>\r\n      </tr>\r\n      <tr>\r\n        <td>{props?.trip?.name}</td>\r\n      </tr>\r\n      <tr>\r\n        <td><b>From:</b></td>\r\n      </tr>\r\n      <tr>\r\n        <td>{props?.trip?.from}</td>\r\n      </tr>\r\n      <tr>\r\n        <td><b>To:</b></td>\r\n      </tr>\r\n      <tr>\r\n        <td>{props?.trip?.to}</td>\r\n      </tr>\r\n      <tr>\r\n        <td><b>Date created:</b></td>\r\n      </tr>\r\n      <tr>\r\n        <td>{moment(props?.trip?.date?.toDate()).format('LLL')}</td>\r\n      </tr>\r\n      <tr>\r\n        <td><b>Seats:</b></td>\r\n      </tr>\r\n      <tr>\r\n        <td>{props?.trip?.seats}</td>\r\n      </tr>\r\n      <tr>\r\n        <td><b>Stops:</b></td>\r\n      </tr>\r\n      <tr>\r\n        <td>{displayStops(props?.trip?.stops)}</td>\r\n      </tr>\r\n      <tr>\r\n        <td><b>Times:</b></td>\r\n      </tr>\r\n      <tr>\r\n        <td>{props?.trip?.times?.join(', ')}</td>\r\n      </tr>\r\n    </table></div>);\r\n  submitButton = (<Modal.Footer>\r\n    <p><b>Note:</b> This action cannot be reversed!</p><br />\r\n    <Button\r\n      onClick={handleDelete}\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      className={classes.button}>\r\n      Delete\r\n      </Button>\r\n  </Modal.Footer>);\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n      class=\"modal\"\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          {title}\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <div className={classes.root}>\r\n          {display}\r\n        </div>\r\n      </Modal.Body>\r\n      { submitButton}\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction displayStops(map) {\r\n  if (map === undefined || map === null) return [];\r\n\r\n  var newMap = new Map(Object.entries(map));\r\n  var arr = []; // initially new Array()\r\n\r\n  newMap.forEach((v) => {\r\n    arr.push(v.name);\r\n  });\r\n\r\n  return arr\r\n}","import React from 'react';\r\n// import clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport firebase from \"../../firebase.config\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport MultipleTimeSelect from './MultipleTimeSelect';\r\n// let moment = require(\"moment\");\r\n// const { v4: uuidv4 } = require(\"uuid\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  margin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  fullWidth: {\r\n    width: '100%',\r\n    margin: theme.spacing(0.5),\r\n  },\r\n}));\r\n\r\n\r\nexport default function EditModal(props) {\r\n  const db = firebase.firestore();\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const [values, setValues] = React.useState({\r\n    name: '',\r\n    to: '',\r\n    from: '',\r\n    times: [],\r\n    seats: 0\r\n  });\r\n\r\n  const handleChange = (prop, value) => {\r\n    props.trip.[prop] = value;\r\n    setValues({ ...values, [prop]: value });\r\n  }\r\n\r\n  const handleTimes = value => {\r\n    handleChange('times', value);\r\n  }\r\n\r\n  const handleSubmit = () => {\r\n    db.collection('trips').doc(props.id).update({\r\n      name: props.trip.name,\r\n      to: props.trip.to,\r\n      from: props.trip.from,\r\n      seats: parseInt(props.trip.seats),\r\n      times: props.trip?.times?.map((t) => { console.log(t); return t.value }),\r\n    }).then((e) => {\r\n      alert(\"Trip successfully updated!\");\r\n      return history.push(\"/trips-grid\");\r\n    }).catch((e) => alert(\"An error occurred!\"));\r\n  }\r\n\r\n  let dname = (values.name === \"\" || values.name === undefined || values.name !== props.trip.name) ? props.trip.name : values.name;\r\n  let dto = (values.to === \"\" || values.to === undefined || values.to !== props.trip.to) ? props.trip.to : values.to;\r\n  let dfrom = (values.from === \"\" || values.from === undefined || values.from !== props.trip.from) ? props.trip.from : values.from;\r\n  let dtimes = (values.times === undefined || values.times.length === 0 || values.times !== props.trip.times) ? props?.trip?.times?.map((e) => ({ label: e, value: e })) : values.times;\r\n  let dseats = (values.seats === 0 || values.seats === undefined || values.seats !== props.trip.seats) ? props.trip.seats : values.seats;\r\n\r\n  let title, display, submitButton;\r\n  title = \"Update trip\";\r\n  display = (<div>\r\n    <br />\r\n    <br />\r\n    <label>Trip name</label>\r\n    <br />\r\n    <input\r\n      name='name'\r\n      type='text'\r\n      value={dname}\r\n      required\r\n      onChange={e => handleChange('name', e.target.value)}\r\n    />\r\n    <br />\r\n    <br />\r\n    <label>From</label>\r\n    <br />\r\n    <input\r\n      name='from'\r\n      type='text'\r\n      value={dfrom}\r\n      required\r\n      onChange={e => handleChange('from', e.target.value)}\r\n    />\r\n    <br />\r\n    <br />\r\n    <label>To</label>\r\n    <br />\r\n    <input\r\n      name='to'\r\n      type='text'\r\n      value={dto}\r\n      required\r\n      onChange={e => handleChange('to', e.target.value)}\r\n    />\r\n    <br />\r\n    <br />\r\n    <label>Number of seats</label>\r\n    <br />\r\n    <input\r\n      name='seats'\r\n      type='number'\r\n      value={dseats}\r\n      required\r\n      onChange={e => handleChange('seats', e.target.value)}\r\n    />\r\n    <br />\r\n    <br />\r\n    <label>Departure times</label>\r\n    <MultipleTimeSelect setTimes={handleTimes} times={dtimes} />\r\n  </div>);\r\n\r\n  submitButton = (<Modal.Footer>\r\n    <Button\r\n      onClick={handleSubmit}\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      className={classes.button}>\r\n      Update\r\n      </Button>\r\n  </Modal.Footer>);\r\n\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n      class=\"modal\"\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          {title}\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <div className={classes.root}>\r\n          {display}\r\n        </div>\r\n      </Modal.Body>\r\n      { submitButton}\r\n    </Modal>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport firebase from '../../firebase.config'\r\nimport clsx from 'clsx';\r\nimport { Button, makeStyles } from '@material-ui/core';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Select from 'react-select';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport DeleteModal from \"./DeleteModal\";\r\nimport EditModal from \"./EditModal\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        height: 400,\r\n        width: '100%',\r\n        marginTop: 80,\r\n    },\r\n    button: {\r\n        margin: 10,\r\n    },\r\n    grid: {\r\n        backgroundColor: '#008394',\r\n    },\r\n    filterBox: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    customButton: {\r\n        margin: 10,\r\n        fontSize: '18px'\r\n    }\r\n}))\r\n\r\nfunction displayStops(map) {\r\n    if (map === undefined || map === null) return [];\r\n\r\n    var newMap = new Map(Object.entries(map));\r\n    var arr = []; // initially new Array()\r\n\r\n    newMap.forEach((v) => {\r\n        arr.push(v.name);\r\n    });\r\n\r\n    return arr\r\n}\r\n\r\n// let link = `/trips/${tripRef.id}/stops`;\r\n\r\nconst columns = [\r\n    { field: 'trip', headerName: 'TRIP', width: 200, sortable: true, valueGetter: params => `${params.row.from} to ${params.row.to}` },\r\n    { field: 'from', headerName: 'FROM', width: 130, sortable: true },\r\n    { field: 'to', headerName: 'TO', width: 130, sortable: true },\r\n    { field: \"times\", headerName: \"TIMES\", width: 160 },\r\n    { field: \"stops\", headerName: \"STOPS\", width: 200, valueGetter: params => `${displayStops(params.row.stops)}` },\r\n    { field: \"date\", headerName: \"DATE\", width: 160, valueGetter: params => `${params.row.date.toDate()}`, },\r\n    { field: \"\", headerName: \"ACTION\", width: 160, disableClickEventBubbling: true, renderCell: params => params.row.Button },\r\n]\r\n\r\nexport default function TripsGrid() {\r\n    const classes = useStyles();\r\n    const [editShow, setEditShow] = React.useState(false);\r\n    const [deleteShow, setDeleteShow] = React.useState(false);\r\n    const [trips, setTrips] = React.useState([]);\r\n    const [values, setValues] = React.useState({\r\n        from: '',\r\n        to: '',\r\n        stops: []\r\n    });\r\n    const [deleteTrip, setDeleteTrip] = React.useState({});\r\n    const [deleteID, setDeleteID] = React.useState({});\r\n\r\n    const [editTrip, setEditTrip] = React.useState({});\r\n    const [editID, setEditID] = React.useState({});\r\n\r\n    const [cities, setCities] = React.useState([]);\r\n    const [options, setOptions] = React.useState([]);\r\n\r\n    const handleChange = (prop, value) => {\r\n        setValues({ ...values, [prop]: value });\r\n        fetchTrips(prop, value);\r\n    }\r\n\r\n    const handleDelete = (trip, id) => {\r\n        setDeleteID(id);\r\n        setDeleteTrip(trip);\r\n        setDeleteShow(true);\r\n    }\r\n\r\n    const handleEdit = (trip, id) => {\r\n        setEditID(id);\r\n        setEditTrip(trip);\r\n        setEditShow(true);\r\n    }\r\n\r\n    const handleOptions = selectedOptions => {\r\n        handleChange('stops', selectedOptions);\r\n    }\r\n\r\n    const fetchTrips = async (prop, value) => {\r\n        const db = firebase.firestore();\r\n        let dataRef = db.collection('trips');\r\n        let to = values.to;\r\n        let from = values.from;\r\n        let stops = values.stops;\r\n        let arr = [];\r\n\r\n        switch (prop) {\r\n            case 'to':\r\n                to = value;\r\n                break;\r\n            case 'from':\r\n                from = value;\r\n                break;\r\n            case 'stops':\r\n                stops = value;\r\n                break;\r\n            default:\r\n        }\r\n\r\n        if (from !== '' && from !== undefined) dataRef = dataRef.where('from', '==', cities[from]);\r\n        if (to !== '' && to !== undefined) dataRef = dataRef.where('to', '==', cities[to]);\r\n\r\n        if (stops !== undefined && stops.length > 0) {\r\n            stops.forEach((e) => {\r\n                dataRef = dataRef.where('stops.' + e.value + '.name', '==', e.value);\r\n            });\r\n        }\r\n\r\n        const data = await dataRef.get();\r\n        setTrips(data.docs.map(doc => {\r\n            let trip = doc.data();\r\n\r\n            if (cities.length === 0 && arr.indexOf(trip.from) === -1) arr.push(trip.from);\r\n            if (cities.length === 0 && arr.indexOf(trip.to) === -1) arr.push(trip.to);\r\n            if (cities.length === 0 && trip.stops !== undefined) {\r\n                (Array.from(new Map(Object.entries(trip.stops)).keys())).forEach((e) => {\r\n                    if (arr.indexOf(e) === -1) arr.push(e);\r\n                });\r\n            }\r\n\r\n            trip.Button = (<div>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    // eslint-disable-next-line\r\n                    className={classes.customButton} color=\"red\" onClick={() => handleEdit(trip, doc.id)}><EditIcon fontSize=\"inherit\" /></Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    className={classes.customButton} onClick={() => handleDelete(trip, doc.id)}><DeleteForeverIcon fontSize=\"inherit\" /></Button>\r\n            </div>);\r\n\r\n            return { ...trip, id: doc.id };\r\n        }));\r\n\r\n        if (cities.length === 0) setCities(arr);\r\n        if (cities.length === 0) setOptions(arr.map((e) => ({ value: e, label: e })));\r\n    };\r\n\r\n    React.useState(() => {\r\n        fetchTrips();\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <h3 style={{ marginBottom: 20, color: '#fff' }}>Trips</h3>\r\n            <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                href=\"/trips/add\"\r\n                className={classes.button}>Add trip</Button>\r\n            <br />\r\n            <Grid container className={classes.filterBox} spacing={2}>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.from}\r\n                                onChange={(e) => handleChange('from', e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"\">All</option>\r\n                                {cities?.map((item, counter) => {\r\n                                    return <option value={counter}>{item}</option>;\r\n                                })}\r\n                            </select>\r\n                            <FormHelperText id=\"standard-date-helper-text\">From</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.to}\r\n                                onChange={(e) => handleChange('to', e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"\">All</option>\r\n                                {cities?.map((item, counter) => {\r\n                                    return <option value={counter}>{item}</option>;\r\n                                })}\r\n                            </select>\r\n                            <FormHelperText id=\"standard-date-helper-text\">To</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Select\r\n                                closeMenuOnSelect={false}\r\n                                isMulti\r\n                                options={options}\r\n                                onChange={handleOptions}\r\n                                style={{ width: \"400px\" }}\r\n                                className=\"select-custom-class\"\r\n                            />\r\n                            <FormHelperText id=\"standard-date-helper-text\">Stops</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n            <DataGrid className={classes.grid} rows={trips} columns={columns} />\r\n            <DeleteModal trip={deleteTrip} id={deleteID} show={deleteShow} onHide={() => setDeleteShow(false)} />\r\n            <EditModal trip={editTrip} id={editID} show={editShow} onHide={() => setEditShow(false)} />\r\n        </div>\r\n    )\r\n}\r\n","import { Container } from '@material-ui/core'\r\nimport React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripsGrid from '../../components/trips/TripsGrid'\r\n\r\nexport default function TripGrid() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <TripsGrid />\r\n            <Footer />\r\n        </Container>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport \"./App.css\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\r\nimport PrivateRoute from './PrivateRoute';\r\nimport Data from './pages/reservations/Data'\r\nimport AddReservation from './pages/reservations/AddReservation';\r\nimport { AuthProvider } from \"./contexts/AuthContext\";\r\nimport { login } from \"./pages/accounts/login\";\r\n// import { register } from \"./pages/accounts/register\";\r\nimport Trips from './pages/trips/Trips';\r\nimport AddTrip from './pages/trips/AddTrip';\r\nimport TripStops from './pages/trips/TripStops';\r\nimport AddTripStop from './pages/trips/AddTripStop';\r\n// import Fares from './pages/fares/Fares';\r\nimport AddFare from './pages/fares/AddFare';\r\nimport Homepage from \"./pages/home/homepage\";\r\nimport \"@fontsource/roboto\";\r\nimport Statistics from \"./pages/statistics/Statistics\";\r\nimport Payments from \"./pages/payments/Payments\";\r\nimport Grid from './pages/fares/Grid'\r\nimport TripGrid from './pages/trips/TripGrid'\r\n// import img1 from './assets/images/1.jpg'\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: \"#ff3d00\",\r\n      dark: '#002884',\r\n      contrastText: '#fff',\r\n      light: '#757ce8',\r\n    },\r\n    secondary: {\r\n      light: '#ff7961',\r\n      main: \"#ff4569\",\r\n      dark: '#ba000d',\r\n      contrastText: '#000',\r\n    },\r\n    body: {\r\n      maxWidth: \"100%\",\r\n      backgroundColor: \"#34495E\",\r\n      fontFamily: 'Roboto',\r\n    },\r\n  },\r\n});\r\n\r\n// const drawerWidth = 200;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    // marginTop: 80,\r\n    fontSize: 13,\r\n    width: '100%',\r\n    ...theme.mixins.toolbar,\r\n    justifyContent: 'flex-end',\r\n  },\r\n}));\r\n\r\nfunction App() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <AuthProvider>\r\n      <Router>\r\n        <Switch>\r\n          <Container>\r\n            <ThemeProvider theme={theme}>\r\n              <div className={classes.root}>\r\n                <PrivateRoute exact path=\"/\" component={Homepage} />\r\n                <PrivateRoute exact path='/reservations' component={Data} />\r\n                <PrivateRoute exact path='/reservations/:id/add' component={AddReservation} />\r\n                <PrivateRoute exact path='/trips' component={Trips} />\r\n                <PrivateRoute exact path='/trips-grid' component={TripGrid} />\r\n                <PrivateRoute exact path='/trips/add' component={AddTrip} />\r\n                <PrivateRoute exact path='/trips/:id/stops' component={TripStops} />\r\n                <PrivateRoute exact path='/trips/:id/stops/add' component={AddTripStop} />\r\n                {/* <PrivateRoute exact path='/fares' component={Fares} /> */}\r\n                <PrivateRoute exact path=\"/fares\" component={Grid} />\r\n                <PrivateRoute exact path='/fares/add' component={AddFare} />\r\n                <PrivateRoute exact path=\"/statistics\" component={Statistics} />\r\n                <PrivateRoute exact path=\"/payments\" component={Payments} />\r\n                <PrivateRoute path='/downloads/:id/:ticketID' component={(e) => {\r\n                  window.open(\"https://extracitywebhook.herokuapp.com/downloads/\" + encodeURIComponent(e.match.params.ticketID) + \"/\" + encodeURIComponent(e.match.params.id), \"_blank\");\r\n                  return window.location.href = \"/reservations/\";\r\n                }} />\r\n              </div>\r\n              <div>\r\n                <Route exact path='/login' component={login} />\r\n                {/* <Route exact path='/register' component={register} /> */}\r\n              </div>\r\n            </ThemeProvider>\r\n          </Container>\r\n        </Switch>\r\n      </Router>\r\n    </AuthProvider>\r\n\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n// import './index.css';\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport App from \"./App\";\r\n\r\n// import reportWebVitals from \"./reportWebVitals\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}