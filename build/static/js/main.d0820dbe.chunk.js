(this["webpackJsonpextracity-admin-dashboard"]=this["webpackJsonpextracity-admin-dashboard"]||[]).push([[0],{287:function(e,t,n){},420:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),i=n.n(c),s=(n(286),n(15)),o=(n(287),n(56)),l=n(470),d=n(44),j=n(35),u=n(107),b=n(478),h=n(253),O=n(8),x=n(98);x.a.initializeApp({apiKey:"AIzaSyAZE0XhUYOfAnZkHx9mV2R56xIFrpfBko0",authDomain:"extracitywebhook.firebaseapp.com",databaseURL:"https://extracitywebhook.firebaseio.com",projectId:"extracitywebhook",storageBucket:"extracitywebhook.appspot.com",messagingSenderId:"1092492776927",appId:"1:1092492776927:web:51c38326a035e8722e606a"});var p=x.a,m=n(1),f=p.auth(),v=r.a.createContext();function g(){return r.a.useContext(v)}function w(e){var t=e.children,n=r.a.useState(),a=Object(O.a)(n,2),c=a[0],i=a[1],s=r.a.useState(!0),o=Object(O.a)(s,2),l=o[0],d=o[1];r.a.useEffect((function(){return f.onAuthStateChanged((function(e){i(e),d(!1)}))}),[]);var j={currentUser:c,login:function(e,t){return f.signInWithEmailAndPassword(e,t)},logout:function(){return f.signOut()}};return Object(m.jsx)(v.Provider,{value:j,children:!l&&t})}function y(e){var t=e.component,n=Object(h.a)(e,["component"]),a=g().currentUser;return Object(m.jsx)(j.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){return a?Object(m.jsx)(t,Object(s.a)({},e)):Object(m.jsx)(j.a,{to:"/login"})}}))}var T=n(101),S=n(469),k=n(471),N=Object(o.a)((function(e){return{root:{flexGrow:1,marginTop:"15%",marginBottom:"10px",backgroundColor:"#ad1457"}}}));function C(){var e=N();return Object(m.jsx)(S.a,{className:e.root,position:"relative",color:"primary",children:Object(m.jsx)(l.a,{maxWidth:"sm",children:Object(m.jsx)(k.a,{children:Object(m.jsxs)(T.a,{variant:"body1",color:"inherit",children:["First Source Technology ",(new Date).getFullYear()]})})})})}var D=n(28),P=n.n(D),F=n(23),B=n(39),A=n(6),M=n(41),I=n(489),L=n(473),E=n(431),R=n(475),Y=n(103),q=n(237),z=n.n(q),H=n(239),W=n.n(H),G=n(240),U=n.n(G),Z=n(428),K=n(432),V=n(476),$=n(242),J=n.n($),X=n(243),Q=n.n(X),_=n(245),ee=n.n(_),te=n(247),ne=n.n(te),ae=n(246),re=n.n(ae),ce=n(248),ie=n.n(ce),se=n(244),oe=n.n(se),le=n(488),de=n(474),je=n(238),ue=n.n(je),be=n(102),he=n(254),Oe=n(90),xe=n(61),pe=n(427),me=n(472),fe=n(426),ve=n(113),ge=n(124),we=n.n(ge),ye=n(63),Te=n(229).v4,Se=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"},table:{width:"100%"},pricesContainer:{padding:e.spacing(1)}}}));function ke(e){var t=p.firestore(),n=Se(),a=r.a.useState(null),c=Object(O.a)(a,2),i=c[0],o=c[1],l=r.a.useState({seats:null,error:""}),d=Object(O.a)(l,2),u=d[0],b=d[1],h=Object(j.g)(),x=r.a.useState(new Date),f=Object(O.a)(x,2),v=f[0],g=f[1],w=r.a.useState({time:null,trip:null,route:null,paymentReference:null,currency:null}),y=Object(O.a)(w,2),T=y[0],S=y[1],k=r.a.useState([]),N=Object(O.a)(k,2),C=N[0],D=N[1];r.a.useEffect((function(){(function(){var e=Object(B.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection("trips").get();case 2:n=e.sent,D(n.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var M=function(e){return function(n){if("trip"===e){var a,r=null===(a=C[T.route])||void 0===a?void 0:a.possibleTrips[n.target.value];void 0!==r?t.collection("fares").where("possibleTrips","array-contains",r).limit(1).get().then((function(t){0===t.size?(o(null),S(Object(s.a)(Object(s.a)({},T),{},Object(F.a)({},e,null))),alert("Sorry the trip you selected does not have a fare associated with it, please select another one!")):(S(Object(s.a)(Object(s.a)({},T),{},Object(F.a)({},e,n.target.value))),o(t.docs[0].data()))})):(o(null),S(Object(s.a)(Object(s.a)({},T),{},Object(F.a)({},e,null))),alert("Sorry the trip you selected does not have a fare associated with it, please select another one!"))}else S(Object(s.a)(Object(s.a)({},T),{},Object(F.a)({},e,n.target.value)));"time"===e&&I(n.target.value)}},I=function(e){var n=ye(v,"YYYY-MM-DD").toDate(),a=C[T.route];t.collection("reservations").where("Trip","==",a.name).where("status","==","paid").where("Date","==",n).where("TravelTime","==",a.times[e]).get().then((function(r){var c=r.size,i=new Date;i.setMinutes(i.getMinutes()-5),t.collection("reservations").where("Trip","==",C[T.route].name).where("status","==","pending").where("Date","==",n).where("TravelTime","==",C[T.route].times[e]).where("BookingTime",">=",i).get().then((function(e){var t=e.size,n=a.seats-c-t,r="";n<1&&(r=a.seats===c?"There are no more seats available for the trip you selected!":"There are no seats available at the moment. Please check after 5 or so minutes"),b({seats:n,error:r})}))}))},L=null,E=null;if(null!==T.route){var R,Y,q,z,H,W;if(null!==T.trip&&null!==T.time&&""!==v&&null!==i)if(u.seats>0)L=Object(m.jsxs)(xe.a.Footer,{children:[Object(m.jsxs)("p",{children:[Object(m.jsx)("b",{children:"Note:"})," Only click this button after the customer has made the necessary payments and please make sure the information entered is correct."]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:T.currency,onChange:M("currency"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),Array.from(new Map(Object.entries(null!==(W=null===i||void 0===i?void 0:i.prices)&&void 0!==W?W:{})).keys()).map((function(e){return Object(m.jsx)("option",{value:e,children:e})}))]}),Object(m.jsx)(fe.a,{id:"standard-currency-helper-text",children:"Currency"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-payment-reference",placeholder:"Payment reference",value:T.pickUp,required:!0,onChange:M("paymentReference"),endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-payment-reference-helper-text",inputProps:{"aria-label":"Payment Reference"}}),Object(m.jsx)(fe.a,{id:"standard-payment-reference-helper-text",children:"Payment Reference"})]}),Object(m.jsx)("br",{}),Object(m.jsx)(be.a,{onClick:function(){if(null===T.currency||null===T.trip||null===T.time||""===v||null===T.route||null===i||null===T.paymentReference)alert("Please fill in all input fields!");else{var e=Te(),n=function(){var e=function(e){var t=e.getFullYear().toString(),n=(e.getMonth()+1).toString(),a=e.getDate().toString();return 1===a.length&&(a="0"+a),1===n.length&&(n="0"+n),t+n+a}(new Date),t=(Math.floor(1e3*Math.random())+1).toString();return 1===t.length&&(t="0"+t),2===t.length&&(t="0"+t),"ExC-".concat(e,"-").concat(t)}(),a=C[T.route].possibleTrips[T.trip].split("-"),r=ye(v,"YYYY-MM-DD").toDate(),c=new Date,s=function(){var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"][Math.floor(25*Math.random()).toString()],t=(Math.floor(100*Math.random())+1).toString();return 1===t.length&&(t="0"+t),e+t}(),o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));t.collection("reservations").add({ID:e,paymentReference:T.paymentReference,TicketID:n,Currency:T.currency,Amount:i.prices[T.currency],status:"paid",Trip:C[T.route].name,TravellingFrom:a[0],TravellingTo:a[1],BookingTime:c,TravelTime:C[T.route].times[T.time],Date:r,platform:"Walk-in clients",seatNo:s,refNo:o}).then((function(e){return h.push("/reservations/"+e.id+"/add")}))}},variant:"contained",color:"primary",className:n.button,children:"Reserve"})]});else""!==u.error&&alert(u.error);E=Object(m.jsxs)("div",{children:[Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:T.trip,onChange:M("trip"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),null===(R=C[T.route])||void 0===R||null===(Y=R.possibleTrips)||void 0===Y?void 0:Y.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e.replace("-"," to ")})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Trips"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:T.time,onChange:M("time"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),null===(q=C[T.route])||void 0===q||null===(z=q.times)||void 0===z?void 0:z.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e})}))]}),Object(m.jsxs)(fe.a,{id:"standard-date-helper-text",children:["Time (Bus leaves ",null===(H=C[T.route])||void 0===H?void 0:H.from," at )"]})]})]})}return Object(m.jsxs)(xe.a,Object(s.a)(Object(s.a)({},e),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,class:"modal",children:[Object(m.jsx)(xe.a.Header,{closeButton:!0,children:Object(m.jsx)(xe.a.Title,{id:"contained-modal-title-vcenter",children:"Add a reservation"})}),Object(m.jsx)(xe.a.Body,{children:Object(m.jsxs)("div",{className:n.root,children:[Object(m.jsxs)("div",{children:[Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:T.route,onChange:M("route"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),C.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e.name})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Route"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsx)(we.a,{onChange:g,value:v}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Date of Travel"})]})]}),E,function(){if(null!==i){console.log(i);var e=function(){if(void 0===i.prices)return[];var e=new Map(Object.entries(i.prices)),t=[];return e.forEach((function(e,n){var a,r;t.push(Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:n}),Object(m.jsx)("td",{align:"right",children:(a=n,r=e,void 0===r?Object(m.jsx)("p",{children:"--"}):new Intl.NumberFormat("en-US",{style:"currency",currency:a}).format(r).replace(a,"").replace("$",""))})]}))})),t}();return Object(m.jsxs)("div",{className:Object(A.a)(n.pricesContainer),children:[Object(m.jsx)("h1",{children:"Prices"}),Object(m.jsx)("table",{className:Object(A.a)(n.table),children:Object(m.jsx)("tbody",{children:e.map((function(e){return e}))})})]})}}()]})}),L]}))}var Ne=n(241),Ce=n.n(Ne),De=240,Pe=Object(o.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"#34495E"},appBarShift:{width:"calc(100% - ".concat(De,"px)"),marginLeft:De,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:De,flexShrink:0},drawerPaper:{width:De,backgroundColor:"#34495E",color:"#ffffff"},drawerHeader:Object(s.a)(Object(s.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},LogoutButton:{color:"#F7F9F9",backgroundColor:"#E74C3C"},profileButton:{backgroundColor:"#2874A6",color:"#F7F9F9"},dropdownTitle:{color:"#ff1744"},dropDownMenu:{"& .MuiPaper-root":{backgroundColor:"#34495e",color:"#fff"}}}}));function Fe(e){return Object(m.jsx)(Z.a,Object(s.a)({button:!0,component:"a"},e))}function Be(){var e=r.a.useState(!1),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Pe(),i=Object(M.a)(),s=r.a.useState(!1),o=Object(O.a)(s,2),l=o[0],d=o[1],u=r.a.useState(),b=Object(O.a)(u,2),h=b[0],x=b[1],p=g(),f=p.currentUser,v=p.logout,w=Object(j.g)(),y=r.a.useState(null),N=Object(O.a)(y,2),C=N[0],D=N[1];function q(){return(q=Object(B.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(""),e.prev=1,e.next=4,v();case 4:w.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),x("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(m.jsxs)("div",{className:c.root,children:[h&&Object(m.jsx)(le.a,{variant:"danger",children:h}),Object(m.jsx)(L.a,{}),Object(m.jsx)(S.a,{position:"fixed",className:Object(A.a)(c.appBar,Object(F.a)({},c.appBarShift,l)),children:Object(m.jsxs)(k.a,{children:[Object(m.jsx)(Y.a,{color:"inherit","aria-label":"open drawer",onClick:function(){d(!0)},edge:"start",className:Object(A.a)(c.menuButton,l&&c.hide),children:Object(m.jsx)(z.a,{})}),Object(m.jsx)(T.a,{variant:"h6",noWrap:!0,children:"Extracity Dashboard"}),Object(m.jsx)(be.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){D(e.currentTarget)},className:c.dropdownTitle,endIcon:Object(m.jsx)(ue.a,{}),children:f.email}),Object(m.jsxs)(he.a,{id:"simple-menu",anchorEl:C,keepMounted:!0,open:Boolean(C),onClose:function(){D(null)},className:c.dropDownMenu,children:[Object(m.jsx)(Oe.a,{component:de.a,href:"/update-profile",style:{color:"black",textDecoration:"none"},children:"Update profile"}),Object(m.jsx)(Oe.a,{component:de.a,onClick:function(){return q.apply(this,arguments)},href:"/logout",style:{color:"red",textDecoration:"none"},children:"Logout"})]})]})}),Object(m.jsxs)(I.a,{className:c.drawer,variant:"persistent",anchor:"left",open:l,classes:{paper:c.drawerPaper},children:[Object(m.jsx)("div",{className:c.drawerHeader,children:Object(m.jsx)(Y.a,{onClick:function(){d(!1)},children:"ltr"===i.direction?Object(m.jsx)(W.a,{}):Object(m.jsx)(U.a,{})})}),Object(m.jsx)(R.a,{}),Object(m.jsxs)(E.a,{children:[Object(m.jsx)(Z.a,{children:Object(m.jsxs)(be.a,{variant:"contained",color:"primary",onClick:function(){return a(!0)},children:[Object(m.jsx)(Ce.a,{}),"Add a reservation"]})}),Object(m.jsxs)(Fe,{href:"/",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(J.a,{color:"primary"})}),Object(m.jsx)(V.a,{primary:"Home"})]}),Object(m.jsx)(R.a,{}),Object(m.jsxs)(Fe,{href:"/reservations",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(Q.a,{color:"primary"})}),Object(m.jsx)(V.a,{primary:"Reservations"})]}),Object(m.jsx)(R.a,{}),Object(m.jsx)(R.a,{}),Object(m.jsxs)(Fe,{href:"/statistics",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(oe.a,{color:"primary"})}),Object(m.jsx)(V.a,{primary:"Statistics"})]}),Object(m.jsx)(R.a,{}),Object(m.jsxs)(Fe,{href:"/payments",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(ee.a,{color:"primary"})}),Object(m.jsx)(V.a,{primary:"Payments"})]}),Object(m.jsx)(R.a,{}),Object(m.jsxs)(Fe,{href:"/trips-grid",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(re.a,{color:"primary"})}),Object(m.jsx)(V.a,{primary:"Trip Grid"})]}),Object(m.jsx)(R.a,{}),Object(m.jsxs)(Fe,{href:"/fares",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(ne.a,{color:"primary"})}),Object(m.jsx)(V.a,{primary:"Fares Grid"})]}),Object(m.jsx)(R.a,{}),Object(m.jsxs)(Fe,{href:"/trips",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(ie.a,{color:"primary"})}),Object(m.jsx)(V.a,{primary:"Trip Stops"})]}),Object(m.jsx)(R.a,{})]}),Object(m.jsx)(ke,{show:n,onHide:function(){return a(!1)}})]})]})}var Ae=n(109),Me=n(477),Ie=n(63),Le=Object(o.a)((function(e){return{root:{height:400,width:"100%",marginTop:80},button:{marginBottom:"10px"},filterBox:{margin:e.spacing(1),backgroundColor:"#ffcd38"},grid:{backgroundColor:"#008394"}}})),Ee=[{field:"fullname",headerName:"FULL NAME",description:"This column has a value",sortable:!1,width:160,valueGetter:function(e){return"".concat(e.row.firstName,"  ").concat(e.row.lastName)}},{field:"PhoneNumber",headerName:"PHONE #",width:130},{field:"Trip",headerName:"TRIP",width:170},{field:"Date",headerName:"DATE",width:160,valueGetter:function(e){return"".concat(e.row.Date.toDate())}},{field:"TravelTime",headerName:"TIME",width:110},{field:"Amount",headerName:"AMOUNT",width:110,valueGetter:function(e){return"".concat(e.row.Currency," ").concat(e.row.Amount)}},{field:"TicketID",headerName:"TICKET ID",width:180}];function Re(){var e,t,n,a,c=Le(),i=r.a.useState([]),o=Object(O.a)(i,2),l=o[0],d=o[1],j=r.a.useState([]),u=Object(O.a)(j,2),b=u[0],h=u[1],x=r.a.useState({route:"",trip:"",time:"",from:"",to:"",search:""}),f=Object(O.a)(x,2),v=f[0],g=f[1],w=p.firestore(),y=function(e,t){g(Object(s.a)(Object(s.a)({},v),{},Object(F.a)({},e,t))),("search"!==e||"search"===e&&(t.length>14||0===t.length))&&T(null,e,t)};r.a.useState((function(){(function(){var e=Object(B.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.collection("trips").get();case 2:t=e.sent,n=t.docs.map((function(e){return e.data()})),h(n),T(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var T=function(){var e=Object(B.a)(P.a.mark((function e(){var t,n,a,r,c,i,o,l,j,u,h,O,x,p,m,f,g,y,T,S=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=S.length>0&&void 0!==S[0]?S[0]:null,n=S.length>1&&void 0!==S[1]?S[1]:null,a=S.length>2&&void 0!==S[2]?S[2]:null,r=null===t?b:t,c=v.from,i=v.to,o=v.route,l=v.trip,j=v.time,u=v.search,e.t0=n,e.next="to"===e.t0?13:"from"===e.t0?15:"route"===e.t0?17:"trip"===e.t0?19:"time"===e.t0?21:"search"===e.t0?23:25;break;case 13:return i=a,e.abrupt("break",26);case 15:return c=a,e.abrupt("break",26);case 17:return o=a,e.abrupt("break",26);case 19:return l=a,e.abrupt("break",26);case 21:return j=a,e.abrupt("break",26);case 23:return u=a,e.abrupt("break",26);case 25:console.log("No data");case 26:return h=w.collection("reservations"),O=h.where("status","==","paid").orderBy("Date"),""!==o&&void 0!==r[o]&&(O=O.where("Trip","==",null===(x=r[o])||void 0===x?void 0:x.name),""!==l&&void 0!==r[o].possibleTrips[l]&&(m=r[o].possibleTrips[l].split("-"),O=O.where("TravellingFrom","==",m[0]).where("TravellingTo","==",m[1])),""!==j&&void 0!==r[o].times[j]&&(O=O.where("TravelTime","==",null===(p=r[o])||void 0===p?void 0:p.times[j]))),""!==c&&null!==c&&void 0!==c&&""!==i&&null!==i&&void 0!==i&&c.toDateString()===i.toDateString()?((f=Ie(c,"YYYY-MM-DD").toDate()).setDate(f.getDate()-1),(g=Ie(i,"YYYY-MM-DD").toDate()).setDate(g.getDate()+1),O=O.where("Date",">",f).where("Date","<",g)):(""!==c&&null!==c&&void 0!==c&&(O=O.where("Date",">=",Ie(c,"YYYY-MM-DD").toDate())),""!==i&&null!==i&&void 0!==i&&((y=Ie(i,"YYYY-MM-DD").toDate()).setDate(y.getDate()+1),O=O.where("Date","<",y))),""!==u&&void 0!==u&&(O=O.where("TicketID","==",u.toUpperCase().replace("X","x"))),e.next=33,O.get();case 33:if(T=e.sent,console.log(T.size),!T.empty){e.next=39;break}return console.log("No matching documents."),d([]),e.abrupt("return");case 39:d(T.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})})));case 40:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:c.root,children:[Object(m.jsx)("h3",{style:{marginBottom:20,color:"#fff"},children:"Ticket Reservation List"}),Object(m.jsx)("br",{}),Object(m.jsxs)(Me.a,{container:!0,className:c.filterBox,spacing:2,children:[Object(m.jsx)(Me.a,{item:!0,children:Object(m.jsx)(Me.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:v.route,onChange:function(e){return y("route",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===b||void 0===b?void 0:b.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e.name})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Route"})]})})}),Object(m.jsx)(Me.a,{item:!0,children:Object(m.jsx)(Me.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:v.trip,onChange:function(e){return y("trip",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===(e=b[v.route])||void 0===e||null===(t=e.possibleTrips)||void 0===t?void 0:t.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e.replace("-"," to ")})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Trip"})]})})}),Object(m.jsx)(Me.a,{item:!0,children:Object(m.jsx)(Me.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:v.time,onChange:function(e){return y("time",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===(n=b[v.route])||void 0===n||null===(a=n.times)||void 0===a?void 0:a.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Time"})]})})}),Object(m.jsx)(Me.a,{item:!0,children:Object(m.jsx)(Me.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsx)(we.a,{onChange:function(e){y("from",e)},value:v.from}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"From"})]})})}),Object(m.jsx)(Me.a,{item:!0,children:Object(m.jsx)(Me.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsx)(we.a,{onChange:function(e){y("to",e)},value:v.to}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"To"})]})})}),Object(m.jsx)(Me.a,{item:!0,children:Object(m.jsx)(Me.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsx)(pe.a,{id:"outlined-basic",placeholder:"Search...",value:v.search,required:!0,onChange:function(e){return y("search",e.target.value)},endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-search-bar-helper-text",inputProps:{"aria-label":"Ticket ID"}}),Object(m.jsx)(fe.a,{id:"standard-search-helper-text",children:"Search using Ticket ID"})]})})})]}),Object(m.jsx)(Ae.a,{className:c.grid,rows:l,columns:Ee})]})}function Ye(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(Re,{}),Object(m.jsx)(C,{})]})}var qe=n(63),ze=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",flexGrow:1},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},table:{width:"100%"},pricesContainer:{padding:e.spacing(1)},paper:{height:140,width:100},control:{padding:e.spacing(2)},fullWidth:{width:"100%",margin:e.spacing(.5)}}}));function He(e){var t=ze(),n=null;null!==e.values.trip&&null!==e.values.time&&(n=Object(m.jsxs)(xe.a.Footer,{children:[Object(m.jsxs)("p",{children:[Object(m.jsx)("b",{children:"Note:"})," Please click the save button after you have confirmed the information displayed above."]}),Object(m.jsx)(be.a,{onClick:e.handleSubmit,variant:"contained",color:"primary",className:t.button,children:"Save"})]}));var a=new Intl.NumberFormat("en-US",{style:"currency",currency:e.reservation.Currency});return Object(m.jsxs)(xe.a,Object(s.a)(Object(s.a)({},e),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",class:"modal",children:[Object(m.jsx)(xe.a.Header,{closeButton:!0,children:Object(m.jsx)(xe.a.Title,{id:"contained-modal-title-vcenter",children:"Confirm details"})}),Object(m.jsx)(xe.a.Body,{children:Object(m.jsx)("div",{className:t.root,children:Object(m.jsxs)(Me.a,{container:!0,className:t.root,spacing:2,children:[Object(m.jsx)(Me.a,{item:!0,lg:6,children:Object(m.jsxs)(Me.a,{container:!0,justify:"left",spacing:1,children:[Object(m.jsx)("h3",{children:"Ticket information"}),Object(m.jsxs)("table",{className:t.fullWidth,children:[Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Route:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.reservation.Trip})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Travelling from:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.reservation.TravellingFrom})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Travelling to:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.reservation.TravellingTo})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Date:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:qe(e.reservation.Date.toDate()).format("LL")})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Time (Leaves Bulawayo at):"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.reservation.TravelTime})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Amount:"})})}),Object(m.jsx)("tr",{children:Object(m.jsxs)("td",{children:[e.reservation.Currency,a.format(e.reservation.Amount).replace(e.reservation.Currency,"").replace("$","")]})})]})]})}),Object(m.jsx)(Me.a,{item:!0,xs:6,children:Object(m.jsxs)(Me.a,{container:!0,justify:"left",spacing:1,children:[Object(m.jsx)("h3",{children:"Personal information"}),Object(m.jsxs)("table",{className:t.fullWidth,children:[Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"First name:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.firstname})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Last name:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.lastname})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Email:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.email})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Phone number:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.phoneNumber})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Paid using:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.paymentMethod})})]})]})})]})})}),n]}))}var We=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",marginTop:80},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"}}}));function Ge(){var e=We(),t=Object(j.g)(),n=p.firestore(),a=Object(j.h)().id,c=r.a.useState(null),i=Object(O.a)(c,2),o=i[0],l=i[1],d=r.a.useState(!1),u=Object(O.a)(d,2),b=u[0],h=u[1],x=r.a.useState({email:null,paymentMethod:null,phoneNumber:null,firstname:null,lastname:null}),f=Object(O.a)(x,2),v=f[0],g=f[1];r.a.useEffect((function(){n.collection("reservations").doc(a).get().then((function(e){e.exists&&l(e.data())}))}),[]);var w=function(e){return function(t){g(Object(s.a)(Object(s.a)({},v),{},Object(F.a)({},e,t.target.value)))}};return null!==o?Object(m.jsxs)("div",{children:[Object(m.jsxs)("form",{className:e.root,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"New Reservation"}),Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-first-name",placeholder:"Andile",required:!0,value:v.firstname,onChange:w("firstname"),endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-first-name-helper-text",inputProps:{"aria-label":"First name"}}),Object(m.jsx)(fe.a,{id:"standard-first-name-helper-text",children:"First Name"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-last-name",placeholder:"Mbele",value:v.lastname,onChange:w("lastname"),required:!0,"aria-describedby":"standard-last-name-helper-text",inputProps:{"aria-label":"Last name"}}),Object(m.jsx)(fe.a,{id:"standard-last-name-helper-text",children:"Last Name"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-phone-number",placeholder:"0776869521",value:v.phoneNumber,required:!0,onChange:w("phoneNumber"),endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-phone-number-helper-text",inputProps:{"aria-label":"Phone Number"}}),Object(m.jsx)(fe.a,{id:"standard-weight-helper-text",children:"Phone Number"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-email",placeholder:"andile.m@outlook.com",value:v.email,required:!0,onChange:w("email"),endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-email-helper-text",inputProps:{"aria-label":"Email"}}),Object(m.jsx)(fe.a,{id:"standard-weight-helper-text",children:"Email Address"})]})]}),Object(m.jsxs)("div",{children:[Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:v.paymentMethod,onChange:w("paymentMethod"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),Object(m.jsx)("option",{children:"Swipe"}),Object(m.jsx)("option",{children:"Ecocash"}),Object(m.jsx)("option",{children:"One money"}),Object(m.jsx)("option",{children:"Telecash"}),Object(m.jsx)("option",{children:"Cash"}),Object(m.jsx)("option",{children:"Other"})]}),Object(m.jsx)(fe.a,{id:"standard-payment-method-helper-text",children:"Payment Method"})]}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)(be.a,{input:!0,type:"button",onClick:function(){null===v.firstname||null===v.lastname||null===v.paymentMethod||null===v.phoneNumber||null===v.email?alert("Please fill in all input fields."):h(!0)},variant:"contained",color:"primary",className:"submitButton",children:"Submit"})]})]}),Object(m.jsx)(He,{reservation:o,values:v,handleSubmit:function(){null===v.firstname||null===v.lastname||null===v.paymentMethod||null===v.phoneNumber||null===v.email?alert("Please fill in all input fields."):n.collection("reservations").doc(a).update({firstName:v.firstname,lastName:v.lastname,fullname:"".concat(v.firstname," ").concat(v.lastname),Email:v.email,PhoneNumber:v.phoneNumber,PaymentMethod:v.paymentMethod}).then((function(e){return t.push("/downloads/"+a+"/"+encodeURIComponent(o.TicketID))})).catch((function(e){return alert("An error occurred!")}))},show:b,onHide:function(){return h(!1)}})]}):Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"404"}),Object(m.jsx)("h2",{children:"Page not found!"})]})}function Ue(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(Ge,{}),Object(m.jsx)(C,{})]})}var Ze=n(490),Ke=n(487),Ve=n(480);function $e(){var e=r.a.useRef(),t=r.a.useRef(),n=g().login,a=r.a.useState(""),c=Object(O.a)(a,2),i=c[0],s=c[1],o=r.a.useState(!1),l=Object(O.a)(o,2),u=l[0],b=l[1],h=Object(j.g)();function x(){return(x=Object(B.a)(P.a.mark((function a(r){return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.prev=1,s(""),b(!0),a.next=6,n(e.current.value,t.current.value);case 6:h.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),s("Failed to log in.");case 12:b(!1);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))).apply(this,arguments)}return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(Ze.a,{className:"bg-dark text-white",children:[Object(m.jsxs)(Ze.a.Body,{children:[Object(m.jsx)("h4",{className:"text-center mb-4",children:"Extracity Login"}),i&&Object(m.jsx)(le.a,{variant:"danger",children:i}),Object(m.jsxs)(Ke.a,{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(m.jsxs)(Ke.a.Group,{id:"email",children:[Object(m.jsx)(Ke.a.Label,{children:"Email"}),Object(m.jsx)(Ke.a.Control,{type:"email",ref:e,required:!0})]}),Object(m.jsxs)(Ke.a.Group,{id:"password",children:[Object(m.jsx)(Ke.a.Label,{children:"Password"}),Object(m.jsx)(Ke.a.Control,{type:"password",ref:t,required:!0})]}),Object(m.jsx)(Ve.a,{disabled:u,type:"submit",className:"w-100",children:"Login"})]})]}),Object(m.jsxs)("div",{className:"w-100 text-center mt-2",children:["Forgot password? ",Object(m.jsx)(d.b,{to:"/reset-password",children:"Click here"})]})]})})}var Je=n(481);function Xe(){return Object(m.jsx)(Je.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"80vh"},children:Object(m.jsx)("div",{className:"w-100",style:{maxWidth:"350px",alignItems:"center"},children:Object(m.jsx)($e,{})})})}var Qe=n(24),_e=n(485),et=n(486),tt=n(479),nt=n(484),at=n(482),rt=n(439),ct=n(483),it=n(492),st=n(187),ot=n(194),lt=n(191),dt=n(434),jt=n(435),ut=n(151),bt=n.n(ut),ht=n(152),Ot=n.n(ht),xt=n(63),pt=n.n(xt);function mt(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function ft(e,t){return"desc"===e?function(e,n){return mt(e,n,t)}:function(e,n){return-mt(e,n,t)}}function vt(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var gt=[{id:"name",numeric:!1,disablePadding:!0,label:"TRIP"},{id:"from",numeric:!1,disablePadding:!0,label:"FROM"},{id:"to",numeric:!1,disablePadding:!0,label:"TO"},{id:"times",numeric:!1,disablePadding:!0,label:"TIMES"},{id:"stops",numeric:!1,disablePadding:!0,label:"STOPS"},{id:"date",numeric:!1,disablePadding:!0,label:"DATE"},{id:"actions",numeric:!1,disablePadding:!1,label:"ACTIONS"}];function wt(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,c=e.numSelected,i=e.rowCount,s=e.onRequestSort;return Object(m.jsx)(at.a,{children:Object(m.jsxs)(ct.a,{children:[Object(m.jsx)(tt.a,{padding:"checkbox",children:Object(m.jsx)(ot.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:n,inputProps:{"aria-label":"select all trips"}})}),gt.map((function(e){return Object(m.jsx)(tt.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&a,children:Object(m.jsxs)(it.a,{active:r===e.id,direction:r===e.id?a:"asc",onClick:(n=e.id,function(e){s(e,n)}),children:[e.label,r===e.id?Object(m.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var yt=Object(o.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"dark"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Qe.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Tt=function(e){var t=yt(),n=e.numSelected;return Object(m.jsxs)(k.a,{className:Object(A.a)(t.root,Object(F.a)({},t.highlight,n>0)),children:[n>0?Object(m.jsxs)(T.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(m.jsxs)(T.a,{className:t.title,variant:"h5",id:"tableTitle",component:"div",children:["Trips",Object(m.jsx)(d.b,{to:"/trips/add",children:Object(m.jsx)("button",{children:"Add"})})]}),n>0?Object(m.jsx)(lt.a,{title:"Delete",children:Object(m.jsx)(Y.a,{"aria-label":"delete",children:Object(m.jsx)(bt.a,{})})}):Object(m.jsx)(lt.a,{title:"Filter list",children:Object(m.jsx)(Y.a,{"aria-label":"filter list",children:Object(m.jsx)(Ot.a,{})})})]})},St=Object(o.a)((function(e){return{root:{width:"100%",marginTop:80},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750,width:"calc(100% - ".concat(300,"px)")},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function kt(){var e=St(),t=r.a.useState("asc"),n=Object(O.a)(t,2),a=n[0],c=n[1],i=r.a.useState("calories"),s=Object(O.a)(i,2),o=s[0],l=s[1],j=r.a.useState([]),u=Object(O.a)(j,2),b=u[0],h=u[1],x=r.a.useState(0),f=Object(O.a)(x,2),v=f[0],g=f[1],w=r.a.useState(!1),y=Object(O.a)(w,2),T=y[0],S=y[1],k=r.a.useState(10),N=Object(O.a)(k,2),C=N[0],D=N[1],F=r.a.useState([]),A=Object(O.a)(F,2),M=A[0],I=A[1];r.a.useEffect((function(){(function(){var e=Object(B.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.firestore(),e.next=3,t.collection("trips").get().then((function(e){return I(e.docs.map((function(e){return e})))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var L=C-Math.min(C,M.length-v*C);return Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsxs)(st.a,{className:e.paper,children:[Object(m.jsx)(Tt,{numSelected:b.length}),Object(m.jsx)(nt.a,{children:Object(m.jsxs)(_e.a,{className:e.table,"aria-labelledby":"tableTitle",size:T?"small":"medium","aria-label":"enhanced table",children:[Object(m.jsx)(wt,{classes:e,numSelected:b.length,order:a,orderBy:o,onSelectAllClick:function(e){if(e.target.checked){var t=M.map((function(e){return e.name}));h(t)}else h([])},onRequestSort:function(e,t){c(o===t&&"asc"===a?"desc":"asc"),l(t)},rowCount:M.length}),Object(m.jsxs)(et.a,{children:[vt(M,ft(a,o)).slice(v*C,v*C+C).map((function(e,t){var n,a=e.data(),r=(n=a.id,-1!==b.indexOf(n)),c="enhanced-table-checkbox-".concat(t),i="/trips/".concat(e.id,"/stops");return Object(m.jsxs)(ct.a,{hover:!0,onClick:function(e){return function(e,t){var n=b.indexOf(t),a=[];-1===n?a=a.concat(b,t):0===n?a=a.concat(b.slice(1)):n===b.length-1?a=a.concat(b.slice(0,-1)):n>0&&(a=a.concat(b.slice(0,n),b.slice(n+1))),h(a)}(0,a.id)},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:[Object(m.jsx)(tt.a,{padding:"checkbox",children:Object(m.jsx)(ot.a,{checked:r,inputProps:{"aria-labelledby":c}})}),Object(m.jsx)(tt.a,{component:"th",id:c,scope:"row",padding:"none",children:a.name}),Object(m.jsx)(tt.a,{align:"right",children:a.from}),Object(m.jsx)(tt.a,{align:"right",children:a.to}),Object(m.jsx)(tt.a,{align:"right",children:a.times.join(", ")}),Object(m.jsx)(tt.a,{align:"right",children:Nt(a.stops)}),Object(m.jsx)(tt.a,{align:"right",children:pt()(a.date.toDate(),"YYYY-MM-DD").format("LLL")}),Object(m.jsx)(tt.a,{align:"right",children:Object(m.jsx)(d.b,{to:i,children:Object(m.jsx)("button",{children:"Stops"})})})]},a.id)})),L>0&&Object(m.jsx)(ct.a,{style:{height:(T?33:53)*L},children:Object(m.jsx)(tt.a,{colSpan:11})})]})]})}),Object(m.jsx)(rt.a,{rowsPerPageOptions:[5,10,20],component:"div",count:M.length,rowsPerPage:C,page:v,onChangePage:function(e,t){g(t)},onChangeRowsPerPage:function(e){D(parseInt(e.target.value,10)),g(0)}})]}),Object(m.jsx)(dt.a,{control:Object(m.jsx)(jt.a,{checked:T,onChange:function(e){S(e.target.checked)}}),label:"Dense padding"})]})}function Nt(e){if(void 0===e||null===e)return"";var t=new Map(Object.entries(e)),n=[];return t.forEach((function(e){n.push(e.name)})),n.join(", ")}function Ct(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(kt,{}),Object(m.jsx)(C,{})]})}var Dt=n(250),Pt=Object(o.a)((function(e){return{root:{marginTop:80}}}));function Ft(e){for(var t=Pt(),n=[],a=0;a<2400;a+=100)for(var r=0;r<60;r+=15){var c="";0===a?c="00":a<1e3&&(c="0"),(c+=a+r).length<4&&(c="0".concat(c)),n.push({label:c,value:c})}return console.log(n),Object(m.jsx)("div",{className:t.root,children:Object(m.jsx)(Dt.a,{options:n,value:e.times,onChange:function(t){return e.setTimes(t)},labelledBy:"Select"})})}var Bt=n(168).uuid,At=Object(o.a)((function(e){return{root:{marginTop:80}}}));function Mt(e){var t=At(),n=Object(j.g)(),r=p.firestore(),c=Object(a.useState)(),i=Object(O.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(),d=Object(O.a)(l,2),u=d[0],b=d[1],h=Object(a.useState)(),x=Object(O.a)(h,2),f=x[0],v=x[1],g=Object(a.useState)([]),w=Object(O.a)(g,2),y=w[0],T=w[1],S=Object(a.useState)(0),k=Object(O.a)(S,2),N=k[0],C=k[1];return Object(m.jsxs)("form",{onSubmit:function(e){!function(e){if(e.preventDefault(),void 0===s||""===s||void 0===N||""===N||void 0===u||""===u||void 0===f||""===f||void 0===y||0===y.length)alert("Please fill in all input fields!");else{var t=Bt();r.collection("trips").add({id:t,name:s,to:u,from:f,seats:parseInt(N),times:y.map((function(e){return console.log(e),e.value})),date:new Date}).then((function(e){return n.push("/trips/"+e.id+"/stops")})).catch((function(e){return alert("An error occurred!")}))}}(e)},className:t.root,children:[Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Trip name"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"name",type:"text",value:s,required:!0,onChange:function(e){return o(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"From"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"from",type:"text",value:f,required:!0,onChange:function(e){return v(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"To"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"to",type:"text",value:u,required:!0,onChange:function(e){return b(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Number of seats"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"seats",type:"number",value:N,required:!0,onChange:function(e){return C(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Departure times"}),Object(m.jsx)("br",{}),Object(m.jsx)(Ft,{setTimes:T,times:y}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"submitButton",type:"submit",value:"Save"})]})}function It(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(Mt,{}),Object(m.jsx)(C,{})]})}function Lt(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Et(e,t){return"desc"===e?function(e,n){return Lt(e,n,t)}:function(e,n){return-Lt(e,n,t)}}function Rt(e,t){var n=null===e||void 0===e?void 0:e.map((function(e,t){return[e,t]}));return null===n||void 0===n||n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),null===n||void 0===n?void 0:n.map((function(e){return e[0]}))}var Yt=[{id:"name",numeric:!1,disablePadding:!0,label:"STOP"},{id:"times",numeric:!0,disablePadding:!0,label:"TIMES"},{id:"date",numeric:!0,disablePadding:!1,label:"DATE"}];function qt(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,c=e.numSelected,i=e.rowCount,s=e.onRequestSort;return Object(m.jsx)(at.a,{className:t.root,children:Object(m.jsxs)(ct.a,{children:[Object(m.jsx)(tt.a,{padding:"checkbox",children:Object(m.jsx)(ot.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:n,inputProps:{"aria-label":"select all trips"}})}),Yt.map((function(e){return Object(m.jsx)(tt.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&a,children:Object(m.jsxs)(it.a,{active:r===e.id,direction:r===e.id?a:"asc",onClick:(n=e.id,function(e){s(e,n)}),children:[e.label,r===e.id?Object(m.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var zt=Object(o.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"dark"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Qe.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Ht=function(e){var t=Object(j.h)().id,n=zt(),a=e.numSelected,r="/trips/".concat(t,"/stops/add");return Object(m.jsxs)(k.a,{className:Object(A.a)(n.root,Object(F.a)({},n.highlight,a>0)),children:[a>0?Object(m.jsxs)(T.a,{className:n.title,color:"inherit",variant:"subtitle1",component:"div",children:[a," selected"]}):Object(m.jsxs)(T.a,{className:n.title,variant:"h5",id:"tableTitle",component:"div",children:["Stops",Object(m.jsx)(d.b,{to:r,children:Object(m.jsx)("button",{children:"Add"})})]}),a>0?Object(m.jsx)(lt.a,{title:"Delete",children:Object(m.jsx)(Y.a,{"aria-label":"delete",children:Object(m.jsx)(bt.a,{})})}):Object(m.jsx)(lt.a,{title:"Filter list",children:Object(m.jsx)(Y.a,{"aria-label":"filter list",children:Object(m.jsx)(Ot.a,{})})})]})},Wt=Object(o.a)((function(e){return{root:{width:"100%",marginTop:80},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750,width:"calc(100% - ".concat(300,"px)")},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Gt(e){var t,n,a,c,i=Wt(),s=r.a.useState("asc"),o=Object(O.a)(s,2),l=o[0],d=o[1],j=r.a.useState("calories"),u=Object(O.a)(j,2),b=u[0],h=u[1],x=r.a.useState([]),p=Object(O.a)(x,2),f=p[0],v=p[1],g=r.a.useState(0),w=Object(O.a)(g,2),y=w[0],T=w[1],S=r.a.useState(!1),k=Object(O.a)(S,2),N=k[0],C=k[1],D=r.a.useState(10),P=Object(O.a)(D,2),F=P[0],B=P[1],A=F-Math.min(F,(null===(t=e.trip.stops)||void 0===t?void 0:t.length)-y*F);return Object(m.jsxs)("div",{className:i.root,children:[Object(m.jsxs)(st.a,{className:i.paper,children:[Object(m.jsx)(Ht,{numSelected:null===f||void 0===f?void 0:f.length}),Object(m.jsx)(nt.a,{children:Object(m.jsxs)(_e.a,{className:i.table,"aria-labelledby":"tableTitle",size:N?"small":"medium","aria-label":"enhanced table",children:[Object(m.jsx)(qt,{classes:i,numSelected:null===f||void 0===f?void 0:f.length,order:l,orderBy:b,onSelectAllClick:function(t){if(t.target.checked){var n,a=null===(n=e.trip.stops)||void 0===n?void 0:n.map((function(e){return e.name}));v(a)}else v([])},onRequestSort:function(e,t){d(b===t&&"asc"===l?"desc":"asc"),h(t)},rowCount:null===(n=e.trip.stops)||void 0===n?void 0:n.length}),Object(m.jsxs)(et.a,{children:[null===(a=Rt(void 0===e.trip.stops||null===e.trip.stops?[]:Array.from(new Map(Object.entries(e.trip.stops)).values()),Et(l,b)))||void 0===a?void 0:a.slice(y*F,y*F+F).map((function(e,t){var n,a=(n=e.id,-1!==f.indexOf(n)),r="enhanced-table-checkbox-".concat(t);return e=new Map(Object.entries(e)),Object(m.jsxs)(ct.a,{hover:!0,onClick:function(t){return function(e,t){var n=f.indexOf(t),a=[];-1===n?a=a.concat(f,t):0===n?a=a.concat(f.slice(1)):n===(null===f||void 0===f?void 0:f.length)-1?a=a.concat(f.slice(0,-1)):n>0&&(a=a.concat(f.slice(0,n),f.slice(n+1))),v(a)}(0,e.id)},role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(m.jsx)(tt.a,{padding:"checkbox",children:Object(m.jsx)(ot.a,{checked:a,inputProps:{"aria-labelledby":r}})}),Object(m.jsx)(tt.a,{component:"th",id:r,scope:"row",padding:"none",children:e.get("name")}),Object(m.jsx)(tt.a,{align:"right",children:Ut(e.get("times"))}),Object(m.jsx)(tt.a,{align:"right",children:pt()(e.get("date").toDate(),"YYYY-MM-DD").format("LLL")})]},e.get("id"))})),A>0&&Object(m.jsx)(ct.a,{style:{height:(N?33:53)*A},children:Object(m.jsx)(tt.a,{colSpan:11})})]})]})}),Object(m.jsx)(rt.a,{rowsPerPageOptions:[5,10,20],component:"div",count:null===(c=e.trip.stops)||void 0===c?void 0:c.length,rowsPerPage:F,page:y,onChangePage:function(e,t){T(t)},onChangeRowsPerPage:function(e){B(parseInt(e.target.value,10)),T(0)}})]}),Object(m.jsx)(dt.a,{control:Object(m.jsx)(jt.a,{checked:N,onChange:function(e){C(e.target.checked)}}),label:"Dense padding"})]})}function Ut(e){if(void 0===e||null===e)return"";var t=new Map(Object.entries(e)),n=[];return t.forEach((function(e){n.push(e)})),n.join(", ")}function Zt(){var e,t=Object(j.h)().id,n=r.a.useState(),a=Object(O.a)(n,2),c=a[0],i=a[1];return r.a.useEffect((function(){p.firestore().collection("trips").doc(t).get().then((function(e){console.log(e),e.exists&&i(e.data())}))}),[]),void 0!==c&&null!==c?(void 0!==c.stops&&null!==c.stops||(c.stops=[]),e=Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:c.name}),Object(m.jsx)(Gt,{trip:c})]})):e=Object(m.jsx)("h1",{children:"Trip not found!"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{}),e,Object(m.jsx)(C,{})]})}var Kt=n(168).uuid,Vt=Object(o.a)((function(e){return{root:{marginTop:80}}}));function $t(e){var t=Vt(),n=Object(j.g)(),r=p.firestore(),c=Object(a.useState)(),i=Object(O.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(new Map),d=Object(O.a)(l,2),u=d[0],b=d[1];return Object(m.jsxs)("form",{onSubmit:function(t){!function(t){if(t.preventDefault(),void 0===s||""===s||void 0===u||0===u.length)alert("Please fill in all input fields!");else{var a,c,i,o,l=Kt(),d=null!==(a=null===(c=e.trip)||void 0===c?void 0:c.stops)&&void 0!==a?a:{};d[s]={id:l,name:s,times:Object.fromEntries(u),date:new Date};for(var j=Array.from(new Map(Object.entries(d)).values()),b=["".concat(null===(i=e.trip)||void 0===i?void 0:i.from,"-").concat(null===(o=e.trip)||void 0===o?void 0:o.to)],h=j.map((function(t){var n;return"".concat(null===(n=e.trip)||void 0===n?void 0:n.from,"-").concat(t.name)})),O=[],x=0;x<j.length;x++){var p;if(O.push("".concat(j[x].name,"-").concat(null===(p=e.trip)||void 0===p?void 0:p.to)),x<j.length-1)for(var m=x+1;m<j.length;m++)O.push("".concat(j[x].name,"-").concat(j[m].name))}var f=b.concat(h,O);r.collection("trips").doc(e.docID).update({stops:d,possibleTrips:f}).then((function(t){return n.push("/trips/"+e.docID+"/stops")})).catch((function(e){alert("An error occurred!"),console.log(e)}))}}(t)},className:t.root,children:[Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"City or town name"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"name",type:"text",value:s,required:!0,onChange:function(e){return o(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Times"}),Object(m.jsx)("br",{}),Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsxs)("th",{children:["Leaves ",e.trip.from," at"]}),Object(m.jsx)("th",{children:"Leaves this stop at"})]}),e.trip.times.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{name:"to",type:"number",onChange:function(t){u.delete(e),b(u.set(e,t.target.value))}})})]})}))]}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"submitButton",type:"submit",value:"Save"})]})}function Jt(){var e,t=Object(j.h)().id,n=r.a.useState(),a=Object(O.a)(n,2),c=a[0],i=a[1],s=r.a.useState(),o=Object(O.a)(s,2),l=o[0],d=o[1];return r.a.useEffect((function(){p.firestore().collection("trips").doc(t).get().then((function(e){console.log(e),e.exists&&(i(e.data()),d(e.id))}))}),[]),e=void 0!==c&&null!==c?Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:c.name}),Object(m.jsx)($t,{trip:c,docID:l})]}):Object(m.jsx)("h1",{children:"Trip not found!"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{}),e,Object(m.jsx)(C,{})]})}var Xt=n(168).uuid,Qt=Object(o.a)((function(e){return{root:{marginTop:80}}}));function _t(e){var t=Qt(),n=Object(j.g)(),r=p.firestore(),c=Object(a.useState)(),i=Object(O.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(),d=Object(O.a)(l,2),u=d[0],b=d[1],h=Object(a.useState)(new Map),x=Object(O.a)(h,2),f=x[0],v=(x[1],function(e,t){f.delete(e),f.set(e,t)});return Object(m.jsxs)("form",{onSubmit:function(e){!function(e){if(e.preventDefault(),void 0===s||""===s||void 0===u||""===u||void 0===f||0===f.length)alert("Please fill in all input fields!");else{var t=Xt(),a=["".concat(s,"-").concat(u),"".concat(u,"-").concat(s)],c=[s,u];r.collection("fares").add({id:t,to:s,from:u,prices:Object.fromEntries(f),possibleTrips:a,cities:c,date:new Date}).then((function(e){return n.push("/fares")})).catch((function(e){return alert("An error occurred!")}))}}(e)},className:t.root,children:[Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"From"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"from",type:"text",value:u,required:!0,onChange:function(e){return b(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"To"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"to",type:"text",value:s,required:!0,onChange:function(e){return o(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Fares"}),Object(m.jsx)("br",{}),Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Currency"}),Object(m.jsx)("th",{children:"Price"})]})}),Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"USD"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{name:"to",type:"text",onChange:function(e){return v("USD",e.target.value)}})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"ZWL"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{name:"to",type:"text",onChange:function(e){return v("ZWL",e.target.value)}})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"ZAR"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{name:"to",type:"text",onChange:function(e){return v("ZAR",e.target.value)}})})]})]})]}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"submitButton",type:"submit",value:"Save"})]})}function en(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(_t,{}),Object(m.jsx)(C,{})]})}var tn=Object(o.a)((function(e){return{root:{marginTop:80},drawerHeader:Object(s.a)(Object(s.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"})}}));function nn(){var e=tn();return Object(m.jsx)("div",{className:e.root,children:Object(m.jsx)(Re,{})})}function an(){return Object(m.jsxs)(Je.a,{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(nn,{}),Object(m.jsx)(C,{})]})}n(314);var rn=n(16),cn=n(153);function sn(){var e=a.useState([]),t=Object(O.a)(e,2),n=t[0],r=t[1],c=a.useState([]),i=Object(O.a)(c,2),s=i[0],o=i[1];a.useEffect((function(){(function(){var e=Object(B.a)(P.a.mark((function e(){var t,n,a,c,i,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=x.a.firestore(),n=[],a=6;a>=0;a--)c=(new pt.a).subtract(a,"days"),n.push(c.format("ddd")),(i=new Date).setDate(i.getDate()-a-1),(s=new Date).setDate(s.getDate()-a),t.collection("reservations").where("BookingTime",">",i).where("BookingTime","<",s).get().then((function(e){r((function(t){return[].concat(Object(rn.a)(t),[e.size])}))}));o(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var l={labels:s,datasets:[{label:"No. of reservations",fill:!1,backgroundColor:"#b71c1c",borderColor:"#b71c1c",data:n,borderWidth:1,pointRadius:0}]};return Object(m.jsx)(cn.a,{height:200,data:l,style:{backgroundColor:"#003c6c"},options:{responsive:!0,title:{display:!0,text:"Activity for the past 7 days",fontSize:17,fontColor:"#5f0937",padding:10},legend:{display:!0,position:"right"},scales:{yAxes:[{ticks:{fontColor:"white",beginAtZero:!0,stepSize:1}}],xAxes:[{ticks:{fontColor:"white"}}]}}})}function on(){var e=r.a.useState([]),t=Object(O.a)(e,2),n=(t[0],t[1]),a=r.a.useState([]),c=Object(O.a)(a,2),i=c[0],s=c[1],o=r.a.useState([]),l=Object(O.a)(o,2),d=l[0],j=l[1],u=r.a.useState([]),b=Object(O.a)(u,2),h=b[0],p=b[1],f=r.a.useState([]),v=Object(O.a)(f,2),g=v[0],w=v[1],y=r.a.useState([]),T=Object(O.a)(y,2),S=T[0],k=T[1],N=r.a.useState([]),C=Object(O.a)(N,2),D=C[0],F=C[1],A=r.a.useState([]),M=Object(O.a)(A,2),I=M[0],L=M[1],E=r.a.useState([]),R=Object(O.a)(E,2),Y=R[0],q=R[1],z=r.a.useState([]),H=Object(O.a)(z,2),W=H[0],G=H[1];r.a.useEffect((function(){(function(){var e=Object(B.a)(P.a.mark((function e(){var t,a,r,c,i,o,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=x.a.firestore(),a=[],r=function(){i=(new pt.a).subtract(c,"days"),a.push(i.format("ddd")),(o=new Date).setDate(o.getDate()-c-1),(l=new Date).setDate(l.getDate()-c);var e=0;t.collection("reservations").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(t){e+=t.size,n((function(t){return[].concat(Object(rn.a)(t),[e])}))}),[]);var r=0;t.collection("reservations").where("TravellingFrom","==","Bulawayo").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){r+=e.size,s((function(e){return[].concat(Object(rn.a)(e),[r])}))}),[]);var d=0;t.collection("reservations").where("TravellingFrom","==","Harare").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){d+=e.size,j((function(e){return[].concat(Object(rn.a)(e),[d])}))}),[]);var u=0;t.collection("reservations").where("TravellingFrom","==","Victoria Falls").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){u+=e.size,p((function(e){return[].concat(Object(rn.a)(e),[u])}))}),[]);var b=0;t.collection("reservations").where("TravellingFrom","==","Gweru").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){b+=e.size,w((function(e){return[].concat(Object(rn.a)(e),[b])}))}),[]);var h=0;t.collection("reservations").where("TravellingFrom","==","Kwekwe").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){h+=e.size,L((function(e){return[].concat(Object(rn.a)(e),[h])}))}),[]);var O=0;t.collection("reservations").where("TravellingFrom","==","Kadoma").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){O+=e.size,k((function(e){return[].concat(Object(rn.a)(e),[O])}))}),[]);var x=0;t.collection("reservations").where("TravellingFrom","==","Chegutu").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){x+=e.size,F((function(e){return[].concat(Object(rn.a)(e),[x])}))}),[]);var m=0;t.collection("reservations").where("TravellingFrom","==","Hwange").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){m+=e.size,q((function(e){return[].concat(Object(rn.a)(e),[m])}))}),[])},c=6;c>=0;c--)r();G(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var U={labels:W,datasets:[{label:"Bulawayo",data:i,fill:!1,borderColor:"#33eaff"},{label:"Harare",data:d,fill:!1,borderColor:"#f50057"},{label:"Victoria Falls",data:h,fill:!1,borderColor:"#ff5722"},{label:"Gweru",data:g,fill:!1,borderColor:"#2196f3"},{label:"Kwekwe",data:I,fill:!1,borderColor:"#ffea00"},{label:"Kadoma",data:S,fill:!1,borderColor:"#00a152"},{label:"Chegutu",data:D,fill:!1,borderColor:"#4615b2"},{label:"Hwange",data:Y,fill:!1,borderColor:"#fff"}]};return Object(m.jsx)(cn.a,{height:200,data:U,style:{backgroundColor:"#003c6c",fontColor:"#fff"},options:{responsive:!0,title:{display:!0,text:"Activity for the past 7 days",fontSize:17,color:"#fff",padding:10},legend:{display:!1,position:"right",color:"#fff"},scales:{yAxes:[{ticks:{color:"white",beginAtZero:!0,stepSize:1}}],xAxes:[{ticks:{color:"white"}}]}}})}var ln=Object(o.a)((function(e){return{root:{marginTop:80}}}));function dn(){var e=ln();return Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)("h2",{children:"Statistics"}),Object(m.jsx)(sn,{}),Object(m.jsx)("hr",{}),Object(m.jsx)(on,{})]})}function jn(){return Object(m.jsxs)(l.a,{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(dn,{}),Object(m.jsx)(C,{})]})}var un=Object(o.a)((function(e){return{root:{marginTop:80}}}));function bn(){var e=un();return Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)("h2",{children:"Payments"}),Object(m.jsx)("p",{children:"Some payments data is coming here..."})]})}function hn(){return Object(m.jsxs)(l.a,{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(bn,{}),Object(m.jsx)(C,{})]})}var On=Object(o.a)((function(e){return{root:{height:400,width:"100%",marginTop:80},button:{marginBottom:"10px"},filterBox:{margin:e.spacing(1)},grid:{backgroundColor:"#008394"}}})),xn=[{field:"from",headerName:"FROM",width:130,sortable:!0},{field:"to",headerName:"TO",width:130,sortable:!0},{field:"prices",headerName:"PRICES",width:200,sortable:!0,valueGetter:function(e){return"$".concat(e.row.prices.USD,", ZAR").concat(e.row.prices.ZAR,", ZWL$").concat(e.row.prices.ZWL)}},{field:"date",headerName:"DATE",width:160,valueGetter:function(e){return"".concat(e.row.date.toDate())}}];function pn(){var e=On(),t=r.a.useState([]),n=Object(O.a)(t,2),a=n[0],c=n[1],i=r.a.useState([]),o=Object(O.a)(i,2),l=o[0],d=o[1],j=r.a.useState({from:"",to:""}),u=Object(O.a)(j,2),b=u[0],h=u[1],x=function(e,t){h(Object(s.a)(Object(s.a)({},b),{},Object(F.a)({},e,t))),f(e,t)},f=function(){var e=Object(B.a)(P.a.mark((function e(t,n){var a,r,i,o,j,u;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.firestore(),r=a.collection("fares"),i=[],o=b.from,j=b.to,"from"===t?o=n:"to"===t&&(j=n),(""!==o&&void 0!==o||""!==j&&void 0!==j)&&(r=""!==o&&void 0!==o&&""!==j&&void 0!==j?r.where("possibleTrips","array-contains","".concat(l[o],"-").concat(l[j])):""===o||void 0===o?r.where("cities","array-contains",l[j]):r.where("cities","array-contains",l[o])),e.next=9,r.get();case 9:u=e.sent,c(u.docs.map((function(e){var t=e.data();return 0===l.length&&-1===i.indexOf(t.from)&&i.push(t.from),0===l.length&&-1===i.indexOf(t.to)&&i.push(t.to),Object(s.a)(Object(s.a)({},t),{},{id:e.id})}))),0===l.length&&d(i);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return r.a.useState((function(){f()}),[]),Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)("h3",{style:{marginBottom:20},children:"Fares"}),Object(m.jsx)(be.a,{variant:"contained",color:"primary",href:"/fares/add",className:e.button,children:"Add Fare"}),Object(m.jsx)("br",{}),Object(m.jsxs)(Me.a,{container:!0,className:e.filterBox,spacing:2,children:[Object(m.jsx)(Me.a,{item:!0,children:Object(m.jsx)(Me.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:b.from,onChange:function(e){return x("from",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===l||void 0===l?void 0:l.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"From"})]})})}),Object(m.jsx)(Me.a,{item:!0,children:Object(m.jsx)(Me.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:b.to,onChange:function(e){return x("to",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===l||void 0===l?void 0:l.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"To"})]})})})]}),Object(m.jsx)(Ae.a,{className:e.grid,rows:a,columns:xn})]})}function mn(){return Object(m.jsxs)(l.a,{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(pn,{}),Object(m.jsx)(C,{})]})}var fn=Object(o.a)((function(e){return{root:{height:400,width:"100%",marginTop:80},button:{marginBottom:10},grid:{backgroundColor:"#008394"}}}));var vn=[{field:"trip",headerName:"TRIP",width:200,sortable:!0,valueGetter:function(e){return"".concat(e.row.from," to ").concat(e.row.to)}},{field:"from",headerName:"FROM",width:130,sortable:!0},{field:"to",headerName:"TO",width:130,sortable:!0},{field:"times",headerName:"TIMES",width:160},{field:"stops",headerName:"STOPS",width:200,valueGetter:function(e){return"".concat(function(e){if(void 0===e||null===e)return[];var t=new Map(Object.entries(e)),n=[];return t.forEach((function(e){n.push(e.name)})),n}(e.row.stops))}},{field:"date",headerName:"DATE",width:160,valueGetter:function(e){return"".concat(e.row.date.toDate())}},{field:"",headerName:"ACTION",width:160,valueGetter:function(e){return"".concat(e.row.Button)}}];function gn(){var e=fn(),t=r.a.useState([]),n=Object(O.a)(t,2),a=n[0],c=n[1];return r.a.useState((function(){(function(){var e=Object(B.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.firestore(),e.next=3,t.collection("trips").get();case 3:n=e.sent,c(n.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)("h3",{style:{marginBottom:20},children:"Trips"}),Object(m.jsx)(be.a,{variant:"contained",color:"primary",href:"/fares/add",className:e.button,children:"Add Fare"}),Object(m.jsx)(Ae.a,{className:e.grid,rows:a,columns:vn})]})}function wn(){return Object(m.jsxs)(l.a,{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(gn,{}),Object(m.jsx)(C,{})]})}var yn=Object(u.a)({palette:{primary:{main:"#ff3d00",dark:"#002884",contrastText:"#fff",light:"#757ce8"},secondary:{light:"#ff7961",main:"#ff4569",dark:"#ba000d",contrastText:"#000"},body:{maxWidth:"100%",backgroundColor:"#34495E",fontFamily:"Roboto"}}}),Tn=Object(o.a)((function(e){return{root:Object(s.a)(Object(s.a)({fontSize:13,width:"100%"},e.mixins.toolbar),{},{justifyContent:"flex-end"})}}));var Sn=function(){var e=Tn();return Object(m.jsx)(w,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(j.d,{children:Object(m.jsx)(l.a,{children:Object(m.jsxs)(b.a,{theme:yn,children:[Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)(y,{exact:!0,path:"/",component:an}),Object(m.jsx)(y,{exact:!0,path:"/reservations",component:Ye}),Object(m.jsx)(y,{exact:!0,path:"/reservations/:id/add",component:Ue}),Object(m.jsx)(y,{exact:!0,path:"/trips",component:Ct}),Object(m.jsx)(y,{exact:!0,path:"/trips-grid",component:wn}),Object(m.jsx)(y,{exact:!0,path:"/trips/add",component:It}),Object(m.jsx)(y,{exact:!0,path:"/trips/:id/stops",component:Zt}),Object(m.jsx)(y,{exact:!0,path:"/trips/:id/stops/add",component:Jt}),Object(m.jsx)(y,{exact:!0,path:"/fares",component:mn}),Object(m.jsx)(y,{exact:!0,path:"/fares/add",component:en}),Object(m.jsx)(y,{exact:!0,path:"/statistics",component:jn}),Object(m.jsx)(y,{exact:!0,path:"/payments",component:hn}),Object(m.jsx)(y,{path:"/downloads/:id/:ticketID",component:function(e){return window.open("https://extracitywebhook.herokuapp.com/downloads/"+encodeURIComponent(e.match.params.ticketID)+"/"+encodeURIComponent(e.match.params.id),"_blank"),window.location.href="/reservations/"}})]}),Object(m.jsx)("div",{children:Object(m.jsx)(j.b,{exact:!0,path:"/login",component:Xe})})]})})})})})};i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(Sn,{})}),document.getElementById("root"))}},[[420,1,2]]]);
//# sourceMappingURL=main.d0820dbe.chunk.js.map