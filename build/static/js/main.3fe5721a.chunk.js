(this["webpackJsonpextracity-admin-dashboard"]=this["webpackJsonpextracity-admin-dashboard"]||[]).push([[0],{295:function(e,t,n){},435:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(24),i=n.n(c),s=(n(294),n(14)),o=(n(295),n(60)),l=n(487),d=n(42),j=n(36),b=n(110),u=n(495),h=n(261),O=n(8),x=n(84);x.a.initializeApp({apiKey:"AIzaSyAZE0XhUYOfAnZkHx9mV2R56xIFrpfBko0",authDomain:"extracitywebhook.firebaseapp.com",databaseURL:"https://extracitywebhook.firebaseio.com",projectId:"extracitywebhook",storageBucket:"extracitywebhook.appspot.com",messagingSenderId:"1092492776927",appId:"1:1092492776927:web:51c38326a035e8722e606a"});var p=x.a,m=n(1),f=p.auth(),v=r.a.createContext();function g(){return r.a.useContext(v)}function w(e){var t=e.children,n=r.a.useState(),a=Object(O.a)(n,2),c=a[0],i=a[1],s=r.a.useState(!0),o=Object(O.a)(s,2),l=o[0],d=o[1];r.a.useEffect((function(){return f.onAuthStateChanged((function(e){i(e),d(!1)}))}),[]);var j={currentUser:c,login:function(e,t){return f.signInWithEmailAndPassword(e,t)},logout:function(){return f.signOut()}};return Object(m.jsx)(v.Provider,{value:j,children:!l&&t})}function y(e){var t=e.component,n=Object(h.a)(e,["component"]),a=g().currentUser;return Object(m.jsx)(j.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){return a?Object(m.jsx)(t,Object(s.a)({},e)):Object(m.jsx)(j.a,{to:"/login"})}}))}var S=n(104),T=n(486),k=n(488),N=Object(o.a)((function(e){return{root:{flexGrow:1,marginTop:"15%",marginBottom:"10px",backgroundColor:"#ad1457"}}}));function C(){var e=N();return Object(m.jsx)(T.a,{className:e.root,position:"relative",color:"primary",children:Object(m.jsx)(l.a,{maxWidth:"sm",children:Object(m.jsx)(k.a,{children:Object(m.jsxs)(S.a,{variant:"body1",color:"inherit",children:["First Source Technology ",(new Date).getFullYear()]})})})})}var D=n(28),P=n.n(D),M=n(21),B=n(40),A=n(6),F=n(43),L=n(508),I=n(490),R=n(446),E=n(492),Y=n(106),z=n(242),q=n.n(z),W=n(244),H=n.n(W),U=n(245),G=n.n(U),Z=n(443),K=n(447),V=n(493),J=n(247),$=n.n(J),X=n(248),Q=n.n(X),_=n(250),ee=n.n(_),te=n(252),ne=n.n(te),ae=n(251),re=n.n(ae),ce=n(253),ie=n.n(ce),se=n(249),oe=n.n(se),le=n(507),de=n(491),je=n(243),be=n.n(je),ue=n(105),he=n(262),Oe=n(94),xe=n(38),pe=n(442),me=n(489),fe=n(441),ve=n(116),ge=n(128),we=n.n(ge),ye=n(51),Se=n(235).v4,Te=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"},table:{width:"100%"},pricesContainer:{padding:e.spacing(1)}}}));function ke(e){var t=p.firestore(),n=Te(),a=r.a.useState(null),c=Object(O.a)(a,2),i=c[0],o=c[1],l=r.a.useState({seats:null,error:""}),d=Object(O.a)(l,2),b=d[0],u=d[1],h=Object(j.g)(),x=r.a.useState(new Date),f=Object(O.a)(x,2),v=f[0],g=f[1],w=r.a.useState({time:null,trip:null,route:null,paymentReference:null,currency:null}),y=Object(O.a)(w,2),S=y[0],T=y[1],k=r.a.useState([]),N=Object(O.a)(k,2),C=N[0],D=N[1];r.a.useEffect((function(){(function(){var e=Object(B.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection("trips").get();case 2:n=e.sent,D(n.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var F=function(e){return function(n){if("trip"===e){var a,r=null===(a=C[S.route])||void 0===a?void 0:a.possibleTrips[n.target.value];void 0!==r?t.collection("fares").where("possibleTrips","array-contains",r).limit(1).get().then((function(t){0===t.size?(o(null),T(Object(s.a)(Object(s.a)({},S),{},Object(M.a)({},e,null))),alert("Sorry the trip you selected does not have a fare associated with it, please select another one!")):(T(Object(s.a)(Object(s.a)({},S),{},Object(M.a)({},e,n.target.value))),o(t.docs[0].data()))})):(o(null),T(Object(s.a)(Object(s.a)({},S),{},Object(M.a)({},e,null))),alert("Sorry the trip you selected does not have a fare associated with it, please select another one!"))}else T(Object(s.a)(Object(s.a)({},S),{},Object(M.a)({},e,n.target.value)));"time"===e&&L(n.target.value)}},L=function(e){var n=ye(v,"YYYY-MM-DD").toDate(),a=C[S.route];t.collection("reservations").where("Trip","==",a.name).where("status","==","paid").where("Date","==",n).where("TravelTime","==",a.times[e]).get().then((function(r){var c=r.size,i=new Date;i.setMinutes(i.getMinutes()-5),t.collection("reservations").where("Trip","==",C[S.route].name).where("status","==","pending").where("Date","==",n).where("TravelTime","==",C[S.route].times[e]).where("BookingTime",">=",i).get().then((function(e){var t=e.size,n=a.seats-c-t,r="";n<1&&(r=a.seats===c?"There are no more seats available for the trip you selected!":"There are no seats available at the moment. Please check after 5 or so minutes"),u({seats:n,error:r})}))}))},I=null,R=null;if(null!==S.route){var E,Y,z,q,W,H;if(null!==S.trip&&null!==S.time&&""!==v&&null!==i)if(b.seats>0)I=Object(m.jsxs)(xe.a.Footer,{children:[Object(m.jsxs)("p",{children:[Object(m.jsx)("b",{children:"Note:"})," Only click this button after the customer has made the necessary payments and please make sure the information entered is correct."]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:S.currency,onChange:F("currency"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),Array.from(new Map(Object.entries(null!==(H=null===i||void 0===i?void 0:i.prices)&&void 0!==H?H:{})).keys()).map((function(e){return Object(m.jsx)("option",{value:e,children:e})}))]}),Object(m.jsx)(fe.a,{id:"standard-currency-helper-text",children:"Currency"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-payment-reference",placeholder:"Payment reference",value:S.pickUp,required:!0,onChange:F("paymentReference"),endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-payment-reference-helper-text",inputProps:{"aria-label":"Payment Reference"}}),Object(m.jsx)(fe.a,{id:"standard-payment-reference-helper-text",children:"Payment Reference"})]}),Object(m.jsx)("br",{}),Object(m.jsx)(ue.a,{onClick:function(){if(null===S.currency||null===S.trip||null===S.time||""===v||null===S.route||null===i||null===S.paymentReference)alert("Please fill in all input fields!");else{var e=Se(),n=function(){var e=function(e){var t=e.getFullYear().toString(),n=(e.getMonth()+1).toString(),a=e.getDate().toString();return 1===a.length&&(a="0"+a),1===n.length&&(n="0"+n),t+n+a}(new Date),t=(Math.floor(1e3*Math.random())+1).toString();return 1===t.length&&(t="0"+t),2===t.length&&(t="0"+t),"ExC-".concat(e,"-").concat(t)}(),a=C[S.route].possibleTrips[S.trip].split("-"),r=ye(v,"YYYY-MM-DD").toDate(),c=new Date,s=function(){var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"][Math.floor(25*Math.random()).toString()],t=(Math.floor(100*Math.random())+1).toString();return 1===t.length&&(t="0"+t),e+t}(),o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));t.collection("reservations").add({ID:e,paymentReference:S.paymentReference,TicketID:n,Currency:S.currency,Amount:i.prices[S.currency],status:"paid",Trip:C[S.route].name,TravellingFrom:a[0],TravellingTo:a[1],BookingTime:c,TravelTime:C[S.route].times[S.time],Date:r,platform:"Walk-in clients",seatNo:s,refNo:o}).then((function(e){return h.push("/reservations/"+e.id+"/add")}))}},variant:"contained",color:"primary",className:n.button,children:"Reserve"})]});else""!==b.error&&alert(b.error);R=Object(m.jsxs)("div",{children:[Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:S.trip,onChange:F("trip"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),null===(E=C[S.route])||void 0===E||null===(Y=E.possibleTrips)||void 0===Y?void 0:Y.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e.replace("-"," to ")})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Trips"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:S.time,onChange:F("time"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),null===(z=C[S.route])||void 0===z||null===(q=z.times)||void 0===q?void 0:q.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e})}))]}),Object(m.jsxs)(fe.a,{id:"standard-date-helper-text",children:["Time (Bus leaves ",null===(W=C[S.route])||void 0===W?void 0:W.from," at )"]})]})]})}return Object(m.jsxs)(xe.a,Object(s.a)(Object(s.a)({},e),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,class:"modal",children:[Object(m.jsx)(xe.a.Header,{closeButton:!0,children:Object(m.jsx)(xe.a.Title,{id:"contained-modal-title-vcenter",children:"Add a reservation"})}),Object(m.jsx)(xe.a.Body,{children:Object(m.jsxs)("div",{className:n.root,children:[Object(m.jsxs)("div",{children:[Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:S.route,onChange:F("route"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),C.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e.name})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Route"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsx)(we.a,{onChange:g,value:v}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Date of Travel"})]})]}),R,function(){if(null!==i){console.log(i);var e=function(){if(void 0===i.prices)return[];var e=new Map(Object.entries(i.prices)),t=[];return e.forEach((function(e,n){var a,r;t.push(Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:n}),Object(m.jsx)("td",{align:"right",children:(a=n,r=e,void 0===r?Object(m.jsx)("p",{children:"--"}):new Intl.NumberFormat("en-US",{style:"currency",currency:a}).format(r).replace(a,"").replace("$",""))})]}))})),t}();return Object(m.jsxs)("div",{className:Object(A.a)(n.pricesContainer),children:[Object(m.jsx)("h1",{children:"Prices"}),Object(m.jsx)("table",{className:Object(A.a)(n.table),children:Object(m.jsx)("tbody",{children:e.map((function(e){return e}))})})]})}}()]})}),I]}))}var Ne=n(246),Ce=n.n(Ne),De=240,Pe=Object(o.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"#34495E"},appBarShift:{width:"calc(100% - ".concat(De,"px)"),marginLeft:De,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:De,flexShrink:0},drawerPaper:{width:De,backgroundColor:"#34495E",color:"#ffffff"},drawerHeader:Object(s.a)(Object(s.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},LogoutButton:{color:"#F7F9F9",backgroundColor:"#E74C3C"},profileButton:{backgroundColor:"#2874A6",color:"#F7F9F9"},dropdownTitle:{color:"#ff1744"},dropDownMenu:{"& .MuiPaper-root":{backgroundColor:"#34495e",color:"#fff"}}}}));function Me(e){return Object(m.jsx)(Z.a,Object(s.a)({button:!0,component:"a"},e))}function Be(){var e=r.a.useState(!1),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Pe(),i=Object(F.a)(),s=r.a.useState(!1),o=Object(O.a)(s,2),l=o[0],d=o[1],b=r.a.useState(),u=Object(O.a)(b,2),h=u[0],x=u[1],p=g(),f=p.currentUser,v=p.logout,w=Object(j.g)(),y=r.a.useState(null),N=Object(O.a)(y,2),C=N[0],D=N[1];function z(){return(z=Object(B.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(""),e.prev=1,e.next=4,v();case 4:w.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),x("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(m.jsxs)("div",{className:c.root,children:[h&&Object(m.jsx)(le.a,{variant:"danger",children:h}),Object(m.jsx)(I.a,{}),Object(m.jsx)(T.a,{position:"fixed",className:Object(A.a)(c.appBar,Object(M.a)({},c.appBarShift,l)),children:Object(m.jsxs)(k.a,{children:[Object(m.jsx)(Y.a,{color:"inherit","aria-label":"open drawer",onClick:function(){d(!0)},edge:"start",className:Object(A.a)(c.menuButton,l&&c.hide),children:Object(m.jsx)(q.a,{})}),Object(m.jsx)(S.a,{variant:"h6",noWrap:!0,children:"Extracity Dashboard"}),Object(m.jsx)(ue.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){D(e.currentTarget)},className:c.dropdownTitle,endIcon:Object(m.jsx)(be.a,{}),children:f.email}),Object(m.jsxs)(he.a,{id:"simple-menu",anchorEl:C,keepMounted:!0,open:Boolean(C),onClose:function(){D(null)},className:c.dropDownMenu,children:[Object(m.jsx)(Oe.a,{component:de.a,href:"/update-profile",style:{color:"black",textDecoration:"none"},children:"Update profile"}),Object(m.jsx)(Oe.a,{component:de.a,onClick:function(){return z.apply(this,arguments)},href:"/logout",style:{color:"red",textDecoration:"none"},children:"Logout"})]})]})}),Object(m.jsxs)(L.a,{className:c.drawer,variant:"persistent",anchor:"left",open:l,classes:{paper:c.drawerPaper},children:[Object(m.jsx)("div",{className:c.drawerHeader,children:Object(m.jsx)(Y.a,{onClick:function(){d(!1)},children:"ltr"===i.direction?Object(m.jsx)(H.a,{}):Object(m.jsx)(G.a,{})})}),Object(m.jsx)(E.a,{}),Object(m.jsxs)(R.a,{children:[Object(m.jsx)(Z.a,{children:Object(m.jsxs)(ue.a,{variant:"contained",color:"primary",onClick:function(){return a(!0)},children:[Object(m.jsx)(Ce.a,{}),"Add a reservation"]})}),Object(m.jsxs)(Me,{href:"/",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)($.a,{color:"primary"})}),Object(m.jsx)(V.a,{primary:"Home"})]}),Object(m.jsx)(E.a,{}),Object(m.jsxs)(Me,{href:"/reservations",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(Q.a,{color:"primary"})}),Object(m.jsx)(V.a,{primary:"Reservations"})]}),Object(m.jsx)(E.a,{}),Object(m.jsx)(E.a,{}),Object(m.jsxs)(Me,{href:"/statistics",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(oe.a,{color:"primary"})}),Object(m.jsx)(V.a,{primary:"Statistics"})]}),Object(m.jsx)(E.a,{}),Object(m.jsxs)(Me,{href:"/payments",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(ee.a,{color:"primary"})}),Object(m.jsx)(V.a,{primary:"Payments"})]}),Object(m.jsx)(E.a,{}),Object(m.jsxs)(Me,{href:"/trips-grid",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(re.a,{color:"primary"})}),Object(m.jsx)(V.a,{primary:"Trip Grid"})]}),Object(m.jsx)(E.a,{}),Object(m.jsxs)(Me,{href:"/fares",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(ne.a,{color:"primary"})}),Object(m.jsx)(V.a,{primary:"Fares Grid"})]}),Object(m.jsx)(E.a,{}),Object(m.jsxs)(Me,{href:"/trips",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(ie.a,{color:"primary"})}),Object(m.jsx)(V.a,{primary:"Trip Stops"})]}),Object(m.jsx)(E.a,{})]}),Object(m.jsx)(ke,{show:n,onHide:function(){return a(!1)}})]})]})}var Ae=n(112),Fe=n(494),Le=n(51),Ie=Object(o.a)((function(e){return{root:{height:400,width:"100%",marginTop:80},button:{marginBottom:"10px"},filterBox:{margin:e.spacing(1),backgroundColor:"#ffcd38"},grid:{backgroundColor:"#008394"}}})),Re=[{field:"fullname",headerName:"FULL NAME",description:"This column has a value",sortable:!1,width:160,valueGetter:function(e){return"".concat(e.row.firstName,"  ").concat(e.row.lastName)}},{field:"PhoneNumber",headerName:"PHONE #",width:130},{field:"Trip",headerName:"TRIP",width:170},{field:"Date",headerName:"TRAVEL DATE",width:160,valueGetter:function(e){return"".concat(e.row.Date.toDate())}},{field:"TravelTime",headerName:"TIME",width:110},{field:"Amount",headerName:"AMOUNT",width:110,valueGetter:function(e){return"".concat(e.row.Currency," ").concat(e.row.Amount)}},{field:"TicketID",headerName:"TICKET ID",width:180}];function Ee(){var e,t,n,a,c=Ie(),i=r.a.useState([]),o=Object(O.a)(i,2),l=o[0],d=o[1],j=r.a.useState([]),b=Object(O.a)(j,2),u=b[0],h=b[1],x=r.a.useState({route:"",trip:"",time:"",from:"",to:"",search:""}),f=Object(O.a)(x,2),v=f[0],g=f[1],w=p.firestore(),y=function(e,t){g(Object(s.a)(Object(s.a)({},v),{},Object(M.a)({},e,t))),("search"!==e||"search"===e&&(t.length>14||0===t.length))&&S(null,e,t)};r.a.useState((function(){(function(){var e=Object(B.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.collection("trips").get();case 2:t=e.sent,n=t.docs.map((function(e){return e.data()})),h(n),S(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var S=function(){var e=Object(B.a)(P.a.mark((function e(){var t,n,a,r,c,i,o,l,j,b,h,O,x,p,m,f,g,y,S,T=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=T.length>0&&void 0!==T[0]?T[0]:null,n=T.length>1&&void 0!==T[1]?T[1]:null,a=T.length>2&&void 0!==T[2]?T[2]:null,r=null===t?u:t,c=v.from,i=v.to,o=v.route,l=v.trip,j=v.time,b=v.search,e.t0=n,e.next="to"===e.t0?13:"from"===e.t0?15:"route"===e.t0?17:"trip"===e.t0?19:"time"===e.t0?21:"search"===e.t0?23:25;break;case 13:return i=a,e.abrupt("break",26);case 15:return c=a,e.abrupt("break",26);case 17:return o=a,e.abrupt("break",26);case 19:return l=a,e.abrupt("break",26);case 21:return j=a,e.abrupt("break",26);case 23:return b=a,e.abrupt("break",26);case 25:console.log("No data");case 26:return h=w.collection("reservations"),O=h.where("status","==","paid").orderBy("Date"),""!==o&&void 0!==r[o]&&(O=O.where("Trip","==",null===(x=r[o])||void 0===x?void 0:x.name),""!==l&&void 0!==r[o].possibleTrips[l]&&(m=r[o].possibleTrips[l].split("-"),O=O.where("TravellingFrom","==",m[0]).where("TravellingTo","==",m[1])),""!==j&&void 0!==r[o].times[j]&&(O=O.where("TravelTime","==",null===(p=r[o])||void 0===p?void 0:p.times[j]))),""!==c&&null!==c&&void 0!==c&&""!==i&&null!==i&&void 0!==i&&c.toDateString()===i.toDateString()?((f=Le(c,"YYYY-MM-DD").toDate()).setDate(f.getDate()-1),(g=Le(i,"YYYY-MM-DD").toDate()).setDate(g.getDate()+1),O=O.where("Date",">",f).where("Date","<",g)):(""!==c&&null!==c&&void 0!==c&&(O=O.where("Date",">=",Le(c,"YYYY-MM-DD").toDate())),""!==i&&null!==i&&void 0!==i&&((y=Le(i,"YYYY-MM-DD").toDate()).setDate(y.getDate()+1),O=O.where("Date","<",y))),""!==b&&void 0!==b&&(O=O.where("TicketID","==",b.toUpperCase().replace("X","x"))),e.next=33,O.get();case 33:if(S=e.sent,console.log(S.size),!S.empty){e.next=39;break}return console.log("No matching documents."),d([]),e.abrupt("return");case 39:d(S.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})})));case 40:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:c.root,children:[Object(m.jsx)("h3",{style:{marginBottom:20,color:"#fff"},children:"Ticket Reservation List"}),Object(m.jsx)("br",{}),Object(m.jsxs)(Fe.a,{container:!0,className:c.filterBox,spacing:2,children:[Object(m.jsx)(Fe.a,{item:!0,children:Object(m.jsx)(Fe.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:v.route,onChange:function(e){return y("route",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===u||void 0===u?void 0:u.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e.name})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Route"})]})})}),Object(m.jsx)(Fe.a,{item:!0,children:Object(m.jsx)(Fe.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:v.trip,onChange:function(e){return y("trip",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===(e=u[v.route])||void 0===e||null===(t=e.possibleTrips)||void 0===t?void 0:t.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e.replace("-"," to ")})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Trip"})]})})}),Object(m.jsx)(Fe.a,{item:!0,children:Object(m.jsx)(Fe.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:v.time,onChange:function(e){return y("time",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===(n=u[v.route])||void 0===n||null===(a=n.times)||void 0===a?void 0:a.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Time"})]})})}),Object(m.jsx)(Fe.a,{item:!0,children:Object(m.jsx)(Fe.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsx)(we.a,{onChange:function(e){y("from",e)},value:v.from}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"From"})]})})}),Object(m.jsx)(Fe.a,{item:!0,children:Object(m.jsx)(Fe.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsx)(we.a,{onChange:function(e){y("to",e)},value:v.to}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"To"})]})})}),Object(m.jsx)(Fe.a,{item:!0,children:Object(m.jsx)(Fe.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsx)(pe.a,{id:"outlined-basic",placeholder:"Search...",value:v.search,required:!0,onChange:function(e){return y("search",e.target.value)},endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-search-bar-helper-text",inputProps:{"aria-label":"Ticket ID"}}),Object(m.jsx)(fe.a,{id:"standard-search-helper-text",children:"Search using Ticket ID"})]})})})]}),Object(m.jsx)(Ae.a,{className:c.grid,rows:l,columns:Re})]})}function Ye(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(Ee,{}),Object(m.jsx)(C,{})]})}var ze=n(497),qe=n(51),We=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",flexGrow:1},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},table:{width:"100%"},pricesContainer:{padding:e.spacing(1)},paper:{height:140,width:100},control:{padding:e.spacing(2)},fullWidth:{width:"100%",margin:e.spacing(.5)}}}));function He(e){var t=We(),n=null;null!==e.values.trip&&null!==e.values.time&&(n=Object(m.jsxs)(xe.a.Footer,{children:[Object(m.jsxs)("p",{children:[Object(m.jsx)("b",{children:"Note:"})," Please click the save button after you have confirmed the information displayed above."]}),Object(m.jsx)(ue.a,{onClick:e.handleSubmit,variant:"contained",color:"primary",className:t.button,children:"Save"})]}));var a=new Intl.NumberFormat("en-US",{style:"currency",currency:e.reservation.Currency});return Object(m.jsxs)(xe.a,Object(s.a)(Object(s.a)({},e),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",class:"modal",children:[Object(m.jsx)(xe.a.Header,{closeButton:!0,children:Object(m.jsx)(xe.a.Title,{id:"contained-modal-title-vcenter",children:"Confirm details"})}),Object(m.jsx)(xe.a.Body,{children:Object(m.jsx)("div",{className:t.root,children:Object(m.jsxs)(Fe.a,{container:!0,className:t.root,spacing:2,children:[Object(m.jsx)(Fe.a,{item:!0,lg:6,children:Object(m.jsxs)(Fe.a,{container:!0,justify:"left",spacing:1,children:[Object(m.jsx)("h3",{children:"Ticket information"}),Object(m.jsxs)("table",{className:t.fullWidth,children:[Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Route:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.reservation.Trip})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Travelling from:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.reservation.TravellingFrom})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Travelling to:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.reservation.TravellingTo})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Date:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:qe(e.reservation.Date.toDate()).format("LL")})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Time (Leaves Bulawayo at):"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.reservation.TravelTime})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Amount:"})})}),Object(m.jsx)("tr",{children:Object(m.jsxs)("td",{children:[e.reservation.Currency,a.format(e.reservation.Amount).replace(e.reservation.Currency,"").replace("$","")]})})]})]})}),Object(m.jsx)(Fe.a,{item:!0,xs:6,children:Object(m.jsxs)(Fe.a,{container:!0,justify:"left",spacing:1,children:[Object(m.jsx)("h3",{children:"Personal information"}),Object(m.jsxs)("table",{className:t.fullWidth,children:[Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"First name:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.firstname})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Last name:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.lastname})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Email:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.email})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Phone number:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.phoneNumber})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Paid using:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.paymentMethod})})]})]})})]})})}),n]}))}var Ue=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",marginTop:80},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"},card:{marginTop:80}}}));function Ge(){var e=Ue(),t=Object(j.g)(),n=p.firestore(),a=Object(j.h)().id,c=r.a.useState(null),i=Object(O.a)(c,2),o=i[0],l=i[1],d=r.a.useState(!1),b=Object(O.a)(d,2),u=b[0],h=b[1],x=r.a.useState({email:null,paymentMethod:null,phoneNumber:null,firstname:null,lastname:null}),f=Object(O.a)(x,2),v=f[0],g=f[1];r.a.useEffect((function(){n.collection("reservations").doc(a).get().then((function(e){e.exists&&l(e.data())}))}),[]);var w=function(e){return function(t){g(Object(s.a)(Object(s.a)({},v),{},Object(M.a)({},e,t.target.value)))}};return null!==o?Object(m.jsxs)(ze.a,{className:e.card,children:[Object(m.jsx)("h3",{style:{padding:20},children:"New Reservation"}),Object(m.jsxs)("form",{className:e.root,children:[Object(m.jsxs)("div",{children:[Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-first-name",required:!0,value:v.firstname,onChange:w("firstname"),endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-first-name-helper-text",inputProps:{"aria-label":"First name"}}),Object(m.jsx)(fe.a,{id:"standard-first-name-helper-text",children:Object(m.jsx)("b",{children:"First Name"})})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-last-name",value:v.lastname,onChange:w("lastname"),required:!0,"aria-describedby":"standard-last-name-helper-text",inputProps:{"aria-label":"Last name"}}),Object(m.jsx)(fe.a,{id:"standard-last-name-helper-text",children:Object(m.jsx)("b",{children:"Last Name"})})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-phone-number",value:v.phoneNumber,required:!0,onChange:w("phoneNumber"),endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-phone-number-helper-text",inputProps:{"aria-label":"Phone Number"}}),Object(m.jsx)(fe.a,{id:"standard-phone-number-helper-text",children:Object(m.jsx)("b",{children:"Phone Number"})})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-email",value:v.email,required:!0,onChange:w("email"),endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-email-helper-text",inputProps:{"aria-label":"Email"}}),Object(m.jsx)(fe.a,{id:"standard-email-helper-text",children:Object(m.jsx)("b",{children:"Email Address"})})]})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("br",{}),Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:v.paymentMethod,onChange:w("paymentMethod"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),Object(m.jsx)("option",{children:"Swipe"}),Object(m.jsx)("option",{children:"Ecocash"}),Object(m.jsx)("option",{children:"One Money"}),Object(m.jsx)("option",{children:"Telecash"}),Object(m.jsx)("option",{children:"Cash"}),Object(m.jsx)("option",{children:"Other"})]}),Object(m.jsx)(fe.a,{id:"standard-payment-method-helper-text",children:Object(m.jsx)("b",{children:"Payment Method"})})]}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)(ue.a,{input:!0,type:"button",onClick:function(){null===v.firstname||null===v.lastname||null===v.paymentMethod||null===v.phoneNumber||null===v.email?alert("Please fill in all input fields."):h(!0)},variant:"contained",color:"primary",className:"submitButton",children:"Submit"}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{})]})]}),Object(m.jsx)(He,{reservation:o,values:v,handleSubmit:function(){null===v.firstname||null===v.lastname||null===v.paymentMethod||null===v.phoneNumber||null===v.email?alert("Please fill in all input fields."):n.collection("reservations").doc(a).update({firstName:v.firstname,lastName:v.lastname,fullname:"".concat(v.firstname," ").concat(v.lastname),Email:v.email,PhoneNumber:v.phoneNumber,PaymentMethod:v.paymentMethod}).then((function(e){return t.push("/downloads/"+a+"/"+encodeURIComponent(o.TicketID))})).catch((function(e){return alert("An error occurred!")}))},show:u,onHide:function(){return h(!1)}})]}):Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"404"}),Object(m.jsx)("h2",{children:"Page not found!"})]})}function Ze(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(Ge,{}),Object(m.jsx)(C,{})]})}var Ke=n(509),Ve=n(506),Je=n(498);function $e(){var e=r.a.useRef(),t=r.a.useRef(),n=g().login,a=r.a.useState(""),c=Object(O.a)(a,2),i=c[0],s=c[1],o=r.a.useState(!1),l=Object(O.a)(o,2),b=l[0],u=l[1],h=Object(j.g)();function x(){return(x=Object(B.a)(P.a.mark((function a(r){return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.prev=1,s(""),u(!0),a.next=6,n(e.current.value,t.current.value);case 6:h.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),s("Failed to log in.");case 12:u(!1);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))).apply(this,arguments)}return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(Ke.a,{className:"bg-dark text-white",children:[Object(m.jsxs)(Ke.a.Body,{children:[Object(m.jsx)("h4",{className:"text-center mb-4",children:"Extracity Login"}),i&&Object(m.jsx)(le.a,{variant:"danger",children:i}),Object(m.jsxs)(Ve.a,{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(m.jsxs)(Ve.a.Group,{id:"email",children:[Object(m.jsx)(Ve.a.Label,{children:"Email"}),Object(m.jsx)(Ve.a.Control,{type:"email",ref:e,required:!0})]}),Object(m.jsxs)(Ve.a.Group,{id:"password",children:[Object(m.jsx)(Ve.a.Label,{children:"Password"}),Object(m.jsx)(Ve.a.Control,{type:"password",ref:t,required:!0})]}),Object(m.jsx)(Je.a,{disabled:b,type:"submit",className:"w-100",children:"Login"})]})]}),Object(m.jsxs)("div",{className:"w-100 text-center mt-2",children:["Forgot password? ",Object(m.jsx)(d.b,{to:"/reset-password",children:"Click here"})]})]})})}var Xe=n(499);function Qe(){return Object(m.jsx)(Xe.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"80vh"},children:Object(m.jsx)("div",{className:"w-100",style:{maxWidth:"350px",alignItems:"center"},children:Object(m.jsx)($e,{})})})}var _e=n(25),et=n(503),tt=n(504),nt=n(496),at=n(502),rt=n(500),ct=n(454),it=n(501),st=n(511),ot=n(159),lt=n(197),dt=n(194),jt=n(449),bt=n(450),ut=n(154),ht=n.n(ut),Ot=n(155),xt=n.n(Ot),pt=n(51),mt=n.n(pt);function ft(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function vt(e,t){return"desc"===e?function(e,n){return ft(e,n,t)}:function(e,n){return-ft(e,n,t)}}function gt(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var wt=[{id:"name",numeric:!1,disablePadding:!0,label:"TRIP"},{id:"from",numeric:!1,disablePadding:!0,label:"FROM"},{id:"to",numeric:!1,disablePadding:!0,label:"TO"},{id:"times",numeric:!1,disablePadding:!0,label:"TIMES"},{id:"stops",numeric:!1,disablePadding:!0,label:"STOPS"},{id:"date",numeric:!1,disablePadding:!0,label:"DATE"},{id:"actions",numeric:!1,disablePadding:!1,label:"ACTIONS"}];function yt(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,c=e.numSelected,i=e.rowCount,s=e.onRequestSort;return Object(m.jsx)(rt.a,{children:Object(m.jsxs)(it.a,{children:[Object(m.jsx)(nt.a,{padding:"checkbox",children:Object(m.jsx)(lt.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:n,inputProps:{"aria-label":"select all trips"}})}),wt.map((function(e){return Object(m.jsx)(nt.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&a,children:Object(m.jsxs)(st.a,{active:r===e.id,direction:r===e.id?a:"asc",onClick:(n=e.id,function(e){s(e,n)}),children:[e.label,r===e.id?Object(m.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var St=Object(o.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"dark"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_e.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Tt=function(e){var t=St(),n=e.numSelected;return Object(m.jsxs)(k.a,{className:Object(A.a)(t.root,Object(M.a)({},t.highlight,n>0)),children:[n>0?Object(m.jsxs)(S.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(m.jsxs)(S.a,{className:t.title,variant:"h5",id:"tableTitle",component:"div",children:["Trips",Object(m.jsx)(d.b,{to:"/trips/add",children:Object(m.jsx)("button",{children:"Add"})})]}),n>0?Object(m.jsx)(dt.a,{title:"Delete",children:Object(m.jsx)(Y.a,{"aria-label":"delete",children:Object(m.jsx)(ht.a,{})})}):Object(m.jsx)(dt.a,{title:"Filter list",children:Object(m.jsx)(Y.a,{"aria-label":"filter list",children:Object(m.jsx)(xt.a,{})})})]})},kt=Object(o.a)((function(e){return{root:{width:"100%",marginTop:80},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750,width:"calc(100% - ".concat(300,"px)")},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Nt(){var e=kt(),t=r.a.useState("asc"),n=Object(O.a)(t,2),a=n[0],c=n[1],i=r.a.useState("calories"),s=Object(O.a)(i,2),o=s[0],l=s[1],j=r.a.useState([]),b=Object(O.a)(j,2),u=b[0],h=b[1],x=r.a.useState(0),f=Object(O.a)(x,2),v=f[0],g=f[1],w=r.a.useState(!1),y=Object(O.a)(w,2),S=y[0],T=y[1],k=r.a.useState(10),N=Object(O.a)(k,2),C=N[0],D=N[1],M=r.a.useState([]),A=Object(O.a)(M,2),F=A[0],L=A[1];r.a.useEffect((function(){(function(){var e=Object(B.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.firestore(),e.next=3,t.collection("trips").get().then((function(e){return L(e.docs.map((function(e){return e})))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var I=C-Math.min(C,F.length-v*C);return Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsxs)(ot.a,{className:e.paper,children:[Object(m.jsx)(Tt,{numSelected:u.length}),Object(m.jsx)(at.a,{children:Object(m.jsxs)(et.a,{className:e.table,"aria-labelledby":"tableTitle",size:S?"small":"medium","aria-label":"enhanced table",children:[Object(m.jsx)(yt,{classes:e,numSelected:u.length,order:a,orderBy:o,onSelectAllClick:function(e){if(e.target.checked){var t=F.map((function(e){return e.name}));h(t)}else h([])},onRequestSort:function(e,t){c(o===t&&"asc"===a?"desc":"asc"),l(t)},rowCount:F.length}),Object(m.jsxs)(tt.a,{children:[gt(F,vt(a,o)).slice(v*C,v*C+C).map((function(e,t){var n,a=e.data(),r=(n=a.id,-1!==u.indexOf(n)),c="enhanced-table-checkbox-".concat(t),i="/trips/".concat(e.id,"/stops");return Object(m.jsxs)(it.a,{hover:!0,onClick:function(e){return function(e,t){var n=u.indexOf(t),a=[];-1===n?a=a.concat(u,t):0===n?a=a.concat(u.slice(1)):n===u.length-1?a=a.concat(u.slice(0,-1)):n>0&&(a=a.concat(u.slice(0,n),u.slice(n+1))),h(a)}(0,a.id)},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:[Object(m.jsx)(nt.a,{padding:"checkbox",children:Object(m.jsx)(lt.a,{checked:r,inputProps:{"aria-labelledby":c}})}),Object(m.jsx)(nt.a,{component:"th",id:c,scope:"row",padding:"none",children:a.name}),Object(m.jsx)(nt.a,{align:"right",children:a.from}),Object(m.jsx)(nt.a,{align:"right",children:a.to}),Object(m.jsx)(nt.a,{align:"right",children:a.times.join(", ")}),Object(m.jsx)(nt.a,{align:"right",children:Ct(a.stops)}),Object(m.jsx)(nt.a,{align:"right",children:mt()(a.date.toDate(),"YYYY-MM-DD").format("LLL")}),Object(m.jsx)(nt.a,{align:"right",children:Object(m.jsx)(d.b,{to:i,children:Object(m.jsx)("button",{children:"Stops"})})})]},a.id)})),I>0&&Object(m.jsx)(it.a,{style:{height:(S?33:53)*I},children:Object(m.jsx)(nt.a,{colSpan:11})})]})]})}),Object(m.jsx)(ct.a,{rowsPerPageOptions:[5,10,20],component:"div",count:F.length,rowsPerPage:C,page:v,onChangePage:function(e,t){g(t)},onChangeRowsPerPage:function(e){D(parseInt(e.target.value,10)),g(0)}})]}),Object(m.jsx)(jt.a,{control:Object(m.jsx)(bt.a,{checked:S,onChange:function(e){T(e.target.checked)}}),label:"Dense padding"})]})}function Ct(e){if(void 0===e||null===e)return"";var t=new Map(Object.entries(e)),n=[];return t.forEach((function(e){n.push(e.name)})),n.join(", ")}function Dt(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(Nt,{}),Object(m.jsx)(C,{})]})}var Pt=n(255),Mt=Object(o.a)((function(e){return{root:{marginTop:80}}}));function Bt(e){for(var t=Mt(),n=[],a=0;a<2400;a+=100)for(var r=0;r<60;r+=15){var c="";0===a?c="00":a<1e3&&(c="0"),(c+=a+r).length<4&&(c="0".concat(c)),n.push({label:c,value:c})}return console.log(n),Object(m.jsx)("div",{className:t.root,children:Object(m.jsx)(Pt.a,{options:n,value:e.times,onChange:function(t){return e.setTimes(t)},labelledBy:"Select"})})}var At=n(171).uuid,Ft=Object(o.a)((function(e){return{root:{marginTop:80}}}));function Lt(e){var t=Ft(),n=Object(j.g)(),r=p.firestore(),c=Object(a.useState)(),i=Object(O.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(),d=Object(O.a)(l,2),b=d[0],u=d[1],h=Object(a.useState)(),x=Object(O.a)(h,2),f=x[0],v=x[1],g=Object(a.useState)([]),w=Object(O.a)(g,2),y=w[0],S=w[1],T=Object(a.useState)(0),k=Object(O.a)(T,2),N=k[0],C=k[1];return Object(m.jsxs)("form",{onSubmit:function(e){!function(e){if(e.preventDefault(),void 0===s||""===s||void 0===N||""===N||void 0===b||""===b||void 0===f||""===f||void 0===y||0===y.length)alert("Please fill in all input fields!");else{var t=At();r.collection("trips").add({id:t,name:s,to:b,from:f,seats:parseInt(N),times:y.map((function(e){return console.log(e),e.value})),date:new Date}).then((function(e){return n.push("/trips/"+e.id+"/stops")})).catch((function(e){return alert("An error occurred!")}))}}(e)},className:t.root,children:[Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Trip name"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"name",type:"text",value:s,required:!0,onChange:function(e){return o(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"From"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"from",type:"text",value:f,required:!0,onChange:function(e){return v(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"To"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"to",type:"text",value:b,required:!0,onChange:function(e){return u(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Number of seats"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"seats",type:"number",value:N,required:!0,onChange:function(e){return C(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Departure times"}),Object(m.jsx)("br",{}),Object(m.jsx)(Bt,{setTimes:S,times:y}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"submitButton",type:"submit",value:"Save"})]})}function It(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(Lt,{}),Object(m.jsx)(C,{})]})}function Rt(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Et(e,t){return"desc"===e?function(e,n){return Rt(e,n,t)}:function(e,n){return-Rt(e,n,t)}}function Yt(e,t){var n=null===e||void 0===e?void 0:e.map((function(e,t){return[e,t]}));return null===n||void 0===n||n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),null===n||void 0===n?void 0:n.map((function(e){return e[0]}))}var zt=[{id:"name",numeric:!1,disablePadding:!0,label:"STOP"},{id:"times",numeric:!0,disablePadding:!0,label:"TIMES"},{id:"date",numeric:!0,disablePadding:!1,label:"DATE"}];function qt(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,c=e.numSelected,i=e.rowCount,s=e.onRequestSort;return Object(m.jsx)(rt.a,{className:t.root,children:Object(m.jsxs)(it.a,{children:[Object(m.jsx)(nt.a,{padding:"checkbox",children:Object(m.jsx)(lt.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:n,inputProps:{"aria-label":"select all trips"}})}),zt.map((function(e){return Object(m.jsx)(nt.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&a,children:Object(m.jsxs)(st.a,{active:r===e.id,direction:r===e.id?a:"asc",onClick:(n=e.id,function(e){s(e,n)}),children:[e.label,r===e.id?Object(m.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var Wt=Object(o.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"dark"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_e.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Ht=function(e){var t=Object(j.h)().id,n=Wt(),a=e.numSelected,r="/trips/".concat(t,"/stops/add");return Object(m.jsxs)(k.a,{className:Object(A.a)(n.root,Object(M.a)({},n.highlight,a>0)),children:[a>0?Object(m.jsxs)(S.a,{className:n.title,color:"inherit",variant:"subtitle1",component:"div",children:[a," selected"]}):Object(m.jsxs)(S.a,{className:n.title,variant:"h5",id:"tableTitle",component:"div",children:["Stops",Object(m.jsx)(d.b,{to:r,children:Object(m.jsx)("button",{children:"Add"})})]}),a>0?Object(m.jsx)(dt.a,{title:"Delete",children:Object(m.jsx)(Y.a,{"aria-label":"delete",children:Object(m.jsx)(ht.a,{})})}):Object(m.jsx)(dt.a,{title:"Filter list",children:Object(m.jsx)(Y.a,{"aria-label":"filter list",children:Object(m.jsx)(xt.a,{})})})]})},Ut=Object(o.a)((function(e){return{root:{width:"100%",marginTop:80},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750,width:"calc(100% - ".concat(300,"px)")},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Gt(e){var t,n,a,c,i=Ut(),s=r.a.useState("asc"),o=Object(O.a)(s,2),l=o[0],d=o[1],j=r.a.useState("calories"),b=Object(O.a)(j,2),u=b[0],h=b[1],x=r.a.useState([]),p=Object(O.a)(x,2),f=p[0],v=p[1],g=r.a.useState(0),w=Object(O.a)(g,2),y=w[0],S=w[1],T=r.a.useState(!1),k=Object(O.a)(T,2),N=k[0],C=k[1],D=r.a.useState(10),P=Object(O.a)(D,2),M=P[0],B=P[1],A=M-Math.min(M,(null===(t=e.trip.stops)||void 0===t?void 0:t.length)-y*M);return Object(m.jsxs)("div",{className:i.root,children:[Object(m.jsxs)(ot.a,{className:i.paper,children:[Object(m.jsx)(Ht,{numSelected:null===f||void 0===f?void 0:f.length}),Object(m.jsx)(at.a,{children:Object(m.jsxs)(et.a,{className:i.table,"aria-labelledby":"tableTitle",size:N?"small":"medium","aria-label":"enhanced table",children:[Object(m.jsx)(qt,{classes:i,numSelected:null===f||void 0===f?void 0:f.length,order:l,orderBy:u,onSelectAllClick:function(t){if(t.target.checked){var n,a=null===(n=e.trip.stops)||void 0===n?void 0:n.map((function(e){return e.name}));v(a)}else v([])},onRequestSort:function(e,t){d(u===t&&"asc"===l?"desc":"asc"),h(t)},rowCount:null===(n=e.trip.stops)||void 0===n?void 0:n.length}),Object(m.jsxs)(tt.a,{children:[null===(a=Yt(void 0===e.trip.stops||null===e.trip.stops?[]:Array.from(new Map(Object.entries(e.trip.stops)).values()),Et(l,u)))||void 0===a?void 0:a.slice(y*M,y*M+M).map((function(e,t){var n,a=(n=e.id,-1!==f.indexOf(n)),r="enhanced-table-checkbox-".concat(t);return e=new Map(Object.entries(e)),Object(m.jsxs)(it.a,{hover:!0,onClick:function(t){return function(e,t){var n=f.indexOf(t),a=[];-1===n?a=a.concat(f,t):0===n?a=a.concat(f.slice(1)):n===(null===f||void 0===f?void 0:f.length)-1?a=a.concat(f.slice(0,-1)):n>0&&(a=a.concat(f.slice(0,n),f.slice(n+1))),v(a)}(0,e.id)},role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(m.jsx)(nt.a,{padding:"checkbox",children:Object(m.jsx)(lt.a,{checked:a,inputProps:{"aria-labelledby":r}})}),Object(m.jsx)(nt.a,{component:"th",id:r,scope:"row",padding:"none",children:e.get("name")}),Object(m.jsx)(nt.a,{align:"right",children:Zt(e.get("times"))}),Object(m.jsx)(nt.a,{align:"right",children:mt()(e.get("date").toDate(),"YYYY-MM-DD").format("LLL")})]},e.get("id"))})),A>0&&Object(m.jsx)(it.a,{style:{height:(N?33:53)*A},children:Object(m.jsx)(nt.a,{colSpan:11})})]})]})}),Object(m.jsx)(ct.a,{rowsPerPageOptions:[5,10,20],component:"div",count:null===(c=e.trip.stops)||void 0===c?void 0:c.length,rowsPerPage:M,page:y,onChangePage:function(e,t){S(t)},onChangeRowsPerPage:function(e){B(parseInt(e.target.value,10)),S(0)}})]}),Object(m.jsx)(jt.a,{control:Object(m.jsx)(bt.a,{checked:N,onChange:function(e){C(e.target.checked)}}),label:"Dense padding"})]})}function Zt(e){if(void 0===e||null===e)return"";var t=new Map(Object.entries(e)),n=[];return t.forEach((function(e){n.push(e)})),n.join(", ")}function Kt(){var e,t=Object(j.h)().id,n=r.a.useState(),a=Object(O.a)(n,2),c=a[0],i=a[1];return r.a.useEffect((function(){p.firestore().collection("trips").doc(t).get().then((function(e){console.log(e),e.exists&&i(e.data())}))}),[]),void 0!==c&&null!==c?(void 0!==c.stops&&null!==c.stops||(c.stops=[]),e=Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:c.name}),Object(m.jsx)(Gt,{trip:c})]})):e=Object(m.jsx)("h1",{children:"Trip not found!"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{}),e,Object(m.jsx)(C,{})]})}var Vt=n(171).uuid,Jt=Object(o.a)((function(e){return{root:{marginTop:80}}}));function $t(e){var t=Jt(),n=Object(j.g)(),r=p.firestore(),c=Object(a.useState)(),i=Object(O.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(new Map),d=Object(O.a)(l,2),b=d[0],u=d[1];return Object(m.jsxs)("form",{onSubmit:function(t){!function(t){if(t.preventDefault(),void 0===s||""===s||void 0===b||0===b.length)alert("Please fill in all input fields!");else{var a,c,i,o,l=Vt(),d=null!==(a=null===(c=e.trip)||void 0===c?void 0:c.stops)&&void 0!==a?a:{};d[s]={id:l,name:s,times:Object.fromEntries(b),date:new Date};for(var j=Array.from(new Map(Object.entries(d)).values()),u=["".concat(null===(i=e.trip)||void 0===i?void 0:i.from,"-").concat(null===(o=e.trip)||void 0===o?void 0:o.to)],h=j.map((function(t){var n;return"".concat(null===(n=e.trip)||void 0===n?void 0:n.from,"-").concat(t.name)})),O=[],x=0;x<j.length;x++){var p;if(O.push("".concat(j[x].name,"-").concat(null===(p=e.trip)||void 0===p?void 0:p.to)),x<j.length-1)for(var m=x+1;m<j.length;m++)O.push("".concat(j[x].name,"-").concat(j[m].name))}var f=u.concat(h,O);r.collection("trips").doc(e.docID).update({stops:d,possibleTrips:f}).then((function(t){return n.push("/trips/"+e.docID+"/stops")})).catch((function(e){alert("An error occurred!"),console.log(e)}))}}(t)},className:t.root,children:[Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"City or town name"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"name",type:"text",value:s,required:!0,onChange:function(e){return o(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Times"}),Object(m.jsx)("br",{}),Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsxs)("th",{children:["Leaves ",e.trip.from," at"]}),Object(m.jsx)("th",{children:"Leaves this stop at"})]}),e.trip.times.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{name:"to",type:"number",onChange:function(t){b.delete(e),u(b.set(e,t.target.value))}})})]})}))]}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"submitButton",type:"submit",value:"Save"})]})}function Xt(){var e,t=Object(j.h)().id,n=r.a.useState(),a=Object(O.a)(n,2),c=a[0],i=a[1],s=r.a.useState(),o=Object(O.a)(s,2),l=o[0],d=o[1];return r.a.useEffect((function(){p.firestore().collection("trips").doc(t).get().then((function(e){console.log(e),e.exists&&(i(e.data()),d(e.id))}))}),[]),e=void 0!==c&&null!==c?Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:c.name}),Object(m.jsx)($t,{trip:c,docID:l})]}):Object(m.jsx)("h1",{children:"Trip not found!"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{}),e,Object(m.jsx)(C,{})]})}var Qt=n(171).uuid,_t=Object(o.a)((function(e){return{root:{marginTop:80}}}));function en(e){var t=_t(),n=Object(j.g)(),r=p.firestore(),c=Object(a.useState)(),i=Object(O.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(),d=Object(O.a)(l,2),b=d[0],u=d[1],h=Object(a.useState)(new Map),x=Object(O.a)(h,2),f=x[0],v=(x[1],function(e,t){f.delete(e),f.set(e,t)});return Object(m.jsxs)("form",{onSubmit:function(e){!function(e){if(e.preventDefault(),void 0===s||""===s||void 0===b||""===b||void 0===f||0===f.length)alert("Please fill in all input fields!");else{var t=Qt(),a=["".concat(s,"-").concat(b),"".concat(b,"-").concat(s)],c=[s,b];r.collection("fares").add({id:t,to:s,from:b,prices:Object.fromEntries(f),possibleTrips:a,cities:c,date:new Date}).then((function(e){return n.push("/fares")})).catch((function(e){return alert("An error occurred!")}))}}(e)},className:t.root,children:[Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"From"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"from",type:"text",value:b,required:!0,onChange:function(e){return u(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"To"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"to",type:"text",value:s,required:!0,onChange:function(e){return o(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Fares"}),Object(m.jsx)("br",{}),Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Currency"}),Object(m.jsx)("th",{children:"Price"})]})}),Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"USD"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{name:"to",type:"text",onChange:function(e){return v("USD",e.target.value)}})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"ZWL"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{name:"to",type:"text",onChange:function(e){return v("ZWL",e.target.value)}})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"ZAR"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{name:"to",type:"text",onChange:function(e){return v("ZAR",e.target.value)}})})]})]})]}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"submitButton",type:"submit",value:"Save"})]})}function tn(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(en,{}),Object(m.jsx)(C,{})]})}var nn=Object(o.a)((function(e){return{root:{marginTop:80},drawerHeader:Object(s.a)(Object(s.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"})}}));function an(){var e=nn();return Object(m.jsx)("div",{className:e.root,children:Object(m.jsx)(Ee,{})})}function rn(){return Object(m.jsxs)(Xe.a,{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(an,{}),Object(m.jsx)(C,{})]})}n(212);var cn=n(15),sn=n(18),on=n(22),ln=n(31),dn=n(30),jn=n(9),bn=n(505),un=n(92);function hn(){var e=r.a.useState([]),t=Object(O.a)(e,2),n=(t[0],t[1]),a=r.a.useState([]),c=Object(O.a)(a,2),i=c[0],s=c[1],o=r.a.useState([]),l=Object(O.a)(o,2),d=l[0],j=l[1],b=r.a.useState([]),u=Object(O.a)(b,2),h=u[0],p=u[1],f=r.a.useState([]),v=Object(O.a)(f,2),g=v[0],w=v[1],y=r.a.useState([]),S=Object(O.a)(y,2),T=S[0],k=S[1],N=r.a.useState([]),C=Object(O.a)(N,2),D=C[0],M=C[1],A=r.a.useState([]),F=Object(O.a)(A,2),L=F[0],I=F[1],R=r.a.useState([]),E=Object(O.a)(R,2),Y=E[0],z=E[1],q=r.a.useState([]),W=Object(O.a)(q,2),H=W[0],U=W[1];r.a.useEffect((function(){(function(){var e=Object(B.a)(P.a.mark((function e(){var t,a,r,c,i,o,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=x.a.firestore(),a=[],r=function(){i=(new mt.a).subtract(c,"days"),a.push(i.format("ddd")),(o=new Date).setDate(o.getDate()-c-1),(l=new Date).setDate(l.getDate()-c);var e=0;t.collection("reservations").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(t){e+=t.size,n((function(t){return[].concat(Object(cn.a)(t),[e])}))}),[]);var r=0;t.collection("reservations").where("TravellingFrom","==","Bulawayo").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){r+=e.size,s((function(e){return[].concat(Object(cn.a)(e),[r])}))}),[]);var d=0;t.collection("reservations").where("TravellingFrom","==","Harare").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){d+=e.size,j((function(e){return[].concat(Object(cn.a)(e),[d])}))}),[]);var b=0;t.collection("reservations").where("TravellingFrom","==","Victoria Falls").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){b+=e.size,p((function(e){return[].concat(Object(cn.a)(e),[b])}))}),[]);var u=0;t.collection("reservations").where("TravellingFrom","==","Gweru").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){u+=e.size,w((function(e){return[].concat(Object(cn.a)(e),[u])}))}),[]);var h=0;t.collection("reservations").where("TravellingFrom","==","Kwekwe").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){h+=e.size,I((function(e){return[].concat(Object(cn.a)(e),[h])}))}),[]);var O=0;t.collection("reservations").where("TravellingFrom","==","Kadoma").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){O+=e.size,k((function(e){return[].concat(Object(cn.a)(e),[O])}))}),[]);var x=0;t.collection("reservations").where("TravellingFrom","==","Chegutu").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){x+=e.size,M((function(e){return[].concat(Object(cn.a)(e),[x])}))}),[]);var m=0;t.collection("reservations").where("TravellingFrom","==","Hwange").where("status","==","paid").where("BookingTime",">",o).where("BookingTime","<",l).get().then((function(e){m+=e.size,z((function(e){return[].concat(Object(cn.a)(e),[m])}))}),[])},c=6;c>=0;c--)r();U(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var G={labels:H,datasets:[{label:"Bulawayo",data:i,fill:!1,borderColor:"#33eaff"},{label:"Harare",data:d,fill:!1,borderColor:"#f50057"},{label:"Victoria Falls",data:h,fill:!1,borderColor:"#ff5722"},{label:"Gweru",data:g,fill:!1,borderColor:"#2196f3"},{label:"Kwekwe",data:L,fill:!1,borderColor:"#ffea00"},{label:"Kadoma",data:T,fill:!1,borderColor:"#00a152"},{label:"Chegutu",data:D,fill:!1,borderColor:"#4615b2"},{label:"Hwange",data:Y,fill:!1,borderColor:"#fff"}]};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h5",{style:{color:"#fff"},children:"Departure Points Chart"}),Object(m.jsx)(un.b,{height:200,data:G,style:{backgroundColor:"#003c6c",fontColor:"#fff"},options:{responsive:!0,title:{display:!0,text:"Activity for the past 7 days",fontSize:17,color:"#fff",padding:10},legend:{display:!1,position:"right",color:"#fff"},scales:{yAxes:[{ticks:{color:"white",beginAtZero:!0,stepSize:1}}],xAxes:[{ticks:{color:"white"}}]}}})]})}function On(){var e=a.useState([]),t=Object(O.a)(e,2),n=t[0],r=t[1],c=a.useState([]),i=Object(O.a)(c,2),s=i[0],o=i[1];a.useEffect((function(){(function(){var e=Object(B.a)(P.a.mark((function e(){var t,n,a,c,i,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=x.a.firestore(),n=[],a=6;a>=0;a--)c=(new mt.a).subtract(a,"days"),n.push(c.format("ddd")),(i=new Date).setDate(i.getDate()-a-1),(s=new Date).setDate(s.getDate()-a),t.collection("reservations").where("BookingTime",">",i).where("BookingTime","<",s).get().then((function(e){r((function(t){return[].concat(Object(cn.a)(t),[e.size])}))}));o(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var l={labels:s,datasets:[{label:"No. of reservations",fill:!0,backgroundColor:"#00a152",borderColor:"#00a152",data:n,borderWidth:1,pointRadius:0}]};return Object(m.jsxs)(Fe.a,{container:!0,style:{padding:20},children:[Object(m.jsx)("h5",{style:{color:"#fff"},children:"Overall Activity Chart"}),Object(m.jsx)(un.b,{height:200,data:l,style:{backgroundColor:"#003c6c"},options:{responsive:!0,title:{display:!0,text:"Activity for the past 7 days",fontSize:17,fontColor:"#5f0937",padding:10},legend:{display:!0,position:"right"},scales:{yAxes:[{ticks:{fontColor:"white",beginAtZero:!0,stepSize:1}}],xAxes:[{ticks:{fontColor:"white"}}]}}})]})}function xn(){var e=r.a.useState([]),t=Object(O.a)(e,2),n=t[0],a=t[1],c=r.a.useState([]),i=Object(O.a)(c,2),s=i[0],o=i[1],l=r.a.useState([]),d=Object(O.a)(l,2),j=d[0],b=d[1],u=r.a.useState([]),h=Object(O.a)(u,2),x=h[0],f=h[1],v=r.a.useState([]),g=Object(O.a)(v,2),w=g[0],y=g[1],S=r.a.useState([]),T=Object(O.a)(S,2),k=T[0],N=T[1];r.a.useEffect((function(){(function(){var e=Object(B.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.firestore(),(n=[]).push(mt()().format("MMM")),N(n),e.next=6,t.collection("reservations").where("PaymentMethod","==","Ecocash").get().then((function(e){a((function(t){return[].concat(Object(cn.a)(t),[e.size])}))}),[]);case 6:return e.sent,e.next=9,t.collection("reservations").where("PaymentMethod","==","One Money").get().then((function(e){o((function(t){return[].concat(Object(cn.a)(t),[e.size])}))}),[]);case 9:e.sent,t.collection("reservations").where("PaymentMethod","==","Telecash").get().then((function(e){y((function(t){return[].concat(Object(cn.a)(t),[e.size])}))}),[]),t.collection("reservations").where("PaymentMethod","==","Swipe").get().then((function(e){b((function(t){return[].concat(Object(cn.a)(t),[e.size])}))}),[]),t.collection("reservations").where("PaymentMethod","==","Cash").get().then((function(e){f((function(t){return[].concat(Object(cn.a)(t),[e.size])}))}),[]);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var C={labels:k,datasets:[{label:"Ecocash",data:n,backgroundColor:"#1e88e5",borderWidth:1},{label:"Cash",data:x,backgroundColor:"#f4511e",borderWidth:1},{label:"One Money",data:s,backgroundColor:"#e53935",borderWidth:1},{label:"Telecash",data:w,backgroundColor:"#00897b",borderWidth:1},{label:"Swipe",data:j,backgroundColor:"#33eb91",borderWidth:1}]};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)("h5",{style:{color:"#fff"},children:"Payment Methods Chart"}),Object(m.jsx)("div",{className:"links",children:Object(m.jsx)("a",{className:"btn btn-gh",href:"https://github.com/reactchartjs/react-chartjs-2/blob/master/example/src/charts/StackedBar.js"})})]}),Object(m.jsx)(un.a,{data:C,options:{indexAxis:"y",elements:{bar:{borderWidth:2}},responsive:!0,plugins:{legend:{position:"right"},title:{display:!0}}}})]})}var pn=function(e){Object(ln.a)(n,e);var t=Object(dn.a)(n);function n(e){var a;return Object(sn.a)(this,n),(a=t.call(this,e)).handleChange=function(){var e=a.inputPaymentMethodRef.current.value,t=a.inputPeriodRef.current.value;a.setState({data:[]}),a.getChartData(e,t)},a.inputPaymentMethodRef=r.a.createRef(),a.inputPeriodRef=r.a.createRef(),a.labels=["Bulawayo","Chegutu","Kadoma","Kwekwe","Harare","Victoria Falls","Hwange","Gweru","Johannesburg"],a.colors=["#33eaff","#4615b2","#00a152","#ffea00","#f50057","#ff5722","#fff","#2196f3","#aaa"],a.state={data:[],totalReservations:0},a}return Object(on.a)(n,[{key:"componentDidMount",value:function(){this.getChartData()}},{key:"getChartData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=x.a.firestore(),r=0;this.labels.forEach((function(c){var i=a.collection("reservations");if(""!==t&&"All"!==t&&(i=i.where("PaymentMethod","==",t)),""!==n&&"All"!==n){var s=new Date;s.setDate(s.getDate()-n),console.log(s),i=i.orderBy("BookingTime").where("BookingTime",">=",s)}i.orderBy("TravellingFrom").startAt(c).endAt(c+"\uf8ff").get().then((function(t){r+=t.size,e.setState({data:[].concat(Object(cn.a)(e.state.data),[t.size]),totalReservations:r})}))}))}},{key:"render",value:function(){var e=this.props.classes,t={labels:this.labels,datasets:[{label:"Cumulative Reservations",backgroundColor:this.colors,borderWidth:1,data:this.state.data}]};return Object(m.jsxs)("div",{style:{paddingTop:20},children:[Object(m.jsxs)(Fe.a,{container:!0,style:{padding:20},children:[Object(m.jsx)(Fe.a,{item:!0,className:e.grid,children:Object(m.jsxs)("label",{className:e.label,children:["Date: ",mt()(new Date).format("DD/MM/YYYY")]})}),Object(m.jsx)(Fe.a,{item:!0,className:e.grid,children:Object(m.jsxs)("label",{className:e.label,children:["Period:",Object(m.jsxs)("select",{name:"period",className:e.select,onChange:this.handleChange,ref:this.inputPeriodRef,children:[Object(m.jsx)("option",{className:e.option,children:"All"}),Object(m.jsx)("option",{className:e.option,value:"1",children:"1 day"}),Object(m.jsx)("option",{className:e.option,value:"7",children:"7 days"}),Object(m.jsx)("option",{className:e.option,value:"14",children:"14 days"}),Object(m.jsx)("option",{className:e.option,value:"30",children:"30 days"})]})]})}),Object(m.jsx)(Fe.a,{item:!0,className:e.grid,children:Object(m.jsxs)("label",{className:e.label,children:["No. of reservations: ",this.state.totalReservations]})}),Object(m.jsx)(Fe.a,{item:!0,className:e.grid,children:Object(m.jsxs)("label",{className:e.label,children:["Payment Method:",Object(m.jsxs)("select",{name:"paymentMethod",className:e.select,onChange:this.handleChange,ref:this.inputPaymentMethodRef,children:[Object(m.jsx)("option",{className:e.option,children:"All"}),Object(m.jsx)("option",{className:e.option,children:"Swipe"}),Object(m.jsx)("option",{className:e.option,children:"Cash"}),Object(m.jsx)("option",{className:e.option,children:"EcoCash"}),Object(m.jsx)("option",{className:e.option,children:"One Money"}),Object(m.jsx)("option",{className:e.option,children:"Telecash"})]})]})})]}),Object(m.jsxs)(Fe.a,{container:!0,children:[Object(m.jsx)(Fe.a,{item:!0,md:6,children:Object(m.jsx)(ze.a,{style:{backgroundColor:"#003c6c",color:"#fff",marginRight:5},children:Object(m.jsxs)(bn.a,{children:[Object(m.jsx)("h5",{style:{color:"#fff"},children:"Activity Chart"}),Object(m.jsx)(un.a,{height:200,data:t,options:{responsive:!0,title:{display:!0,text:"Reservations Summary",fontSize:17,color:"white",padding:10,align:"start"},legend:{labels:{color:"#fff"},display:!1,position:"right"},scales:{yAxes:[{ticks:{color:"#fff",beginAtZero:!0}}],xAxes:[{ticks:{color:"#fff",beginAtZero:!0}}]}}})]})})}),Object(m.jsx)(Fe.a,{item:!0,md:6,children:Object(m.jsx)(ze.a,{style:{backgroundColor:"#003c6c",marginLeft:5},children:Object(m.jsx)(bn.a,{children:Object(m.jsx)(hn,{})})})}),Object(m.jsxs)(Fe.a,{item:!0,md:6,children:[Object(m.jsx)("hr",{}),Object(m.jsx)(ze.a,{style:{backgroundColor:"#003c6c",marginLeft:5},children:Object(m.jsx)(bn.a,{children:Object(m.jsx)(On,{})})})]}),Object(m.jsxs)(Fe.a,{item:!0,md:6,children:[Object(m.jsx)("hr",{}),Object(m.jsx)(ze.a,{style:{backgroundColor:"#003c6c",marginLeft:5},children:Object(m.jsx)(bn.a,{children:Object(m.jsx)(xn,{})})})]})]})]})}}]),n}(r.a.Component),mn=Object(jn.a)((function(e){return{select:{backgroundColor:"transparent",color:"white",borderColor:"transparent"},option:{color:"black"},label:{color:"white",fontSize:14},grid:{paddingLeft:20,color:"#fff"}}}),{withTheme:!0})(pn),fn=Object(o.a)((function(e){return{root:{marginTop:80}}}));function vn(){var e=fn();return Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)("h2",{style:{color:"#fff"},children:"Statistics"}),Object(m.jsx)(mn,{})]})}function gn(){return Object(m.jsxs)(l.a,{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(vn,{}),Object(m.jsx)(C,{})]})}var wn=Object(o.a)((function(e){return{root:{marginTop:80}}}));function yn(){var e=wn();return Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)("h2",{children:"Payments"}),Object(m.jsx)("p",{children:"Some payments data is coming here..."})]})}function Sn(){return Object(m.jsxs)(l.a,{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(yn,{}),Object(m.jsx)(C,{})]})}var Tn=Object(o.a)((function(e){return{root:{height:400,width:"100%",marginTop:80},button:{marginBottom:"10px"},filterBox:{margin:e.spacing(1)},grid:{backgroundColor:"#008394"}}})),kn=[{field:"from",headerName:"FROM",width:130,sortable:!0},{field:"to",headerName:"TO",width:130,sortable:!0},{field:"prices",headerName:"PRICES",width:200,sortable:!0,valueGetter:function(e){return"$".concat(e.row.prices.USD,", ZAR").concat(e.row.prices.ZAR,", ZWL$").concat(e.row.prices.ZWL)}},{field:"date",headerName:"DATE",width:160,valueGetter:function(e){return"".concat(e.row.date.toDate())}}];function Nn(){var e=Tn(),t=r.a.useState([]),n=Object(O.a)(t,2),a=n[0],c=n[1],i=r.a.useState([]),o=Object(O.a)(i,2),l=o[0],d=o[1],j=r.a.useState({from:"",to:""}),b=Object(O.a)(j,2),u=b[0],h=b[1],x=function(e,t){h(Object(s.a)(Object(s.a)({},u),{},Object(M.a)({},e,t))),f(e,t)},f=function(){var e=Object(B.a)(P.a.mark((function e(t,n){var a,r,i,o,j,b;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.firestore(),r=a.collection("fares"),i=[],o=u.from,j=u.to,"from"===t?o=n:"to"===t&&(j=n),(""!==o&&void 0!==o||""!==j&&void 0!==j)&&(r=""!==o&&void 0!==o&&""!==j&&void 0!==j?r.where("possibleTrips","array-contains","".concat(l[o],"-").concat(l[j])):""===o||void 0===o?r.where("cities","array-contains",l[j]):r.where("cities","array-contains",l[o])),e.next=9,r.get();case 9:b=e.sent,c(b.docs.map((function(e){var t=e.data();return 0===l.length&&-1===i.indexOf(t.from)&&i.push(t.from),0===l.length&&-1===i.indexOf(t.to)&&i.push(t.to),Object(s.a)(Object(s.a)({},t),{},{id:e.id})}))),0===l.length&&d(i);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return r.a.useState((function(){f()}),[]),Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)("h3",{style:{marginBottom:20,color:"#fff"},children:"Fares"}),Object(m.jsx)(ue.a,{variant:"contained",color:"primary",href:"/fares/add",className:e.button,children:"Add Fare"}),Object(m.jsx)("br",{}),Object(m.jsxs)(Fe.a,{container:!0,className:e.filterBox,spacing:2,children:[Object(m.jsx)(Fe.a,{item:!0,children:Object(m.jsx)(Fe.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:u.from,onChange:function(e){return x("from",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===l||void 0===l?void 0:l.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"From"})]})})}),Object(m.jsx)(Fe.a,{item:!0,children:Object(m.jsx)(Fe.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:u.to,onChange:function(e){return x("to",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===l||void 0===l?void 0:l.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"To"})]})})})]}),Object(m.jsx)(Ae.a,{className:e.grid,rows:a,columns:kn})]})}function Cn(){return Object(m.jsxs)(l.a,{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(Nn,{}),Object(m.jsx)(C,{})]})}var Dn=n(260),Pn=n(258),Mn=n.n(Pn),Bn=n(259),An=n.n(Bn),Fn=n(51),Ln=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)},fullWidth:{width:"100%",margin:e.spacing(.5)}}}));function In(e){var t,n,a,r,c,i,o,l,d,b,u,h=p.firestore(),O=Ln(),x=Object(j.g)();return"Are you sure you want to delete this trip?",b=Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Trip information"}),Object(m.jsxs)("table",{className:O.fullWidth,children:[Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Name:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:null===e||void 0===e||null===(t=e.trip)||void 0===t?void 0:t.name})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"From:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:null===e||void 0===e||null===(n=e.trip)||void 0===n?void 0:n.from})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"To:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:null===e||void 0===e||null===(a=e.trip)||void 0===a?void 0:a.to})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Date created:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Fn(null===e||void 0===e||null===(r=e.trip)||void 0===r||null===(c=r.date)||void 0===c?void 0:c.toDate()).format("LLL")})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Seats:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:null===e||void 0===e||null===(i=e.trip)||void 0===i?void 0:i.seats})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Stops:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Rn(null===e||void 0===e||null===(o=e.trip)||void 0===o?void 0:o.stops)})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Times:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:null===e||void 0===e||null===(l=e.trip)||void 0===l||null===(d=l.times)||void 0===d?void 0:d.join(", ")})})]})]}),u=Object(m.jsxs)(xe.a.Footer,{children:[Object(m.jsxs)("p",{children:[Object(m.jsx)("b",{children:"Note:"})," This action cannot be reversed!"]}),Object(m.jsx)("br",{}),Object(m.jsx)(ue.a,{onClick:function(){h.collection("trips").doc(e.id).delete().then((function(e){return alert("Trip deleted successfully!"),x.push("/trips-grid")})).catch((function(e){return alert("An error occurred!")}))},variant:"contained",color:"primary",className:O.button,children:"Delete"})]}),Object(m.jsxs)(xe.a,Object(s.a)(Object(s.a)({},e),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,class:"modal",children:[Object(m.jsx)(xe.a.Header,{closeButton:!0,children:Object(m.jsx)(xe.a.Title,{id:"contained-modal-title-vcenter",children:"Are you sure you want to delete this trip?"})}),Object(m.jsx)(xe.a.Body,{children:Object(m.jsx)("div",{className:O.root,children:b})}),u]}))}function Rn(e){if(void 0===e||null===e)return[];var t=new Map(Object.entries(e)),n=[];return t.forEach((function(e){n.push(e.name)})),n}var En=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)},fullWidth:{width:"100%",margin:e.spacing(.5)}}}));function Yn(e){var t,n,a,c,i=p.firestore(),o=En(),l=Object(j.g)(),d=r.a.useState({name:"",to:"",from:"",times:[],seats:0}),b=Object(O.a)(d,2),u=b[0],h=b[1],x=function(t,n){e.trip[t]=n,h(Object(s.a)(Object(s.a)({},u),{},Object(M.a)({},t,n)))},f=""===u.name||void 0===u.name||u.name!==e.trip.name?e.trip.name:u.name,v=""===u.to||void 0===u.to||u.to!==e.trip.to?e.trip.to:u.to,g=""===u.from||void 0===u.from||u.from!==e.trip.from?e.trip.from:u.from,w=void 0===u.times||0===u.times.length||u.times!==e.trip.times?null===e||void 0===e||null===(t=e.trip)||void 0===t||null===(n=t.times)||void 0===n?void 0:n.map((function(e){return{label:e,value:e}})):u.times,y=0===u.seats||void 0===u.seats||u.seats!==e.trip.seats?e.trip.seats:u.seats;return"Update trip",a=Object(m.jsxs)("div",{children:[Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Trip name"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"name",type:"text",value:f,required:!0,onChange:function(e){return x("name",e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"From"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"from",type:"text",value:g,required:!0,onChange:function(e){return x("from",e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"To"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"to",type:"text",value:v,required:!0,onChange:function(e){return x("to",e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Number of seats"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"seats",type:"number",value:y,required:!0,onChange:function(e){return x("seats",e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Departure times"}),Object(m.jsx)(Bt,{setTimes:function(e){x("times",e)},times:w})]}),c=Object(m.jsx)(xe.a.Footer,{children:Object(m.jsx)(ue.a,{onClick:function(){var t,n;i.collection("trips").doc(e.id).update({name:e.trip.name,to:e.trip.to,from:e.trip.from,seats:parseInt(e.trip.seats),times:null===(t=e.trip)||void 0===t||null===(n=t.times)||void 0===n?void 0:n.map((function(e){return console.log(e),e.value}))}).then((function(e){return alert("Trip successfully updated!"),l.push("/trips-grid")})).catch((function(e){return alert("An error occurred!")}))},variant:"contained",color:"primary",className:o.button,children:"Update"})}),Object(m.jsxs)(xe.a,Object(s.a)(Object(s.a)({},e),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,class:"modal",children:[Object(m.jsx)(xe.a.Header,{closeButton:!0,children:Object(m.jsx)(xe.a.Title,{id:"contained-modal-title-vcenter",children:"Update trip"})}),Object(m.jsx)(xe.a.Body,{children:Object(m.jsx)("div",{className:o.root,children:a})}),c]}))}var zn=Object(o.a)((function(e){return{root:{height:400,width:"100%",marginTop:80},button:{margin:10},grid:{backgroundColor:"#008394"},filterBox:{margin:e.spacing(1)},customButton:{margin:10,fontSize:"18px"}}}));var qn=[{field:"trip",headerName:"TRIP",width:200,sortable:!0,valueGetter:function(e){return"".concat(e.row.from," to ").concat(e.row.to)}},{field:"from",headerName:"FROM",width:130,sortable:!0},{field:"to",headerName:"TO",width:130,sortable:!0},{field:"times",headerName:"TIMES",width:160},{field:"stops",headerName:"STOPS",width:200,valueGetter:function(e){return"".concat(function(e){if(void 0===e||null===e)return[];var t=new Map(Object.entries(e)),n=[];return t.forEach((function(e){n.push(e.name)})),n}(e.row.stops))}},{field:"date",headerName:"DATE",width:160,valueGetter:function(e){return"".concat(e.row.date.toDate())}},{field:"",headerName:"ACTION",width:160,disableClickEventBubbling:!0,renderCell:function(e){return e.row.Button}}];function Wn(){var e=zn(),t=r.a.useState(!1),n=Object(O.a)(t,2),a=n[0],c=n[1],i=r.a.useState(!1),o=Object(O.a)(i,2),l=o[0],d=o[1],j=r.a.useState([]),b=Object(O.a)(j,2),u=b[0],h=b[1],x=r.a.useState({from:"",to:"",stops:[]}),f=Object(O.a)(x,2),v=f[0],g=f[1],w=r.a.useState({}),y=Object(O.a)(w,2),S=y[0],T=y[1],k=r.a.useState({}),N=Object(O.a)(k,2),C=N[0],D=N[1],F=r.a.useState({}),L=Object(O.a)(F,2),I=L[0],R=L[1],E=r.a.useState({}),Y=Object(O.a)(E,2),z=Y[0],q=Y[1],W=r.a.useState([]),H=Object(O.a)(W,2),U=H[0],G=H[1],Z=r.a.useState([]),K=Object(O.a)(Z,2),V=K[0],J=K[1],$=function(e,t){g(Object(s.a)(Object(s.a)({},v),{},Object(M.a)({},e,t))),_(e,t)},X=function(e,t){D(t),T(e),d(!0)},Q=function(e,t){q(t),R(e),c(!0)},_=function(){var t=Object(B.a)(P.a.mark((function t(n,a){var r,c,i,o,l,d,j;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=p.firestore(),c=r.collection("trips"),i=v.to,o=v.from,l=v.stops,d=[],t.t0=n,t.next="to"===t.t0?9:"from"===t.t0?11:"stops"===t.t0?13:15;break;case 9:return i=a,t.abrupt("break",15);case 11:return o=a,t.abrupt("break",15);case 13:return l=a,t.abrupt("break",15);case 15:return""!==o&&void 0!==o&&(c=c.where("from","==",U[o])),""!==i&&void 0!==i&&(c=c.where("to","==",U[i])),void 0!==l&&l.length>0&&l.forEach((function(e){c=c.where("stops."+e.value+".name","==",e.value)})),t.next=20,c.get();case 20:j=t.sent,h(j.docs.map((function(t){var n,a=t.data();return 0===U.length&&-1===d.indexOf(a.from)&&d.push(a.from),0===U.length&&-1===d.indexOf(a.to)&&d.push(a.to),0===U.length&&void 0!==a.stops&&Array.from(new Map(Object.entries(a.stops)).keys()).forEach((function(e){-1===d.indexOf(e)&&d.push(e)})),a.Button=Object(m.jsxs)("div",{children:[Object(m.jsx)(ue.a,(n={variant:"contained",color:"primary",className:e.customButton},Object(M.a)(n,"color","red"),Object(M.a)(n,"onClick",(function(){return Q(a,t.id)})),Object(M.a)(n,"children",Object(m.jsx)(Mn.a,{fontSize:"inherit"})),n)),Object(m.jsx)(ue.a,{variant:"contained",color:"primary",className:e.customButton,onClick:function(){return X(a,t.id)},children:Object(m.jsx)(An.a,{fontSize:"inherit"})})]}),Object(s.a)(Object(s.a)({},a),{},{id:t.id})}))),0===U.length&&G(d),0===U.length&&J(d.map((function(e){return{value:e,label:e}})));case 24:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return r.a.useState((function(){_()}),[]),Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)("h3",{style:{marginBottom:20,color:"#fff"},children:"Trips"}),Object(m.jsx)(ue.a,{variant:"contained",color:"primary",href:"/trips/add",className:e.button,children:"Add trip"}),Object(m.jsx)("br",{}),Object(m.jsxs)(Fe.a,{container:!0,className:e.filterBox,spacing:2,children:[Object(m.jsx)(Fe.a,{item:!0,children:Object(m.jsx)(Fe.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:v.from,onChange:function(e){return $("from",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===U||void 0===U?void 0:U.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"From"})]})})}),Object(m.jsx)(Fe.a,{item:!0,children:Object(m.jsx)(Fe.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:v.to,onChange:function(e){return $("to",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===U||void 0===U?void 0:U.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"To"})]})})}),Object(m.jsx)(Fe.a,{item:!0,children:Object(m.jsx)(Fe.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsx)(Dn.a,{closeMenuOnSelect:!1,isMulti:!0,options:V,onChange:function(e){$("stops",e)},style:{width:"400px"},className:"select-custom-class"}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Stops"})]})})})]}),Object(m.jsx)(Ae.a,{className:e.grid,rows:u,columns:qn}),Object(m.jsx)(In,{trip:S,id:C,show:l,onHide:function(){return d(!1)}}),Object(m.jsx)(Yn,{trip:I,id:z,show:a,onHide:function(){return c(!1)}})]})}function Hn(){return Object(m.jsxs)(l.a,{children:[Object(m.jsx)(Be,{}),Object(m.jsx)(Wn,{}),Object(m.jsx)(C,{})]})}var Un=Object(b.a)({palette:{primary:{main:"#ff3d00",dark:"#002884",contrastText:"#fff",light:"#757ce8"},secondary:{light:"#ff7961",main:"#ff4569",dark:"#ba000d",contrastText:"#000"},body:{maxWidth:"100%",backgroundColor:"#34495E",fontFamily:"Roboto"}}}),Gn=Object(o.a)((function(e){return{root:Object(s.a)(Object(s.a)({fontSize:13,width:"100%"},e.mixins.toolbar),{},{justifyContent:"flex-end"})}}));var Zn=function(){var e=Gn();return Object(m.jsx)(w,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(j.d,{children:Object(m.jsx)(l.a,{children:Object(m.jsxs)(u.a,{theme:Un,children:[Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)(y,{exact:!0,path:"/",component:rn}),Object(m.jsx)(y,{exact:!0,path:"/reservations",component:Ye}),Object(m.jsx)(y,{exact:!0,path:"/reservations/:id/add",component:Ze}),Object(m.jsx)(y,{exact:!0,path:"/trips",component:Dt}),Object(m.jsx)(y,{exact:!0,path:"/trips-grid",component:Hn}),Object(m.jsx)(y,{exact:!0,path:"/trips/add",component:It}),Object(m.jsx)(y,{exact:!0,path:"/trips/:id/stops",component:Kt}),Object(m.jsx)(y,{exact:!0,path:"/trips/:id/stops/add",component:Xt}),Object(m.jsx)(y,{exact:!0,path:"/fares",component:Cn}),Object(m.jsx)(y,{exact:!0,path:"/fares/add",component:tn}),Object(m.jsx)(y,{exact:!0,path:"/statistics",component:gn}),Object(m.jsx)(y,{exact:!0,path:"/payments",component:Sn}),Object(m.jsx)(y,{path:"/downloads/:id/:ticketID",component:function(e){return window.open("https://extracitywebhook.herokuapp.com/downloads/"+encodeURIComponent(e.match.params.ticketID)+"/"+encodeURIComponent(e.match.params.id),"_blank"),window.location.href="/reservations/"}})]}),Object(m.jsx)("div",{children:Object(m.jsx)(j.b,{exact:!0,path:"/login",component:Qe})})]})})})})})};i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(Zn,{})}),document.getElementById("root"))}},[[435,1,2]]]);
//# sourceMappingURL=main.3fe5721a.chunk.js.map