{"version":3,"sources":["firebase.config.js","contexts/AuthContext.jsx","PrivateRoute.jsx","components/layout/Footer.jsx","components/reservations/SearchTripForm.jsx","components/layout/Sidebar.jsx","components/reservations/DataGrid.jsx","pages/reservations/Data.jsx","components/reservations/ConfirmReservation.jsx","components/reservations/ReservationAdd.jsx","pages/reservations/AddReservation.jsx","components/accounts/Login.jsx","pages/accounts/login.jsx","components/trips/TripsTable.jsx","pages/trips/Trips.jsx","components/trips/MultipleTimeSelect.jsx","components/trips/TripCreateForm.jsx","pages/trips/AddTrip.jsx","components/trips/TripStopsTable.jsx","pages/trips/TripStops.jsx","components/trips/TripStopCreateForm.jsx","pages/trips/AddTripStop.jsx","components/fares/FareCreateForm.jsx","pages/fares/AddFare.jsx","components/home/Home.jsx","pages/home/homepage.jsx","components/statistics/ActivityChart.jsx","components/statistics/StatsChart.jsx","components/statistics/PaymentMethodChart.jsx","components/statistics/Statistics.jsx","components/statistics/StatsData.jsx","pages/statistics/Statistics.jsx","components/payments/PaymentsData.jsx","pages/payments/Payments.jsx","components/fares/FaresGrid.jsx","pages/fares/Grid.jsx","components/trips/DeleteModal.jsx","components/trips/EditModal.jsx","components/trips/TripsGrid.jsx","pages/trips/TripGrid.jsx","components/accounts/Forgot.jsx","App.jsx","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","AuthContext","React","createContext","useAuth","useContext","AuthProvider","children","useState","currentUser","setCurrentUser","loading","setLoading","useEffect","onAuthStateChanged","user","value","login","email","password","signInWithEmailAndPassword","logout","signOut","Provider","PrivateRoute","Component","component","rest","render","props","to","useStyles","makeStyles","theme","root","flexGrow","marginTop","marginBottom","backgroundColor","Footer","classes","AppBar","className","position","color","Container","maxWidth","Toolbar","Typography","variant","Date","getFullYear","moment","require","uuidv4","v4","display","flexWrap","margin","spacing","withoutLabel","textField","width","table","pricesContainer","padding","SearchTripForm","db","firestore","fare","setFare","seats","error","setSeats","history","useHistory","date","setDate","time","trip","route","paymentReference","currency","values","setValues","routes","setRoutes","a","collection","get","data","docs","map","doc","fetchRoutes","handleChange","prop","event","str","possibleTrips","target","undefined","where","limit","then","refs","size","alert","seatsAvailable","momentTravelDate","toDate","name","times","paidCount","d","setMinutes","getMinutes","pendingCount","num","submitButton","selectedTripInfo","Modal","FormControl","clsx","labelId","onChange","required","Array","from","Map","Object","entries","prices","keys","item","FormHelperText","id","Input","placeholder","pickUp","endAdornment","InputAdornment","aria-describedby","inputProps","Button","onClick","ticketId","dateString","y","toString","m","getMonth","getDate","length","formatDate","Math","floor","random","ticketID","arr","split","timestamp","seatNo","seat_letter","seat_number","generateRandomSeatNumber","refNo","replace","c","r","add","ID","TicketID","Currency","Amount","status","Trip","TravellingFrom","TravellingTo","BookingTime","TravelTime","platform","ref","push","button","key","counter","aria-labelledby","centered","class","Header","closeButton","Title","Body","console","log","newMap","forEach","v","k","amount","align","Intl","NumberFormat","style","format","disp","displayFares","drawerWidth","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","easeOut","enteringScreen","menuButton","marginRight","hide","drawer","flexShrink","drawerPaper","drawerHeader","alignItems","mixins","toolbar","justifyContent","content","contentShift","LogoutButton","profileButton","dropdownTitle","dropDownMenu","ListItemLink","ListItem","Sidebar","modalShow","setModalShow","useTheme","open","setOpen","setError","anchorEl","setAnchorEl","Alert","CssBaseline","IconButton","aria-label","edge","noWrap","aria-controls","aria-haspopup","currentTarget","endIcon","keepMounted","Boolean","onClose","MenuItem","Link","href","textDecoration","Drawer","anchor","paper","direction","Divider","List","ListItemIcon","ListItemText","primary","show","onHide","height","filterBox","grid","fontSize","headCells","field","headerName","description","sortable","valueGetter","params","row","firstName","lastName","DataTable","reservations","setReservations","search","fetchReservations","rts","property","queryRef","orderBy","toDateString","min","max","toUpperCase","query","empty","Grid","container","justify","e","rows","columns","Data","control","fullWidth","handleSubmit","formatter","reservation","lg","xs","firstname","lastname","phoneNumber","paymentMethod","card","ReservationAdd","useParams","setReservation","exists","Card","input","type","update","fullname","Email","PhoneNumber","PaymentMethod","encodeURIComponent","catch","AddReservation","Login","emailRef","useRef","passwordRef","preventDefault","current","Form","onSubmit","Group","Label","Control","disabled","minHeight","descendingComparator","b","getComparator","order","stableSort","array","comparator","stabilizedThis","el","index","sort","numeric","disablePadding","label","EnhancedTableHead","onSelectAllClick","numSelected","rowCount","onRequestSort","TableHead","TableRow","TableCell","Checkbox","indeterminate","checked","headCell","sortDirection","TableSortLabel","active","visuallyHidden","useToolbarStyles","paddingLeft","paddingRight","highlight","palette","secondary","main","lighten","light","text","dark","title","flex","EnhancedTableToolbar","Tooltip","minWidth","border","clip","overflow","top","TripsTable","setOrder","setOrderBy","selected","setSelected","page","setPage","dense","setDense","rowsPerPage","setRowsPerPage","trips","setTrips","fetchTrips","emptyRows","Paper","TableContainer","Table","newSelecteds","n","TableBody","slice","tripRef","isItemSelected","indexOf","link","hover","selectedIndex","newSelected","concat","handleClick","role","aria-checked","tabIndex","scope","join","displayStops","stops","colSpan","TablePagination","rowsPerPageOptions","count","onChangePage","newPage","onChangeRowsPerPage","parseInt","FormControlLabel","Switch","Trips","MultipleTimeSelect","options","x","setTimes","labelledBy","uuid","TripCreateForm","setName","setTo","setFrom","t","AddTrip","addLink","TripStopsTable","stop","displayTimes","TripStops","setTrip","TripStopCreateForm","fromEntries","to_to_stops","from_to_stops","stops_to_stops","docID","delete","set","AddTripStop","setDocID","FareCreateForm","updatePrices","cities","AddFare","Home","Homepage","ActivityChart","setActivityData","byoData","setByoData","harareData","setHarareData","vicfallsData","setVicfallsData","gweruData","setGweruData","kadomaData","setKadomaData","chegutuData","setChegutuData","kwekweData","setKwekweData","hwangeData","setHwangeData","labels","setLabels","dates","minDate","subtract","activitiesTotal","snapshot","state","byoTotal","harareTotal","vicfallsTotal","gweruTotal","kwekweTotal","kadomaTotal","chegutuTotal","hwangeTotal","fetchStats","datasets","fill","borderColor","fontColor","responsive","legend","scales","yAxes","ticks","beginAtZero","stepSize","xAxes","StatsChart","activityData","borderWidth","pointRadius","PaymentMethodChart","ecocashData","setEcoCashData","oneMoneyData","setOneMoneyData","swipeData","setSwipeData","cashData","setCashData","telecashData","setTelecashData","fetchData","indexAxis","elements","bar","plugins","Statistics","inputPaymentMethodRef","period","inputPeriodRef","setState","getChartData","createRef","colors","totalReservations","this","total","pickupPoint","reservationsRef","startAt","endAt","paddingTop","select","option","md","CardContent","withStyles","withTheme","StatsData","PaymentsData","Payments","USD","ZAR","ZWL","FaresGrid","fares","setFares","setCities","fetchFares","dataRef","DeleteModal","EditModal","dname","dto","dfrom","dtimes","dseats","customButton","disableClickEventBubbling","renderCell","TripsGrid","editShow","setEditShow","deleteShow","setDeleteShow","deleteTrip","setDeleteTrip","deleteID","setDeleteID","editTrip","setEditTrip","editID","setEditID","setOptions","handleDelete","handleEdit","closeMenuOnSelect","isMulti","selectedOptions","TripGrid","Forgot","createMuiTheme","contrastText","body","fontFamily","App","ThemeProvider","exact","path","window","match","location","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1182d072.chunk.js","sourcesContent":["import firebase from \"firebase\"; //firebase/app\r\n// import \"firebase/firestore\";\r\n\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_SENDER_ID,\r\n  appId: process.env.REACT_APP_MESSAGING_APP_ID,\r\n  // measurementId: \"G-776MMG1FPL\",\r\n};\r\n\r\n//Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase;\r\n","import React from \"react\";\r\nimport firebase from \"../firebase.config\";\r\n\r\nconst auth = firebase.auth();\r\n\r\nconst AuthContext = React.createContext();\r\n\r\nexport function useAuth() {\r\n  return React.useContext(AuthContext);\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [currentUser, setCurrentUser] = React.useState();\r\n  const [loading, setLoading] = React.useState(true);\r\n\r\n  // function register(email, password) {\r\n  //   return auth.createUserWithEmailAndPassword(email, password);\r\n  // }\r\n\r\n  function login(email, password) {\r\n    return auth.signInWithEmailAndPassword(email, password);\r\n  }\r\n\r\n  function logout() {\r\n    return auth.signOut();\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged((user) => {\r\n      setCurrentUser(user);\r\n      setLoading(false);\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const value = {\r\n    currentUser,\r\n    // register,\r\n    login,\r\n    logout,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\n// export default AuthProvider;\r\n","import React from 'react'\r\nimport { Redirect, Route } from 'react-router'\r\nimport { useAuth } from './contexts/AuthContext'\r\n\r\nexport default function PrivateRoute({ component: Component, ...rest }) {\r\n    const { currentUser } = useAuth()\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={(props) => {\r\n                return currentUser ? (\r\n                    <Component {...props} />\r\n                ) : (\r\n                    <Redirect to='/login' />\r\n                );\r\n            }}\r\n        ></Route>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        marginTop: '15%', //100px\r\n        marginBottom: \"10px\",\r\n        backgroundColor: \"#ad1457\",\r\n    },\r\n}));\r\n\r\nexport default function Footer() {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <AppBar className={classes.root} position=\"relative\" color=\"primary\">\r\n            <Container maxWidth=\"md-12\">\r\n                <Toolbar>\r\n                    <Typography variant=\"body1\" color=\"inherit\">\r\n                        First Source Technology {new Date().getFullYear()}\r\n                    </Typography>\r\n                </Toolbar>\r\n            </Container>\r\n        </AppBar>\r\n    );\r\n}\r\n\r\nexport { Footer };\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport DatePicker from 'react-date-picker';\r\nimport firebase from \"../../firebase.config\";\r\nimport { useHistory } from 'react-router-dom';\r\nvar moment = require(\"moment\");\r\nconst { v4: uuidv4 } = require(\"uuid\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  margin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  withoutLabel: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  textField: {\r\n    width: '25ch', //25ch\r\n    // fontSize: '11',\r\n  },\r\n  table: {\r\n    width: '100%',\r\n  },\r\n  pricesContainer: {\r\n    padding: theme.spacing(1),\r\n  }\r\n}));\r\n\r\n\r\nexport default function SearchTripForm(props) {\r\n  const db = firebase.firestore();\r\n  const classes = useStyles();\r\n  const [fare, setFare] = React.useState(null);\r\n  const [seats, setSeats] = React.useState({\r\n    seats: null, error: \"\"\r\n  });\r\n  const history = useHistory();\r\n  const [date, setDate] = React.useState(new Date());\r\n  const [values, setValues] = React.useState({\r\n    time: null,\r\n    trip: null,\r\n    route: null,\r\n    paymentReference: null,\r\n    currency: null\r\n  });\r\n  const [routes, setRoutes] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    const fetchRoutes = async () => {\r\n      const data = await db.collection(\"trips\").get();\r\n      setRoutes(data.docs.map((doc) => (doc.data())));\r\n    };\r\n    fetchRoutes();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const handleChange = (prop) => (event) => {\r\n    if (prop === \"trip\") {\r\n      //check if this trip has a fare\r\n      let str = routes[values.route]?.possibleTrips[event.target.value];\r\n\r\n      if (str !== undefined) {\r\n        db\r\n          .collection(\"fares\")\r\n          .where(\"possibleTrips\", \"array-contains\", str)\r\n          .limit(1)\r\n          .get().then(\r\n            (refs) => {\r\n              if (refs.size === 0) {\r\n                setFare(null);\r\n                setValues({ ...values, [prop]: null });\r\n                alert(\"Sorry the trip you selected does not have a fare associated with it, please select another one!\");\r\n              }\r\n              else {\r\n                setValues({ ...values, [prop]: event.target.value });\r\n                setFare(refs.docs[0].data());\r\n              }\r\n            }\r\n          );\r\n      }\r\n      else {\r\n        setFare(null);\r\n        setValues({ ...values, [prop]: null });\r\n        alert(\"Sorry the trip you selected does not have a fare associated with it, please select another one!\");\r\n      }\r\n    }\r\n    else setValues({ ...values, [prop]: event.target.value });\r\n\r\n    if (prop === \"time\") seatsAvailable(event.target.value);\r\n  };\r\n\r\n  const handleReserve = () => {\r\n    if (values.currency === null || values.trip === null || values.time === null || date === '' || values.route === null || fare === null || values.paymentReference === null) alert(\"Please fill in all input fields!\");\r\n    else {\r\n      //now reserve\r\n      const id = uuidv4();\r\n      var ticketId = ticketID();\r\n      let arr = routes[values.route].possibleTrips[values.trip].split('-');\r\n      let momentTravelDate = moment(date, \"YYYY-MM-DD\").toDate();\r\n      const timestamp = new Date();\r\n      var seatNo = generateRandomSeatNumber();\r\n      var refNo = generateRandomReferenceNumber();\r\n      let platform = 'Walk-in clients'\r\n\r\n      db\r\n        .collection(\"reservations\")\r\n        .add({\r\n          ID: id,\r\n          paymentReference: values.paymentReference,\r\n          TicketID: ticketId,\r\n          Currency: values.currency,\r\n          Amount: fare.prices[values.currency],\r\n          status: \"paid\",\r\n          Trip: routes[values.route].name,\r\n          TravellingFrom: arr[0],\r\n          TravellingTo: arr[1],\r\n          BookingTime: timestamp,\r\n          TravelTime: routes[values.route].times[values.time],\r\n          Date: momentTravelDate,\r\n          platform: platform,\r\n          seatNo: seatNo,\r\n          refNo: refNo,\r\n        })\r\n        .then((ref) => history.push(\"/reservations/\" + ref.id + \"/add\")\r\n        );\r\n    }\r\n  }\r\n\r\n  const seatsAvailable = (time) => {\r\n    let momentTravelDate = moment(date, \"YYYY-MM-DD\").toDate();\r\n    let trip = routes[values.route];\r\n\r\n    db\r\n      .collection(\"reservations\")\r\n      .where(\"Trip\", \"==\", trip.name)\r\n      .where(\"status\", \"==\", \"paid\")\r\n      .where(\"Date\", \"==\", momentTravelDate)\r\n      .where(\"TravelTime\", \"==\", trip.times[time])\r\n      .get().then((refs) => {\r\n        var paidCount = refs.size;\r\n\r\n        let d = new Date();\r\n        d.setMinutes(d.getMinutes() - 5);\r\n\r\n        db\r\n          .collection(\"reservations\")\r\n          .where(\"Trip\", \"==\", routes[values.route].name)\r\n          .where(\"status\", \"==\", \"pending\")\r\n          .where(\"Date\", \"==\", momentTravelDate)\r\n          .where(\"TravelTime\", \"==\", routes[values.route].times[time])\r\n          .where(\"BookingTime\", \">=\", d)\r\n          .get().then((refs) => {\r\n            let pendingCount = refs.size;\r\n\r\n            let num = trip.seats - paidCount - pendingCount;\r\n            let error = \"\";\r\n\r\n            if (num < 1) {\r\n              if (trip.seats === paidCount) {\r\n                error = \"There are no more seats available for the trip you selected!\"\r\n              }\r\n              else {\r\n                error = \"There are no seats available at the moment. Please check after 5 or so minutes\";\r\n              }\r\n            }\r\n\r\n            setSeats({ seats: num, error: error });\r\n          });\r\n      });\r\n\r\n  }\r\n\r\n  const displayFares = () => {\r\n    const getPrice = (currency, amount) => {\r\n      if (amount === undefined) return (<p>--</p>);\r\n\r\n      let formatter = new Intl.NumberFormat(\"en-US\", {\r\n        style: \"currency\",\r\n        currency: currency,\r\n      });\r\n\r\n      return formatter.format(amount).replace(currency, \"\").replace(\"$\", \"\");\r\n    }\r\n\r\n    const disp = () => {\r\n      if (fare.prices === undefined) return [];\r\n      let newMap = new Map(Object.entries(fare.prices));\r\n      let arr = [];\r\n\r\n      newMap.forEach((v, k) => {\r\n        arr.push((<tr><th>{k}</th><td align=\"right\">{getPrice(k, v)}</td></tr>));\r\n      });\r\n      return arr;\r\n    }\r\n\r\n    if (fare !== null) {\r\n      console.log(fare);\r\n      var arr = disp();\r\n      return (\r\n        <div className={clsx(classes.pricesContainer)}>\r\n          <h1>Prices</h1>\r\n          <table className={clsx(classes.table)}>\r\n            <tbody>\r\n              {\r\n                arr.map((item) => item)\r\n              }\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  let submitButton = null;\r\n  let selectedTripInfo = null;\r\n\r\n  if (values.route !== null) {\r\n    if (values.trip !== null && values.time !== null && date !== '' && fare !== null) {\r\n      if (seats['seats'] > 0) {\r\n        submitButton = (<Modal.Footer>\r\n          <p><b>Note:</b> Only click this button after the customer has made the necessary payments and please make sure the information entered is correct.</p>\r\n          <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n            <select\r\n              labelId=\"id\"\r\n              value={values.currency}\r\n              onChange={handleChange('currency')}\r\n              required\r\n            >\r\n              <option value=\"\">Select ...</option>\r\n              {(Array.from((new Map(Object.entries(fare?.prices ?? {}))).keys())).map((item) => {\r\n                return <option value={item}>{item}</option>;\r\n              })}\r\n            </select>\r\n            <FormHelperText id=\"standard-currency-helper-text\">Currency</FormHelperText>\r\n          </FormControl>\r\n          <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n            <Input\r\n              id=\"standard-adornment-payment-reference\"\r\n              placeholder=\"Payment reference\"\r\n              value={values.pickUp}\r\n              required\r\n              onChange={handleChange('paymentReference')}\r\n              endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n              aria-describedby=\"standard-payment-reference-helper-text\"\r\n              inputProps={{\r\n                'aria-label': 'Payment Reference',\r\n              }}\r\n            >\r\n            </Input>\r\n            <FormHelperText id=\"standard-payment-reference-helper-text\">Payment Reference</FormHelperText>\r\n          </FormControl>\r\n          <br />\r\n          <Button\r\n            onClick={handleReserve}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.button}>\r\n            Reserve\r\n            </Button>\r\n        </Modal.Footer>);\r\n      }\r\n      else {\r\n        if (seats['error'] !== '') alert(seats['error']);\r\n      }\r\n    }\r\n\r\n    selectedTripInfo = (\r\n      <div>\r\n        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n          <select\r\n            labelId=\"id\"\r\n            value={values.trip}\r\n            onChange={handleChange('trip')}\r\n            required\r\n          >\r\n            <option value=\"\">Select ...</option>\r\n            {routes[values.route]?.possibleTrips?.map((item, key) => {\r\n              return <option value={key}>{item.replace('-', \" to \")}</option>;\r\n            })}\r\n          </select>\r\n          <FormHelperText id=\"standard-date-helper-text\">Trips</FormHelperText>\r\n        </FormControl>\r\n        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n          <select\r\n            labelId=\"id\"\r\n            value={values.time}\r\n            onChange={handleChange('time')}\r\n            required\r\n          >\r\n            <option value=\"\">Select ...</option>\r\n            {routes[values.route]?.times?.map((item, counter) => {\r\n              return <option value={counter}>{item}</option>;\r\n            })}\r\n          </select>\r\n          <FormHelperText id=\"standard-date-helper-text\">Time (Bus leaves {routes[values.route]?.from} at )</FormHelperText>\r\n        </FormControl>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n      class=\"modal\"\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          Add a reservation\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <div className={classes.root}>\r\n          <div>\r\n            <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n              <select\r\n                labelId=\"id\"\r\n                value={values.route}\r\n                onChange={handleChange('route')}\r\n                required\r\n              >\r\n                <option value=\"\">Select ...</option>\r\n                {routes.map((item, counter) => {\r\n                  return <option value={counter}>{item.name}</option>;\r\n                })}\r\n              </select>\r\n              <FormHelperText id=\"standard-date-helper-text\">Route</FormHelperText>\r\n            </FormControl>\r\n            <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n              <DatePicker\r\n                onChange={setDate}\r\n                value={date}\r\n              />\r\n              <FormHelperText id=\"standard-date-helper-text\">Date of Travel</FormHelperText>\r\n            </FormControl>\r\n          </div>\r\n          {\r\n            selectedTripInfo\r\n          }\r\n          {\r\n            displayFares()\r\n          }\r\n        </div>\r\n      </Modal.Body>\r\n      {\r\n        submitButton\r\n      }\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction ticketID() {\r\n  //format: ExC-yymmdd-count\r\n\r\n  const d = new Date();\r\n  var dateString = formatDate(d);\r\n  var num = (Math.floor(Math.random() * 1000) + 1).toString();\r\n  num.length === 1 && (num = \"0\" + num);\r\n  num.length === 2 && (num = \"0\" + num);\r\n\r\n  return `ExC-${dateString}-${num}`;\r\n}\r\n\r\n//format date\r\nfunction formatDate(data) {\r\n  let str = \"\";\r\n  var y = data.getFullYear().toString();\r\n  var m = (data.getMonth() + 1).toString();\r\n  var d = data.getDate().toString();\r\n\r\n  d.length === 1 && (d = \"0\" + d);\r\n  m.length === 1 && (m = \"0\" + m);\r\n\r\n  str = y + m + d;\r\n  return str;\r\n}\r\n\r\nfunction generateRandomReferenceNumber() {\r\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(\r\n    /[xy]/g,\r\n    function (c) {\r\n      var r = (Math.random() * 16) | 0,\r\n        v = c === \"x\" ? r : (r & 0x3) | 0x8;\r\n      return v.toString(16);\r\n    }\r\n  );\r\n}\r\n\r\nfunction generateRandomSeatNumber() {\r\n  //temporary fix\r\n  var letters = [\r\n    \"A\",\r\n    \"B\",\r\n    \"C\",\r\n    \"D\",\r\n    \"E\",\r\n    \"F\",\r\n    \"G\",\r\n    \"H\",\r\n    \"I\",\r\n    \"J\",\r\n    \"K\",\r\n    \"L\",\r\n    \"M\",\r\n    \"N\",\r\n    \"O\",\r\n    \"P\",\r\n    \"Q\",\r\n    \"R\",\r\n    \"S\",\r\n    \"T\",\r\n    \"U\",\r\n    \"V\",\r\n    \"W\",\r\n    \"X\",\r\n    \"Y\",\r\n    \"Z\",\r\n  ];\r\n\r\n  var seat_letter = letters[Math.floor(Math.random() * 25).toString()];\r\n\r\n  var seat_number = (Math.floor(Math.random() * 100) + 1).toString();\r\n  seat_number.length === 1 && (seat_number = \"0\" + seat_number);\r\n\r\n  return seat_letter + seat_number;\r\n}","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport ExploreIcon from '@material-ui/icons/Explore';\r\nimport MonetizationOnIcon from \"@material-ui/icons/MonetizationOn\";\r\nimport DirectionsBusIcon from \"@material-ui/icons/DirectionsBus\";\r\nimport FlightIcon from '@material-ui/icons/Flight';\r\nimport LoyaltyIcon from '@material-ui/icons/Loyalty';\r\nimport AssessmentIcon from '@material-ui/icons/Assessment';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { Alert } from \"react-bootstrap\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport SearchTripForm from \"../reservations/SearchTripForm\";\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\n\r\nconst drawerWidth = 240;\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n\r\n\r\n    },\r\n    appBar: {\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n        backgroundColor: \"#34495E\",\r\n    },\r\n    appBarShift: {\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        marginLeft: drawerWidth,\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    hide: {\r\n        display: 'none',\r\n    },\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n\r\n    },\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n        backgroundColor: \"#34495E\",\r\n        color: \"#ffffff\",\r\n    },\r\n    drawerHeader: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: theme.spacing(0, 1),\r\n        // necessary for content to be below app bar\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: 'flex-end',\r\n    },\r\n    content: {\r\n        flexGrow: 1,\r\n        padding: theme.spacing(3),\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n        marginLeft: -drawerWidth,\r\n    },\r\n    contentShift: {\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n        marginLeft: 0,\r\n    },\r\n    LogoutButton: {\r\n        color: \"#F7F9F9\",\r\n        backgroundColor: \"#E74C3C\",\r\n    },\r\n    profileButton: {\r\n        backgroundColor: \"#2874A6\",\r\n        color: \"#F7F9F9\",\r\n    },\r\n    dropdownTitle: {\r\n        color: \"#ff1744\",\r\n\r\n    },\r\n    dropDownMenu: {\r\n        \"& .MuiPaper-root\": {\r\n            backgroundColor: \"#34495e\",\r\n            color: \"#fff\",\r\n        },\r\n    },\r\n}));\r\n\r\nfunction ListItemLink(props) {\r\n    return <ListItem button component=\"a\" {...props} />;\r\n}\r\n\r\nexport default function Sidebar() {\r\n    const [modalShow, setModalShow] = React.useState(false);\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const [open, setOpen] = React.useState(false);\r\n    const [error, setError] = React.useState();\r\n    const { currentUser, logout } = useAuth();\r\n    const history = useHistory();\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    async function handleLogout() {\r\n        setError(\"\");\r\n\r\n        try {\r\n            await logout();\r\n            history.push(\"/login\");\r\n        } catch {\r\n            setError(\"Failed to log out\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root} >\r\n            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n            <CssBaseline />\r\n            <AppBar\r\n                position=\"fixed\"\r\n                className={clsx(classes.appBar, {\r\n                    [classes.appBarShift]: open,\r\n                })}\r\n            >\r\n                <Toolbar>\r\n                    <IconButton\r\n                        color=\"inherit\"\r\n                        aria-label=\"open drawer\"\r\n                        onClick={handleDrawerOpen}\r\n                        edge=\"start\"\r\n                        className={clsx(classes.menuButton, open && classes.hide)}\r\n                    >\r\n                        <MenuIcon />\r\n                    </IconButton>\r\n                    <Typography variant=\"h6\" noWrap>\r\n                        Extracity Dashboard\r\n          </Typography>\r\n                    <Button\r\n                        aria-controls=\"simple-menu\"\r\n                        aria-haspopup=\"true\"\r\n                        onClick={handleClick}\r\n                        className={classes.dropdownTitle}\r\n                        endIcon={<ExpandMore />}\r\n                    >\r\n                        {currentUser.email}\r\n                    </Button>\r\n                    <Menu\r\n                        id=\"simple-menu\"\r\n                        anchorEl={anchorEl}\r\n                        keepMounted\r\n                        open={Boolean(anchorEl)}\r\n                        onClose={handleClose}\r\n                        className={classes.dropDownMenu}\r\n                    >\r\n                        <MenuItem\r\n                            component={Link}\r\n                            href=\"/update-profile\"\r\n                            style={{ color: \"black\", textDecoration: \"none\" }}\r\n                        >\r\n                            Update profile\r\n                     </MenuItem>\r\n                        <MenuItem\r\n                            component={Link}\r\n                            onClick={handleLogout}\r\n                            href=\"/logout\"\r\n                            style={{ color: \"red\", textDecoration: \"none\" }}\r\n                        >\r\n                            Logout\r\n                        </MenuItem>\r\n                    </Menu>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <Drawer\r\n                className={classes.drawer}\r\n                variant=\"persistent\"\r\n                anchor=\"left\"\r\n                open={open}\r\n                classes={{\r\n                    paper: classes.drawerPaper,\r\n                }}\r\n            >\r\n                <div className={classes.drawerHeader}>\r\n                    <IconButton onClick={handleDrawerClose}>\r\n                        {theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\r\n                    </IconButton>\r\n                </div>\r\n                <Divider />\r\n                <List>\r\n                    <ListItem>\r\n                        <Button variant=\"contained\" color=\"primary\" onClick={() => setModalShow(true)}>\r\n                            <AddCircleIcon />\r\n                            Add a reservation\r\n                        </Button>\r\n                    </ListItem>\r\n                    <ListItemLink href=\"/\">\r\n                        <ListItemIcon>\r\n                            <HomeIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Home\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n\r\n                    <ListItemLink href=\"/reservations\">\r\n                        <ListItemIcon>\r\n                            <ExploreIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Reservations\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n\r\n                    <Divider />\r\n\r\n                    <ListItemLink href=\"/statistics\">\r\n                        <ListItemIcon>\r\n                            <AssessmentIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Statistics\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n\r\n                    <ListItemLink href=\"/payments\">\r\n                        <ListItemIcon>\r\n                            <MonetizationOnIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Payments\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n\r\n                    <ListItemLink href=\"/trips-grid\">\r\n                        <ListItemIcon>\r\n                            <FlightIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Trip Grid\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n                    <ListItemLink href=\"/fares\">\r\n                        <ListItemIcon>\r\n                            <DirectionsBusIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Fares Grid\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n                    <ListItemLink href=\"/trips\">\r\n                        <ListItemIcon>\r\n                            <LoyaltyIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Trip Stops\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n                </List>\r\n                <SearchTripForm\r\n                    show={modalShow}\r\n                    onHide={() => setModalShow(false)}\r\n                />\r\n            </Drawer>\r\n        </div>\r\n    );\r\n}\r\n\r\n// <ListItemLink href=\"/reservations/add-reservation\">\r\n                    //     <ListItemIcon>\r\n                    //         <AirlineSeatReclineNormalSharpIcon color=\"primary\" />\r\n                    //     </ListItemIcon>\r\n                    //     <ListItemText primary=\"Add Reservation\" />\r\n                    // </ListItemLink>","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport firebase from \"../../firebase.config\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport DatePicker from 'react-date-picker';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nvar moment = require(\"moment\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: 400,\r\n        width: '100%',\r\n        marginTop: 80,\r\n\r\n    },\r\n    button: {\r\n        marginBottom: '10px',\r\n    },\r\n    filterBox: {\r\n        margin: theme.spacing(1),\r\n        // backgroundColor: '#ffcd38',\r\n        backgroundColor: '#003c6c'\r\n    },\r\n    grid: {\r\n        backgroundColor: '#008394',\r\n        color: '#fafafa',\r\n        // color: 'black',\r\n        fontSize: 15,\r\n        // fontFamily: 'sans-serif'\r\n\r\n    }\r\n}));\r\n\r\nconst headCells = [\r\n    {\r\n        field: \"fullname\",\r\n        headerName: \"FULL NAME\",\r\n        description: 'This column has a value',\r\n        sortable: false,\r\n        width: 160,\r\n        valueGetter: (params) =>\r\n            `${params.row.firstName}  ${params.row.lastName}`,\r\n    },\r\n    { field: \"PhoneNumber\", headerName: \"PHONE #\", width: 130, },\r\n    { field: \"Trip\", headerName: \"TRIP\", width: 170 },\r\n    {\r\n        field: \"Date\", headerName: \"TRAVEL DATE\", width: 160, valueGetter: params => `${params.row.Date.toDate()}`,\r\n    },\r\n    { field: \"TravelTime\", headerName: \"TIME\", width: 110 },\r\n    { field: \"Amount\", headerName: \"AMOUNT\", width: 120, valueGetter: params => `${params.row.Currency} ${params.row.Amount}` },\r\n    { field: \"TicketID\", headerName: \"TICKET ID\", width: 180 },\r\n]\r\n\r\nexport default function DataTable() {\r\n    const classes = useStyles();\r\n    const [reservations, setReservations] = React.useState([]);\r\n    const [routes, setRoutes] = React.useState([]);\r\n    const [values, setValues] = React.useState({\r\n        route: '',\r\n        trip: '',\r\n        time: '',\r\n        from: '',\r\n        to: '',\r\n        search: '',\r\n    });\r\n    const db = firebase.firestore();\r\n\r\n    const handleChange = (prop, value) => {\r\n        setValues({ ...values, [prop]: value });\r\n        if (prop !== 'search' || (prop === 'search' && (value.length > 14 || value.length === 0))) {\r\n            fetchReservations(null, prop, value);\r\n        }\r\n    }\r\n\r\n    const handleTo = (value) => {\r\n        handleChange(\"to\", value);\r\n    }\r\n    const handleFrom = (value) => {\r\n        handleChange(\"from\", value);\r\n    }\r\n\r\n    React.useState(() => {\r\n        const fetchRoutes = async () => {\r\n            const data = await db.collection(\"trips\").get();\r\n            let rts = data.docs.map((doc) => (doc.data()));\r\n            setRoutes(rts);\r\n            fetchReservations(rts);\r\n        };\r\n\r\n        fetchRoutes();\r\n    }, []);\r\n\r\n    const fetchReservations = async (r = null, property = null, value = null) => {\r\n        let rts;\r\n        if (r === null) rts = routes;\r\n        else rts = r;\r\n\r\n\r\n        let from = values.from;\r\n        let to = values.to;\r\n        let route = values.route;\r\n        let trip = values.trip;\r\n        let time = values.time;\r\n        // eslint-disable-next-line\r\n        let search = values.search;\r\n\r\n        switch (property) {\r\n            case 'to':\r\n                to = value;\r\n                break;\r\n            case 'from':\r\n                from = value;\r\n                break;\r\n            case 'route':\r\n                route = value;\r\n                break;\r\n            case 'trip':\r\n                trip = value;\r\n                break;\r\n            case 'time':\r\n                time = value;\r\n                break;\r\n            case 'search':\r\n                // eslint-disable-next-line\r\n                search = value;\r\n                break;\r\n            default:\r\n                console.log('No data')\r\n        }\r\n\r\n        const data = db.collection('reservations');\r\n        let queryRef = data.where('status', '==', 'paid').orderBy('Date');\r\n\r\n        if (route !== '' && rts[route] !== undefined) {\r\n            queryRef = queryRef.where(\"Trip\", \"==\", rts[route]?.name);\r\n            if (trip !== '' && rts[route].possibleTrips[trip] !== undefined) {\r\n                let arr = rts[route].possibleTrips[trip].split('-');\r\n                queryRef = queryRef\r\n                    .where(\"TravellingFrom\", \"==\", arr[0])\r\n                    .where(\"TravellingTo\", \"==\", arr[1]);\r\n            }\r\n\r\n            if (time !== '' && rts[route].times[time] !== undefined) queryRef = queryRef.where(\"TravelTime\", \"==\", rts[route]?.times[time]);\r\n        }\r\n\r\n        if (from !== '' && from !== null && from !== undefined && to !== '' && to !== null && to !== undefined && from.toDateString() === to.toDateString()) {\r\n            let min = moment(from, \"YYYY-MM-DD\").toDate();\r\n            min.setDate(min.getDate() - 1);\r\n            let max = moment(to, \"YYYY-MM-DD\").toDate();\r\n            max.setDate(max.getDate() + 1);\r\n\r\n            queryRef = queryRef.where(\"Date\", \">\", min).where(\"Date\", \"<\", max);\r\n        }\r\n        else {\r\n            if (from !== '' && from !== null && from !== undefined) queryRef = queryRef.where(\"Date\", \">=\", moment(from, \"YYYY-MM-DD\").toDate());\r\n            if (to !== '' && to !== null && to !== undefined) {\r\n                let max = moment(to, \"YYYY-MM-DD\").toDate();\r\n                max.setDate(max.getDate() + 1);\r\n\r\n                queryRef = queryRef.where(\"Date\", \"<\", max);\r\n            }\r\n        }\r\n\r\n        if (search !== '' && search !== undefined) {\r\n            queryRef = queryRef.where('TicketID', '==', search.toUpperCase().replace('X', 'x'))\r\n        }\r\n\r\n        const query = await queryRef.get();\r\n        console.log(query.size);\r\n        if (query.empty) {\r\n            console.log('No matching documents.');\r\n            setReservations([]);\r\n            return;\r\n        }\r\n\r\n        setReservations(query.docs.map(doc => ({ ...doc.data(), id: doc.id })));\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <h3 style={{ marginBottom: 20, color: \"#fff\", }}>Ticket Reservation List</h3>\r\n            <br />\r\n            <Grid container className={classes.filterBox} spacing={2}>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.route}\r\n                                onChange={(e) => handleChange('route', e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"\">All</option>\r\n                                {routes?.map((item, counter) => {\r\n                                    return <option value={counter}>{item.name}</option>;\r\n                                })}\r\n                            </select>\r\n                            <FormHelperText id=\"standard-date-helper-text\" style={{ color: '#fff', fontSize: 15, }}>Route</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.trip}\r\n                                onChange={(e) => handleChange('trip', e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"\">All</option>\r\n                                {routes[values.route]?.possibleTrips?.map((item, key) => {\r\n                                    return <option value={key}>{item.replace('-', \" to \")}</option>;\r\n                                })}\r\n                            </select>\r\n                            <FormHelperText id=\"standard-trip-helper-text\" style={{ color: '#fff', fontSize: 15, }}>Trip</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.time}\r\n                                onChange={(e) => handleChange('time', e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"\">All</option>\r\n                                {routes[values.route]?.times?.map((item, counter) => {\r\n                                    return <option value={counter}>{item}</option>;\r\n                                })}\r\n                            </select>\r\n                            <FormHelperText id=\"standard-date-helper-text\" style={{ color: '#fff', fontSize: 15, }}>Time</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <DatePicker\r\n                                onChange={handleFrom}\r\n                                value={values.from}\r\n                            />\r\n                            <FormHelperText id=\"standard-date-helper-text\" style={{ color: '#fff', fontSize: 15, }}>From</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <DatePicker\r\n                                onChange={handleTo}\r\n                                value={values.to}\r\n                            />\r\n                            <FormHelperText id=\"standard-date-helper-text\" style={{ color: '#fff', fontSize: 15, }}>To</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"outlined-basic\"\r\n                                placeholder=\"Search...\"\r\n                                value={values.search}\r\n                                required\r\n                                onChange={(e) => handleChange('search', e.target.value)}\r\n                                endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n                                aria-describedby=\"standard-search-bar-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'Ticket ID',\r\n                                }}\r\n                            >\r\n                            </Input>\r\n                            <FormHelperText id=\"standard-search-helper-text\" style={{ color: '#fff', fontSize: 15, }}>Search using Ticket ID</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n            <DataGrid className={classes.grid} rows={reservations} columns={headCells} />\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport DataGrid from '../../components/reservations/DataGrid'\r\n\r\nexport default function Data() {\r\n    return (\r\n        <div>\r\n            <Sidebar />\r\n            <DataGrid />\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\n// import clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Grid from '@material-ui/core/Grid';\r\n// import Paper from '@material-ui/core/Paper';\r\nvar moment = require(\"moment\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    flexGrow: 1,\r\n  },\r\n  margin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  withoutLabel: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  table: {\r\n    width: '100%',\r\n  },\r\n  pricesContainer: {\r\n    padding: theme.spacing(1),\r\n  },\r\n  paper: {\r\n    height: 140,\r\n    width: 100,\r\n  },\r\n  control: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  fullWidth: {\r\n    width: '100%',\r\n    margin: theme.spacing(0.5),\r\n  },\r\n}));\r\n\r\n\r\nexport default function SearchTripForm(props) {\r\n  const classes = useStyles();\r\n\r\n  let submitButton = null;\r\n\r\n  if (props.values.trip !== null && props.values.time !== null) {\r\n    submitButton =\r\n      (<Modal.Footer>\r\n        <p><b>Note:</b> Please click the save button after you have confirmed the information displayed above.</p>\r\n        <Button\r\n          onClick={props.handleSubmit}\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          className={classes.button}>\r\n          Save\r\n        </Button>\r\n      </Modal.Footer>);\r\n  }\r\n  else {\r\n\r\n  }\r\n\r\n  let formatter = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: props.reservation.Currency,\r\n  });\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n      size=\"lg\"\r\n      class=\"modal\"\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          Confirm details\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <div className={classes.root}>\r\n          <Grid container className={classes.root} spacing={2}>\r\n            <Grid item lg={6}>\r\n              <Grid container justify=\"left\" spacing={1}>\r\n                <h3>Ticket information</h3>\r\n                <table className={classes.fullWidth}>\r\n                  <tr>\r\n                    <td><b>Route:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.Trip}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Travelling from:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.TravellingFrom}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Travelling to:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.TravellingTo}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Date:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{moment(props.reservation.Date.toDate()).format('LL')}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Time (Leaves Bulawayo at):</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.TravelTime}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Amount:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.Currency}{formatter.format(props.reservation.Amount).replace(props.reservation.Currency, \"\").replace(\"$\", \"\")}</td>\r\n                  </tr>\r\n                </table>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Grid container justify=\"left\" spacing={1}>\r\n                <h3>Personal information</h3>\r\n                <table className={classes.fullWidth}>\r\n                  <tr>\r\n                    <td><b>First name:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.firstname}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Last name:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.lastname}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Email:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.email}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Phone number:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.phoneNumber}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Paid using:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.paymentMethod}</td>\r\n                  </tr>\r\n                </table>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      </Modal.Body>\r\n      {\r\n        submitButton\r\n      }\r\n    </Modal>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { Button, Card } from '@material-ui/core';\r\nimport firebase from \"../../firebase.config\";\r\nimport ConfirmReservation from './ConfirmReservation';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        marginTop: 80,\r\n    },\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    withoutLabel: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    textField: {\r\n        width: '25ch', //25ch\r\n        // fontSize: '11',\r\n    },\r\n    card: {\r\n        marginTop: 80,\r\n    },\r\n}));\r\n\r\nexport default function ReservationAdd() {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const db = firebase.firestore();\r\n    const { id } = useParams();\r\n    const [reservation, setReservation] = React.useState(null);\r\n    const [modalShow, setModalShow] = React.useState(false);\r\n    // eslint-disable-next-line\r\n    const [values, setValues] = React.useState({\r\n        email: null,\r\n        paymentMethod: null,\r\n        phoneNumber: null,\r\n        firstname: null,\r\n        lastname: null,\r\n    });\r\n\r\n    React.useEffect(() => {\r\n        const fetchData = () => {\r\n            db.collection(\"reservations\").doc(id).get().then((doc) => {\r\n                if (doc.exists) {\r\n                    setReservation(doc.data());\r\n                }\r\n            }\r\n            );\r\n        };\r\n        fetchData();\r\n        // eslint-disable-next-line\r\n    }, []);\r\n\r\n    const handleChange = (prop) => (event) => {\r\n        setValues({ ...values, [prop]: event.target.value });\r\n    };\r\n\r\n\r\n    const handleSubmit = () => {\r\n        if (values.firstname === null || values.lastname === null || values.paymentMethod === null || values.phoneNumber === null || values.email === null) {\r\n            alert('Please fill in all input fields.')\r\n        }\r\n        else {\r\n\r\n            // let indexes = Array.from(new Map(Object.entries(values)).values());\r\n            // indexes = [...indexes.concat(Array.from(new Map(Object.entries(reservation)).values()))];\r\n\r\n            db\r\n                .collection(\"reservations\")\r\n                .doc(id)\r\n                .update({\r\n                    firstName: values.firstname,\r\n                    lastName: values.lastname,\r\n                    fullname: `${values.firstname} ${values.lastname}`,\r\n                    Email: values.email,\r\n                    PhoneNumber: values.phoneNumber,\r\n                    PaymentMethod: values.paymentMethod,\r\n                    //indexes: indexes.join(\" \")\r\n                })\r\n                .then(ref => history.push(\"/downloads/\" + id + \"/\" + encodeURIComponent(reservation.TicketID))\r\n                ).catch(\r\n                    e => alert('An error occurred!')\r\n                );\r\n        }\r\n\r\n    }\r\n\r\n    if (reservation !== null) {\r\n        return (\r\n            <Card className={classes.card}>\r\n                <h3 style={{ padding: 20 }}>New Reservation</h3>\r\n                <form className={classes.root} >\r\n                    <div>\r\n\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"standard-adornment-first-name\"\r\n                                // placeholder=\"Andile\"\r\n                                required\r\n                                value={values.firstname}\r\n                                onChange={handleChange('firstname')}\r\n                                endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n                                aria-describedby=\"standard-first-name-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'First name',\r\n                                }}\r\n                            />\r\n                            <FormHelperText id=\"standard-first-name-helper-text\"><b>First Name</b></FormHelperText>\r\n                        </FormControl>\r\n\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"standard-adornment-last-name\"\r\n\r\n                                value={values.lastname}\r\n                                onChange={handleChange('lastname')}\r\n                                required\r\n\r\n                                aria-describedby=\"standard-last-name-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'Last name',\r\n                                }}\r\n                            />\r\n                            <FormHelperText id=\"standard-last-name-helper-text\"><b>Last Name</b></FormHelperText>\r\n                        </FormControl>\r\n\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"standard-adornment-phone-number\"\r\n\r\n                                value={values.phoneNumber}\r\n                                required\r\n                                onChange={handleChange('phoneNumber')}\r\n                                endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n                                aria-describedby=\"standard-phone-number-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'Phone Number',\r\n                                }}\r\n                            />\r\n                            <FormHelperText id=\"standard-phone-number-helper-text\"><b>Phone Number</b></FormHelperText>\r\n                        </FormControl>\r\n\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"standard-adornment-email\"\r\n                                // placeholder=\"andile.m@outlook.com\"\r\n                                value={values.email}\r\n                                required\r\n                                onChange={handleChange('email')}\r\n                                endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n                                aria-describedby=\"standard-email-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'Email',\r\n                                }}\r\n                            />\r\n                            <FormHelperText id=\"standard-email-helper-text\"><b>Email Address</b></FormHelperText>\r\n                        </FormControl>\r\n                    </div>\r\n                    <div>\r\n                        <br />\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.paymentMethod}\r\n                                onChange={handleChange('paymentMethod')}\r\n                                required\r\n                            >\r\n                                <option value=\"\">Select ...</option>\r\n                                <option>Swipe</option>\r\n                                <option>Ecocash</option>\r\n                                <option>One Money</option>\r\n                                <option>Telecash</option>\r\n                                <option>Cash</option>\r\n                                <option>Other</option>\r\n                            </select>\r\n                            <FormHelperText id=\"standard-payment-method-helper-text\"><b>Payment Method</b></FormHelperText>\r\n                        </FormControl>\r\n                        <br />\r\n                        <br />\r\n                        <br />\r\n                        <Button\r\n                            input\r\n                            type='button'\r\n                            onClick={() => {\r\n                                if (values.firstname === null || values.lastname === null || values.paymentMethod === null || values.phoneNumber === null || values.email === null) alert(\"Please fill in all input fields.\");\r\n                                else setModalShow(true);\r\n                            }}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            className=\"submitButton\">Submit</Button>\r\n                        <br />\r\n                        <br />\r\n                        {/* <input className='submitButton' type='submit' value='Submit' /> */}\r\n                    </div>\r\n                </form>\r\n                <ConfirmReservation\r\n                    reservation={reservation}\r\n                    values={values}\r\n                    handleSubmit={handleSubmit}\r\n                    show={modalShow}\r\n                    onHide={() => setModalShow(false)} />\r\n            </Card>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <div>\r\n                <h1>404</h1>\r\n                <h2>Page not found!</h2>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\n// import Navbar from '../../components/layout/Navbar'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport ReservationAdd from '../../components/reservations/ReservationAdd'\r\n\r\nexport default function AddReservation() {\r\n    return (\r\n        <div>\r\n            <Sidebar />\r\n            <ReservationAdd />\r\n            <Footer />\r\n        </div>\r\n\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport { Form, Button, Card, Alert } from \"react-bootstrap\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nexport default function Login() {\r\n    const emailRef = React.useRef();\r\n    const passwordRef = React.useRef();\r\n    const { login } = useAuth();\r\n    const [error, setError] = React.useState(\"\");\r\n    const [loading, setLoading] = React.useState(false);\r\n    const history = useHistory();\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            setError(\"\");\r\n            setLoading(true);\r\n            await login(emailRef.current.value, passwordRef.current.value);\r\n            history.push(\"/\");\r\n        } catch {\r\n            setError(\"Failed to log in.\");\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Card className={\"bg-dark text-white\"}>\r\n                <Card.Body>\r\n                    <h4 className=\"text-center mb-4\">Extracity Login</h4>\r\n\r\n                    {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                    <Form onSubmit={handleSubmit}>\r\n                        <Form.Group id=\"email\">\r\n                            <Form.Label>Email</Form.Label>\r\n                            <Form.Control type=\"email\" ref={emailRef} required />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group id=\"password\">\r\n                            <Form.Label>Password</Form.Label>\r\n                            <Form.Control type=\"password\" ref={passwordRef} required />\r\n                        </Form.Group>\r\n                        <Button disabled={loading} type=\"submit\" className=\"w-100\">\r\n                            Login\r\n            </Button>\r\n                    </Form>\r\n                </Card.Body>\r\n                <p className=\"forgot-password w-100 text-center mt-2\">\r\n                    Forgot password? <Link to=\"/forgot-password\">Click here</Link>\r\n                </p>\r\n            </Card>\r\n        </>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport Login from \"../../components/accounts/Login\";\r\nimport { Container } from \"react-bootstrap\";\r\n\r\nexport default function login() {\r\n    return (\r\n        <Container\r\n            className=\"d-flex align-items-center justify-content-center\"\r\n            style={{ minHeight: \"80vh\", }}\r\n        >\r\n            <div\r\n                className=\"w-100\"\r\n                style={{ maxWidth: \"350px\", alignItems: \"center\" }}\r\n            >\r\n                <Login />\r\n            </div>\r\n        </Container>\r\n    );\r\n}\r\nexport { login };\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport clsx from \"clsx\";\r\nimport { lighten, makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport firebase from \"../../firebase.config\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === \"desc\"\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n}\r\n\r\nconst headCells = [\r\n  {\r\n    id: \"name\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"TRIP\",\r\n  },\r\n  { id: \"from\", numeric: false, disablePadding: true, label: \"FROM\" },\r\n  { id: \"to\", numeric: false, disablePadding: true, label: \"TO\" },\r\n  { id: \"times\", numeric: false, disablePadding: true, label: \"TIMES\" },\r\n  { id: \"stops\", numeric: false, disablePadding: true, label: \"STOPS\" },\r\n  { id: \"date\", numeric: false, disablePadding: true, label: \"DATE\" },\r\n  { id: \"actions\", numeric: false, disablePadding: false, label: \"ACTIONS\" }\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const {\r\n    classes,\r\n    onSelectAllClick,\r\n    order,\r\n    orderBy,\r\n    numSelected,\r\n    rowCount,\r\n    onRequestSort,\r\n  } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n            checked={rowCount > 0 && numSelected === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ \"aria-label\": \"select all trips\" }}\r\n          />\r\n        </TableCell>\r\n        {headCells.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.numeric ? \"right\" : \"left\"}\r\n            padding={headCell.disablePadding ? \"none\" : \"default\"}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : \"asc\"}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === \"desc\" ? \"sorted descending\" : \"sorted ascending\"}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf([\"asc\", \"desc\"]).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === \"dark\" //initially light\r\n      ? {\r\n        color: theme.palette.secondary.main,\r\n        backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n      }\r\n      : {\r\n        color: theme.palette.text.primary,\r\n        backgroundColor: theme.palette.secondary.dark,\r\n      },\r\n  title: {\r\n    flex: \"1 1 100%\",\r\n  },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  const classes = useToolbarStyles();\r\n  const { numSelected } = props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography\r\n          className={classes.title}\r\n          color=\"inherit\"\r\n          variant=\"subtitle1\"\r\n          component=\"div\"\r\n        >\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography\r\n          className={classes.title}\r\n          variant=\"h5\"\r\n          id=\"tableTitle\"\r\n          component=\"div\"\r\n        >\r\n          Trips\r\n          <Link to=\"/trips/add\"><button>Add</button></Link>\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 ? (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      ) : (\r\n        <Tooltip title=\"Filter list\">\r\n          <IconButton aria-label=\"filter list\">\r\n            <FilterListIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};\r\n\r\nconst drawerWidth = 300;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    marginTop: 80,\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750, //750 initially\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\nexport default function TripsTable() {\r\n  const classes = useStyles();\r\n  const [order, setOrder] = React.useState(\"asc\");\r\n  const [orderBy, setOrderBy] = React.useState(\"calories\");\r\n  const [selected, setSelected] = React.useState([]);\r\n  const [page, setPage] = React.useState(0);\r\n  const [dense, setDense] = React.useState(false);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\r\n  //trips state\r\n  const [trips, setTrips] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    const fetchTrips = async () => {\r\n      const db = firebase.firestore();\r\n      await db.collection(\"trips\").get().then(\r\n        (data) => setTrips(data.docs.map((doc) => doc)\r\n        ))\r\n      //setTrips(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n    };\r\n    fetchTrips();\r\n  }, []);\r\n\r\n  // React.useEffect(() => {\r\n  //   fetchTrips();\r\n  // });\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === \"asc\";\r\n    setOrder(isAsc ? \"desc\" : \"asc\");\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = trips.map((n) => n.name);\r\n      setSelected(newSelecteds);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  const handleClick = (event, name) => {\r\n    const selectedIndex = selected.indexOf(name);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, name);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1)\r\n      );\r\n    }\r\n\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const handleChangeDense = (event) => {\r\n    setDense(event.target.checked);\r\n  };\r\n\r\n  const isSelected = (name) => selected.indexOf(name) !== -1;\r\n\r\n  const emptyRows =\r\n    rowsPerPage -\r\n    Math.min(rowsPerPage, trips.length - page * rowsPerPage);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <EnhancedTableToolbar numSelected={selected.length} />\r\n        <TableContainer>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size={dense ? \"small\" : \"medium\"}\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelected={selected.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={trips.length}\r\n            />\r\n            <TableBody>\r\n              {stableSort(trips, getComparator(order, orderBy))\r\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                .map((tripRef, index) => {\r\n                  const trip = tripRef.data();\r\n                  const isItemSelected = isSelected(trip.id);\r\n                  const labelId = `enhanced-table-checkbox-${index}`;\r\n                  let link = `/trips/${tripRef.id}/stops`;\r\n\r\n                  return (\r\n                    <TableRow\r\n                      hover\r\n                      onClick={(event) => handleClick(event, trip.id)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={isItemSelected}\r\n                      tabIndex={-1}\r\n                      key={trip.id}\r\n                      selected={isItemSelected}\r\n                    >\r\n                      <TableCell padding=\"checkbox\">\r\n                        <Checkbox\r\n                          checked={isItemSelected}\r\n                          inputProps={{ \"aria-labelledby\": labelId }}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell\r\n                        component=\"th\"\r\n                        id={labelId}\r\n                        scope=\"row\"\r\n                        padding=\"none\"\r\n                      >\r\n                        {trip.name}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {trip.from}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {trip.to}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {trip.times.join(\", \")}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">{displayStops(trip.stops)}</TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {moment(trip.date.toDate(), \"YYYY-MM-DD\").format(\r\n                          \"LLL\"\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        <Link to={link}><button>Stops</button></Link>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: (dense ? 33 : 53) * emptyRows }}>\r\n                  <TableCell colSpan={11} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[5, 10, 20]}\r\n          component=\"div\"\r\n          count={trips.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onChangePage={handleChangePage}\r\n          onChangeRowsPerPage={handleChangeRowsPerPage}\r\n        />\r\n      </Paper>\r\n      <FormControlLabel\r\n        control={<Switch checked={dense} onChange={handleChangeDense} />}\r\n        label=\"Dense padding\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction displayStops(map) {\r\n  if (map === undefined || map === null) return \"\";\r\n\r\n  var newMap = new Map(Object.entries(map));\r\n  var arr = []; // initially new Array()\r\n\r\n  newMap.forEach((v) => {\r\n    arr.push(v.name);\r\n  });\r\n\r\n  return arr.join(\", \");\r\n}","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripsTable from '../../components/trips/TripsTable'\r\n\r\nexport default function Trips() {\r\n    return (\r\n        <div>\r\n        \t<Sidebar />\r\n            <TripsTable />\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport MultiSelect from \"react-multi-select-component\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginTop: 80,\r\n  },\r\n}));\r\n\r\nexport default function MultipleTimeSelect(props) {\r\n  const classes = useStyles()\r\n  const options = [];\r\n\r\n  for (let x = 0; x < 2400; x = x + 100) {\r\n    for (let y = 0; y < 60; y = y + 15) {\r\n      var str = \"\";\r\n      if (x === 0) {\r\n        str = \"00\";\r\n      }\r\n      else if (x < 1000) {\r\n        str = \"0\"\r\n      }\r\n\r\n      str = str + (x + y);\r\n      if (str.length < 4) str = `0${str}`;\r\n      options.push({ label: str, value: str });\r\n    }\r\n  }\r\n  console.log(options);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <MultiSelect\r\n        options={options}\r\n        value={props.times}\r\n        onChange={e => props.setTimes(e)}\r\n        labelledBy=\"Select\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport MultipleTimeSelect from './MultipleTimeSelect';\r\nimport { useHistory } from 'react-router-dom';\r\nimport firebase from \"../../firebase.config\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nconst { uuid } = require(\"uuidv4\");\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginTop: 80,\r\n  },\r\n}));\r\n\r\nexport default function TripCreateForm(props) {\r\n  const classes = useStyles()\r\n  const history = useHistory();\r\n  const db = firebase.firestore();\r\n  const [name, setName] = useState();\r\n  const [to, setTo] = useState();\r\n  const [from, setFrom] = useState();\r\n  const [times, setTimes] = useState([]);\r\n  const [seats, setSeats] = useState(0);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (name === undefined || name === \"\" || seats === undefined || seats === \"\" || to === undefined || to === \"\" || from === undefined || from === \"\" || times === undefined || times.length === 0) alert(\"Please fill in all input fields!\");\r\n    else {\r\n      let id = uuid();\r\n\r\n      //save\r\n      db\r\n        .collection(\"trips\")\r\n        .add({\r\n          id: id,\r\n          name: name,\r\n          to: to,\r\n          from: from,\r\n          seats: parseInt(seats),\r\n          times: times.map((t) => { console.log(t); return t.value }),\r\n          date: new Date(),\r\n        })\r\n        .then(\r\n          (ref) =>\r\n            // fetching free slots\r\n            history.push(\"/trips/\" + ref.id + \"/stops\")\r\n        )\r\n        .catch(\r\n          (e) => alert(\"An error occurred!\")\r\n        );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={e => { handleSubmit(e) }} className={classes.root}>\r\n      <br />\r\n      <br />\r\n      <label>Trip name</label>\r\n      <br />\r\n      <input\r\n        name='name'\r\n        type='text'\r\n        value={name}\r\n        required\r\n        onChange={e => setName(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>From</label>\r\n      <br />\r\n      <input\r\n        name='from'\r\n        type='text'\r\n        value={from}\r\n        required\r\n        onChange={e => setFrom(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>To</label>\r\n      <br />\r\n      <input\r\n        name='to'\r\n        type='text'\r\n        value={to}\r\n        required\r\n        onChange={e => setTo(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>Number of seats</label>\r\n      <br />\r\n      <input\r\n        name='seats'\r\n        type='number'\r\n        value={seats}\r\n        required\r\n        onChange={e => setSeats(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>Departure times</label>\r\n      <br />\r\n      <MultipleTimeSelect setTimes={setTimes} times={times} />\r\n      <br />\r\n      <br />\r\n      <input\r\n        className='submitButton'\r\n        type='submit'\r\n        value='Save'\r\n      />\r\n    </form>\r\n  )\r\n}","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripCreateForm from '../../components/trips/TripCreateForm'\r\n\r\nexport default function AddTrip() {\r\n    return (\r\n        <div>\r\n            <Sidebar />\r\n            <TripCreateForm />\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport clsx from \"clsx\";\r\nimport { lighten, makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\n// import firebase from \"../../firebase.config\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === \"desc\"\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array?.map((el, index) => [el, index]);\r\n  stabilizedThis?.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis?.map((el) => el[0]);\r\n}\r\n\r\nconst headCells = [\r\n  {\r\n    id: \"name\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"STOP\",\r\n  },\r\n  { id: \"times\", numeric: true, disablePadding: true, label: \"TIMES\" },\r\n  { id: \"date\", numeric: true, disablePadding: false, label: \"DATE\" },\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const {\r\n    classes,\r\n    onSelectAllClick,\r\n    order,\r\n    orderBy,\r\n    numSelected,\r\n    rowCount,\r\n    onRequestSort,\r\n  } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead className={classes.root}>\r\n      <TableRow>\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n            checked={rowCount > 0 && numSelected === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ \"aria-label\": \"select all trips\" }}\r\n          />\r\n        </TableCell>\r\n        {headCells.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.numeric ? \"right\" : \"left\"}\r\n            padding={headCell.disablePadding ? \"none\" : \"default\"}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : \"asc\"}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === \"desc\" ? \"sorted descending\" : \"sorted ascending\"}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf([\"asc\", \"desc\"]).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === \"dark\" //initially light\r\n      ? {\r\n        color: theme.palette.secondary.main,\r\n        backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n      }\r\n      : {\r\n        color: theme.palette.text.primary,\r\n        backgroundColor: theme.palette.secondary.dark,\r\n      },\r\n  title: {\r\n    flex: \"1 1 100%\",\r\n  },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  let { id } = useParams();\r\n  const classes = useToolbarStyles();\r\n  const { numSelected } = props;\r\n  var addLink = `/trips/${id}/stops/add`;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography\r\n          className={classes.title}\r\n          color=\"inherit\"\r\n          variant=\"subtitle1\"\r\n          component=\"div\"\r\n        >\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography\r\n          className={classes.title}\r\n          variant=\"h5\"\r\n          id=\"tableTitle\"\r\n          component=\"div\"\r\n        >\r\n          Stops\r\n          <Link to={addLink}><button>Add</button></Link>\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 ? (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      ) : (\r\n        <Tooltip title=\"Filter list\">\r\n          <IconButton aria-label=\"filter list\">\r\n            <FilterListIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};\r\n\r\nconst drawerWidth = 300;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    marginTop: 80,\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750, //750 initially\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\nexport default function TripStopsTable(props) {\r\n  const classes = useStyles();\r\n  const [order, setOrder] = React.useState(\"asc\");\r\n  const [orderBy, setOrderBy] = React.useState(\"calories\");\r\n  const [selected, setSelected] = React.useState([]);\r\n  const [page, setPage] = React.useState(0);\r\n  const [dense, setDense] = React.useState(false);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\r\n  //trips state\r\n\r\n  // React.useEffect(() => {\r\n  //   const fetchTrips = async () => {\r\n  //     const db = firebase.firestore();\r\n  //     const data = await db.collection(\"trips\").get();\r\n  //     setTrips(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n  //   };\r\n  // }, []);\r\n\r\n  // React.useEffect(() => {\r\n  //   fetchTrips();\r\n  // });\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === \"asc\";\r\n    setOrder(isAsc ? \"desc\" : \"asc\");\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = props.trip.stops?.map((n) => n.name);\r\n      setSelected(newSelecteds);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  const handleClick = (event, name) => {\r\n    const selectedIndex = selected.indexOf(name);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, name);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected?.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1)\r\n      );\r\n    }\r\n\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const handleChangeDense = (event) => {\r\n    setDense(event.target.checked);\r\n  };\r\n\r\n  const isSelected = (name) => selected.indexOf(name) !== -1;\r\n\r\n  const emptyRows =\r\n    rowsPerPage -\r\n    Math.min(rowsPerPage, props.trip.stops?.length - page * rowsPerPage);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <EnhancedTableToolbar numSelected={selected?.length} />\r\n        <TableContainer>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size={dense ? \"small\" : \"medium\"}\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelected={selected?.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={props.trip.stops?.length}\r\n            />\r\n            <TableBody>\r\n              {stableSort((props.trip.stops === undefined || props.trip.stops === null) ? [] : Array.from(new Map(Object.entries(props.trip.stops)).values()), getComparator(order, orderBy))\r\n                ?.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                .map((stop, index) => {\r\n                  const isItemSelected = isSelected(stop.id);\r\n                  const labelId = `enhanced-table-checkbox-${index}`;\r\n\r\n                  stop = new Map(Object.entries(stop));\r\n                  return (\r\n\r\n                    <TableRow\r\n                      hover\r\n                      onClick={(event) => handleClick(event, stop.id)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={isItemSelected}\r\n                      tabIndex={-1}\r\n                      key={stop.get('id')}\r\n                      selected={isItemSelected}\r\n                    >\r\n                      <TableCell padding=\"checkbox\">\r\n                        <Checkbox\r\n                          checked={isItemSelected}\r\n                          inputProps={{ \"aria-labelledby\": labelId }}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell\r\n                        component=\"th\"\r\n                        id={labelId}\r\n                        scope=\"row\"\r\n                        padding=\"none\"\r\n                      >\r\n                        {stop.get('name')}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {displayTimes(stop.get('times'))}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {moment(stop.get('date').toDate(), \"YYYY-MM-DD\").format(\r\n                          \"LLL\"\r\n                        )}\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: (dense ? 33 : 53) * emptyRows }}>\r\n                  <TableCell colSpan={11} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[5, 10, 20]}\r\n          component=\"div\"\r\n          count={props.trip.stops?.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onChangePage={handleChangePage}\r\n          onChangeRowsPerPage={handleChangeRowsPerPage}\r\n        />\r\n      </Paper>\r\n      <FormControlLabel\r\n        control={<Switch checked={dense} onChange={handleChangeDense} />}\r\n        label=\"Dense padding\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction displayTimes(map) {\r\n  if (map === undefined || map === null) return \"\";\r\n  var newMap = new Map(Object.entries(map));\r\n  var arr = [];\r\n\r\n  newMap.forEach((v) => {\r\n    arr.push(v);\r\n  });\r\n\r\n  return arr.join(\", \");\r\n}","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripStopsTable from '../../components/trips/TripStopsTable'\r\nimport firebase from \"../../firebase.config\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nexport default function TripStops() {\r\n\tlet { id } = useParams();\r\n\t// const db = firebase.firestore();\r\n\tconst [trip, setTrip] = React.useState();\r\n\tlet display;\r\n\r\n\t//get the trip\r\n\tReact.useEffect(() => {\r\n\t\tconst fetchData = () => {\r\n\t\t\tconst db = firebase.firestore();\r\n\t\t\tdb.collection(\"trips\").doc(id).get().then((doc) => {\r\n\t\t\t\tconsole.log(doc);\r\n\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\tsetTrip(doc.data());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t);\r\n\t\t};\r\n\t\tfetchData();\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\t//display the stops\r\n\r\n\tif (trip !== undefined && trip !== null) {\r\n\t\tif (trip.stops === undefined || trip.stops === null) {\r\n\t\t\ttrip.stops = [];\r\n\t\t}\r\n\r\n\t\tdisplay = (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>{trip.name}</h1>\r\n\t\t\t\t<TripStopsTable trip={trip} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\telse\r\n\t\tdisplay = (\r\n\t\t\t<h1>Trip not found!</h1>\r\n\t\t);\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Sidebar />\r\n\t\t\t{display}\r\n\t\t\t<Footer />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\n// import MultipleTimeSelect from './MultipleTimeSelect';\r\nimport { useHistory } from 'react-router-dom';\r\nimport firebase from \"../../firebase.config\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nconst { uuid } = require(\"uuidv4\");\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginTop: 80,\r\n  },\r\n}));\r\n\r\n\r\n// eslint-disable-next-line\r\nfunction keyMap(src, target) {\r\n  target = target || {};\r\n  Object.keys(src).forEach(function (propName) {\r\n    var prop = src[propName];\r\n    if (typeof prop == \"object\") {\r\n      target[propName] = Object.keys(prop).join(',');\r\n      keyMap(prop, target);\r\n    }\r\n  });\r\n  return target;\r\n};\r\n\r\nexport default function TripStopCreateForm(props) {\r\n  const classes = useStyles()\r\n  const history = useHistory();\r\n  const db = firebase.firestore();\r\n  const [name, setName] = useState();\r\n  const [\r\n    times,\r\n    setTimes\r\n  ] = useState(new Map());\r\n\r\n  /*\r\n   setFares = (currency, amount) => {\r\n            times.delete(currency);\r\n            if (amount!=\"\" && amount!=undefined && amount!=null){\r\n              times[currency] = amount;\r\n            }\r\n          }\r\n  setTimes = (departure, arrival) => {\r\n            times.delete(\"time\" + departure.toString());\r\n            if (arrival!=\"\" && arrival!=undefined && arrival!=null){\r\n              times[\"time\" + departure.toString()] = arrival;\r\n            }\r\n          }\r\n  */\r\n\r\n\r\n\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (name === undefined || name === \"\" || times === undefined || times.length === 0) alert(\"Please fill in all input fields!\");\r\n    else {\r\n      let id = uuid();\r\n\r\n      var stops = props.trip?.stops ?? {};\r\n\r\n      //console.log(stops);\r\n      //stops.delete(name);\r\n      stops[name] = {\r\n        id: id,\r\n        name: name,\r\n        times: Object.fromEntries(times),\r\n        date: new Date(),\r\n      }\r\n\r\n      //console.log(stops);\r\n      //stops.delete(name);\r\n      //         stops[name] = {\r\n      //           id: id,\r\n      //           name: name,\r\n      //           times: Object.fromEntries(times),\r\n      //           date: new Date(),\r\n      //         }\r\n\r\n      //create possible trips\r\n      //[from] to any other stop including [to]\r\n      //[stop] to any other [stop]\r\n      let arr = Array.from(new Map(Object.entries(stops)).values());\r\n      let to_to_stops = [`${props.trip?.from}-${props.trip?.to}`];\r\n      let from_to_stops = (arr).map((item) => `${props.trip?.from}-${item.name}`);\r\n      let stops_to_stops = []\r\n      for (var x = 0; x < arr.length; x++) {\r\n        stops_to_stops.push(`${arr[x].name}-${props.trip?.to}`);\r\n        if (x < arr.length - 1) {\r\n          for (var y = x + 1; y < arr.length; y++) {\r\n            stops_to_stops.push(`${arr[x].name}-${arr[y].name}`);\r\n          }\r\n        }\r\n      }\r\n\r\n      var possibleTrips = to_to_stops.concat(from_to_stops, stops_to_stops);\r\n\r\n      //save\r\n      db\r\n        .collection(\"trips\")\r\n        .doc(props.docID)\r\n        .update({ stops: stops, possibleTrips: possibleTrips })\r\n        .then(\r\n          (doc) =>\r\n            // fetching free slots\r\n            history.push(\"/trips/\" + props.docID + \"/stops\")\r\n        )\r\n        .catch(\r\n          (e) => { alert(\"An error occurred!\"); console.log(e); }\r\n        );\r\n\r\n    }\r\n\r\n  }\r\n  return (\r\n    <form onSubmit={e => { handleSubmit(e) }} className={classes.root}>\r\n      <br />\r\n      <br />\r\n      <label>City or town name</label>\r\n      <br />\r\n      <input\r\n        name='name'\r\n        type='text'\r\n        value={name}\r\n        required\r\n        onChange={e => setName(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>Times</label>\r\n      <br />\r\n      <table>\r\n        <tr>\r\n          <th>Leaves {props.trip.from} at</th>\r\n          <th>Leaves this stop at</th>\r\n        </tr>\r\n        {\r\n          props.trip.times.map((time) => {\r\n            return (\r\n              <tr>\r\n                <td>{time}</td>\r\n                <td>\r\n                  <input\r\n                    name='to'\r\n                    type=\"number\"\r\n                    onChange={e => {\r\n                      times.delete(time);\r\n                      setTimes(times.set(time, e.target.value))\r\n                    }\r\n                    }\r\n                  />\r\n                </td>\r\n              </tr>\r\n            )\r\n          })\r\n        }\r\n      </table>\r\n      <br />\r\n      <br />\r\n      <input\r\n        className='submitButton'\r\n        type='submit'\r\n        value='Save'\r\n      />\r\n    </form>\r\n  );\r\n}\r\n\r\n","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripStopCreateForm from '../../components/trips/TripStopCreateForm'\r\nimport firebase from \"../../firebase.config\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nexport default function AddTripStop() {\r\n\tlet { id } = useParams();\r\n\t// const db = firebase.firestore();\r\n\tconst [trip, setTrip] = React.useState();\r\n\tconst [docID, setDocID] = React.useState();\r\n\tlet display;\r\n\r\n\t//get the trip\r\n\t// const fetchData = () => {\r\n\t// \tconst db = firebase.firestore();\r\n\t// \tdb.collection(\"trips\").doc(id).get().then((doc) => {\r\n\t// \t\tconsole.log(doc);\r\n\t// \t\tif (doc.exists) {\r\n\t// \t\t\tsetTrip(doc.data());\r\n\t// \t\t\tsetDocID(doc.id);\r\n\t// \t\t}\r\n\t// \t}\r\n\t// \t);\r\n\t// }\r\n\r\n\t// React.useEffect(() => {\r\n\t// \tfetchData();\r\n\t// }, []);\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst fetchData = () => {\r\n\t\t\tconst db = firebase.firestore();\r\n\t\t\tdb.collection(\"trips\").doc(id).get().then((doc) => {\r\n\t\t\t\tconsole.log(doc);\r\n\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\tsetTrip(doc.data());\r\n\t\t\t\t\tsetDocID(doc.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t);\r\n\t\t};\r\n\t\tfetchData();\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\t//display the stops\r\n\r\n\tif (trip !== undefined && trip !== null)\r\n\t\tdisplay = (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>{trip.name}</h1>\r\n\t\t\t\t<TripStopCreateForm trip={trip} docID={docID} />\r\n\t\t\t</div>\r\n\t\t);\r\n\telse\r\n\t\tdisplay = (\r\n\t\t\t<h1>Trip not found!</h1>\r\n\t\t);\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Sidebar />\r\n\t\t\t{display}\r\n\t\t\t<Footer />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport firebase from \"../../firebase.config\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nconst { uuid } = require(\"uuidv4\");\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginTop: 80,\r\n  },\r\n}));\r\n\r\nexport default function FareCreateForm(props) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const db = firebase.firestore();\r\n  const [to, setTo] = useState();\r\n  const [from, setFrom] = useState();\r\n  // eslint-disable-next-line\r\n  const [prices, setPrices] = useState(new Map());\r\n\r\n  const updatePrices = (currency, amount) => {\r\n    prices.delete(currency);\r\n    prices.set(currency, amount);\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (to === undefined || to === \"\" || from === undefined || from === \"\" || prices === undefined || prices.length === 0) alert(\"Please fill in all input fields!\");\r\n    else {\r\n      let id = uuid();\r\n      \r\n      let possibleTrips = [`${to}-${from}`, `${from}-${to}`];\r\n      let cities = [to,from];\r\n\r\n      //save\r\n      db\r\n        .collection(\"fares\")\r\n        .add({\r\n          id: id,\r\n          to: to,\r\n          from: from,\r\n          prices: Object.fromEntries(prices),\r\n          possibleTrips: possibleTrips,\r\n          cities: cities,\r\n          date: new Date(),\r\n        })\r\n        .then(\r\n          (ref) =>\r\n            // fetching free slots\r\n            history.push(\"/fares\")\r\n        )\r\n        .catch(\r\n          (e) => alert(\"An error occurred!\")\r\n        );\r\n\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={e => { handleSubmit(e) }} className={classes.root}>\r\n      <br />\r\n      <br />\r\n      <label>From</label>\r\n      <br />\r\n      <input\r\n        name='from'\r\n        type='text'\r\n        value={from}\r\n        required\r\n        onChange={e => setFrom(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>To</label>\r\n      <br />\r\n      <input\r\n        name='to'\r\n        type='text'\r\n        value={to}\r\n        required\r\n        onChange={e => setTo(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>Fares</label>\r\n      <br />\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Currency</th>\r\n            <th>Price</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>USD</td>\r\n            <td>\r\n              <input\r\n                name='to'\r\n                type='text'\r\n                onChange={e => updatePrices(\"USD\", e.target.value)}\r\n              />\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>ZWL</td>\r\n            <td>\r\n              <input\r\n                name='to'\r\n                type='text'\r\n                onChange={e => updatePrices(\"ZWL\", e.target.value)}\r\n              />\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>ZAR</td>\r\n            <td>\r\n              <input\r\n                name='to'\r\n                type='text'\r\n                onChange={e => updatePrices(\"ZAR\", e.target.value)}\r\n              />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <br />\r\n      <br />\r\n      <input\r\n        className='submitButton'\r\n        type='submit'\r\n        value='Save'\r\n      />\r\n    </form>\r\n  )\r\n}","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport FareCreateForm from '../../components/fares/FareCreateForm'\r\n\r\nexport default function AddFare() {\r\n    return (\r\n        <div>\r\n            <Sidebar />\r\n            <FareCreateForm />\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n","import { makeStyles } from '@material-ui/core'\r\nimport React from 'react'\r\nimport DataTable from '../reservations/DataGrid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        marginTop: 80,\r\n    },\r\n    drawerHeader: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: theme.spacing(0, 1),\r\n        // necessary for content to be below app bar\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: 'flex-end',\r\n    },\r\n}));\r\n\r\nexport default function Home() {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <DataTable />\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\n// import Navbar from \"../../components/layout/Navbar\";\r\nimport Home from \"../../components/home/Home\";\r\nimport Footer from \"../../components/layout/Footer\";\r\nimport { Container } from \"react-bootstrap\";\r\n// import ReservationTable from \"../../components/reservations/ReservationTable\";\r\nimport Sidebar from \"../../components/layout/Sidebar\";\r\n// import DataGrid from '../../components/reservations/DataGrid'\r\n\r\nexport default function Homepage() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <Home />\r\n            {/* <DataGrid /> */}\r\n            <Footer />\r\n        </Container>\r\n    );\r\n}\r\nexport { Homepage };\r\n","import React from 'react';\r\nimport moment from 'moment';\r\nimport firebase from 'firebase';\r\nimport { Line } from \"react-chartjs-2\";\r\n\r\nexport default function ActivityChart() {\r\n    // eslint-disable-next-line\r\n    const [activityData, setActivityData] = React.useState([]);\r\n    const [byoData, setByoData] = React.useState([]);\r\n    const [harareData, setHarareData] = React.useState([]);\r\n    const [vicfallsData, setVicfallsData] = React.useState([]);\r\n    const [gweruData, setGweruData] = React.useState([]);\r\n    const [kadomaData, setKadomaData] = React.useState([]);\r\n    const [chegutuData, setChegutuData] = React.useState([]);\r\n    const [kwekweData, setKwekweData] = React.useState([]);\r\n    const [hwangeData, setHwangeData] = React.useState([]);\r\n\r\n    const [labels, setLabels] = React.useState([]);\r\n\r\n    React.useEffect(() => {\r\n        const fetchStats = async () => {\r\n            const db = firebase.firestore();\r\n            let activitiesRef;\r\n            let byo;\r\n            let hre;\r\n            let gweru;\r\n            let kadoma;\r\n            let vicfalls;\r\n            let kwekwe;\r\n            let chegutu;\r\n            let hwange\r\n            let dates = [];\r\n\r\n            for (var x = 6; x >= 0; x--) {\r\n                var minDate = new moment().subtract(x, \"days\");\r\n                dates.push(minDate.format('ddd'));\r\n                var min = new Date();\r\n                min.setDate(min.getDate() - x - 1);\r\n                var max = new Date();\r\n                max.setDate(max.getDate() - x);\r\n                let activitiesTotal = 0;\r\n                // eslint-disable-next-line\r\n                activitiesRef = db.collection(\"reservations\")\r\n                    .where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n                    .get()\r\n                    .then(snapshot => {\r\n                        activitiesTotal += snapshot.size;\r\n                        setActivityData(state => [...state, activitiesTotal]);\r\n                    }, []);\r\n\r\n                let byoTotal = 0;\r\n                // eslint-disable-next-line\r\n                byo = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Bulawayo\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        byoTotal += snapshot.size;\r\n                        setByoData(state => [...state, byoTotal]);\r\n                    }, []);\r\n                //harare\r\n                let harareTotal = 0;\r\n                // eslint-disable-next-line\r\n                hre = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Harare\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        harareTotal += snapshot.size;\r\n                        setHarareData(state => [...state, harareTotal]);\r\n                    }, []);\r\n                //vicfalls\r\n                let vicfallsTotal = 0;\r\n                // eslint-disable-next-line\r\n                vicfalls = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Victoria Falls\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        vicfallsTotal += snapshot.size;\r\n                        setVicfallsData(state => [...state, vicfallsTotal]);\r\n                    }, []);\r\n                //gweru\r\n                let gweruTotal = 0;\r\n                // eslint-disable-next-line\r\n                gweru = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Gweru\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        gweruTotal += snapshot.size;\r\n                        setGweruData(state => [...state, gweruTotal]);\r\n                    }, []);\r\n                //kwekwe\r\n                let kwekweTotal = 0;\r\n                // eslint-disable-next-line\r\n                kwekwe = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Kwekwe\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        kwekweTotal += snapshot.size;\r\n                        setKwekweData(state => [...state, kwekweTotal]);\r\n                    }, []);\r\n                //kadoma\r\n                let kadomaTotal = 0;\r\n                // eslint-disable-next-line\r\n                kadoma = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Kadoma\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        kadomaTotal += snapshot.size;\r\n                        setKadomaData(state => [...state, kadomaTotal]);\r\n                    }, []);\r\n                //chegutu\r\n                let chegutuTotal = 0;\r\n                // eslint-disable-next-line\r\n                chegutu = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Chegutu\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        chegutuTotal += snapshot.size;\r\n                        setChegutuData(state => [...state, chegutuTotal]);\r\n                    }, []);\r\n                //hwange\r\n                let hwangeTotal = 0;\r\n                // eslint-disable-next-line\r\n                hwange = db.collection(\"reservations\")\r\n                    .where(\"TravellingFrom\", \"==\", \"Hwange\").where(\"status\", \"==\", \"paid\").where('BookingTime', '>', min).where('BookingTime', '<', max)\r\n\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        hwangeTotal += snapshot.size;\r\n                        setHwangeData(state => [...state, hwangeTotal]);\r\n                    }, []);\r\n            }\r\n            setLabels(dates);\r\n        };\r\n        fetchStats();\r\n    }, []);\r\n\r\n    const data = {\r\n        labels: labels,\r\n        datasets: [\r\n            // {\r\n            //     label: \"Overall Activity\",\r\n            //     data: activityData,\r\n            //     fill: false,\r\n            //     // backgroundColor: \"rgba(75,192,192,0.2)\",\r\n            //     borderColor: \"#026ca0\"\r\n            // },\r\n            {\r\n                label: \"Bulawayo\",\r\n                data: byoData,\r\n                fill: false,\r\n                // backgroundColor: \"rgba(75,192,192,0.2)\",\r\n                borderColor: \"#33eaff\"\r\n            },\r\n            {\r\n                label: \"Harare\",\r\n                data: harareData,\r\n                fill: false,\r\n                borderColor: \"#f50057\"\r\n            },\r\n            {\r\n                label: \"Victoria Falls\",\r\n                data: vicfallsData,\r\n                fill: false,\r\n                borderColor: \"#ff5722\"\r\n            },\r\n            {\r\n                label: \"Gweru\",\r\n                data: gweruData,\r\n                fill: false,\r\n                borderColor: \"#2196f3\"\r\n            },\r\n            {\r\n                label: \"Kwekwe\",\r\n                data: kwekweData,\r\n                fill: false,\r\n                borderColor: \"#ffea00\"\r\n            },\r\n            {\r\n                label: \"Kadoma\",\r\n                data: kadomaData,\r\n                fill: false,\r\n                borderColor: \"#00a152\"\r\n            },\r\n            {\r\n                label: \"Chegutu\",\r\n                data: chegutuData,\r\n                fill: false,\r\n                borderColor: \"#4615b2\"\r\n            },\r\n            {\r\n                label: \"Hwange\",\r\n                data: hwangeData,\r\n                fill: false,\r\n                borderColor: \"#fff\"\r\n            }\r\n\r\n        ]\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <h5 style={{ color: '#fff' }}>Departure Points Chart</h5>\r\n            <Line\r\n                height={200}\r\n                data={data}\r\n                style={{\r\n                    backgroundColor: '#003c6c',\r\n                    fontColor: '#fff'\r\n                }}\r\n                options={{\r\n                    responsive: true,\r\n                    title: {\r\n                        display: true,\r\n                        text: \"Activity for the past 7 days\",\r\n                        fontSize: 17,\r\n                        color: \"#fff\",\r\n                        padding: 10,\r\n                    },\r\n                    legend: {\r\n                        display: false,\r\n                        position: \"right\",\r\n                        color: '#fff'\r\n                    },\r\n                    scales: {\r\n                        yAxes: [\r\n                            {\r\n                                ticks: {\r\n                                    color: \"white\",\r\n                                    beginAtZero: true,\r\n                                    stepSize: 1\r\n                                },\r\n                            },\r\n                        ],\r\n                        xAxes: [\r\n                            {\r\n                                ticks: {\r\n                                    color: \"white\",\r\n                                },\r\n                            },\r\n                        ],\r\n                    },\r\n                }}\r\n            />\r\n        </>\r\n    )\r\n}","import * as React from 'react';\r\n// import Paper from '@material-ui/core/Paper';\r\nimport firebase from 'firebase';\r\nimport { Line } from \"react-chartjs-2\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport moment from 'moment';\r\n\r\n\r\n\r\nexport default function StatsChart() {\r\n    const [activityData, setActivityData] = React.useState([]);\r\n    const [labels, setLabels] = React.useState([]);\r\n\r\n    React.useEffect(() => {\r\n        const fetchStats = async () => {\r\n            const db = firebase.firestore();\r\n            // eslint-disable-next-line\r\n            // let activitiesRef;\r\n            let dates = [];\r\n\r\n            for (let x = 6; x >= 0; x--) {\r\n                let minDate = new moment().subtract(x, \"days\");\r\n                dates.push(minDate.format('ddd'));\r\n                let min = new Date();\r\n                min.setDate(min.getDate() - x - 1);\r\n                let max = new Date();\r\n                max.setDate(max.getDate() - x);\r\n                // eslint-disable-next-line\r\n                let activitiesRef = db.collection('reservations')\r\n                    .where(\"BookingTime\", \">\", min)\r\n                    .where(\"BookingTime\", \"<\", max)\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        setActivityData(state => [...state, snapshot.size]);\r\n                    });\r\n            }\r\n            setLabels(dates);\r\n        };\r\n        fetchStats();\r\n    }, []);\r\n\r\n    const data = {\r\n        labels: labels,\r\n        datasets: [\r\n            {\r\n                label: \"No. of reservations\",\r\n                fill: true,\r\n                backgroundColor: \"#00a152\",\r\n                borderColor: \"#00a152\",\r\n                data: activityData,\r\n                borderWidth: 1,\r\n                pointRadius: 0,\r\n            }\r\n\r\n        ],\r\n    };\r\n\r\n    return (\r\n        <Grid container style={{ padding: 20 }}>\r\n            <h5 style={{ color: '#fff' }}>Overall Activity Chart</h5>\r\n            <Line\r\n                height={200}\r\n                data={data}\r\n                style={{\r\n                    backgroundColor: '#003c6c'\r\n                }}\r\n                options={{\r\n                    responsive: true,\r\n                    title: {\r\n                        display: true,\r\n                        text: \"Activity for the past 7 days\",\r\n                        fontSize: 17,\r\n                        fontColor: \"#5f0937\",\r\n                        padding: 10,\r\n                    },\r\n                    legend: {\r\n                        display: true,\r\n                        position: \"right\",\r\n                    },\r\n                    scales: {\r\n                        yAxes: [\r\n                            {\r\n                                ticks: {\r\n                                    fontColor: \"white\",\r\n                                    beginAtZero: true,\r\n                                    stepSize: 1\r\n                                },\r\n                            },\r\n                        ],\r\n                        xAxes: [\r\n                            {\r\n                                ticks: {\r\n                                    fontColor: \"white\",\r\n                                },\r\n                            },\r\n                        ],\r\n                    },\r\n                }}\r\n            />\r\n        </Grid>\r\n    )\r\n}\r\n// }","import React from 'react'\r\nimport { Bar } from 'react-chartjs-2';\r\nimport firebase from '../../firebase.config'\r\nimport moment from 'moment'\r\n\r\n\r\n\r\nexport default function PaymentMethodChart() {\r\n    // const [paymentMethodData, setPaymentMethodData] = React.useState([]);\r\n    const [ecocashData, setEcoCashData] = React.useState([]);\r\n    const [oneMoneyData, setOneMoneyData] = React.useState([]);\r\n    const [swipeData, setSwipeData] = React.useState([]);\r\n    const [cashData, setCashData] = React.useState([]);\r\n    const [telecashData, setTelecashData] = React.useState([]);\r\n    const [labels, setLabels] = React.useState([]);\r\n\r\n    React.useEffect(() => {\r\n        const fetchData = async () => {\r\n            const db = firebase.firestore();\r\n            // eslint-disable-next-line\r\n            // let paymentsRef;\r\n            let dates = [];\r\n            dates.push(moment().format('MMM'));\r\n            setLabels(dates);\r\n\r\n            // eslint-disable-next-line\r\n            let ecocashRef = await db.collection('reservations')\r\n                .where(\"PaymentMethod\", \"==\", 'Ecocash')\r\n                .get()\r\n                .then((snapshot) => {\r\n                    setEcoCashData(state => [...state, snapshot.size]);\r\n                }, []);\r\n\r\n            // eslint-disable-next-line\r\n            let onemoneyRef = await db.collection('reservations')\r\n                .where(\"PaymentMethod\", \"==\", 'One Money')\r\n                .get()\r\n                .then((snapshot) => {\r\n                    setOneMoneyData(state => [...state, snapshot.size]);\r\n                }, []);\r\n\r\n            // eslint-disable-next-line\r\n            let telecashRef = db.collection('reservations')\r\n                .where(\"PaymentMethod\", \"==\", 'Telecash')\r\n                .get()\r\n                .then((snapshot) => {\r\n                    setTelecashData(state => [...state, snapshot.size]);\r\n                }, []);\r\n\r\n            // eslint-disable-next-line\r\n            let swipeRef = db.collection('reservations')\r\n                .where(\"PaymentMethod\", \"==\", 'Swipe')\r\n                .get()\r\n                .then((snapshot) => {\r\n                    setSwipeData(state => [...state, snapshot.size]);\r\n                }, []);\r\n\r\n            // eslint-disable-next-line\r\n            let cashRef = db.collection('reservations')\r\n                .where(\"PaymentMethod\", \"==\", 'Cash')\r\n                .get()\r\n                .then((snapshot) => {\r\n                    setCashData(state => [...state, snapshot.size]);\r\n                }, []);\r\n\r\n        }\r\n        fetchData();\r\n    }, []);\r\n\r\n    const data = {\r\n        labels: labels,\r\n        datasets: [\r\n            {\r\n                label: 'Ecocash',\r\n                data: ecocashData,\r\n                backgroundColor: '#1e88e5',\r\n                borderWidth: 1,\r\n            },\r\n            {\r\n                label: 'Cash',\r\n                data: cashData,\r\n                backgroundColor: '#f4511e',\r\n                borderWidth: 1,\r\n            },\r\n            {\r\n                label: 'One Money',\r\n                data: oneMoneyData,\r\n                backgroundColor: '#e53935',\r\n                borderWidth: 1,\r\n            },\r\n            {\r\n                label: 'Telecash',\r\n                data: telecashData,\r\n                backgroundColor: '#00897b',\r\n                borderWidth: 1,\r\n            },\r\n            {\r\n                label: 'Swipe',\r\n                data: swipeData,\r\n                backgroundColor: '#33eb91',\r\n                borderWidth: 1,\r\n            },\r\n        ],\r\n    };\r\n\r\n    const options = {\r\n        indexAxis: 'y',\r\n        // Elements options apply to all of the options unless overridden in a dataset\r\n        // In this case, we are setting the border of each horizontal bar to be 2px wide\r\n        elements: {\r\n            bar: {\r\n                borderWidth: 2,\r\n            },\r\n        },\r\n        responsive: true,\r\n        plugins: {\r\n            legend: {\r\n                position: 'right',\r\n            },\r\n            title: {\r\n                display: true,\r\n                // text: 'Chart.js Horizontal Bar Chart',\r\n            },\r\n        },\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className='header'>\r\n                <h5 style={{ color: '#fff' }}>Payment Methods Chart</h5>\r\n                <div className='links'>\r\n                    <a\r\n                        className='btn btn-gh'\r\n                        href='https://github.com/reactchartjs/react-chartjs-2/blob/master/example/src/charts/StackedBar.js'\r\n                    >\r\n\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <Bar data={data} options={options} />\r\n        </>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport firebase from \"firebase\";\r\nimport \"@fontsource/roboto\";\r\nimport moment from \"moment\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport ActivityChart from \"./ActivityChart\";\r\nimport { Bar } from 'react-chartjs-2';\r\nimport StatsChart from \"./StatsChart\";\r\nimport PaymentMethodChart from './PaymentMethodChart'\r\n\r\nconst styles = (theme) => ({\r\n    select: {\r\n        backgroundColor: \"transparent\",\r\n        color: \"white\",\r\n        borderColor: \"transparent\",\r\n    },\r\n    option: {\r\n        color: \"black\",\r\n    },\r\n    label: {\r\n        color: \"white\",\r\n        fontSize: 14,\r\n    },\r\n    grid: {\r\n        paddingLeft: 20,\r\n        color: \"#fff\"\r\n    },\r\n});\r\n\r\n\r\nclass Statistics extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.inputPaymentMethodRef = React.createRef();\r\n        this.inputPeriodRef = React.createRef();\r\n        this.labels = [\"Bulawayo\", \"Chegutu\", \"Kadoma\", \"Kwekwe\", \"Harare\", \"Victoria Falls\", \"Hwange\", \"Gweru\", \"Johannesburg\"];\r\n        this.colors = [\"#33eaff\", \"#4615b2\", \"#00a152\", \"#ffea00\", \"#f50057\", \"#ff5722\", \"#fff\", \"#2196f3\", \"#aaa\"];\r\n\r\n        this.state = {\r\n            data: [],\r\n            totalReservations: 0,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getChartData();\r\n    }\r\n\r\n    getChartData(paymentMethod = \"\", period = \"\") {\r\n        const db = firebase.firestore();\r\n        let total = 0;\r\n        this.labels.forEach((pickupPoint) => {\r\n            let reservationsRef = db.collection(\"reservations\");\r\n\r\n            if (paymentMethod !== \"\" && paymentMethod !== \"All\")\r\n                reservationsRef = reservationsRef.where(\"PaymentMethod\", \"==\", paymentMethod);\r\n\r\n            if (period !== \"\" && period !== \"All\") {\r\n                let min = new Date();\r\n                min.setDate(min.getDate() - period);\r\n                console.log(min);\r\n                reservationsRef = reservationsRef\r\n                    .orderBy(\"BookingTime\")\r\n                    .where(\"BookingTime\", \">=\", min);\r\n            }\r\n\r\n            reservationsRef\r\n                .orderBy(\"TravellingFrom\")\r\n                .startAt(pickupPoint)\r\n                .endAt(pickupPoint + \"\\uf8ff\")\r\n                .get()\r\n                .then((snapshot) => {\r\n                    total += snapshot.size;\r\n                    this.setState({\r\n                        data: [...this.state.data, snapshot.size],\r\n                        totalReservations: total,\r\n                    });\r\n                });\r\n        });\r\n    }\r\n\r\n    handleChange = () => {\r\n        let paymentMethod = this.inputPaymentMethodRef.current.value;\r\n        let period = this.inputPeriodRef.current.value;\r\n        this.setState({ data: [] });\r\n        this.getChartData(paymentMethod, period);\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const data = {\r\n            labels: this.labels,\r\n            datasets: [\r\n                {\r\n                    label: \"Cumulative Reservations\",\r\n                    backgroundColor: this.colors,\r\n                    // borderColor: \"#04e7ff\",\r\n                    borderWidth: 1,\r\n                    data: this.state.data,\r\n                },\r\n            ],\r\n        };\r\n\r\n        return (\r\n            <div style={{ paddingTop: 20 }}>\r\n                <Grid container style={{ padding: 20 }}>\r\n                    <Grid item className={classes.grid}>\r\n                        <label className={classes.label}>\r\n                            Date: {moment(new Date()).format(\"DD/MM/YYYY\")}\r\n                        </label>\r\n                    </Grid>\r\n                    <Grid item className={classes.grid}>\r\n                        <label className={classes.label}>\r\n                            Period:\r\n              <select\r\n                                name=\"period\"\r\n                                className={classes.select}\r\n                                onChange={this.handleChange}\r\n                                ref={this.inputPeriodRef}\r\n                            >\r\n                                <option className={classes.option}>All</option>\r\n                                <option className={classes.option} value=\"1\">\r\n                                    1 day\r\n                </option>\r\n                                <option className={classes.option} value=\"7\">\r\n                                    7 days\r\n                </option>\r\n                                <option className={classes.option} value=\"14\">\r\n                                    14 days\r\n                </option>\r\n                                <option className={classes.option} value=\"30\">\r\n                                    30 days\r\n                </option>\r\n                            </select>\r\n                        </label>\r\n                    </Grid>\r\n                    <Grid item className={classes.grid}>\r\n                        <label className={classes.label}>\r\n                            No. of reservations: {this.state.totalReservations}\r\n                        </label>\r\n                    </Grid>\r\n                    <Grid item className={classes.grid}>\r\n                        <label className={classes.label}>\r\n                            Payment Method:\r\n              <select\r\n                                name=\"paymentMethod\"\r\n                                className={classes.select}\r\n                                onChange={this.handleChange}\r\n                                ref={this.inputPaymentMethodRef}\r\n                            >\r\n                                <option className={classes.option}>All</option>\r\n                                <option className={classes.option}>Swipe</option>\r\n                                <option className={classes.option}>Cash</option>\r\n                                <option className={classes.option}>EcoCash</option>\r\n                                <option className={classes.option}>One Money</option>\r\n                                <option className={classes.option}>Telecash</option>\r\n                            </select>\r\n                        </label>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid container>\r\n                    <Grid item md={6}>\r\n\r\n                        <Card\r\n                            style={{\r\n                                backgroundColor: '#003c6c',\r\n\r\n                                color: '#fff',\r\n                                marginRight: 5,\r\n                            }}\r\n                        >\r\n                            <CardContent>\r\n                                <h5 style={{ color: '#fff' }}>Activity Chart</h5>\r\n                                <Bar\r\n                                    height={200}\r\n                                    data={data}\r\n                                    options={{\r\n                                        responsive: true,\r\n                                        title: {\r\n                                            display: true,\r\n                                            text: \"Reservations Summary\",\r\n                                            fontSize: 17,\r\n                                            color: \"white\",\r\n                                            padding: 10,\r\n                                            align: \"start\",\r\n                                        },\r\n                                        legend: {\r\n                                            labels: {\r\n                                                color: \"#fff\",\r\n                                            },\r\n                                            display: false,\r\n                                            position: \"right\",\r\n                                        },\r\n                                        scales: {\r\n                                            yAxes: [\r\n                                                {\r\n                                                    ticks: {\r\n                                                        color: \"#fff\",\r\n                                                        beginAtZero: true,\r\n                                                    },\r\n                                                },\r\n                                            ],\r\n                                            xAxes: [\r\n                                                {\r\n                                                    ticks: {\r\n                                                        color: \"#fff\",\r\n                                                        beginAtZero: true,\r\n                                                    },\r\n                                                },\r\n                                            ],\r\n                                        },\r\n                                    }}\r\n                                />\r\n                            </CardContent>\r\n                        </Card>\r\n                    </Grid>\r\n                    <Grid item md={6}>\r\n                        <Card\r\n                            style={{\r\n                                backgroundColor: '#003c6c',\r\n                                // background: \"linear-gradient(transparent,rgba(0,151,167,1))\",\r\n                                marginLeft: 5,\r\n                            }}\r\n                        >\r\n                            <CardContent>\r\n                                <ActivityChart />\r\n                            </CardContent>\r\n                        </Card>\r\n                    </Grid>\r\n                    <Grid item md={6}>\r\n                        <hr />\r\n                        <Card\r\n                            style={{\r\n                                // backgroundColor: \"#34495e\",\r\n                                // background: \"linear-gradient(transparent,rgba(0,151,167,1))\",\r\n                                backgroundColor: '#003c6c',\r\n                                marginLeft: 5,\r\n                            }}\r\n                        >\r\n                            <CardContent>\r\n                                <StatsChart />\r\n                            </CardContent>\r\n                        </Card>\r\n                    </Grid>\r\n                    <Grid item md={6}>\r\n                        <hr />\r\n                        <Card\r\n                            style={{\r\n                                // backgroundColor: \"#34495e\",\r\n                                // background: \"linear-gradient(transparent,rgba(0,151,167,1))\",\r\n                                backgroundColor: '#003c6c',\r\n                                marginLeft: 5,\r\n                            }}\r\n                        >\r\n                            <CardContent>\r\n                                <PaymentMethodChart />\r\n                            </CardContent>\r\n                        </Card>\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(Statistics);\r\n","import React from 'react'\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n// import StatsChart from './StatsChart';\r\n// import ActivityChart from './ActivityChart';\r\nimport Statistics from './Statistics';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        marginTop: 80,\r\n    },\r\n}));\r\n\r\nexport default function StatsData() {\r\n    const classes = useStyles()\r\n    return (\r\n        <div className={classes.root}>\r\n            <h2 style={{ color: '#fff' }}>Statistics</h2>\r\n            <Statistics />\r\n        </div>\r\n    )\r\n}\r\n","import { Container } from '@material-ui/core'\r\nimport React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport StatsData from '../../components/statistics/StatsData'\r\n\r\nexport default function Statistics() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <StatsData />\r\n            <Footer />\r\n        </Container>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        marginTop: 80,\r\n    },\r\n}));\r\n\r\nexport default function PaymentsData() {\r\n    const classes = useStyles();\r\n    return (\r\n        <div className={classes.root}>\r\n            <h2>Payments</h2>\r\n            <p>Some payments data is coming here...</p>\r\n        </div>\r\n    )\r\n}\r\n","import { Container } from '@material-ui/core'\r\nimport React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport PaymentsData from '../../components/payments/PaymentsData'\r\n\r\nexport default function Payments() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <PaymentsData />\r\n            <Footer />\r\n        </Container>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport firebase from '../../firebase.config'\r\nimport clsx from 'clsx';\r\n// import moment from 'moment'\r\nimport { Button, makeStyles } from '@material-ui/core';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: 400,\r\n    width: '100%',\r\n    marginTop: 80,\r\n  },\r\n  button: {\r\n    marginBottom: '10px',\r\n  },\r\n  filterBox: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  grid: {\r\n    backgroundColor: '#008394',\r\n  }\r\n}));\r\n\r\nconst columns = [\r\n  { field: 'from', headerName: 'FROM', width: 130, sortable: true },\r\n  { field: 'to', headerName: 'TO', width: 130, sortable: true },\r\n  { field: 'prices', headerName: 'PRICES', width: 200, sortable: true, valueGetter: params => `$${params.row.prices.USD}, ZAR${params.row.prices.ZAR}, ZWL$${params.row.prices.ZWL}` },\r\n  { field: \"date\", headerName: \"DATE\", width: 160, valueGetter: params => `${params.row.date.toDate()}`, },\r\n\r\n\r\n]\r\nexport default function FaresGrid() {\r\n  const classes = useStyles();\r\n  const [fares, setFares] = React.useState([]);\r\n  const [cities, setCities] = React.useState([]);\r\n  const [values, setValues] = React.useState({\r\n    from: '',\r\n    to: ''\r\n  });\r\n\r\n  const handleChange = (prop, value) => {\r\n    setValues({ ...values, [prop]: value });\r\n    fetchFares(prop, value);\r\n  }\r\n\r\n  const fetchFares = async (prop, value) => {\r\n    const db = firebase.firestore();\r\n    let dataRef = db.collection('fares');\r\n    let arr = [];\r\n\r\n    let from = values.from;\r\n    let to = values.to;\r\n\r\n    if (prop === 'from') from = value;\r\n    else if (prop === 'to') to = value;\r\n\r\n    if ((from !== '' && from !== undefined) || (to !== '' && to !== undefined)) {\r\n      if ((from !== '' && from !== undefined) && (to !== '' && to !== undefined)) {\r\n        dataRef = dataRef.where(\"possibleTrips\", 'array-contains', `${cities[from]}-${cities[to]}`);\r\n      }\r\n      else {\r\n        if (from === '' || from === undefined) {\r\n          dataRef = dataRef.where('cities', 'array-contains', cities[to]);\r\n        }\r\n        else {\r\n          dataRef = dataRef.where('cities', 'array-contains', cities[from]);\r\n        }\r\n      }\r\n    }\r\n\r\n    const data = await dataRef.get();\r\n\r\n    setFares(data.docs.map((doc) => {\r\n      let fare = doc.data();\r\n\r\n      if (cities.length === 0 && arr.indexOf(fare.from) === -1) arr.push(fare.from);\r\n      if (cities.length === 0 && arr.indexOf(fare.to) === -1) arr.push(fare.to);\r\n\r\n      return { ...fare, id: doc.id }\r\n    }));\r\n\r\n    if (cities.length === 0) setCities(arr);\r\n  };\r\n\r\n  React.useState(() => {\r\n    fetchFares();\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <h3 style={{ marginBottom: 20, color: '#fff' }}>Fares</h3>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        href=\"/fares/add\"\r\n        className={classes.button}>Add Fare</Button>\r\n      <br />\r\n      <Grid container className={classes.filterBox} spacing={2}>\r\n        <Grid item>\r\n          <Grid container justify=\"left\" spacing={1}>\r\n            <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n              <select\r\n                labelId=\"id\"\r\n                value={values.from}\r\n                onChange={(e) => handleChange('from', e.target.value)}\r\n                required\r\n              >\r\n                <option value=\"\">All</option>\r\n                {cities?.map((item, counter) => {\r\n                  return <option value={counter}>{item}</option>;\r\n                })}\r\n              </select>\r\n              <FormHelperText id=\"standard-date-helper-text\">From</FormHelperText>\r\n            </FormControl>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item>\r\n          <Grid container justify=\"left\" spacing={1}>\r\n            <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n              <select\r\n                labelId=\"id\"\r\n                value={values.to}\r\n                onChange={(e) => handleChange('to', e.target.value)}\r\n                required\r\n              >\r\n                <option value=\"\">All</option>\r\n                {cities?.map((item, counter) => {\r\n                  return <option value={counter}>{item}</option>;\r\n                })}\r\n              </select>\r\n              <FormHelperText id=\"standard-date-helper-text\">To</FormHelperText>\r\n            </FormControl>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n      <DataGrid className={classes.grid} rows={fares} columns={columns} />\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Container } from '@material-ui/core'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport FaresGrid from '../../components/fares/FaresGrid'\r\n\r\nexport default function Grid() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <FaresGrid />\r\n            <Footer />\r\n        </Container>\r\n    )\r\n}\r\n","import React from 'react';\r\n// import clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport firebase from \"../../firebase.config\";\r\nimport { useHistory } from 'react-router-dom';\r\nvar moment = require(\"moment\");\r\n// const { v4: uuidv4 } = require(\"uuid\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  margin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  fullWidth: {\r\n    width: '100%',\r\n    margin: theme.spacing(0.5),\r\n  },\r\n}));\r\n\r\n\r\nexport default function DeleteModal(props) {\r\n  const db = firebase.firestore();\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const handleDelete = () => {\r\n    db.collection('trips').doc(props.id).delete().then((e) => {\r\n      alert(\"Trip deleted successfully!\");\r\n      return history.push(\"/trips-grid\");\r\n    }).catch((e) => alert(\"An error occurred!\"));\r\n  }\r\n\r\n  let title, display, submitButton;\r\n  title = \"Are you sure you want to delete this trip?\";\r\n  display = (<div>\r\n    <h3>Trip information</h3>\r\n    <table className={classes.fullWidth}>\r\n      <tr>\r\n        <td><b>Name:</b></td>\r\n      </tr>\r\n      <tr>\r\n        <td>{props?.trip?.name}</td>\r\n      </tr>\r\n      <tr>\r\n        <td><b>From:</b></td>\r\n      </tr>\r\n      <tr>\r\n        <td>{props?.trip?.from}</td>\r\n      </tr>\r\n      <tr>\r\n        <td><b>To:</b></td>\r\n      </tr>\r\n      <tr>\r\n        <td>{props?.trip?.to}</td>\r\n      </tr>\r\n      <tr>\r\n        <td><b>Date created:</b></td>\r\n      </tr>\r\n      <tr>\r\n        <td>{moment(props?.trip?.date?.toDate()).format('LLL')}</td>\r\n      </tr>\r\n      <tr>\r\n        <td><b>Seats:</b></td>\r\n      </tr>\r\n      <tr>\r\n        <td>{props?.trip?.seats}</td>\r\n      </tr>\r\n      <tr>\r\n        <td><b>Stops:</b></td>\r\n      </tr>\r\n      <tr>\r\n        <td>{displayStops(props?.trip?.stops)}</td>\r\n      </tr>\r\n      <tr>\r\n        <td><b>Times:</b></td>\r\n      </tr>\r\n      <tr>\r\n        <td>{props?.trip?.times?.join(', ')}</td>\r\n      </tr>\r\n    </table></div>);\r\n  submitButton = (<Modal.Footer>\r\n    <p><b>Note:</b> This action cannot be reversed!</p><br />\r\n    <Button\r\n      onClick={handleDelete}\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      className={classes.button}>\r\n      Delete\r\n      </Button>\r\n  </Modal.Footer>);\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n      class=\"modal\"\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          {title}\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <div className={classes.root}>\r\n          {display}\r\n        </div>\r\n      </Modal.Body>\r\n      { submitButton}\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction displayStops(map) {\r\n  if (map === undefined || map === null) return [];\r\n\r\n  var newMap = new Map(Object.entries(map));\r\n  var arr = []; // initially new Array()\r\n\r\n  newMap.forEach((v) => {\r\n    arr.push(v.name);\r\n  });\r\n\r\n  return arr\r\n}","import React from 'react';\r\n// import clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport firebase from \"../../firebase.config\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport MultipleTimeSelect from './MultipleTimeSelect';\r\n// let moment = require(\"moment\");\r\n// const { v4: uuidv4 } = require(\"uuid\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  margin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  fullWidth: {\r\n    width: '100%',\r\n    margin: theme.spacing(0.5),\r\n  },\r\n}));\r\n\r\n\r\nexport default function EditModal(props) {\r\n  const db = firebase.firestore();\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const [values, setValues] = React.useState({\r\n    name: '',\r\n    to: '',\r\n    from: '',\r\n    times: [],\r\n    seats: 0\r\n  });\r\n\r\n  const handleChange = (prop, value) => {\r\n    props.trip.[prop] = value;\r\n    setValues({ ...values, [prop]: value });\r\n  }\r\n\r\n  const handleTimes = value => {\r\n    handleChange('times', value);\r\n  }\r\n\r\n  const handleSubmit = () => {\r\n    db.collection('trips').doc(props.id).update({\r\n      name: props.trip.name,\r\n      to: props.trip.to,\r\n      from: props.trip.from,\r\n      seats: parseInt(props.trip.seats),\r\n      times: props.trip?.times?.map((t) => { console.log(t); return t.value }),\r\n    }).then((e) => {\r\n      alert(\"Trip successfully updated!\");\r\n      return history.push(\"/trips-grid\");\r\n    }).catch((e) => alert(\"An error occurred!\"));\r\n  }\r\n\r\n  let dname = (values.name === \"\" || values.name === undefined || values.name !== props.trip.name) ? props.trip.name : values.name;\r\n  let dto = (values.to === \"\" || values.to === undefined || values.to !== props.trip.to) ? props.trip.to : values.to;\r\n  let dfrom = (values.from === \"\" || values.from === undefined || values.from !== props.trip.from) ? props.trip.from : values.from;\r\n  let dtimes = (values.times === undefined || values.times.length === 0 || values.times !== props.trip.times) ? props?.trip?.times?.map((e) => ({ label: e, value: e })) : values.times;\r\n  let dseats = (values.seats === 0 || values.seats === undefined || values.seats !== props.trip.seats) ? props.trip.seats : values.seats;\r\n\r\n  let title, display, submitButton;\r\n  title = \"Update trip\";\r\n  display = (<div>\r\n    <br />\r\n    <br />\r\n    <label>Trip name</label>\r\n    <br />\r\n    <input\r\n      name='name'\r\n      type='text'\r\n      value={dname}\r\n      required\r\n      onChange={e => handleChange('name', e.target.value)}\r\n    />\r\n    <br />\r\n    <br />\r\n    <label>From</label>\r\n    <br />\r\n    <input\r\n      name='from'\r\n      type='text'\r\n      value={dfrom}\r\n      required\r\n      onChange={e => handleChange('from', e.target.value)}\r\n    />\r\n    <br />\r\n    <br />\r\n    <label>To</label>\r\n    <br />\r\n    <input\r\n      name='to'\r\n      type='text'\r\n      value={dto}\r\n      required\r\n      onChange={e => handleChange('to', e.target.value)}\r\n    />\r\n    <br />\r\n    <br />\r\n    <label>Number of seats</label>\r\n    <br />\r\n    <input\r\n      name='seats'\r\n      type='number'\r\n      value={dseats}\r\n      required\r\n      onChange={e => handleChange('seats', e.target.value)}\r\n    />\r\n    <br />\r\n    <br />\r\n    <label>Departure times</label>\r\n    <MultipleTimeSelect setTimes={handleTimes} times={dtimes} />\r\n  </div>);\r\n\r\n  submitButton = (<Modal.Footer>\r\n    <Button\r\n      onClick={handleSubmit}\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      className={classes.button}>\r\n      Update\r\n      </Button>\r\n  </Modal.Footer>);\r\n\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n      class=\"modal\"\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          {title}\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <div className={classes.root}>\r\n          {display}\r\n        </div>\r\n      </Modal.Body>\r\n      { submitButton}\r\n    </Modal>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport firebase from '../../firebase.config'\r\nimport clsx from 'clsx';\r\nimport { Button, makeStyles } from '@material-ui/core';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Select from 'react-select';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport DeleteModal from \"./DeleteModal\";\r\nimport EditModal from \"./EditModal\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        height: 400,\r\n        width: '100%',\r\n        marginTop: 80,\r\n    },\r\n    button: {\r\n        margin: 10,\r\n    },\r\n    grid: {\r\n        backgroundColor: '#008394',\r\n    },\r\n    filterBox: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    customButton: {\r\n        margin: 10,\r\n        fontSize: '18px'\r\n    }\r\n}))\r\n\r\nfunction displayStops(map) {\r\n    if (map === undefined || map === null) return [];\r\n\r\n    var newMap = new Map(Object.entries(map));\r\n    var arr = []; // initially new Array()\r\n\r\n    newMap.forEach((v) => {\r\n        arr.push(v.name);\r\n    });\r\n\r\n    return arr\r\n}\r\n\r\n// let link = `/trips/${tripRef.id}/stops`;\r\n\r\nconst columns = [\r\n    { field: 'trip', headerName: 'TRIP', width: 200, sortable: true, valueGetter: params => `${params.row.from} to ${params.row.to}` },\r\n    { field: 'from', headerName: 'FROM', width: 130, sortable: true },\r\n    { field: 'to', headerName: 'TO', width: 130, sortable: true },\r\n    { field: \"times\", headerName: \"TIMES\", width: 160 },\r\n    { field: \"stops\", headerName: \"STOPS\", width: 200, valueGetter: params => `${displayStops(params.row.stops)}` },\r\n    { field: \"date\", headerName: \"DATE\", width: 160, valueGetter: params => `${params.row.date.toDate()}`, },\r\n    { field: \"\", headerName: \"ACTION\", width: 160, disableClickEventBubbling: true, renderCell: params => params.row.Button },\r\n]\r\n\r\nexport default function TripsGrid() {\r\n    const classes = useStyles();\r\n    const [editShow, setEditShow] = React.useState(false);\r\n    const [deleteShow, setDeleteShow] = React.useState(false);\r\n    const [trips, setTrips] = React.useState([]);\r\n    const [values, setValues] = React.useState({\r\n        from: '',\r\n        to: '',\r\n        stops: []\r\n    });\r\n    const [deleteTrip, setDeleteTrip] = React.useState({});\r\n    const [deleteID, setDeleteID] = React.useState({});\r\n\r\n    const [editTrip, setEditTrip] = React.useState({});\r\n    const [editID, setEditID] = React.useState({});\r\n\r\n    const [cities, setCities] = React.useState([]);\r\n    const [options, setOptions] = React.useState([]);\r\n\r\n    const handleChange = (prop, value) => {\r\n        setValues({ ...values, [prop]: value });\r\n        fetchTrips(prop, value);\r\n    }\r\n\r\n    const handleDelete = (trip, id) => {\r\n        setDeleteID(id);\r\n        setDeleteTrip(trip);\r\n        setDeleteShow(true);\r\n    }\r\n\r\n    const handleEdit = (trip, id) => {\r\n        setEditID(id);\r\n        setEditTrip(trip);\r\n        setEditShow(true);\r\n    }\r\n\r\n    const handleOptions = selectedOptions => {\r\n        handleChange('stops', selectedOptions);\r\n    }\r\n\r\n    const fetchTrips = async (prop, value) => {\r\n        const db = firebase.firestore();\r\n        let dataRef = db.collection('trips');\r\n        let to = values.to;\r\n        let from = values.from;\r\n        let stops = values.stops;\r\n        let arr = [];\r\n\r\n        switch (prop) {\r\n            case 'to':\r\n                to = value;\r\n                break;\r\n            case 'from':\r\n                from = value;\r\n                break;\r\n            case 'stops':\r\n                stops = value;\r\n                break;\r\n            default:\r\n        }\r\n\r\n        if (from !== '' && from !== undefined) dataRef = dataRef.where('from', '==', cities[from]);\r\n        if (to !== '' && to !== undefined) dataRef = dataRef.where('to', '==', cities[to]);\r\n\r\n        if (stops !== undefined && stops.length > 0) {\r\n            stops.forEach((e) => {\r\n                dataRef = dataRef.where('stops.' + e.value + '.name', '==', e.value);\r\n            });\r\n        }\r\n\r\n        const data = await dataRef.get();\r\n        setTrips(data.docs.map(doc => {\r\n            let trip = doc.data();\r\n\r\n            if (cities.length === 0 && arr.indexOf(trip.from) === -1) arr.push(trip.from);\r\n            if (cities.length === 0 && arr.indexOf(trip.to) === -1) arr.push(trip.to);\r\n            if (cities.length === 0 && trip.stops !== undefined) {\r\n                (Array.from(new Map(Object.entries(trip.stops)).keys())).forEach((e) => {\r\n                    if (arr.indexOf(e) === -1) arr.push(e);\r\n                });\r\n            }\r\n\r\n            trip.Button = (<div>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    // eslint-disable-next-line\r\n                    className={classes.customButton} color=\"red\" onClick={() => handleEdit(trip, doc.id)}><EditIcon fontSize=\"inherit\" /></Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    className={classes.customButton} onClick={() => handleDelete(trip, doc.id)}><DeleteForeverIcon fontSize=\"inherit\" /></Button>\r\n            </div>);\r\n\r\n            return { ...trip, id: doc.id };\r\n        }));\r\n\r\n        if (cities.length === 0) setCities(arr);\r\n        if (cities.length === 0) setOptions(arr.map((e) => ({ value: e, label: e })));\r\n    };\r\n\r\n    React.useState(() => {\r\n        fetchTrips();\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <h3 style={{ marginBottom: 20, color: '#fff' }}>Trips</h3>\r\n            <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                href=\"/trips/add\"\r\n                className={classes.button}>Add trip</Button>\r\n            <br />\r\n            <Grid container className={classes.filterBox} spacing={2}>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.from}\r\n                                onChange={(e) => handleChange('from', e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"\">All</option>\r\n                                {cities?.map((item, counter) => {\r\n                                    return <option value={counter}>{item}</option>;\r\n                                })}\r\n                            </select>\r\n                            <FormHelperText id=\"standard-date-helper-text\">From</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.to}\r\n                                onChange={(e) => handleChange('to', e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"\">All</option>\r\n                                {cities?.map((item, counter) => {\r\n                                    return <option value={counter}>{item}</option>;\r\n                                })}\r\n                            </select>\r\n                            <FormHelperText id=\"standard-date-helper-text\">To</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Select\r\n                                closeMenuOnSelect={false}\r\n                                isMulti\r\n                                options={options}\r\n                                onChange={handleOptions}\r\n                                style={{ width: \"400px\" }}\r\n                                className=\"select-custom-class\"\r\n                            />\r\n                            <FormHelperText id=\"standard-date-helper-text\">Stops</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n            <DataGrid className={classes.grid} rows={trips} columns={columns} />\r\n            <DeleteModal trip={deleteTrip} id={deleteID} show={deleteShow} onHide={() => setDeleteShow(false)} />\r\n            <EditModal trip={editTrip} id={editID} show={editShow} onHide={() => setEditShow(false)} />\r\n        </div>\r\n    )\r\n}\r\n","import { Container } from '@material-ui/core'\r\nimport React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripsGrid from '../../components/trips/TripsGrid'\r\n\r\nexport default function TripGrid() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <TripsGrid />\r\n            <Footer />\r\n        </Container>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Form, Button, Card } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport class Forgot extends Component {\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n    };\r\n\r\n    render() {\r\n\r\n        return (\r\n            <>\r\n                <Card className={\"bg-dark text-white\"}>\r\n                    <Card.Body>\r\n                        <h4 className=\"text-center mb-4\">Forgot Password</h4>\r\n\r\n                        {/* {error && <Alert variant=\"danger\">{error}</Alert>} */}\r\n                        <Form onSubmit={this.handleSubmit}>\r\n                            <Form.Group id=\"email\">\r\n                                <Form.Label>Email</Form.Label>\r\n                                <Form.Control type=\"email\" ref={this.emailRef} required />\r\n                            </Form.Group>\r\n\r\n                            <Button type=\"submit\" className=\"w-100\">\r\n                                Submit\r\n            </Button>\r\n                        </Form>\r\n                    </Card.Body>\r\n                    <p className=\"login w-100 text-center mt-2\">\r\n                        Login Instead? <Link to=\"login\">Click here</Link>\r\n                    </p>\r\n                </Card>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Forgot\r\n","import React from \"react\";\r\nimport \"./App.css\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\r\nimport PrivateRoute from './PrivateRoute';\r\nimport Data from './pages/reservations/Data'\r\nimport AddReservation from './pages/reservations/AddReservation';\r\nimport { AuthProvider } from \"./contexts/AuthContext\";\r\nimport { login } from \"./pages/accounts/login\";\r\n// import { register } from \"./pages/accounts/register\";\r\nimport Trips from './pages/trips/Trips';\r\nimport AddTrip from './pages/trips/AddTrip';\r\nimport TripStops from './pages/trips/TripStops';\r\nimport AddTripStop from './pages/trips/AddTripStop';\r\n// import Fares from './pages/fares/Fares';\r\nimport AddFare from './pages/fares/AddFare';\r\nimport Homepage from \"./pages/home/homepage\";\r\nimport \"@fontsource/roboto\";\r\nimport Statistics from \"./pages/statistics/Statistics\";\r\nimport Payments from \"./pages/payments/Payments\";\r\nimport Grid from './pages/fares/Grid'\r\nimport TripGrid from './pages/trips/TripGrid'\r\nimport Forgot from \"./components/accounts/Forgot\";\r\n// import img1 from './assets/images/1.jpg'\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: \"#ff3d00\",\r\n      dark: '#002884',\r\n      contrastText: '#fff',\r\n      light: '#757ce8',\r\n    },\r\n    secondary: {\r\n      light: '#ff7961',\r\n      main: \"#ff4569\",\r\n      dark: '#ba000d',\r\n      contrastText: '#000',\r\n    },\r\n    body: {\r\n      maxWidth: \"100%\",\r\n      backgroundColor: \"#34495E\",\r\n      fontFamily: 'Roboto',\r\n    },\r\n  },\r\n});\r\n\r\n// const drawerWidth = 200;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    // marginTop: 80,\r\n    fontSize: 13,\r\n    width: '100%',\r\n    ...theme.mixins.toolbar,\r\n    justifyContent: 'flex-end',\r\n  },\r\n}));\r\n\r\nfunction App() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <AuthProvider>\r\n      <Router>\r\n        <Switch>\r\n          <Container>\r\n            <ThemeProvider theme={theme}>\r\n              <div className={classes.root}>\r\n                <PrivateRoute exact path=\"/\" component={Homepage} />\r\n                <PrivateRoute exact path='/reservations' component={Data} />\r\n                <PrivateRoute exact path='/reservations/:id/add' component={AddReservation} />\r\n                <PrivateRoute exact path='/trips' component={Trips} />\r\n                <PrivateRoute exact path='/trips-grid' component={TripGrid} />\r\n                <PrivateRoute exact path='/trips/add' component={AddTrip} />\r\n                <PrivateRoute exact path='/trips/:id/stops' component={TripStops} />\r\n                <PrivateRoute exact path='/trips/:id/stops/add' component={AddTripStop} />\r\n                {/* <PrivateRoute exact path='/fares' component={Fares} /> */}\r\n                <PrivateRoute exact path=\"/fares\" component={Grid} />\r\n                <PrivateRoute exact path='/fares/add' component={AddFare} />\r\n                <PrivateRoute exact path=\"/statistics\" component={Statistics} />\r\n                <PrivateRoute exact path=\"/payments\" component={Payments} />\r\n                <PrivateRoute path='/downloads/:id/:ticketID' component={(e) => {\r\n                  window.open(\"https://extracitywebhook.herokuapp.com/downloads/\" + encodeURIComponent(e.match.params.ticketID) + \"/\" + encodeURIComponent(e.match.params.id), \"_blank\");\r\n                  return window.location.href = \"/reservations/\";\r\n                }} />\r\n              </div>\r\n              <div>\r\n                <Route exact path='/login' component={login} />\r\n                <Route exact path='/forgot-password' component={Forgot} />\r\n              </div>\r\n            </ThemeProvider>\r\n          </Container>\r\n        </Switch>\r\n      </Router>\r\n    </AuthProvider>\r\n\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n// import './index.css';\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport App from \"./App\";\r\n\r\n// import reportWebVitals from \"./reportWebVitals\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}