(this["webpackJsonpextracity-admin-dashboard"]=this["webpackJsonpextracity-admin-dashboard"]||[]).push([[0],{305:function(e,t,n){},438:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),i=n.n(c),s=(n(304),n(18)),o=(n(305),n(60)),l=n(488),d=n(48),j=n(39),u=n(114),b=n(495),h=n(269),O=n(9),x=n(107);x.a.initializeApp({apiKey:"AIzaSyAZE0XhUYOfAnZkHx9mV2R56xIFrpfBko0",authDomain:"extracitywebhook.firebaseapp.com",databaseURL:"https://extracitywebhook.firebaseio.com",projectId:"extracitywebhook",storageBucket:"extracitywebhook.appspot.com",messagingSenderId:"1092492776927",appId:"1:1092492776927:web:51c38326a035e8722e606a"});var p=x.a,m=n(1),f=p.auth(),v=r.a.createContext();function g(){return r.a.useContext(v)}function y(e){var t=e.children,n=r.a.useState(),a=Object(O.a)(n,2),c=a[0],i=a[1],s=r.a.useState(!0),o=Object(O.a)(s,2),l=o[0],d=o[1];r.a.useEffect((function(){return f.onAuthStateChanged((function(e){i(e),d(!1)}))}),[]);var j={currentUser:c,login:function(e,t){return f.signInWithEmailAndPassword(e,t)},logout:function(){return f.signOut()}};return Object(m.jsx)(v.Provider,{value:j,children:!l&&t})}function w(e){var t=e.component,n=Object(h.a)(e,["component"]),a=g().currentUser;return Object(m.jsx)(j.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){return a?Object(m.jsx)(t,Object(s.a)({},e)):Object(m.jsx)(j.a,{to:"/login"})}}))}var S=n(86),k=n(487),N=n(489),C=Object(o.a)((function(e){return{root:{flexGrow:1,marginTop:"100px",marginBottom:"10px",backgroundColor:"#ad1457"}}}));function T(){var e=C();return Object(m.jsx)(k.a,{className:e.root,position:"relative",color:"primary",children:Object(m.jsx)(l.a,{maxWidth:"md",children:Object(m.jsx)(N.a,{children:Object(m.jsxs)(S.a,{variant:"body1",color:"inherit",children:["First Source Technology ",(new Date).getFullYear()]})})})})}var D=n(29),P=n.n(D),M=n(28),F=n(43),A=n(6),L=n(45),I=n(506),B=n(491),R=n(273),E=n(493),Y=n(111),q=n(251),W=n.n(q),H=n(253),z=n.n(H),U=n(254),G=n.n(U),Z=n(271),K=n(447),J=n(448),V=n(256),$=n.n(V),X=n(257),Q=n.n(X),_=n(259),ee=n.n(_),te=n(261),ne=n.n(te),ae=n(260),re=n.n(ae),ce=n(262),ie=n.n(ce),se=n(258),oe=n.n(se),le=n(505),de=n(492),je=n(252),ue=n.n(je),be=n(110),he=n(270),Oe=n(100),xe=n(66),pe=n(444),me=n(490),fe=n(443),ve=n(120),ge=n(130),ye=n.n(ge),we=n(68),Se=n(243).v4,ke=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"},table:{width:"100%"},pricesContainer:{padding:e.spacing(1)}}}));function Ne(e){var t=p.firestore(),n=ke(),a=r.a.useState(null),c=Object(O.a)(a,2),i=c[0],o=c[1],l=r.a.useState({seats:null,error:""}),d=Object(O.a)(l,2),u=d[0],b=d[1],h=Object(j.g)(),x=r.a.useState(new Date),f=Object(O.a)(x,2),v=f[0],g=f[1],y=r.a.useState({time:null,trip:null,route:null,paymentReference:null,currency:null}),w=Object(O.a)(y,2),S=w[0],k=w[1],N=r.a.useState([]),C=Object(O.a)(N,2),T=C[0],D=C[1];r.a.useEffect((function(){(function(){var e=Object(F.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection("trips").get();case 2:n=e.sent,D(n.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var L=function(e){return function(n){if("trip"===e){var a,r=null===(a=T[S.route])||void 0===a?void 0:a.possibleTrips[n.target.value];void 0!==r?t.collection("fares").where("possibleTrips","array-contains",r).limit(1).get().then((function(t){0===t.size?(o(null),k(Object(s.a)(Object(s.a)({},S),{},Object(M.a)({},e,null))),alert("Sorry the trip you selected does not have a fare associated with it, please select another one!")):(k(Object(s.a)(Object(s.a)({},S),{},Object(M.a)({},e,n.target.value))),o(t.docs[0].data()))})):(o(null),k(Object(s.a)(Object(s.a)({},S),{},Object(M.a)({},e,null))),alert("Sorry the trip you selected does not have a fare associated with it, please select another one!"))}else k(Object(s.a)(Object(s.a)({},S),{},Object(M.a)({},e,n.target.value)));"time"===e&&I(n.target.value)}},I=function(e){var n=we(v,"YYYY-MM-DD").toDate(),a=T[S.route];t.collection("reservations").where("Trip","==",a.name).where("status","==","paid").where("Date","==",n).where("TravelTime","==",a.times[e]).get().then((function(r){var c=r.size,i=new Date;i.setMinutes(i.getMinutes()-5),t.collection("reservations").where("Trip","==",T[S.route].name).where("status","==","pending").where("Date","==",n).where("TravelTime","==",T[S.route].times[e]).where("BookingTime",">=",i).get().then((function(e){var t=e.size,n=a.seats-c-t,r="";n<1&&(r=a.seats===c?"There are no more seats available for the trip you selected!":"There are no seats available at the moment. Please check after 5 or so minutes"),b({seats:n,error:r})}))}))},B=null,R=null;if(null!==S.route){var E,Y,q,W,H,z;if(null!==S.trip&&null!==S.time&&""!==v&&null!==i)if(u.seats>0)B=Object(m.jsxs)(xe.a.Footer,{children:[Object(m.jsxs)("p",{children:[Object(m.jsx)("b",{children:"Note:"})," Only click this button after the customer has made the necessary payments and please make sure the information entered is correct."]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:S.currency,onChange:L("currency"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),Array.from(new Map(Object.entries(null!==(z=null===i||void 0===i?void 0:i.prices)&&void 0!==z?z:{})).keys()).map((function(e){return Object(m.jsx)("option",{value:e,children:e})}))]}),Object(m.jsx)(fe.a,{id:"standard-currency-helper-text",children:"Currency"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-payment-reference",placeholder:"Payment reference",value:S.pickUp,required:!0,onChange:L("paymentReference"),endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-payment-reference-helper-text",inputProps:{"aria-label":"Payment Reference"}}),Object(m.jsx)(fe.a,{id:"standard-payment-reference-helper-text",children:"Payment Reference"})]}),Object(m.jsx)("br",{}),Object(m.jsx)(be.a,{onClick:function(){if(null===S.currency||null===S.trip||null===S.time||""===v||null===S.route||null===i||null===S.paymentReference)alert("Please fill in all input fields!");else{var e=Se(),n=function(){var e=function(e){var t=e.getFullYear().toString(),n=(e.getMonth()+1).toString(),a=e.getDate().toString();return 1===a.length&&(a="0"+a),1===n.length&&(n="0"+n),t+n+a}(new Date),t=(Math.floor(1e3*Math.random())+1).toString();return 1===t.length&&(t="0"+t),2===t.length&&(t="0"+t),"ExC-".concat(e,"-").concat(t)}(),a=T[S.route].possibleTrips[S.trip].split("-"),r=we(v,"YYYY-MM-DD").toDate(),c=new Date,s=function(){var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"][Math.floor(25*Math.random()).toString()],t=(Math.floor(100*Math.random())+1).toString();return 1===t.length&&(t="0"+t),e+t}(),o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));t.collection("reservations").add({ID:e,paymentReference:S.paymentReference,TicketID:n,Currency:S.currency,Amount:i.prices[S.currency],status:"paid",Trip:T[S.route].name,TravellingFrom:a[0],TravellingTo:a[1],BookingTime:c,TravelTime:T[S.route].times[S.time],Date:r,platform:"Walk-in clients",seatNo:s,refNo:o}).then((function(e){return h.push("/reservations/"+e.id+"/add")}))}},variant:"contained",color:"primary",className:n.button,children:"Reserve"})]});else""!==u.error&&alert(u.error);R=Object(m.jsxs)("div",{children:[Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:S.trip,onChange:L("trip"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),null===(E=T[S.route])||void 0===E||null===(Y=E.possibleTrips)||void 0===Y?void 0:Y.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e.replace("-"," to ")})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Trips"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:S.time,onChange:L("time"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),null===(q=T[S.route])||void 0===q||null===(W=q.times)||void 0===W?void 0:W.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e})}))]}),Object(m.jsxs)(fe.a,{id:"standard-date-helper-text",children:["Time (Bus leaves ",null===(H=T[S.route])||void 0===H?void 0:H.from," at )"]})]})]})}return Object(m.jsxs)(xe.a,Object(s.a)(Object(s.a)({},e),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,class:"modal",children:[Object(m.jsx)(xe.a.Header,{closeButton:!0,children:Object(m.jsx)(xe.a.Title,{id:"contained-modal-title-vcenter",children:"Add a reservation"})}),Object(m.jsx)(xe.a.Body,{children:Object(m.jsxs)("div",{className:n.root,children:[Object(m.jsxs)("div",{children:[Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:S.route,onChange:L("route"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),T.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e.name})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Route"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(n.margin,n.withoutLabel,n.textField),children:[Object(m.jsx)(ye.a,{onChange:g,value:v}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Date of Travel"})]})]}),R,function(){if(null!==i){console.log(i);var e=function(){if(void 0===i.prices)return[];var e=new Map(Object.entries(i.prices)),t=[];return e.forEach((function(e,n){var a,r;t.push(Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:n}),Object(m.jsx)("td",{align:"right",children:(a=n,r=e,void 0===r?Object(m.jsx)("p",{children:"--"}):new Intl.NumberFormat("en-US",{style:"currency",currency:a}).format(r).replace(a,"").replace("$",""))})]}))})),t}();return Object(m.jsxs)("div",{className:Object(A.a)(n.pricesContainer),children:[Object(m.jsx)("h1",{children:"Prices"}),Object(m.jsx)("table",{className:Object(A.a)(n.table),children:Object(m.jsx)("tbody",{children:e.map((function(e){return e}))})})]})}}()]})}),B]}))}var Ce=n(255),Te=n.n(Ce),De=240,Pe=Object(o.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"#34495E"},appBarShift:{width:"calc(100% - ".concat(De,"px)"),marginLeft:De,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:De,flexShrink:0},drawerPaper:{width:De,backgroundColor:"#34495E",color:"#ffffff"},drawerHeader:Object(s.a)(Object(s.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},LogoutButton:{color:"#F7F9F9",backgroundColor:"#E74C3C"},profileButton:{backgroundColor:"#2874A6",color:"#F7F9F9"},dropdownTitle:{color:"#ff1744"},dropDownMenu:{"& .MuiPaper-root":{backgroundColor:"#34495e",color:"#fff"}}}}));function Me(e){return Object(m.jsx)(Z.a,Object(s.a)({button:!0,component:"a"},e))}function Fe(){var e=r.a.useState(!1),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Pe(),i=Object(L.a)(),s=r.a.useState(!1),o=Object(O.a)(s,2),l=o[0],d=o[1],u=r.a.useState(),b=Object(O.a)(u,2),h=b[0],x=b[1],p=g(),f=p.currentUser,v=p.logout,y=Object(j.g)(),w=r.a.useState(null),C=Object(O.a)(w,2),T=C[0],D=C[1];function q(){return(q=Object(F.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(""),e.prev=1,e.next=4,v();case 4:y.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),x("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(m.jsxs)("div",{className:c.root,children:[h&&Object(m.jsx)(le.a,{variant:"danger",children:h}),Object(m.jsx)(B.a,{}),Object(m.jsx)(k.a,{position:"fixed",className:Object(A.a)(c.appBar,Object(M.a)({},c.appBarShift,l)),children:Object(m.jsxs)(N.a,{children:[Object(m.jsx)(Y.a,{color:"inherit","aria-label":"open drawer",onClick:function(){d(!0)},edge:"start",className:Object(A.a)(c.menuButton,l&&c.hide),children:Object(m.jsx)(W.a,{})}),Object(m.jsx)(S.a,{variant:"h6",noWrap:!0,children:"Extracity Dashboard"}),Object(m.jsx)(be.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){D(e.currentTarget)},className:c.dropdownTitle,endIcon:Object(m.jsx)(ue.a,{}),children:f.email}),Object(m.jsxs)(he.a,{id:"simple-menu",anchorEl:T,keepMounted:!0,open:Boolean(T),onClose:function(){D(null)},className:c.dropDownMenu,children:[Object(m.jsx)(Oe.a,{component:de.a,href:"/update-profile",style:{color:"black",textDecoration:"none"},children:"Update profile"}),Object(m.jsx)(Oe.a,{component:de.a,onClick:function(){return q.apply(this,arguments)},href:"/logout",style:{color:"red",textDecoration:"none"},children:"Logout"})]})]})}),Object(m.jsxs)(I.a,{className:c.drawer,variant:"persistent",anchor:"left",open:l,classes:{paper:c.drawerPaper},children:[Object(m.jsx)("div",{className:c.drawerHeader,children:Object(m.jsx)(Y.a,{onClick:function(){d(!1)},children:"ltr"===i.direction?Object(m.jsx)(z.a,{}):Object(m.jsx)(G.a,{})})}),Object(m.jsx)(E.a,{}),Object(m.jsxs)(R.a,{children:[Object(m.jsx)(Z.a,{children:Object(m.jsxs)(be.a,{variant:"contained",color:"primary",onClick:function(){return a(!0)},children:[Object(m.jsx)(Te.a,{}),"Add a reservation"]})}),Object(m.jsxs)(Me,{href:"/",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)($.a,{color:"primary"})}),Object(m.jsx)(J.a,{primary:"Home"})]}),Object(m.jsx)(E.a,{}),Object(m.jsxs)(Me,{href:"/reservations",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(Q.a,{color:"primary"})}),Object(m.jsx)(J.a,{primary:"Reservations"})]}),Object(m.jsx)(E.a,{}),Object(m.jsx)(E.a,{}),Object(m.jsxs)(Me,{href:"/statistics",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(oe.a,{color:"primary"})}),Object(m.jsx)(J.a,{primary:"Statistics"})]}),Object(m.jsx)(E.a,{}),Object(m.jsxs)(Me,{href:"/payments",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(ee.a,{color:"primary"})}),Object(m.jsx)(J.a,{primary:"Payments"})]}),Object(m.jsx)(E.a,{}),Object(m.jsxs)(Me,{href:"/trips-grid",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(re.a,{color:"primary"})}),Object(m.jsx)(J.a,{primary:"Trip Grid"})]}),Object(m.jsx)(E.a,{}),Object(m.jsxs)(Me,{href:"/fares",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(ne.a,{color:"primary"})}),Object(m.jsx)(J.a,{primary:"Fares Grid"})]}),Object(m.jsx)(E.a,{}),Object(m.jsxs)(Me,{href:"/trips",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)(ie.a,{color:"primary"})}),Object(m.jsx)(J.a,{primary:"Trip Stops"})]}),Object(m.jsx)(E.a,{})]}),Object(m.jsx)(Ne,{show:n,onHide:function(){return a(!1)}})]})]})}var Ae=n(116),Le=n(494),Ie=n(68),Be=Object(o.a)((function(e){return{root:{height:400,width:"100%",marginTop:80},button:{marginBottom:"10px"},filterBox:{margin:e.spacing(1)}}})),Re=[{field:"fullname",headerName:"FULL NAME",description:"This column has a value",sortable:!1,width:160,valueGetter:function(e){return"".concat(e.row.firstName,"  ").concat(e.row.lastName)}},{field:"PhoneNumber",headerName:"PHONE #",width:130},{field:"Trip",headerName:"TRIP",width:170},{field:"Date",headerName:"DATE",width:160,valueGetter:function(e){return"".concat(e.row.Date.toDate())}},{field:"TravelTime",headerName:"TIME",width:110},{field:"Amount",headerName:"AMOUNT",width:110,valueGetter:function(e){return"".concat(e.row.Currency," ").concat(e.row.Amount)}},{field:"TicketID",headerName:"TICKET ID",width:180}];function Ee(){var e,t,n,a,c=Be(),i=r.a.useState([]),o=Object(O.a)(i,2),l=o[0],d=o[1],j=r.a.useState([]),u=Object(O.a)(j,2),b=u[0],h=u[1],x=r.a.useState({route:0,trip:0,time:0,from:"",to:"",search:""}),f=Object(O.a)(x,2),v=f[0],g=f[1],y=p.firestore(),w=function(e,t){g(Object(s.a)(Object(s.a)({},v),{},Object(M.a)({},e,t))),S(null,e,t)};r.a.useState((function(){(function(){var e=Object(F.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.collection("trips").get();case 2:t=e.sent,n=t.docs.map((function(e){return e.data()})),h(n),S(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var S=function(){var e=Object(F.a)(P.a.mark((function e(){var t,n,a,r,c,i,o,l,j,u,h,O,x,p,m,f,g,w=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=w.length>0&&void 0!==w[0]?w[0]:null,n=w.length>1&&void 0!==w[1]?w[1]:null,a=w.length>2&&void 0!==w[2]?w[2]:null,r=null===t?b:t,c=v.from,i=v.to,o=v.route,l=v.trip,j=v.time,v.search,e.t0=n,e.next="to"===e.t0?13:"from"===e.t0?15:"route"===e.t0?17:"trip"===e.t0?19:"time"===e.t0?21:"search"===e.t0?23:25;break;case 13:return i=a,e.abrupt("break",26);case 15:return c=a,e.abrupt("break",26);case 17:return o=a,e.abrupt("break",26);case 19:return l=a,e.abrupt("break",26);case 21:return j=a,e.abrupt("break",26);case 23:return a,e.abrupt("break",26);case 25:console.log("No data");case 26:return u=y.collection("reservations"),h=u.where("status","==","paid"),""!==o&&void 0!==r[o]&&(h=h.where("Trip","==",null===(O=r[o])||void 0===O?void 0:O.name),""!==l&&void 0!==r[o].possibleTrips[l]&&(p=r[o].possibleTrips[l].split("-"),h=h.where("TravellingFrom","==",p[0]).where("TravellingTo","==",p[1])),""!==j&&void 0!==r[o].times[j]&&(h=h.where("TravelTime","==",null===(x=r[o])||void 0===x?void 0:x.times[j]))),console.log(c,i),""!==c&&null!==c&&void 0!==c&&c===i?(console.log("heer"),(m=Ie(c,"YYYY-MM-DD").toDate()).setDays(m.getDays()-1),(f=Ie(c,"YYYY-MM-DD").toDate()).setDays(f.getDays()+1),h=h.where("Date",">",m).where("Date","<",f)):(""!==c&&null!==c&&void 0!==c&&(h=h.where("Date",">=",Ie(c,"YYYY-MM-DD").toDate())),""!==i&&null!==i&&void 0!==i&&(h=h.where("Date","<=",Ie(i,"YYYY-MM-DD").toDate()))),e.next=33,h.get();case 33:if(g=e.sent,console.log(g.size),!g.empty){e.next=39;break}return console.log("No matching documents."),d([]),e.abrupt("return");case 39:d(g.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})})));case 40:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:c.root,children:[Object(m.jsx)("h3",{style:{marginBottom:20},children:"Ticket Reservation List"}),Object(m.jsx)("br",{}),Object(m.jsxs)(Le.a,{container:!0,className:c.filterBox,spacing:2,children:[Object(m.jsx)(Le.a,{item:!0,children:Object(m.jsx)(Le.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:v.route,onChange:function(e){return w("route",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===b||void 0===b?void 0:b.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e.name})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Route"})]})})}),Object(m.jsx)(Le.a,{item:!0,children:Object(m.jsx)(Le.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:v.trip,onChange:function(e){return w("trip",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===(e=b[v.route])||void 0===e||null===(t=e.possibleTrips)||void 0===t?void 0:t.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e.replace("-"," to ")})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Trip"})]})})}),Object(m.jsx)(Le.a,{item:!0,children:Object(m.jsx)(Le.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:v.time,onChange:function(e){return w("time",e.target.value)},required:!0,children:[Object(m.jsx)("option",{value:"",children:"All"}),null===(n=b[v.route])||void 0===n||null===(a=n.times)||void 0===a?void 0:a.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e})}))]}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"Time"})]})})}),Object(m.jsx)(Le.a,{item:!0,children:Object(m.jsx)(Le.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsx)(ye.a,{onChange:function(e){w("from",e)},value:v.from}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"From"})]})})}),Object(m.jsx)(Le.a,{item:!0,children:Object(m.jsx)(Le.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsx)(ye.a,{onChange:function(e){w("to",e)},value:v.to}),Object(m.jsx)(fe.a,{id:"standard-date-helper-text",children:"To"})]})})}),Object(m.jsx)(Le.a,{item:!0,children:Object(m.jsx)(Le.a,{container:!0,justify:"left",spacing:1,children:Object(m.jsxs)(ve.a,{className:Object(A.a)(c.margin,c.withoutLabel,c.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-search",placeholder:"Search...",value:v.search,required:!0,onChange:function(e){return w("search",e.target.value)},endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-payment-reference-helper-text",inputProps:{"aria-label":"Search"}}),Object(m.jsx)(fe.a,{id:"standard-search-helper-text",children:"Search"})]})})})]}),Object(m.jsx)(Ae.a,{rows:l,columns:Re})]})}function Ye(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Fe,{}),Object(m.jsx)(Ee,{}),Object(m.jsx)(T,{})]})}var qe=n(68),We=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",flexGrow:1},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},table:{width:"100%"},pricesContainer:{padding:e.spacing(1)},paper:{height:140,width:100},control:{padding:e.spacing(2)},fullWidth:{width:"100%",margin:e.spacing(.5)}}}));function He(e){var t=We(),n=null;null!==e.values.trip&&null!==e.values.time&&(n=Object(m.jsxs)(xe.a.Footer,{children:[Object(m.jsxs)("p",{children:[Object(m.jsx)("b",{children:"Note:"})," Please click the save button after you have confirmed the information displayed above."]}),Object(m.jsx)(be.a,{onClick:e.handleSubmit,variant:"contained",color:"primary",className:t.button,children:"Save"})]}));var a=new Intl.NumberFormat("en-US",{style:"currency",currency:e.reservation.Currency});return Object(m.jsxs)(xe.a,Object(s.a)(Object(s.a)({},e),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",class:"modal",children:[Object(m.jsx)(xe.a.Header,{closeButton:!0,children:Object(m.jsx)(xe.a.Title,{id:"contained-modal-title-vcenter",children:"Confirm details"})}),Object(m.jsx)(xe.a.Body,{children:Object(m.jsx)("div",{className:t.root,children:Object(m.jsxs)(Le.a,{container:!0,className:t.root,spacing:2,children:[Object(m.jsx)(Le.a,{item:!0,lg:6,children:Object(m.jsxs)(Le.a,{container:!0,justify:"left",spacing:1,children:[Object(m.jsx)("h3",{children:"Ticket information"}),Object(m.jsxs)("table",{className:t.fullWidth,children:[Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Route:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.reservation.Trip})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Travelling from:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.reservation.TravellingFrom})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Travelling to:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.reservation.TravellingTo})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Date:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:qe(e.reservation.Date.toDate()).format("LL")})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Time (Leaves Bulawayo at):"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.reservation.TravelTime})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Amount:"})})}),Object(m.jsx)("tr",{children:Object(m.jsxs)("td",{children:[e.reservation.Currency,a.format(e.reservation.Amount).replace(e.reservation.Currency,"").replace("$","")]})})]})]})}),Object(m.jsx)(Le.a,{item:!0,xs:6,children:Object(m.jsxs)(Le.a,{container:!0,justify:"left",spacing:1,children:[Object(m.jsx)("h3",{children:"Personal information"}),Object(m.jsxs)("table",{className:t.fullWidth,children:[Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"First name:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.firstname})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Last name:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.lastname})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Email:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.email})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Phone number:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.phoneNumber})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"Paid using:"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:e.values.paymentMethod})})]})]})})]})})}),n]}))}var ze=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",marginTop:80},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"}}}));function Ue(){var e=ze(),t=Object(j.g)(),n=p.firestore(),a=Object(j.h)().id,c=r.a.useState(null),i=Object(O.a)(c,2),o=i[0],l=i[1],d=r.a.useState(!1),u=Object(O.a)(d,2),b=u[0],h=u[1],x=r.a.useState({email:null,paymentMethod:null,phoneNumber:null,firstname:null,lastname:null}),f=Object(O.a)(x,2),v=f[0],g=f[1];r.a.useEffect((function(){n.collection("reservations").doc(a).get().then((function(e){e.exists&&l(e.data())}))}),[]);var y=function(e){return function(t){g(Object(s.a)(Object(s.a)({},v),{},Object(M.a)({},e,t.target.value)))}};return null!==o?Object(m.jsxs)("div",{children:[Object(m.jsxs)("form",{className:e.root,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"New Reservation"}),Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-first-name",placeholder:"Andile",required:!0,value:v.firstname,onChange:y("firstname"),endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-first-name-helper-text",inputProps:{"aria-label":"First name"}}),Object(m.jsx)(fe.a,{id:"standard-first-name-helper-text",children:"First Name"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-last-name",placeholder:"Mbele",value:v.lastname,onChange:y("lastname"),required:!0,"aria-describedby":"standard-last-name-helper-text",inputProps:{"aria-label":"Last name"}}),Object(m.jsx)(fe.a,{id:"standard-last-name-helper-text",children:"Last Name"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-phone-number",placeholder:"0776869521",value:v.phoneNumber,required:!0,onChange:y("phoneNumber"),endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-phone-number-helper-text",inputProps:{"aria-label":"Phone Number"}}),Object(m.jsx)(fe.a,{id:"standard-weight-helper-text",children:"Phone Number"})]}),Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsx)(pe.a,{id:"standard-adornment-email",placeholder:"andile.m@outlook.com",value:v.email,required:!0,onChange:y("email"),endAdornment:Object(m.jsx)(me.a,{position:"end"}),"aria-describedby":"standard-email-helper-text",inputProps:{"aria-label":"Email"}}),Object(m.jsx)(fe.a,{id:"standard-weight-helper-text",children:"Email Address"})]})]}),Object(m.jsxs)("div",{children:[Object(m.jsxs)(ve.a,{className:Object(A.a)(e.margin,e.withoutLabel,e.textField),children:[Object(m.jsxs)("select",{labelId:"id",value:v.paymentMethod,onChange:y("paymentMethod"),required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select ..."}),Object(m.jsx)("option",{children:"Swipe"}),Object(m.jsx)("option",{children:"Ecocash"}),Object(m.jsx)("option",{children:"One money"}),Object(m.jsx)("option",{children:"Telecash"}),Object(m.jsx)("option",{children:"Cash"}),Object(m.jsx)("option",{children:"Other"})]}),Object(m.jsx)(fe.a,{id:"standard-payment-method-helper-text",children:"Payment Method"})]}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)(be.a,{input:!0,type:"button",onClick:function(){null===v.firstname||null===v.lastname||null===v.paymentMethod||null===v.phoneNumber||null===v.email?alert("Please fill in all input fields."):h(!0)},variant:"contained",color:"primary",className:"submitButton",children:"Submit"})]})]}),Object(m.jsx)(He,{reservation:o,values:v,handleSubmit:function(){null===v.firstname||null===v.lastname||null===v.paymentMethod||null===v.phoneNumber||null===v.email?alert("Please fill in all input fields."):n.collection("reservations").doc(a).update({firstName:v.firstname,lastName:v.lastname,fullname:"".concat(v.firstname," ").concat(v.lastname),Email:v.email,PhoneNumber:v.phoneNumber,PaymentMethod:v.paymentMethod}).then((function(e){return t.push("/downloads/"+a+"/"+encodeURIComponent(o.TicketID))})).catch((function(e){return alert("An error occurred!")}))},show:b,onHide:function(){return h(!1)}})]}):Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"404"}),Object(m.jsx)("h2",{children:"Page not found!"})]})}function Ge(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Fe,{}),Object(m.jsx)(Ue,{}),Object(m.jsx)(T,{})]})}var Ze=n(507),Ke=n(504),Je=n(497);function Ve(){var e=r.a.useRef(),t=r.a.useRef(),n=g().login,a=r.a.useState(""),c=Object(O.a)(a,2),i=c[0],s=c[1],o=r.a.useState(!1),l=Object(O.a)(o,2),u=l[0],b=l[1],h=Object(j.g)();function x(){return(x=Object(F.a)(P.a.mark((function a(r){return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.prev=1,s(""),b(!0),a.next=6,n(e.current.value,t.current.value);case 6:h.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),s("Failed to log in.");case 12:b(!1);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))).apply(this,arguments)}return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(Ze.a,{className:"bg-dark text-white",children:[Object(m.jsxs)(Ze.a.Body,{children:[Object(m.jsx)("h4",{className:"text-center mb-4",children:"Extracity Login"}),i&&Object(m.jsx)(le.a,{variant:"danger",children:i}),Object(m.jsxs)(Ke.a,{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(m.jsxs)(Ke.a.Group,{id:"email",children:[Object(m.jsx)(Ke.a.Label,{children:"Email"}),Object(m.jsx)(Ke.a.Control,{type:"email",ref:e,required:!0})]}),Object(m.jsxs)(Ke.a.Group,{id:"password",children:[Object(m.jsx)(Ke.a.Label,{children:"Password"}),Object(m.jsx)(Ke.a.Control,{type:"password",ref:t,required:!0})]}),Object(m.jsx)(Je.a,{disabled:u,type:"submit",className:"w-100",children:"Login"})]})]}),Object(m.jsxs)("div",{className:"w-100 text-center mt-2",children:["Forgot password? ",Object(m.jsx)(d.b,{to:"/reset-password",children:"Click here"})]})]})})}var $e=n(498);function Xe(){return Object(m.jsx)($e.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"80vh"},children:Object(m.jsx)("div",{className:"w-100",style:{maxWidth:"350px",alignItems:"center"},children:Object(m.jsx)(Ve,{})})})}var Qe=n(26),_e=n(502),et=n(503),tt=n(496),nt=n(501),at=n(499),rt=n(455),ct=n(500),it=n(509),st=n(165),ot=n(206),lt=n(204),dt=n(450),jt=n(451),ut=n(159),bt=n.n(ut),ht=n(160),Ot=n.n(ht),xt=n(68),pt=n.n(xt);function mt(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function ft(e,t){return"desc"===e?function(e,n){return mt(e,n,t)}:function(e,n){return-mt(e,n,t)}}function vt(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var gt=[{id:"name",numeric:!1,disablePadding:!0,label:"TRIP"},{id:"from",numeric:!1,disablePadding:!0,label:"FROM"},{id:"to",numeric:!1,disablePadding:!0,label:"TO"},{id:"times",numeric:!1,disablePadding:!0,label:"TIMES"},{id:"stops",numeric:!1,disablePadding:!0,label:"STOPS"},{id:"date",numeric:!1,disablePadding:!0,label:"DATE"},{id:"actions",numeric:!1,disablePadding:!1,label:"ACTIONS"}];function yt(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,c=e.numSelected,i=e.rowCount,s=e.onRequestSort;return Object(m.jsx)(at.a,{children:Object(m.jsxs)(ct.a,{children:[Object(m.jsx)(tt.a,{padding:"checkbox",children:Object(m.jsx)(ot.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:n,inputProps:{"aria-label":"select all trips"}})}),gt.map((function(e){return Object(m.jsx)(tt.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&a,children:Object(m.jsxs)(it.a,{active:r===e.id,direction:r===e.id?a:"asc",onClick:(n=e.id,function(e){s(e,n)}),children:[e.label,r===e.id?Object(m.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var wt=Object(o.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"dark"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Qe.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),St=function(e){var t=wt(),n=e.numSelected;return Object(m.jsxs)(N.a,{className:Object(A.a)(t.root,Object(M.a)({},t.highlight,n>0)),children:[n>0?Object(m.jsxs)(S.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(m.jsxs)(S.a,{className:t.title,variant:"h5",id:"tableTitle",component:"div",children:["Trips",Object(m.jsx)(d.b,{to:"/trips/add",children:Object(m.jsx)("button",{children:"Add"})})]}),n>0?Object(m.jsx)(lt.a,{title:"Delete",children:Object(m.jsx)(Y.a,{"aria-label":"delete",children:Object(m.jsx)(bt.a,{})})}):Object(m.jsx)(lt.a,{title:"Filter list",children:Object(m.jsx)(Y.a,{"aria-label":"filter list",children:Object(m.jsx)(Ot.a,{})})})]})},kt=Object(o.a)((function(e){return{root:{width:"100%",marginTop:80},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750,width:"calc(100% - ".concat(300,"px)")},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Nt(){var e=kt(),t=r.a.useState("asc"),n=Object(O.a)(t,2),a=n[0],c=n[1],i=r.a.useState("calories"),s=Object(O.a)(i,2),o=s[0],l=s[1],j=r.a.useState([]),u=Object(O.a)(j,2),b=u[0],h=u[1],x=r.a.useState(0),f=Object(O.a)(x,2),v=f[0],g=f[1],y=r.a.useState(!1),w=Object(O.a)(y,2),S=w[0],k=w[1],N=r.a.useState(10),C=Object(O.a)(N,2),T=C[0],D=C[1],M=r.a.useState([]),A=Object(O.a)(M,2),L=A[0],I=A[1];r.a.useEffect((function(){(function(){var e=Object(F.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.firestore(),e.next=3,t.collection("trips").get().then((function(e){return I(e.docs.map((function(e){return e})))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var B=T-Math.min(T,L.length-v*T);return Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsxs)(st.a,{className:e.paper,children:[Object(m.jsx)(St,{numSelected:b.length}),Object(m.jsx)(nt.a,{children:Object(m.jsxs)(_e.a,{className:e.table,"aria-labelledby":"tableTitle",size:S?"small":"medium","aria-label":"enhanced table",children:[Object(m.jsx)(yt,{classes:e,numSelected:b.length,order:a,orderBy:o,onSelectAllClick:function(e){if(e.target.checked){var t=L.map((function(e){return e.name}));h(t)}else h([])},onRequestSort:function(e,t){c(o===t&&"asc"===a?"desc":"asc"),l(t)},rowCount:L.length}),Object(m.jsxs)(et.a,{children:[vt(L,ft(a,o)).slice(v*T,v*T+T).map((function(e,t){var n,a=e.data(),r=(n=a.id,-1!==b.indexOf(n)),c="enhanced-table-checkbox-".concat(t),i="/trips/".concat(e.id,"/stops");return Object(m.jsxs)(ct.a,{hover:!0,onClick:function(e){return function(e,t){var n=b.indexOf(t),a=[];-1===n?a=a.concat(b,t):0===n?a=a.concat(b.slice(1)):n===b.length-1?a=a.concat(b.slice(0,-1)):n>0&&(a=a.concat(b.slice(0,n),b.slice(n+1))),h(a)}(0,a.id)},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:[Object(m.jsx)(tt.a,{padding:"checkbox",children:Object(m.jsx)(ot.a,{checked:r,inputProps:{"aria-labelledby":c}})}),Object(m.jsx)(tt.a,{component:"th",id:c,scope:"row",padding:"none",children:a.name}),Object(m.jsx)(tt.a,{align:"right",children:a.from}),Object(m.jsx)(tt.a,{align:"right",children:a.to}),Object(m.jsx)(tt.a,{align:"right",children:a.times.join(", ")}),Object(m.jsx)(tt.a,{align:"right",children:Ct(a.stops)}),Object(m.jsx)(tt.a,{align:"right",children:pt()(a.date.toDate(),"YYYY-MM-DD").format("LLL")}),Object(m.jsx)(tt.a,{align:"right",children:Object(m.jsx)(d.b,{to:i,children:Object(m.jsx)("button",{children:"Stops"})})})]},a.id)})),B>0&&Object(m.jsx)(ct.a,{style:{height:(S?33:53)*B},children:Object(m.jsx)(tt.a,{colSpan:11})})]})]})}),Object(m.jsx)(rt.a,{rowsPerPageOptions:[5,10,20],component:"div",count:L.length,rowsPerPage:T,page:v,onChangePage:function(e,t){g(t)},onChangeRowsPerPage:function(e){D(parseInt(e.target.value,10)),g(0)}})]}),Object(m.jsx)(dt.a,{control:Object(m.jsx)(jt.a,{checked:S,onChange:function(e){k(e.target.checked)}}),label:"Dense padding"})]})}function Ct(e){if(void 0===e||null===e)return"";var t=new Map(Object.entries(e)),n=[];return t.forEach((function(e){n.push(e.name)})),n.join(", ")}function Tt(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Fe,{}),Object(m.jsx)(Nt,{}),Object(m.jsx)(T,{})]})}var Dt=n(266),Pt=Object(o.a)((function(e){return{root:{marginTop:80}}}));function Mt(e){for(var t=Pt(),n=[],a=0;a<2400;a+=100)for(var r=0;r<60;r+=15){var c="";0===a?c="00":a<1e3&&(c="0"),(c+=a+r).length<4&&(c="0".concat(c)),n.push({label:c,value:c})}return console.log(n),Object(m.jsx)("div",{className:t.root,children:Object(m.jsx)(Dt.a,{options:n,value:e.times,onChange:function(t){return e.setTimes(t)},labelledBy:"Select"})})}var Ft=n(180).uuid,At=Object(o.a)((function(e){return{root:{marginTop:80}}}));function Lt(e){var t=At(),n=Object(j.g)(),r=p.firestore(),c=Object(a.useState)(),i=Object(O.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(),d=Object(O.a)(l,2),u=d[0],b=d[1],h=Object(a.useState)(),x=Object(O.a)(h,2),f=x[0],v=x[1],g=Object(a.useState)([]),y=Object(O.a)(g,2),w=y[0],S=y[1],k=Object(a.useState)(0),N=Object(O.a)(k,2),C=N[0],T=N[1];return Object(m.jsxs)("form",{onSubmit:function(e){!function(e){if(e.preventDefault(),void 0===s||""===s||void 0===C||""===C||void 0===u||""===u||void 0===f||""===f||void 0===w||0===w.length)alert("Please fill in all input fields!");else{var t=Ft();r.collection("trips").add({id:t,name:s,to:u,from:f,seats:parseInt(C),times:w.map((function(e){return console.log(e),e.value})),date:new Date}).then((function(e){return n.push("/trips/"+e.id+"/stops")})).catch((function(e){return alert("An error occurred!")}))}}(e)},className:t.root,children:[Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Trip name"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"name",type:"text",value:s,required:!0,onChange:function(e){return o(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"From"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"from",type:"text",value:f,required:!0,onChange:function(e){return v(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"To"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"to",type:"text",value:u,required:!0,onChange:function(e){return b(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Number of seats"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"seats",type:"number",value:C,required:!0,onChange:function(e){return T(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Departure times"}),Object(m.jsx)("br",{}),Object(m.jsx)(Mt,{setTimes:S,times:w}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"submitButton",type:"submit",value:"Save"})]})}function It(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Fe,{}),Object(m.jsx)(Lt,{}),Object(m.jsx)(T,{})]})}function Bt(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Rt(e,t){return"desc"===e?function(e,n){return Bt(e,n,t)}:function(e,n){return-Bt(e,n,t)}}function Et(e,t){var n=null===e||void 0===e?void 0:e.map((function(e,t){return[e,t]}));return null===n||void 0===n||n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),null===n||void 0===n?void 0:n.map((function(e){return e[0]}))}var Yt=[{id:"name",numeric:!1,disablePadding:!0,label:"STOP"},{id:"times",numeric:!0,disablePadding:!0,label:"TIMES"},{id:"date",numeric:!0,disablePadding:!1,label:"DATE"}];function qt(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,c=e.numSelected,i=e.rowCount,s=e.onRequestSort;return Object(m.jsx)(at.a,{className:t.root,children:Object(m.jsxs)(ct.a,{children:[Object(m.jsx)(tt.a,{padding:"checkbox",children:Object(m.jsx)(ot.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:n,inputProps:{"aria-label":"select all trips"}})}),Yt.map((function(e){return Object(m.jsx)(tt.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&a,children:Object(m.jsxs)(it.a,{active:r===e.id,direction:r===e.id?a:"asc",onClick:(n=e.id,function(e){s(e,n)}),children:[e.label,r===e.id?Object(m.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var Wt=Object(o.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"dark"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Qe.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Ht=function(e){var t=Object(j.h)().id,n=Wt(),a=e.numSelected,r="/trips/".concat(t,"/stops/add");return Object(m.jsxs)(N.a,{className:Object(A.a)(n.root,Object(M.a)({},n.highlight,a>0)),children:[a>0?Object(m.jsxs)(S.a,{className:n.title,color:"inherit",variant:"subtitle1",component:"div",children:[a," selected"]}):Object(m.jsxs)(S.a,{className:n.title,variant:"h5",id:"tableTitle",component:"div",children:["Stops",Object(m.jsx)(d.b,{to:r,children:Object(m.jsx)("button",{children:"Add"})})]}),a>0?Object(m.jsx)(lt.a,{title:"Delete",children:Object(m.jsx)(Y.a,{"aria-label":"delete",children:Object(m.jsx)(bt.a,{})})}):Object(m.jsx)(lt.a,{title:"Filter list",children:Object(m.jsx)(Y.a,{"aria-label":"filter list",children:Object(m.jsx)(Ot.a,{})})})]})},zt=Object(o.a)((function(e){return{root:{width:"100%",marginTop:80},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750,width:"calc(100% - ".concat(300,"px)")},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Ut(e){var t,n,a,c,i=zt(),s=r.a.useState("asc"),o=Object(O.a)(s,2),l=o[0],d=o[1],j=r.a.useState("calories"),u=Object(O.a)(j,2),b=u[0],h=u[1],x=r.a.useState([]),p=Object(O.a)(x,2),f=p[0],v=p[1],g=r.a.useState(0),y=Object(O.a)(g,2),w=y[0],S=y[1],k=r.a.useState(!1),N=Object(O.a)(k,2),C=N[0],T=N[1],D=r.a.useState(10),P=Object(O.a)(D,2),M=P[0],F=P[1],A=M-Math.min(M,(null===(t=e.trip.stops)||void 0===t?void 0:t.length)-w*M);return Object(m.jsxs)("div",{className:i.root,children:[Object(m.jsxs)(st.a,{className:i.paper,children:[Object(m.jsx)(Ht,{numSelected:null===f||void 0===f?void 0:f.length}),Object(m.jsx)(nt.a,{children:Object(m.jsxs)(_e.a,{className:i.table,"aria-labelledby":"tableTitle",size:C?"small":"medium","aria-label":"enhanced table",children:[Object(m.jsx)(qt,{classes:i,numSelected:null===f||void 0===f?void 0:f.length,order:l,orderBy:b,onSelectAllClick:function(t){if(t.target.checked){var n,a=null===(n=e.trip.stops)||void 0===n?void 0:n.map((function(e){return e.name}));v(a)}else v([])},onRequestSort:function(e,t){d(b===t&&"asc"===l?"desc":"asc"),h(t)},rowCount:null===(n=e.trip.stops)||void 0===n?void 0:n.length}),Object(m.jsxs)(et.a,{children:[null===(a=Et(void 0===e.trip.stops||null===e.trip.stops?[]:Array.from(new Map(Object.entries(e.trip.stops)).values()),Rt(l,b)))||void 0===a?void 0:a.slice(w*M,w*M+M).map((function(e,t){var n,a=(n=e.id,-1!==f.indexOf(n)),r="enhanced-table-checkbox-".concat(t);return e=new Map(Object.entries(e)),Object(m.jsxs)(ct.a,{hover:!0,onClick:function(t){return function(e,t){var n=f.indexOf(t),a=[];-1===n?a=a.concat(f,t):0===n?a=a.concat(f.slice(1)):n===(null===f||void 0===f?void 0:f.length)-1?a=a.concat(f.slice(0,-1)):n>0&&(a=a.concat(f.slice(0,n),f.slice(n+1))),v(a)}(0,e.id)},role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(m.jsx)(tt.a,{padding:"checkbox",children:Object(m.jsx)(ot.a,{checked:a,inputProps:{"aria-labelledby":r}})}),Object(m.jsx)(tt.a,{component:"th",id:r,scope:"row",padding:"none",children:e.get("name")}),Object(m.jsx)(tt.a,{align:"right",children:Gt(e.get("times"))}),Object(m.jsx)(tt.a,{align:"right",children:pt()(e.get("date").toDate(),"YYYY-MM-DD").format("LLL")})]},e.get("id"))})),A>0&&Object(m.jsx)(ct.a,{style:{height:(C?33:53)*A},children:Object(m.jsx)(tt.a,{colSpan:11})})]})]})}),Object(m.jsx)(rt.a,{rowsPerPageOptions:[5,10,20],component:"div",count:null===(c=e.trip.stops)||void 0===c?void 0:c.length,rowsPerPage:M,page:w,onChangePage:function(e,t){S(t)},onChangeRowsPerPage:function(e){F(parseInt(e.target.value,10)),S(0)}})]}),Object(m.jsx)(dt.a,{control:Object(m.jsx)(jt.a,{checked:C,onChange:function(e){T(e.target.checked)}}),label:"Dense padding"})]})}function Gt(e){if(void 0===e||null===e)return"";var t=new Map(Object.entries(e)),n=[];return t.forEach((function(e){n.push(e)})),n.join(", ")}function Zt(){var e,t=Object(j.h)().id,n=r.a.useState(),a=Object(O.a)(n,2),c=a[0],i=a[1];return r.a.useEffect((function(){p.firestore().collection("trips").doc(t).get().then((function(e){console.log(e),e.exists&&i(e.data())}))}),[]),void 0!==c&&null!==c?(void 0!==c.stops&&null!==c.stops||(c.stops=[]),e=Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:c.name}),Object(m.jsx)(Ut,{trip:c})]})):e=Object(m.jsx)("h1",{children:"Trip not found!"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(Fe,{}),e,Object(m.jsx)(T,{})]})}var Kt=n(180).uuid,Jt=Object(o.a)((function(e){return{root:{marginTop:80}}}));function Vt(e){var t=Jt(),n=Object(j.g)(),r=p.firestore(),c=Object(a.useState)(),i=Object(O.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(new Map),d=Object(O.a)(l,2),u=d[0],b=d[1];return Object(m.jsxs)("form",{onSubmit:function(t){!function(t){if(t.preventDefault(),void 0===s||""===s||void 0===u||0===u.length)alert("Please fill in all input fields!");else{var a,c,i,o,l=Kt(),d=null!==(a=null===(c=e.trip)||void 0===c?void 0:c.stops)&&void 0!==a?a:{};d[s]={id:l,name:s,times:Object.fromEntries(u),date:new Date};for(var j=Array.from(new Map(Object.entries(d)).values()),b=["".concat(null===(i=e.trip)||void 0===i?void 0:i.from,"-").concat(null===(o=e.trip)||void 0===o?void 0:o.to)],h=j.map((function(t){var n;return"".concat(null===(n=e.trip)||void 0===n?void 0:n.from,"-").concat(t.name)})),O=[],x=0;x<j.length;x++){var p;if(O.push("".concat(j[x].name,"-").concat(null===(p=e.trip)||void 0===p?void 0:p.to)),x<j.length-1)for(var m=x+1;m<j.length;m++)O.push("".concat(j[x].name,"-").concat(j[m].name))}var f=b.concat(h,O);r.collection("trips").doc(e.docID).update({stops:d,possibleTrips:f}).then((function(t){return n.push("/trips/"+e.docID+"/stops")})).catch((function(e){alert("An error occurred!"),console.log(e)}))}}(t)},className:t.root,children:[Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"City or town name"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"name",type:"text",value:s,required:!0,onChange:function(e){return o(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Times"}),Object(m.jsx)("br",{}),Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsxs)("th",{children:["Leaves ",e.trip.from," at"]}),Object(m.jsx)("th",{children:"Leaves this stop at"})]}),e.trip.times.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{name:"to",type:"number",onChange:function(t){u.delete(e),b(u.set(e,t.target.value))}})})]})}))]}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"submitButton",type:"submit",value:"Save"})]})}function $t(){var e,t=Object(j.h)().id,n=r.a.useState(),a=Object(O.a)(n,2),c=a[0],i=a[1],s=r.a.useState(),o=Object(O.a)(s,2),l=o[0],d=o[1];return r.a.useEffect((function(){p.firestore().collection("trips").doc(t).get().then((function(e){console.log(e),e.exists&&(i(e.data()),d(e.id))}))}),[]),e=void 0!==c&&null!==c?Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:c.name}),Object(m.jsx)(Vt,{trip:c,docID:l})]}):Object(m.jsx)("h1",{children:"Trip not found!"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(Fe,{}),e,Object(m.jsx)(T,{})]})}var Xt=n(180).uuid,Qt=Object(o.a)((function(e){return{root:{marginTop:80}}}));function _t(e){var t=Qt(),n=Object(j.g)(),r=p.firestore(),c=Object(a.useState)(),i=Object(O.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(),d=Object(O.a)(l,2),u=d[0],b=d[1],h=Object(a.useState)(new Map),x=Object(O.a)(h,2),f=x[0],v=(x[1],function(e,t){f.delete(e),f.set(e,t)});return Object(m.jsxs)("form",{onSubmit:function(e){!function(e){if(e.preventDefault(),void 0===s||""===s||void 0===u||""===u||void 0===f||0===f.length)alert("Please fill in all input fields!");else{var t=Xt();console.log(f),r.collection("fares").add({id:t,to:s,from:u,prices:Object.fromEntries(f),date:new Date}).then((function(e){return n.push("/fares")})).catch((function(e){return alert("An error occurred!")}))}}(e)},className:t.root,children:[Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"From"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"from",type:"text",value:u,required:!0,onChange:function(e){return b(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"To"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"to",type:"text",value:s,required:!0,onChange:function(e){return o(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Fares"}),Object(m.jsx)("br",{}),Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Currency"}),Object(m.jsx)("th",{children:"Price"})]})}),Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"USD"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{name:"to",type:"text",onChange:function(e){return v("USD",e.target.value)}})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"ZWL"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{name:"to",type:"text",onChange:function(e){return v("ZWL",e.target.value)}})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"ZAR"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{name:"to",type:"text",onChange:function(e){return v("ZAR",e.target.value)}})})]})]})]}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"submitButton",type:"submit",value:"Save"})]})}function en(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Fe,{}),Object(m.jsx)(_t,{}),Object(m.jsx)(T,{})]})}var tn=n(19),nn=n(21),an=n(32),rn=n(33),cn=n(61),sn=n(34),on=[{route:"Bulawayo",reservations:30},{route:"Harare",reservations:34},{route:"Chegutu",reservations:11},{route:"Victoria",reservations:39},{route:"Hwange",reservations:13},{route:"Kwekwe",reservations:5},{route:"Chiredzi",reservations:13},{route:"Kadoma",reservations:9},{route:"Johannesburg",reservations:40},{route:"Mutare",reservations:22}],ln=function(e){Object(an.a)(n,e);var t=Object(rn.a)(n);function n(e){var a;return Object(tn.a)(this,n),(a=t.call(this,e)).state={data:on},a}return Object(nn.a)(n,[{key:"render",value:function(){var e=this.state.data;return Object(m.jsx)(st.a,{style:{backgroundColor:"#003c6c"},children:Object(m.jsxs)(cn.c,{data:e,rotated:!0,children:[Object(m.jsx)(cn.a,{}),Object(m.jsx)(cn.f,{max:7}),Object(m.jsx)(cn.b,{valueField:"reservations",argumentField:"route"}),Object(m.jsx)(cn.d,{style:{backgroundColor:"white"},text:"Reservation Activity"}),Object(m.jsx)(sn.a,{})]})})}}]),n}(a.PureComponent),dn=[{route:"Bulawayo",reservations:30},{route:"Harare",reservations:34},{route:"Kadoma",reservations:9},{route:"Victoria",reservations:39},{route:"Hwange",reservations:13},{route:"Kwekwe",reservations:5},{route:"Mutare",reservations:22},{route:"Chiredzi",reservations:13},{route:"Chegutu",reservations:11},{route:"Johannesburg",reservations:40}],jn=function(e){Object(an.a)(n,e);var t=Object(rn.a)(n);function n(e){var a;return Object(tn.a)(this,n),(a=t.call(this,e)).state={data:dn},a}return Object(nn.a)(n,[{key:"render",value:function(){var e=this.state.data;return Object(m.jsx)(st.a,{style:{backgroundColor:"#003c6c"},children:Object(m.jsxs)(cn.c,{data:e,children:[Object(m.jsx)(cn.a,{}),Object(m.jsx)(cn.f,{}),Object(m.jsx)(cn.b,{valueField:"reservations",argumentField:"route"}),Object(m.jsx)(cn.d,{style:{backgroundColor:"white"},text:"Booking Reservations Activity"}),Object(m.jsx)(sn.f,{}),Object(m.jsx)(cn.e,{})]})})}}]),n}(a.PureComponent),un=Object(o.a)((function(e){return{root:{marginTop:80},drawerHeader:Object(s.a)(Object(s.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"})}}));function bn(){var e=un();return Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)("h2",{style:{fontFamily:"Roboto"},children:"Infographic Data"}),Object(m.jsx)(ln,{}),Object(m.jsx)("hr",{}),Object(m.jsx)(jn,{})]})}function hn(){return Object(m.jsxs)($e.a,{children:[Object(m.jsx)(Fe,{}),Object(m.jsx)(bn,{}),Object(m.jsx)(T,{})]})}n(332);var On=n(23),xn=n(161);function pn(){var e=a.useState([]),t=Object(O.a)(e,2),n=t[0],r=t[1],c=a.useState([]),i=Object(O.a)(c,2),s=i[0],o=i[1];a.useEffect((function(){(function(){var e=Object(F.a)(P.a.mark((function e(){var t,n,a,c,i,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=x.a.firestore(),n=[],a=6;a>=0;a--)c=(new pt.a).subtract(a,"days"),n.push(c.format("ddd")),(i=new Date).setDate(i.getDate()-a-1),(s=new Date).setDate(s.getDate()-a),t.collection("reservations").where("BookingTime",">",i).where("BookingTime","<",s).get().then((function(e){r((function(t){return[].concat(Object(On.a)(t),[e.size])}))}));o(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var l={labels:s,datasets:[{label:"No. of reservations",fill:!0,backgroundColor:"#b71c1c",borderColor:"#b71c1c",data:n,borderWidth:1,pointRadius:0}]};return Object(m.jsx)(xn.a,{height:200,data:l,style:{backgroundColor:"#003c6c"},options:{responsive:!0,title:{display:!0,text:"Activity for the past 7 days",fontSize:17,fontColor:"#5f0937",padding:10},legend:{display:!1,position:"right"},scales:{yAxes:[{ticks:{fontColor:"white",beginAtZero:!0,stepSize:1}}],xAxes:[{ticks:{fontColor:"white"}}]}}})}function mn(){var e=r.a.useState([]),t=Object(O.a)(e,2),n=t[0],a=t[1],c=r.a.useState([]),i=Object(O.a)(c,2),s=i[0],o=i[1];r.a.useEffect((function(){(function(){var e=Object(F.a)(P.a.mark((function e(){var t,n,r,c,i,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=x.a.firestore(),n=[],r=6;r>=0;r--)c=(new pt.a).subtract(r,"days"),n.push(c.format("ddd")),(i=new Date).setDate(i.getDate()-r-1),(s=new Date).setDate(s.getDate()-r),t.collection("reservations").where("BookingTime",">",i).where("BookingTime","<",s).get().then((function(e){a((function(t){return[].concat(Object(On.a)(t),[e.size])}))}));o(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var l={labels:s,datasets:[{label:"No. of seat reservations",fill:!0,backgroundColor:"#04e7ff",borderColor:"#04e7ff",data:n,borderWidth:1,pointRadius:0}]};return Object(m.jsx)(xn.a,{height:200,data:l,style:{backgroundColor:"#003c6c"},options:{responsive:!0,title:{display:!0,text:"Activity for the past 7 days",fontSize:17,fontColor:"white",padding:10},legend:{display:!1,position:"right"},scales:{yAxes:[{ticks:{fontColor:"white",beginAtZero:!0,stepSize:1}}],xAxes:[{ticks:{fontColor:"white"}}]}}})}var fn=Object(o.a)((function(e){return{root:{marginTop:80}}}));function vn(){var e=fn();return Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)("h2",{children:"Statistics"}),Object(m.jsx)(pn,{}),Object(m.jsx)("hr",{}),Object(m.jsx)(mn,{})]})}function gn(){return Object(m.jsxs)(l.a,{children:[Object(m.jsx)(Fe,{}),Object(m.jsx)(vn,{}),Object(m.jsx)(T,{})]})}var yn=Object(o.a)((function(e){return{root:{marginTop:80}}}));function wn(){var e=yn();return Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)("h2",{children:"Payments"}),Object(m.jsx)("p",{children:"Some payments data is coming here..."})]})}function Sn(){return Object(m.jsxs)(l.a,{children:[Object(m.jsx)(Fe,{}),Object(m.jsx)(wn,{}),Object(m.jsx)(T,{})]})}var kn=Object(o.a)((function(e){return{root:{height:400,width:"100%",marginTop:80},button:{marginBottom:"10px"}}})),Nn=[{field:"from",headerName:"FROM",width:130,sortable:!0},{field:"to",headerName:"TO",width:130,sortable:!0},{field:"prices",headerName:"PRICES",width:200,sortable:!0,valueGetter:function(e){return"$".concat(e.row.prices.USD,", ZAR").concat(e.row.prices.ZAR,", ZWL$").concat(e.row.prices.ZWL)}},{field:"date",headerName:"DATE",width:160,valueGetter:function(e){return"".concat(e.row.date.toDate())}}];function Cn(){var e=kn(),t=r.a.useState([]),n=Object(O.a)(t,2),a=n[0],c=n[1];return r.a.useState((function(){(function(){var e=Object(F.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.firestore(),e.next=3,t.collection("fares").get();case 3:n=e.sent,c(n.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)("h3",{style:{marginBottom:20},children:"Fares"}),Object(m.jsx)(be.a,{variant:"contained",color:"primary",href:"/fares/add",className:e.button,children:"Add Fare"}),Object(m.jsx)(Ae.a,{rows:a,columns:Nn})]})}function Tn(){return Object(m.jsxs)(l.a,{children:[Object(m.jsx)(Fe,{}),Object(m.jsx)(Cn,{}),Object(m.jsx)(T,{})]})}var Dn=Object(o.a)((function(e){return{root:{height:400,width:"100%",marginTop:80},button:{marginBottom:10}}}));var Pn=[{field:"trip",headerName:"TRIP",width:200,sortable:!0,valueGetter:function(e){return"".concat(e.row.from," to ").concat(e.row.to)}},{field:"from",headerName:"FROM",width:130,sortable:!0},{field:"to",headerName:"TO",width:130,sortable:!0},{field:"times",headerName:"TIMES",width:160},{field:"stops",headerName:"STOPS",width:200,valueGetter:function(e){return"".concat(function(e){if(void 0===e||null===e)return[];var t=new Map(Object.entries(e)),n=[];return t.forEach((function(e){n.push(e.name)})),n}(e.row.stops))}},{field:"date",headerName:"DATE",width:160,valueGetter:function(e){return"".concat(e.row.date.toDate())}},{field:"",headerName:"ACTION",width:160,valueGetter:function(e){return"".concat(e.row.Button)}}];function Mn(){var e=Dn(),t=r.a.useState([]),n=Object(O.a)(t,2),a=n[0],c=n[1];return r.a.useState((function(){(function(){var e=Object(F.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.firestore(),e.next=3,t.collection("trips").get();case 3:n=e.sent,c(n.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)("h3",{style:{marginBottom:20},children:"Trips"}),Object(m.jsx)(be.a,{variant:"contained",color:"primary",href:"/fares/add",className:e.button,children:"Add Fare"}),Object(m.jsx)(Ae.a,{rows:a,columns:Pn})]})}function Fn(){return Object(m.jsxs)(l.a,{children:[Object(m.jsx)(Fe,{}),Object(m.jsx)(Mn,{}),Object(m.jsx)(T,{})]})}var An=Object(u.a)({palette:{primary:{main:"#ff3d00",dark:"#002884",contrastText:"#fff",light:"#757ce8"},secondary:{light:"#ff7961",main:"#ff4569",dark:"#ba000d",contrastText:"#000"},body:{maxWidth:"100%",backgroundColor:"#34495E",fontFamily:"Roboto"}}}),Ln=Object(o.a)((function(e){return{root:Object(s.a)(Object(s.a)({fontSize:13,width:"100%"},e.mixins.toolbar),{},{justifyContent:"flex-end"})}}));var In=function(){var e=Ln();return Object(m.jsx)(y,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(j.d,{children:Object(m.jsx)(l.a,{children:Object(m.jsxs)(b.a,{theme:An,children:[Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)(w,{exact:!0,path:"/",component:hn}),Object(m.jsx)(w,{exact:!0,path:"/reservations",component:Ye}),Object(m.jsx)(w,{exact:!0,path:"/reservations/:id/add",component:Ge}),Object(m.jsx)(w,{exact:!0,path:"/trips",component:Tt}),Object(m.jsx)(w,{exact:!0,path:"/trips-grid",component:Fn}),Object(m.jsx)(w,{exact:!0,path:"/trips/add",component:It}),Object(m.jsx)(w,{exact:!0,path:"/trips/:id/stops",component:Zt}),Object(m.jsx)(w,{exact:!0,path:"/trips/:id/stops/add",component:$t}),Object(m.jsx)(w,{exact:!0,path:"/fares",component:Tn}),Object(m.jsx)(w,{exact:!0,path:"/fares/add",component:en}),Object(m.jsx)(w,{exact:!0,path:"/statistics",component:gn}),Object(m.jsx)(w,{exact:!0,path:"/payments",component:Sn}),Object(m.jsx)(w,{path:"/downloads/:id/:ticketID",component:function(e){return window.open("https://extracitywebhook.herokuapp.com/downloads/"+encodeURIComponent(e.match.params.ticketID)+"/"+encodeURIComponent(e.match.params.id),"_blank"),window.location.href="/reservations/"}})]}),Object(m.jsx)("div",{children:Object(m.jsx)(j.b,{exact:!0,path:"/login",component:Xe})})]})})})})})};i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(In,{})}),document.getElementById("root"))}},[[438,1,2]]]);
//# sourceMappingURL=main.a5ca4890.chunk.js.map