{"version":3,"sources":["firebase.config.js","contexts/AuthContext.jsx","PrivateRoute.jsx","components/layout/Footer.jsx","components/reservations/SearchTripForm.jsx","components/layout/Sidebar.jsx","components/reservations/DataGrid.jsx","pages/reservations/Data.jsx","components/reservations/ConfirmReservation.jsx","components/reservations/ReservationAdd.jsx","pages/reservations/AddReservation.jsx","components/accounts/Login.jsx","pages/accounts/login.jsx","components/trips/TripsTable.jsx","pages/trips/Trips.jsx","components/trips/MultipleTimeSelect.jsx","components/trips/TripCreateForm.jsx","pages/trips/AddTrip.jsx","components/trips/TripStopsTable.jsx","pages/trips/TripStops.jsx","components/trips/TripStopCreateForm.jsx","pages/trips/AddTripStop.jsx","components/fares/FareCreateForm.jsx","pages/fares/AddFare.jsx","components/home/StatsRotated.jsx","components/home/StatsTooltip.jsx","components/home/Home.jsx","pages/home/homepage.jsx","components/statistics/StatsChart.jsx","components/statistics/ActivityChart.jsx","components/statistics/StatsData.jsx","pages/statistics/Statistics.jsx","components/payments/PaymentsData.jsx","pages/payments/Payments.jsx","components/fares/FaresGrid.jsx","pages/fares/Grid.jsx","components/trips/TripsGrid.jsx","pages/trips/TripGrid.jsx","App.jsx","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","AuthContext","React","createContext","useAuth","useContext","AuthProvider","children","useState","currentUser","setCurrentUser","loading","setLoading","useEffect","onAuthStateChanged","user","value","login","email","password","signInWithEmailAndPassword","logout","signOut","Provider","PrivateRoute","Component","component","rest","render","props","to","useStyles","makeStyles","theme","root","flexGrow","marginTop","marginBottom","backgroundColor","Footer","classes","AppBar","className","position","color","Container","maxWidth","Toolbar","Typography","variant","Date","getFullYear","moment","require","uuidv4","v4","display","flexWrap","margin","spacing","withoutLabel","textField","width","table","pricesContainer","padding","SearchTripForm","db","firestore","fare","setFare","seats","error","setSeats","history","useHistory","date","setDate","time","trip","route","paymentReference","currency","values","setValues","routes","setRoutes","a","collection","get","data","docs","map","doc","fetchRoutes","handleChange","prop","event","str","possibleTrips","target","undefined","where","limit","then","refs","size","alert","seatsAvailable","momentTravelDate","toDate","name","times","paidCount","d","setMinutes","getMinutes","pendingCount","num","submitButton","selectedTripInfo","Modal","FormControl","clsx","labelId","onChange","required","Array","from","Map","Object","entries","prices","keys","item","FormHelperText","id","Input","placeholder","pickUp","endAdornment","InputAdornment","aria-describedby","inputProps","Button","onClick","ticketId","dateString","y","toString","m","getMonth","getDate","length","formatDate","Math","floor","random","ticketID","arr","split","timestamp","seatNo","seat_letter","seat_number","generateRandomSeatNumber","refNo","replace","c","r","add","ID","TicketID","Currency","Amount","status","Trip","TravellingFrom","TravellingTo","BookingTime","TravelTime","platform","ref","push","button","key","counter","aria-labelledby","centered","class","Header","closeButton","Title","Body","console","log","newMap","forEach","v","k","amount","align","Intl","NumberFormat","style","format","disp","displayFares","drawerWidth","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","easeOut","enteringScreen","menuButton","marginRight","hide","drawer","flexShrink","drawerPaper","drawerHeader","alignItems","mixins","toolbar","justifyContent","content","contentShift","LogoutButton","profileButton","dropdownTitle","dropDownMenu","ListItemLink","ListItem","Sidebar","modalShow","setModalShow","useTheme","open","setOpen","setError","anchorEl","setAnchorEl","Alert","CssBaseline","IconButton","aria-label","edge","noWrap","aria-controls","aria-haspopup","currentTarget","endIcon","keepMounted","Boolean","onClose","MenuItem","Link","href","textDecoration","Drawer","anchor","paper","direction","Divider","List","ListItemIcon","ListItemText","primary","show","onHide","height","filterBox","headCells","field","headerName","description","sortable","valueGetter","params","row","firstName","lastName","DataTable","reservations","setReservations","search","fetchReservations","rts","property","queryRef","min","setDays","getDays","max","query","empty","Grid","container","justify","e","rows","columns","Data","control","fullWidth","handleSubmit","formatter","reservation","lg","xs","firstname","lastname","phoneNumber","paymentMethod","ReservationAdd","useParams","setReservation","exists","input","type","update","fullname","Email","PhoneNumber","PaymentMethod","encodeURIComponent","catch","AddReservation","Login","emailRef","useRef","passwordRef","preventDefault","current","Card","Form","onSubmit","Group","Label","Control","disabled","minHeight","descendingComparator","b","orderBy","getComparator","order","stableSort","array","comparator","stabilizedThis","el","index","sort","numeric","disablePadding","label","EnhancedTableHead","onSelectAllClick","numSelected","rowCount","onRequestSort","TableHead","TableRow","TableCell","Checkbox","indeterminate","checked","headCell","sortDirection","TableSortLabel","active","visuallyHidden","useToolbarStyles","paddingLeft","paddingRight","highlight","palette","secondary","main","lighten","light","text","dark","title","flex","EnhancedTableToolbar","Tooltip","minWidth","border","clip","overflow","top","TripsTable","setOrder","setOrderBy","selected","setSelected","page","setPage","dense","setDense","rowsPerPage","setRowsPerPage","trips","setTrips","fetchTrips","emptyRows","Paper","TableContainer","Table","newSelecteds","n","TableBody","slice","tripRef","isItemSelected","indexOf","link","hover","selectedIndex","newSelected","concat","handleClick","role","aria-checked","tabIndex","scope","join","displayStops","stops","colSpan","TablePagination","rowsPerPageOptions","count","onChangePage","newPage","onChangeRowsPerPage","parseInt","FormControlLabel","Switch","Trips","MultipleTimeSelect","options","x","setTimes","labelledBy","uuid","TripCreateForm","setName","setTo","setFrom","t","AddTrip","addLink","TripStopsTable","stop","displayTimes","TripStops","setTrip","TripStopCreateForm","fromEntries","to_to_stops","from_to_stops","stops_to_stops","docID","delete","set","AddTripStop","setDocID","FareCreateForm","updatePrices","AddFare","StatsRotated","state","chartData","this","rotated","valueField","argumentField","StatsTooltip","Home","fontFamily","Homepage","StatsChart","activityData","setActivityData","labels","setLabels","dates","minDate","subtract","snapshot","fetchStats","datasets","fill","borderColor","borderWidth","pointRadius","responsive","fontSize","fontColor","legend","scales","yAxes","ticks","beginAtZero","stepSize","xAxes","ActivityChart","StatsData","Statistics","PaymentsData","Payments","USD","ZAR","ZWL","FaresGrid","fares","setFares","fetchFares","TripsGrid","TripGrid","createMuiTheme","contrastText","body","App","ThemeProvider","exact","path","window","match","location","ReactDOM","StrictMode","document","getElementById"],"mappings":"sTAgBAA,IAASC,cAZc,CACrBC,OAAQC,0CACRC,WAAYD,mCACZE,YAAaF,0CACbG,UAAWH,mBACXI,cAAeJ,+BACfK,kBAAmBL,gBACnBM,MAAON,+CAOMH,QAAf,E,OCfMU,EAAOV,EAASU,OAEhBC,EAAcC,IAAMC,gBAEnB,SAASC,IACd,OAAOF,IAAMG,WAAWJ,GAGnB,SAASK,EAAT,GAAqC,IAAbC,EAAY,EAAZA,SAC7B,EAAsCL,IAAMM,WAA5C,mBAAOC,EAAP,KAAoBC,EAApB,KACA,EAA8BR,IAAMM,UAAS,GAA7C,mBAAOG,EAAP,KAAgBC,EAAhB,KAcAV,IAAMW,WAAU,WAMd,OALoBb,EAAKc,oBAAmB,SAACC,GAC3CL,EAAeK,GACfH,GAAW,QAIZ,IAEH,IAAMI,EAAQ,CACZP,cAEAQ,MApBF,SAAeC,EAAOC,GACpB,OAAOnB,EAAKoB,2BAA2BF,EAAOC,IAoB9CE,OAjBF,WACE,OAAOrB,EAAKsB,YAmBd,OACE,cAACrB,EAAYsB,SAAb,CAAsBP,MAAOA,EAA7B,UACIL,GAAWJ,ICzCJ,SAASiB,EAAT,GAA0D,IAAvBC,EAAsB,EAAjCC,UAAyBC,EAAQ,6BAC5DlB,EAAgBL,IAAhBK,YAER,OACI,cAAC,IAAD,2BACQkB,GADR,IAEIC,OAAQ,SAACC,GACL,OAAOpB,EACH,cAACgB,EAAD,eAAeI,IAEf,cAAC,IAAD,CAAUC,GAAG,e,8BCP3BC,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,KAAM,CACFC,SAAU,EACVC,UAAW,QACXC,aAAc,OACdC,gBAAiB,eAIV,SAASC,IACpB,IAAMC,EAAUT,IAEhB,OACI,cAACU,EAAA,EAAD,CAAQC,UAAWF,EAAQN,KAAMS,SAAS,WAAWC,MAAM,UAA3D,SACI,cAACC,EAAA,EAAD,CAAWC,SAAS,KAApB,SACI,cAACC,EAAA,EAAD,UACI,eAACC,EAAA,EAAD,CAAYC,QAAQ,QAAQL,MAAM,UAAlC,sCAC6B,IAAIM,MAAOC,uB,0cCZxDC,GAASC,EAAQ,IACTC,GAAWD,EAAQ,KAAvBE,GAEFxB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJsB,QAAS,OACTC,SAAU,QAEZC,OAAQ,CACNA,OAAQzB,EAAM0B,QAAQ,IAExBC,aAAc,CACZxB,UAAWH,EAAM0B,QAAQ,IAE3BE,UAAW,CACTC,MAAO,QAGTC,MAAO,CACLD,MAAO,QAETE,gBAAiB,CACfC,QAAShC,EAAM0B,QAAQ,QAKZ,SAASO,GAAerC,GACrC,IAAMsC,EAAK7E,EAAS8E,YACd5B,EAAUT,KAChB,EAAwB7B,IAAMM,SAAS,MAAvC,mBAAO6D,EAAP,KAAaC,EAAb,KACA,EAA0BpE,IAAMM,SAAS,CACvC+D,MAAO,KAAMC,MAAO,KADtB,mBAAOD,EAAP,KAAcE,EAAd,KAGMC,EAAUC,cAChB,EAAwBzE,IAAMM,SAAS,IAAI0C,MAA3C,mBAAO0B,EAAP,KAAaC,EAAb,KACA,EAA4B3E,IAAMM,SAAS,CACzCsE,KAAM,KACNC,KAAM,KACNC,MAAO,KACPC,iBAAkB,KAClBC,SAAU,OALZ,mBAAOC,EAAP,KAAeC,EAAf,KAOA,EAA4BlF,IAAMM,SAAS,IAA3C,mBAAO6E,EAAP,KAAeC,EAAf,KAEApF,IAAMW,WAAU,YACG,uCAAG,4BAAA0E,EAAA,sEACCpB,EAAGqB,WAAW,SAASC,MADxB,OACZC,EADY,OAElBJ,EAAUI,EAAKC,KAAKC,KAAI,SAACC,GAAD,OAAUA,EAAIH,WAFpB,2CAAH,qDAIjBI,KAEC,IAEH,IAAMC,EAAe,SAACC,GAAD,OAAU,SAACC,GAC9B,GAAa,SAATD,EAAiB,CAAC,IAAD,EAEfE,EAAG,UAAGb,EAAOF,EAAOH,cAAjB,aAAG,EAAsBmB,cAAcF,EAAMG,OAAOpF,YAE/CqF,IAARH,EACF/B,EACGqB,WAAW,SACXc,MAAM,gBAAiB,iBAAkBJ,GACzCK,MAAM,GACNd,MAAMe,MACL,SAACC,GACmB,IAAdA,EAAKC,MACPpC,EAAQ,MACRc,EAAU,2BAAKD,GAAN,kBAAea,EAAO,QAC/BW,MAAM,qGAGNvB,EAAU,2BAAKD,GAAN,kBAAea,EAAOC,EAAMG,OAAOpF,SAC5CsD,EAAQmC,EAAKd,KAAK,GAAGD,aAM7BpB,EAAQ,MACRc,EAAU,2BAAKD,GAAN,kBAAea,EAAO,QAC/BW,MAAM,yGAGLvB,EAAU,2BAAKD,GAAN,kBAAea,EAAOC,EAAMG,OAAOpF,SAEpC,SAATgF,GAAiBY,EAAeX,EAAMG,OAAOpF,SAwC7C4F,EAAiB,SAAC9B,GACtB,IAAI+B,EAAmBzD,GAAOwB,EAAM,cAAckC,SAC9C/B,EAAOM,EAAOF,EAAOH,OAEzBb,EACGqB,WAAW,gBACXc,MAAM,OAAQ,KAAMvB,EAAKgC,MACzBT,MAAM,SAAU,KAAM,QACtBA,MAAM,OAAQ,KAAMO,GACpBP,MAAM,aAAc,KAAMvB,EAAKiC,MAAMlC,IACrCW,MAAMe,MAAK,SAACC,GACX,IAAIQ,EAAYR,EAAKC,KAEjBQ,EAAI,IAAIhE,KACZgE,EAAEC,WAAWD,EAAEE,aAAe,GAE9BjD,EACGqB,WAAW,gBACXc,MAAM,OAAQ,KAAMjB,EAAOF,EAAOH,OAAO+B,MACzCT,MAAM,SAAU,KAAM,WACtBA,MAAM,OAAQ,KAAMO,GACpBP,MAAM,aAAc,KAAMjB,EAAOF,EAAOH,OAAOgC,MAAMlC,IACrDwB,MAAM,cAAe,KAAMY,GAC3BzB,MAAMe,MAAK,SAACC,GACX,IAAIY,EAAeZ,EAAKC,KAEpBY,EAAMvC,EAAKR,MAAQ0C,EAAYI,EAC/B7C,EAAQ,GAER8C,EAAM,IAEN9C,EADEO,EAAKR,QAAU0C,EACT,+DAGA,kFAIZxC,EAAS,CAAEF,MAAO+C,EAAK9C,MAAOA,WA+CpC+C,EAAe,KACfC,EAAmB,KAEvB,GAAqB,OAAjBrC,EAAOH,MAAgB,CAAC,IAAD,UAEC,EAD1B,GAAoB,OAAhBG,EAAOJ,MAAiC,OAAhBI,EAAOL,MAA0B,KAATF,GAAwB,OAATP,EACjE,GAAIE,EAAK,MAAY,EACnBgD,EAAgB,eAACE,GAAA,EAAMlF,OAAP,WACd,8BAAG,sCAAH,yIACA,eAACmF,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACE,yBACE+D,QAAQ,KACR5G,MAAOmE,EAAOD,SACd2C,SAAU9B,EAAa,YACvB+B,UAAQ,EAJV,UAME,wBAAQ9G,MAAM,GAAd,wBACE+G,MAAMC,KAAM,IAAIC,IAAIC,OAAOC,QAAP,iBAAe9D,QAAf,IAAeA,OAAf,EAAeA,EAAM+D,cAArB,QAA+B,KAAMC,QAASzC,KAAI,SAAC0C,GACvE,OAAO,wBAAQtH,MAAOsH,EAAf,SAAsBA,UAGjC,cAACC,GAAA,EAAD,CAAgBC,GAAG,gCAAnB,yBAEF,eAACd,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACE,cAAC4E,GAAA,EAAD,CACED,GAAG,uCACHE,YAAY,oBACZ1H,MAAOmE,EAAOwD,OACdb,UAAQ,EACRD,SAAU9B,EAAa,oBACvB6C,aAAc,cAACC,GAAA,EAAD,CAAgBlG,SAAS,QACvCmG,mBAAiB,yCACjBC,WAAY,CACV,aAAc,uBAIlB,cAACR,GAAA,EAAD,CAAgBC,GAAG,yCAAnB,kCAEF,uBACA,cAACQ,GAAA,EAAD,CACEC,QAlKY,WACpB,GAAwB,OAApB9D,EAAOD,UAAqC,OAAhBC,EAAOJ,MAAiC,OAAhBI,EAAOL,MAA0B,KAATF,GAAgC,OAAjBO,EAAOH,OAA2B,OAATX,GAA6C,OAA5Bc,EAAOF,iBAA2B0B,MAAM,wCAC5K,CAEH,IAAM6B,EAAKlF,KACP4F,EAgQV,WAGE,IACIC,EASN,SAAoBzD,GAClB,IACI0D,EAAI1D,EAAKvC,cAAckG,WACvBC,GAAK5D,EAAK6D,WAAa,GAAGF,WAC1BnC,EAAIxB,EAAK8D,UAAUH,WAMvB,OAJa,IAAbnC,EAAEuC,SAAiBvC,EAAI,IAAMA,GAChB,IAAboC,EAAEG,SAAiBH,EAAI,IAAMA,GAEvBF,EAAIE,EAAIpC,EAlBGwC,CADP,IAAIxG,MAEVoE,GAAOqC,KAAKC,MAAsB,IAAhBD,KAAKE,UAAmB,GAAGR,WAIjD,OAHe,IAAf/B,EAAImC,SAAiBnC,EAAM,IAAMA,GAClB,IAAfA,EAAImC,SAAiBnC,EAAM,IAAMA,GAE3B,OAAN,OAAc6B,EAAd,YAA4B7B,GAzQTwC,GACXC,EAAM1E,EAAOF,EAAOH,OAAOmB,cAAchB,EAAOJ,MAAMiF,MAAM,KAC5DnD,EAAmBzD,GAAOwB,EAAM,cAAckC,SAC5CmD,EAAY,IAAI/G,KAClBgH,EAiSV,WAEE,IA6BIC,EA7BU,CACZ,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAGwBR,KAAKC,MAAsB,GAAhBD,KAAKE,UAAeR,YAErDe,GAAeT,KAAKC,MAAsB,IAAhBD,KAAKE,UAAkB,GAAGR,WAGxD,OAFuB,IAAvBe,EAAYX,SAAiBW,EAAc,IAAMA,GAE1CD,EAAcC,EArUJC,GACTC,EAsRD,uCAAuCC,QAC5C,SACA,SAAUC,GACR,IAAIC,EAAqB,GAAhBd,KAAKE,SAAiB,EAE/B,OADY,MAANW,EAAYC,EAAS,EAAJA,EAAW,GACzBpB,SAAS,OAxRlBlF,EACGqB,WAAW,gBACXkF,IAAI,CACHC,GAAInC,EACJvD,iBAAkBE,EAAOF,iBACzB2F,SAAU1B,EACV2B,SAAU1F,EAAOD,SACjB4F,OAAQzG,EAAK+D,OAAOjD,EAAOD,UAC3B6F,OAAQ,OACRC,KAAM3F,EAAOF,EAAOH,OAAO+B,KAC3BkE,eAAgBlB,EAAI,GACpBmB,aAAcnB,EAAI,GAClBoB,YAAalB,EACbmB,WAAY/F,EAAOF,EAAOH,OAAOgC,MAAM7B,EAAOL,MAC9C5B,KAAM2D,EACNwE,SAjBW,kBAkBXnB,OAAQA,EACRI,MAAOA,IAER9D,MAAK,SAAC8E,GAAD,OAAS5G,EAAQ6G,KAAK,iBAAmBD,EAAI9C,GAAK,aAmIpDvF,QAAQ,YACRL,MAAM,UACNF,UAAWF,EAAQgJ,OAJrB,4BAUqB,KAAnBjH,EAAK,OAAkBoC,MAAMpC,EAAK,OAI1CiD,EACE,gCACE,eAACE,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACE,yBACE+D,QAAQ,KACR5G,MAAOmE,EAAOJ,KACd8C,SAAU9B,EAAa,QACvB+B,UAAQ,EAJV,UAME,wBAAQ9G,MAAM,GAAd,wBANF,UAOGqE,EAAOF,EAAOH,cAPjB,iBAOG,EAAsBmB,qBAPzB,aAOG,EAAqCP,KAAI,SAAC0C,EAAMmD,GAC/C,OAAO,wBAAQzK,MAAOyK,EAAf,SAAqBnD,EAAKiC,QAAQ,IAAK,gBAGlD,cAAChC,GAAA,EAAD,CAAgBC,GAAG,4BAAnB,sBAEF,eAACd,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACE,yBACE+D,QAAQ,KACR5G,MAAOmE,EAAOL,KACd+C,SAAU9B,EAAa,QACvB+B,UAAQ,EAJV,UAME,wBAAQ9G,MAAM,GAAd,wBANF,UAOGqE,EAAOF,EAAOH,cAPjB,iBAOG,EAAsBgC,aAPzB,aAOG,EAA6BpB,KAAI,SAAC0C,EAAMoD,GACvC,OAAO,wBAAQ1K,MAAO0K,EAAf,SAAyBpD,UAGpC,eAACC,GAAA,EAAD,CAAgBC,GAAG,4BAAnB,wCAAiEnD,EAAOF,EAAOH,cAA/E,aAAiE,EAAsBgD,KAAvF,iBAMR,OACE,eAACP,GAAA,EAAD,2BACM5F,GADN,IAEE8J,kBAAgB,gCAChBC,UAAQ,EACRC,MAAM,QAJR,UAME,cAACpE,GAAA,EAAMqE,OAAP,CAAcC,aAAW,EAAzB,SACE,cAACtE,GAAA,EAAMuE,MAAP,CAAaxD,GAAG,gCAAhB,iCAIF,cAACf,GAAA,EAAMwE,KAAP,UACE,sBAAKvJ,UAAWF,EAAQN,KAAxB,UACE,gCACE,eAACwF,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACE,yBACE+D,QAAQ,KACR5G,MAAOmE,EAAOH,MACd6C,SAAU9B,EAAa,SACvB+B,UAAQ,EAJV,UAME,wBAAQ9G,MAAM,GAAd,wBACCqE,EAAOO,KAAI,SAAC0C,EAAMoD,GACjB,OAAO,wBAAQ1K,MAAO0K,EAAf,SAAyBpD,EAAKvB,aAGzC,cAACwB,GAAA,EAAD,CAAgBC,GAAG,4BAAnB,sBAEF,eAACd,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACE,cAAC,KAAD,CACEgE,SAAUhD,EACV7D,MAAO4D,IAET,cAAC2D,GAAA,EAAD,CAAgBC,GAAG,4BAAnB,kCAIFhB,EAtKW,WAuBnB,GAAa,OAATnD,EAAe,CACjB6H,QAAQC,IAAI9H,GACZ,IAAI0F,EAbO,WACX,QAAoB1D,IAAhBhC,EAAK+D,OAAsB,MAAO,GACtC,IAAIgE,EAAS,IAAInE,IAAIC,OAAOC,QAAQ9D,EAAK+D,SACrC2B,EAAM,GAKV,OAHAqC,EAAOC,SAAQ,SAACC,EAAGC,GAhBJ,IAACrH,EAAUsH,EAiBxBzC,EAAIwB,KAAM,+BAAI,6BAAKgB,IAAO,oBAAIE,MAAM,QAAV,UAjBZvH,EAiBwCqH,EAjB9BC,EAiBiCF,OAhB5CjG,IAAXmG,EAA8B,mCAElB,IAAIE,KAAKC,aAAa,QAAS,CAC7CC,MAAO,WACP1H,SAAUA,IAGK2H,OAAOL,GAAQjC,QAAQrF,EAAU,IAAIqF,QAAQ,IAAK,cAW5DR,EAKG+C,GACV,OACE,sBAAKpK,UAAWiF,YAAKnF,EAAQwB,iBAA7B,UACE,wCACA,uBAAOtB,UAAWiF,YAAKnF,EAAQuB,OAA/B,SACE,gCAEIgG,EAAInE,KAAI,SAAC0C,GAAD,OAAUA,aAyItByE,QAKJxF,M,yBC7TFyF,GAAc,IAEdjL,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,KAAM,CACFsB,QAAS,QAGbyJ,OAAQ,CACJC,WAAYjL,EAAMkL,YAAYC,OAAO,CAAC,SAAU,SAAU,CACtDC,OAAQpL,EAAMkL,YAAYE,OAAOC,MACjCC,SAAUtL,EAAMkL,YAAYI,SAASC,gBAEzClL,gBAAiB,WAErBmL,YAAa,CACT3J,MAAM,eAAD,OAAiBkJ,GAAjB,OACLU,WAAYV,GACZE,WAAYjL,EAAMkL,YAAYC,OAAO,CAAC,SAAU,SAAU,CACtDC,OAAQpL,EAAMkL,YAAYE,OAAOM,QACjCJ,SAAUtL,EAAMkL,YAAYI,SAASK,kBAG7CC,WAAY,CACRC,YAAa7L,EAAM0B,QAAQ,IAE/BoK,KAAM,CACFvK,QAAS,QAEbwK,OAAQ,CACJlK,MAAOkJ,GACPiB,WAAY,GAGhBC,YAAa,CACTpK,MAAOkJ,GACP1K,gBAAiB,UACjBM,MAAO,WAEXuL,aAAa,yBACT3K,QAAS,OACT4K,WAAY,SACZnK,QAAShC,EAAM0B,QAAQ,EAAG,IAEvB1B,EAAMoM,OAAOC,SALR,IAMRC,eAAgB,aAEpBC,QAAS,CACLrM,SAAU,EACV8B,QAAShC,EAAM0B,QAAQ,GACvBuJ,WAAYjL,EAAMkL,YAAYC,OAAO,SAAU,CAC3CC,OAAQpL,EAAMkL,YAAYE,OAAOC,MACjCC,SAAUtL,EAAMkL,YAAYI,SAASC,gBAEzCE,YAAY,KAEhBe,aAAc,CACVvB,WAAYjL,EAAMkL,YAAYC,OAAO,SAAU,CAC3CC,OAAQpL,EAAMkL,YAAYE,OAAOM,QACjCJ,SAAUtL,EAAMkL,YAAYI,SAASK,iBAEzCF,WAAY,GAEhBgB,aAAc,CACV9L,MAAO,UACPN,gBAAiB,WAErBqM,cAAe,CACXrM,gBAAiB,UACjBM,MAAO,WAEXgM,cAAe,CACXhM,MAAO,WAGXiM,aAAc,CACV,mBAAoB,CAChBvM,gBAAiB,UACjBM,MAAO,aAKnB,SAASkM,GAAajN,GAClB,OAAO,cAACkN,EAAA,EAAD,aAAUvD,QAAM,EAAC9J,UAAU,KAAQG,IAG/B,SAASmN,KACpB,MAAkC9O,IAAMM,UAAS,GAAjD,mBAAOyO,EAAP,KAAkBC,EAAlB,KACM1M,EAAUT,KACVE,EAAQkN,cACd,EAAwBjP,IAAMM,UAAS,GAAvC,mBAAO4O,EAAP,KAAaC,EAAb,KACA,EAA0BnP,IAAMM,WAAhC,mBAAOgE,EAAP,KAAc8K,EAAd,KACA,EAAgClP,IAAxBK,EAAR,EAAQA,YAAaY,EAArB,EAAqBA,OACfqD,EAAUC,cAChB,EAAgCzE,IAAMM,SAAS,MAA/C,mBAAO+O,EAAP,KAAiBC,EAAjB,KAR8B,4CA0B9B,sBAAAjK,EAAA,6DACI+J,EAAS,IADb,kBAIcjO,IAJd,OAKQqD,EAAQ6G,KAAK,UALrB,gDAOQ+D,EAAS,qBAPjB,0DA1B8B,sBAqC9B,OACI,sBAAK5M,UAAWF,EAAQN,KAAxB,UACKsC,GAAS,cAACiL,GAAA,EAAD,CAAOxM,QAAQ,SAAf,SAAyBuB,IACnC,cAACkL,EAAA,EAAD,IACA,cAACjN,EAAA,EAAD,CACIE,SAAS,QACTD,UAAWiF,YAAKnF,EAAQyK,OAAT,eACVzK,EAAQiL,YAAc2B,IAH/B,SAMI,eAACrM,EAAA,EAAD,WACI,cAAC4M,EAAA,EAAD,CACI/M,MAAM,UACNgN,aAAW,cACX3G,QAzCK,WACrBoG,GAAQ,IAyCQQ,KAAK,QACLnN,UAAWiF,YAAKnF,EAAQqL,WAAYuB,GAAQ5M,EAAQuL,MALxD,SAOI,cAAC,IAAD,MAEJ,cAAC/K,EAAA,EAAD,CAAYC,QAAQ,KAAK6M,QAAM,EAA/B,iCAGA,cAAC9G,GAAA,EAAD,CACI+G,gBAAc,cACdC,gBAAc,OACd/G,QA7CA,SAAChD,GACjBuJ,EAAYvJ,EAAMgK,gBA6CFvN,UAAWF,EAAQoM,cACnBsB,QAAS,cAAC,KAAD,IALb,SAOKzP,EAAYS,QAEjB,eAAC,KAAD,CACIsH,GAAG,cACH+G,SAAUA,EACVY,aAAW,EACXf,KAAMgB,QAAQb,GACdc,QApDA,WAChBb,EAAY,OAoDI9M,UAAWF,EAAQqM,aANvB,UAQI,cAACyB,GAAA,EAAD,CACI5O,UAAW6O,KACXC,KAAK,kBACL5D,MAAO,CAAEhK,MAAO,QAAS6N,eAAgB,QAH7C,4BAOA,cAACH,GAAA,EAAD,CACI5O,UAAW6O,KACXtH,QAtFM,2CAuFNuH,KAAK,UACL5D,MAAO,CAAEhK,MAAO,MAAO6N,eAAgB,QAJ3C,4BAWZ,eAACC,EAAA,EAAD,CACIhO,UAAWF,EAAQwL,OACnB/K,QAAQ,aACR0N,OAAO,OACPvB,KAAMA,EACN5M,QAAS,CACLoO,MAAOpO,EAAQ0L,aANvB,UASI,qBAAKxL,UAAWF,EAAQ2L,aAAxB,SACI,cAACwB,EAAA,EAAD,CAAY1G,QA3FF,WACtBoG,GAAQ,IA0FI,SACyB,QAApBpN,EAAM4O,UAAsB,cAAC,IAAD,IAAsB,cAAC,IAAD,QAG3D,cAACC,EAAA,EAAD,IACA,eAACC,EAAA,EAAD,WACI,cAAChC,EAAA,EAAD,UACI,eAAC/F,GAAA,EAAD,CAAQ/F,QAAQ,YAAYL,MAAM,UAAUqG,QAAS,kBAAMiG,GAAa,IAAxE,UACI,cAAC,KAAD,IADJ,yBAKJ,eAACJ,GAAD,CAAc0B,KAAK,IAAnB,UACI,cAACQ,EAAA,EAAD,UACI,cAAC,IAAD,CAAUpO,MAAM,cAEpB,cAACqO,EAAA,EAAD,CAAcC,QAAQ,YAE1B,cAACJ,EAAA,EAAD,IAEA,eAAChC,GAAD,CAAc0B,KAAK,gBAAnB,UACI,cAACQ,EAAA,EAAD,UACI,cAAC,IAAD,CAAapO,MAAM,cAEvB,cAACqO,EAAA,EAAD,CAAcC,QAAQ,oBAE1B,cAACJ,EAAA,EAAD,IAEA,cAACA,EAAA,EAAD,IAEA,eAAChC,GAAD,CAAc0B,KAAK,cAAnB,UACI,cAACQ,EAAA,EAAD,UACI,cAAC,KAAD,CAAgBpO,MAAM,cAE1B,cAACqO,EAAA,EAAD,CAAcC,QAAQ,kBAE1B,cAACJ,EAAA,EAAD,IAEA,eAAChC,GAAD,CAAc0B,KAAK,YAAnB,UACI,cAACQ,EAAA,EAAD,UACI,cAAC,KAAD,CAAoBpO,MAAM,cAE9B,cAACqO,EAAA,EAAD,CAAcC,QAAQ,gBAE1B,cAACJ,EAAA,EAAD,IAEA,eAAChC,GAAD,CAAc0B,KAAK,cAAnB,UACI,cAACQ,EAAA,EAAD,UACI,cAAC,KAAD,CAAYpO,MAAM,cAEtB,cAACqO,EAAA,EAAD,CAAcC,QAAQ,iBAE1B,cAACJ,EAAA,EAAD,IACA,eAAChC,GAAD,CAAc0B,KAAK,SAAnB,UACI,cAACQ,EAAA,EAAD,UACI,cAAC,KAAD,CAAmBpO,MAAM,cAE7B,cAACqO,EAAA,EAAD,CAAcC,QAAQ,kBAE1B,cAACJ,EAAA,EAAD,IACA,eAAChC,GAAD,CAAc0B,KAAK,SAAnB,UACI,cAACQ,EAAA,EAAD,UACI,cAAC,KAAD,CAAapO,MAAM,cAEvB,cAACqO,EAAA,EAAD,CAAcC,QAAQ,kBAE1B,cAACJ,EAAA,EAAD,OAEJ,cAAC5M,GAAD,CACIiN,KAAMlC,EACNmC,OAAQ,kBAAMlC,GAAa,Y,wBCjS3C9L,GAASC,EAAQ,IAEftB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,KAAM,CACFmP,OAAQ,IACRvN,MAAO,OACP1B,UAAW,IAEfoJ,OAAQ,CACJnJ,aAAc,QAElBiP,UAAW,CACP5N,OAAQzB,EAAM0B,QAAQ,QAIxB4N,GAAY,CACd,CACIC,MAAO,WACPC,WAAY,YACZC,YAAa,0BACbC,UAAU,EACV7N,MAAO,IACP8N,YAAa,SAACC,GAAD,gBACNA,EAAOC,IAAIC,UADL,aACmBF,EAAOC,IAAIE,YAE/C,CAAER,MAAO,cAAeC,WAAY,UAAW3N,MAAO,KACtD,CAAE0N,MAAO,OAAQC,WAAY,OAAQ3N,MAAO,KAC5C,CACI0N,MAAO,OAAQC,WAAY,OAAQ3N,MAAO,IAAK8N,YAAa,SAAAC,GAAM,gBAAOA,EAAOC,IAAI5O,KAAK4D,YAE7F,CAAE0K,MAAO,aAAcC,WAAY,OAAQ3N,MAAO,KAClD,CAAE0N,MAAO,SAAUC,WAAY,SAAU3N,MAAO,IAAK8N,YAAa,SAAAC,GAAM,gBAAOA,EAAOC,IAAIjH,SAAlB,YAA8BgH,EAAOC,IAAIhH,UACjH,CAAE0G,MAAO,WAAYC,WAAY,YAAa3N,MAAO,MAG1C,SAASmO,KAAa,IAAD,QAC1BzP,EAAUT,KAChB,EAAwC7B,IAAMM,SAAS,IAAvD,mBAAO0R,EAAP,KAAqBC,EAArB,KACA,EAA4BjS,IAAMM,SAAS,IAA3C,mBAAO6E,EAAP,KAAeC,EAAf,KACA,EAA4BpF,IAAMM,SAAS,CACvCwE,MAAO,EACPD,KAAM,EACND,KAAM,EACNkD,KAAM,GACNlG,GAAI,GACJsQ,OAAQ,KANZ,mBAAOjN,EAAP,KAAeC,EAAf,KAQMjB,EAAK7E,EAAS8E,YAEd2B,EAAe,SAACC,EAAMhF,GACxBoE,EAAU,2BAAKD,GAAN,kBAAea,EAAOhF,KAC/BqR,EAAkB,KAAMrM,EAAMhF,IAUlCd,IAAMM,UAAS,YACM,uCAAG,8BAAA+E,EAAA,sEACGpB,EAAGqB,WAAW,SAASC,MAD1B,OACVC,EADU,OAEZ4M,EAAM5M,EAAKC,KAAKC,KAAI,SAACC,GAAD,OAAUA,EAAIH,UACtCJ,EAAUgN,GACVD,EAAkBC,GAJF,2CAAH,qDAOjBxM,KACD,IAEH,IAAMuM,EAAiB,uCAAG,wEAAA9M,EAAA,sDAAOkF,EAAP,+BAAW,KAAM8H,EAAjB,+BAA4B,KAAMvR,EAAlC,+BAA0C,KAEhDsR,EAAN,OAAN7H,EAAkBpF,EACXoF,EAGPzC,EAAO7C,EAAO6C,KACdlG,EAAKqD,EAAOrD,GACZkD,EAAQG,EAAOH,MACfD,EAAOI,EAAOJ,KACdD,EAAOK,EAAOL,KAELK,EAAOiN,OAZE,KAcdG,EAdc,OAeb,OAfa,QAkBb,SAlBa,QAqBb,UArBa,QAwBb,SAxBa,QA2Bb,SA3Ba,QA8Bb,WA9Ba,gCAgBdzQ,EAAKd,EAhBS,oCAmBdgH,EAAOhH,EAnBO,oCAsBdgE,EAAQhE,EAtBM,oCAyBd+D,EAAO/D,EAzBO,oCA4Bd8D,EAAO9D,EA5BO,oCAgCLA,EAhCK,6BAmCdkL,QAAQC,IAAI,WAnCE,eAsChBzG,EAAOvB,EAAGqB,WAAW,gBACvBgN,EAAW9M,EAAKY,MAAM,SAAU,KAAM,QAE5B,KAAVtB,QAA+BqB,IAAfiM,EAAItN,KACpBwN,EAAWA,EAASlM,MAAM,OAAQ,KAAvB,UAA6BgM,EAAItN,UAAjC,aAA6B,EAAY+B,MACvC,KAAThC,QAAkDsB,IAAnCiM,EAAItN,GAAOmB,cAAcpB,KACpCgF,EAAMuI,EAAItN,GAAOmB,cAAcpB,GAAMiF,MAAM,KAC/CwI,EAAWA,EACNlM,MAAM,iBAAkB,KAAMyD,EAAI,IAClCzD,MAAM,eAAgB,KAAMyD,EAAI,KAG5B,KAATjF,QAA0CuB,IAA3BiM,EAAItN,GAAOgC,MAAMlC,KAAqB0N,EAAWA,EAASlM,MAAM,aAAc,KAA7B,UAAmCgM,EAAItN,UAAvC,aAAmC,EAAYgC,MAAMlC,MAE7HoH,QAAQC,IAAInE,EAAMlG,GACL,KAATkG,GAAwB,OAATA,QAA0B3B,IAAT2B,GAAsBA,IAASlG,GAC/DoK,QAAQC,IAAI,SACRsG,EAAMrP,GAAO4E,EAAM,cAAclB,UACjC4L,QAAQD,EAAIE,UAAY,IACxBC,EAAMxP,GAAO4E,EAAM,cAAclB,UACjC4L,QAAQE,EAAID,UAAY,GAE5BH,EAAWA,EAASlM,MAAM,OAAQ,IAAKmM,GAAKnM,MAAM,OAAQ,IAAKsM,KAGlD,KAAT5K,GAAwB,OAATA,QAA0B3B,IAAT2B,IAAoBwK,EAAWA,EAASlM,MAAM,OAAQ,KAAMlD,GAAO4E,EAAM,cAAclB,WAChH,KAAPhF,GAAoB,OAAPA,QAAsBuE,IAAPvE,IAAkB0Q,EAAWA,EAASlM,MAAM,OAAQ,KAAMlD,GAAOtB,EAAI,cAAcgF,YAhEjG,UAkEF0L,EAAS/M,MAlEP,WAkEhBoN,EAlEgB,OAmEtB3G,QAAQC,IAAI0G,EAAMnM,OACdmM,EAAMC,MApEY,wBAqElB5G,QAAQC,IAAI,0BACZgG,EAAgB,IAtEE,2BA0EtBA,EAAgBU,EAAMlN,KAAKC,KAAI,SAAAC,GAAG,kCAAUA,EAAIH,QAAd,IAAsB8C,GAAI3C,EAAI2C,SA1E1C,4CAAH,qDA6EvB,OACI,sBAAK9F,UAAWF,EAAQN,KAAxB,UACI,oBAAI0K,MAAO,CAAEvK,aAAc,IAA3B,qCAMA,uBACA,eAAC0Q,GAAA,EAAD,CAAMC,WAAS,EAACtQ,UAAWF,EAAQ8O,UAAW3N,QAAS,EAAvD,UACI,cAACoP,GAAA,EAAD,CAAMzK,MAAI,EAAV,SACI,cAACyK,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,OAAOtP,QAAS,EAAxC,SACI,eAAC+D,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACI,yBACI+D,QAAQ,KACR5G,MAAOmE,EAAOH,MACd6C,SAAU,SAACqL,GAAD,OAAOnN,EAAa,QAASmN,EAAE9M,OAAOpF,QAChD8G,UAAQ,EAJZ,UAMI,wBAAQ9G,MAAM,GAAd,iBANJ,OAOKqE,QAPL,IAOKA,OAPL,EAOKA,EAAQO,KAAI,SAAC0C,EAAMoD,GAChB,OAAO,wBAAQ1K,MAAO0K,EAAf,SAAyBpD,EAAKvB,aAG7C,cAACwB,GAAA,EAAD,CAAgBC,GAAG,4BAAnB,0BAIZ,cAACuK,GAAA,EAAD,CAAMzK,MAAI,EAAV,SACI,cAACyK,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,OAAOtP,QAAS,EAAxC,SACI,eAAC+D,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACI,yBACI+D,QAAQ,KACR5G,MAAOmE,EAAOJ,KACd8C,SAAU,SAACqL,GAAD,OAAOnN,EAAa,OAAQmN,EAAE9M,OAAOpF,QAC/C8G,UAAQ,EAJZ,UAMI,wBAAQ9G,MAAM,GAAd,iBANJ,UAOKqE,EAAOF,EAAOH,cAPnB,iBAOK,EAAsBmB,qBAP3B,aAOK,EAAqCP,KAAI,SAAC0C,EAAMmD,GAC7C,OAAO,wBAAQzK,MAAOyK,EAAf,SAAqBnD,EAAKiC,QAAQ,IAAK,gBAGtD,cAAChC,GAAA,EAAD,CAAgBC,GAAG,4BAAnB,yBAIZ,cAACuK,GAAA,EAAD,CAAMzK,MAAI,EAAV,SACI,cAACyK,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,OAAOtP,QAAS,EAAxC,SACI,eAAC+D,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACI,yBACI+D,QAAQ,KACR5G,MAAOmE,EAAOL,KACd+C,SAAU,SAACqL,GAAD,OAAOnN,EAAa,OAAQmN,EAAE9M,OAAOpF,QAC/C8G,UAAQ,EAJZ,UAMI,wBAAQ9G,MAAM,GAAd,iBANJ,UAOKqE,EAAOF,EAAOH,cAPnB,iBAOK,EAAsBgC,aAP3B,aAOK,EAA6BpB,KAAI,SAAC0C,EAAMoD,GACrC,OAAO,wBAAQ1K,MAAO0K,EAAf,SAAyBpD,UAGxC,cAACC,GAAA,EAAD,CAAgBC,GAAG,4BAAnB,yBAIZ,cAACuK,GAAA,EAAD,CAAMzK,MAAI,EAAV,SACI,cAACyK,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,OAAOtP,QAAS,EAAxC,SACI,eAAC+D,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACI,cAAC,KAAD,CACIgE,SAhKT,SAAC7G,GAChB+E,EAAa,OAAQ/E,IAgKGA,MAAOmE,EAAO6C,OAElB,cAACO,GAAA,EAAD,CAAgBC,GAAG,4BAAnB,yBAIZ,cAACuK,GAAA,EAAD,CAAMzK,MAAI,EAAV,SACI,cAACyK,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,OAAOtP,QAAS,EAAxC,SACI,eAAC+D,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACI,cAAC,KAAD,CACIgE,SA9KX,SAAC7G,GACd+E,EAAa,KAAM/E,IA8KKA,MAAOmE,EAAOrD,KAElB,cAACyG,GAAA,EAAD,CAAgBC,GAAG,4BAAnB,uBAIZ,cAACuK,GAAA,EAAD,CAAMzK,MAAI,EAAV,SACI,cAACyK,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,OAAOtP,QAAS,EAAxC,SACI,eAAC+D,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACI,cAAC4E,GAAA,EAAD,CACID,GAAG,4BACHE,YAAY,YACZ1H,MAAOmE,EAAOiN,OACdtK,UAAQ,EACRD,SAAU,SAACqL,GAAD,OAAOnN,EAAa,SAAUmN,EAAE9M,OAAOpF,QACjD4H,aAAc,cAACC,GAAA,EAAD,CAAgBlG,SAAS,QACvCmG,mBAAiB,yCACjBC,WAAY,CACR,aAAc,YAItB,cAACR,GAAA,EAAD,CAAgBC,GAAG,8BAAnB,8BAKhB,cAAC,KAAD,CAAU2K,KAAMjB,EAAckB,QAAS7B,QCvQpC,SAAS8B,KACpB,OACI,gCACI,cAACrE,GAAD,IACA,cAAC,GAAD,IACA,cAACzM,EAAD,OCHZ,IAAIa,GAASC,EAAQ,IAEftB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJsB,QAAS,OACTC,SAAU,OACVtB,SAAU,GAEZuB,OAAQ,CACNA,OAAQzB,EAAM0B,QAAQ,IAExBC,aAAc,CACZxB,UAAWH,EAAM0B,QAAQ,IAE3BI,MAAO,CACLD,MAAO,QAETE,gBAAiB,CACfC,QAAShC,EAAM0B,QAAQ,IAEzBiN,MAAO,CACLS,OAAQ,IACRvN,MAAO,KAETwP,QAAS,CACPrP,QAAShC,EAAM0B,QAAQ,IAEzB4P,UAAW,CACTzP,MAAO,OACPJ,OAAQzB,EAAM0B,QAAQ,SAKX,SAASO,GAAerC,GACrC,IAAMW,EAAUT,KAEZwF,EAAe,KAEO,OAAtB1F,EAAMsD,OAAOJ,MAAuC,OAAtBlD,EAAMsD,OAAOL,OAC7CyC,EACG,eAACE,GAAA,EAAMlF,OAAP,WACC,8BAAG,sCAAH,6FACA,cAACyG,GAAA,EAAD,CACEC,QAASpH,EAAM2R,aACfvQ,QAAQ,YACRL,MAAM,UACNF,UAAWF,EAAQgJ,OAJrB,sBAaN,IAAIiI,EAAY,IAAI/G,KAAKC,aAAa,QAAS,CAC7CC,MAAO,WACP1H,SAAUrD,EAAM6R,YAAY7I,WAE9B,OACE,eAACpD,GAAA,EAAD,2BACM5F,GADN,IAEE8J,kBAAgB,gCAChBC,UAAQ,EACRlF,KAAK,KACLmF,MAAM,QALR,UAOE,cAACpE,GAAA,EAAMqE,OAAP,CAAcC,aAAW,EAAzB,SACE,cAACtE,GAAA,EAAMuE,MAAP,CAAaxD,GAAG,gCAAhB,+BAIF,cAACf,GAAA,EAAMwE,KAAP,UACE,qBAAKvJ,UAAWF,EAAQN,KAAxB,SACE,eAAC6Q,GAAA,EAAD,CAAMC,WAAS,EAACtQ,UAAWF,EAAQN,KAAMyB,QAAS,EAAlD,UACE,cAACoP,GAAA,EAAD,CAAMzK,MAAI,EAACqL,GAAI,EAAf,SACE,eAACZ,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,OAAOtP,QAAS,EAAxC,UACE,oDACA,wBAAOjB,UAAWF,EAAQ+Q,UAA1B,UACE,6BACE,6BAAI,2CAEN,6BACE,6BAAK1R,EAAM6R,YAAY1I,SAEzB,6BACE,6BAAI,qDAEN,6BACE,6BAAKnJ,EAAM6R,YAAYzI,mBAEzB,6BACE,6BAAI,mDAEN,6BACE,6BAAKpJ,EAAM6R,YAAYxI,iBAEzB,6BACE,6BAAI,0CAEN,6BACE,6BAAK9H,GAAOvB,EAAM6R,YAAYxQ,KAAK4D,UAAU+F,OAAO,UAEtD,6BACE,6BAAI,+DAEN,6BACE,6BAAKhL,EAAM6R,YAAYtI,eAEzB,6BACE,6BAAI,4CAEN,6BACE,+BAAKvJ,EAAM6R,YAAY7I,SAAU4I,EAAU5G,OAAOhL,EAAM6R,YAAY5I,QAAQP,QAAQ1I,EAAM6R,YAAY7I,SAAU,IAAIN,QAAQ,IAAK,iBAKzI,cAACwI,GAAA,EAAD,CAAMzK,MAAI,EAACsL,GAAI,EAAf,SACE,eAACb,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,OAAOtP,QAAS,EAAxC,UACE,sDACA,wBAAOjB,UAAWF,EAAQ+Q,UAA1B,UACE,6BACE,6BAAI,gDAEN,6BACE,6BAAK1R,EAAMsD,OAAO0O,cAEpB,6BACE,6BAAI,+CAEN,6BACE,6BAAKhS,EAAMsD,OAAO2O,aAEpB,6BACE,6BAAI,2CAEN,6BACE,6BAAKjS,EAAMsD,OAAOjE,UAEpB,6BACE,6BAAI,kDAEN,6BACE,6BAAKW,EAAMsD,OAAO4O,gBAEpB,6BACE,6BAAI,gDAEN,6BACE,6BAAKlS,EAAMsD,OAAO6O,iCAS9BzM,MCxJR,IAAMxF,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,KAAM,CACFsB,QAAS,OACTC,SAAU,OACVrB,UAAW,IAEfsB,OAAQ,CACJA,OAAQzB,EAAM0B,QAAQ,IAE1BC,aAAc,CACVxB,UAAWH,EAAM0B,QAAQ,IAE7BE,UAAW,CACPC,MAAO,YAKA,SAASmQ,KACpB,IAAMzR,EAAUT,KACV2C,EAAUC,cACVR,EAAK7E,EAAS8E,YACZoE,EAAO0L,cAAP1L,GACR,EAAsCtI,IAAMM,SAAS,MAArD,mBAAOkT,EAAP,KAAoBS,EAApB,KACA,EAAkCjU,IAAMM,UAAS,GAAjD,mBAAOyO,EAAP,KAAkBC,EAAlB,KAEA,EAA4BhP,IAAMM,SAAS,CACvCU,MAAO,KACP8S,cAAe,KACfD,YAAa,KACbF,UAAW,KACXC,SAAU,OALd,mBAAO3O,EAAP,KAAeC,EAAf,KAQAlF,IAAMW,WAAU,WAERsD,EAAGqB,WAAW,gBAAgBK,IAAI2C,GAAI/C,MAAMe,MAAK,SAACX,GAC1CA,EAAIuO,QACJD,EAAetO,EAAIH,aAOhC,IAEH,IAAMK,EAAe,SAACC,GAAD,OAAU,SAACC,GAC5Bb,EAAU,2BAAKD,GAAN,kBAAea,EAAOC,EAAMG,OAAOpF,WA4BhD,OAAoB,OAAhB0S,EAEI,gCACI,uBAAMhR,UAAWF,EAAQN,KAAzB,UACI,gCACI,iDAEA,eAACwF,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACI,cAAC4E,GAAA,EAAD,CACID,GAAG,gCACHE,YAAY,SACZZ,UAAQ,EACR9G,MAAOmE,EAAO0O,UACdhM,SAAU9B,EAAa,aACvB6C,aAAc,cAACC,GAAA,EAAD,CAAgBlG,SAAS,QACvCmG,mBAAiB,kCACjBC,WAAY,CACR,aAAc,gBAGtB,cAACR,GAAA,EAAD,CAAgBC,GAAG,kCAAnB,2BAGJ,eAACd,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACI,cAAC4E,GAAA,EAAD,CACID,GAAG,+BACHE,YAAY,QACZ1H,MAAOmE,EAAO2O,SACdjM,SAAU9B,EAAa,YACvB+B,UAAQ,EAERgB,mBAAiB,iCACjBC,WAAY,CACR,aAAc,eAGtB,cAACR,GAAA,EAAD,CAAgBC,GAAG,iCAAnB,0BAGJ,eAACd,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACI,cAAC4E,GAAA,EAAD,CACID,GAAG,kCACHE,YAAY,aACZ1H,MAAOmE,EAAO4O,YACdjM,UAAQ,EACRD,SAAU9B,EAAa,eACvB6C,aAAc,cAACC,GAAA,EAAD,CAAgBlG,SAAS,QACvCmG,mBAAiB,oCACjBC,WAAY,CACR,aAAc,kBAGtB,cAACR,GAAA,EAAD,CAAgBC,GAAG,8BAAnB,6BAGJ,eAACd,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACI,cAAC4E,GAAA,EAAD,CACID,GAAG,2BACHE,YAAY,uBACZ1H,MAAOmE,EAAOjE,MACd4G,UAAQ,EACRD,SAAU9B,EAAa,SACvB6C,aAAc,cAACC,GAAA,EAAD,CAAgBlG,SAAS,QACvCmG,mBAAiB,6BACjBC,WAAY,CACR,aAAc,WAGtB,cAACR,GAAA,EAAD,CAAgBC,GAAG,8BAAnB,iCAGR,gCACI,eAACd,GAAA,EAAD,CAAahF,UAAWiF,YAAKnF,EAAQkB,OAAQlB,EAAQoB,aAAcpB,EAAQqB,WAA3E,UACI,yBACI+D,QAAQ,KACR5G,MAAOmE,EAAO6O,cACdnM,SAAU9B,EAAa,iBACvB+B,UAAQ,EAJZ,UAMI,wBAAQ9G,MAAM,GAAd,wBACA,2CACA,6CACA,+CACA,8CACA,0CACA,8CAEJ,cAACuH,GAAA,EAAD,CAAgBC,GAAG,sCAAnB,+BAEJ,uBACA,uBACA,cAACQ,GAAA,EAAD,CACIqL,OAAK,EACLC,KAAK,SACLrL,QAAS,WACoB,OAArB9D,EAAO0O,WAA0C,OAApB1O,EAAO2O,UAA8C,OAAzB3O,EAAO6O,eAAiD,OAAvB7O,EAAO4O,aAAyC,OAAjB5O,EAAOjE,MAAgByF,MAAM,oCACrJuI,GAAa,IAEtBjM,QAAQ,YACRL,MAAM,UACNF,UAAU,eATd,0BAaR,cAAC,GAAD,CACIgR,YAAaA,EACbvO,OAAQA,EACRqO,aAnIK,WACQ,OAArBrO,EAAO0O,WAA0C,OAApB1O,EAAO2O,UAA8C,OAAzB3O,EAAO6O,eAAiD,OAAvB7O,EAAO4O,aAAyC,OAAjB5O,EAAOjE,MAChIyF,MAAM,oCAGNxC,EACKqB,WAAW,gBACXK,IAAI2C,GACJ+L,OAAO,CACJxC,UAAW5M,EAAO0O,UAClB7B,SAAU7M,EAAO2O,SACjBU,SAAS,GAAD,OAAKrP,EAAO0O,UAAZ,YAAyB1O,EAAO2O,UACxCW,MAAOtP,EAAOjE,MACdwT,YAAavP,EAAO4O,YACpBY,cAAexP,EAAO6O,gBAEzBxN,MAAK,SAAA8E,GAAG,OAAI5G,EAAQ6G,KAAK,cAAgB/C,EAAK,IAAMoM,mBAAmBlB,EAAY9I,cAClFiK,OACE,SAAA3B,GAAC,OAAIvM,MAAM,0BAkHXwK,KAAMlC,EACNmC,OAAQ,kBAAMlC,GAAa,SAMnC,gCACI,qCACA,oDC1MD,SAAS4F,KACpB,OACI,gCACI,cAAC9F,GAAD,IACA,cAACiF,GAAD,IACA,cAAC1R,EAAD,O,kCCNG,SAASwS,KACpB,IAAMC,EAAW9U,IAAM+U,SACjBC,EAAchV,IAAM+U,SAClBhU,EAAUb,IAAVa,MACR,EAA0Bf,IAAMM,SAAS,IAAzC,mBAAOgE,EAAP,KAAc8K,EAAd,KACA,EAA8BpP,IAAMM,UAAS,GAA7C,mBAAOG,EAAP,KAAgBC,EAAhB,KACM8D,EAAUC,cANY,4CAQ5B,WAA4BuO,GAA5B,SAAA3N,EAAA,6DACI2N,EAAEiC,iBADN,SAIQ7F,EAAS,IACT1O,GAAW,GALnB,SAMcK,EAAM+T,EAASI,QAAQpU,MAAOkU,EAAYE,QAAQpU,OANhE,OAOQ0D,EAAQ6G,KAAK,KAPrB,gDASQ+D,EAAS,qBATjB,QAWI1O,GAAW,GAXf,0DAR4B,sBAsB5B,OACI,mCACI,eAACyU,GAAA,EAAD,CAAM3S,UAAW,qBAAjB,UACI,eAAC2S,GAAA,EAAKpJ,KAAN,WACI,oBAAIvJ,UAAU,mBAAd,6BAEC8B,GAAS,cAACiL,GAAA,EAAD,CAAOxM,QAAQ,SAAf,SAAyBuB,IACnC,eAAC8Q,GAAA,EAAD,CAAMC,SA7BM,4CA6BZ,UACI,eAACD,GAAA,EAAKE,MAAN,CAAYhN,GAAG,QAAf,UACI,cAAC8M,GAAA,EAAKG,MAAN,oBACA,cAACH,GAAA,EAAKI,QAAN,CAAcpB,KAAK,QAAQhJ,IAAK0J,EAAUlN,UAAQ,OAGtD,eAACwN,GAAA,EAAKE,MAAN,CAAYhN,GAAG,WAAf,UACI,cAAC8M,GAAA,EAAKG,MAAN,uBACA,cAACH,GAAA,EAAKI,QAAN,CAAcpB,KAAK,WAAWhJ,IAAK4J,EAAapN,UAAQ,OAE5D,cAAC,KAAD,CAAQ6N,SAAUhV,EAAS2T,KAAK,SAAS5R,UAAU,QAAnD,yBAKR,sBAAKA,UAAU,yBAAf,8BACqB,cAAC,IAAD,CAAMZ,GAAG,kBAAT,gC,cC9CtB,SAASb,KACpB,OACI,cAAC,KAAD,CACIyB,UAAU,mDACVkK,MAAO,CAAEgJ,UAAW,QAFxB,SAII,qBACIlT,UAAU,QACVkK,MAAO,CAAE9J,SAAU,QAASsL,WAAY,UAF5C,SAII,cAAC2G,GAAD,Q,6MCYhB,SAASc,GAAqBtQ,EAAGuQ,EAAGC,GAClC,OAAID,EAAEC,GAAWxQ,EAAEwQ,IACT,EAEND,EAAEC,GAAWxQ,EAAEwQ,GACV,EAEF,EAGT,SAASC,GAAcC,EAAOF,GAC5B,MAAiB,SAAVE,EACH,SAAC1Q,EAAGuQ,GAAJ,OAAUD,GAAqBtQ,EAAGuQ,EAAGC,IACrC,SAACxQ,EAAGuQ,GAAJ,OAAWD,GAAqBtQ,EAAGuQ,EAAGC,IAG5C,SAASG,GAAWC,EAAOC,GACzB,IAAMC,EAAiBF,EAAMvQ,KAAI,SAAC0Q,EAAIC,GAAL,MAAe,CAACD,EAAIC,MAMrD,OALAF,EAAeG,MAAK,SAACjR,EAAGuQ,GACtB,IAAMG,EAAQG,EAAW7Q,EAAE,GAAIuQ,EAAE,IACjC,OAAc,IAAVG,EAAoBA,EACjB1Q,EAAE,GAAKuQ,EAAE,MAEXO,EAAezQ,KAAI,SAAC0Q,GAAD,OAAQA,EAAG,MAGvC,IAAM/E,GAAY,CAChB,CACE/I,GAAI,OACJiO,SAAS,EACTC,gBAAgB,EAChBC,MAAO,QAET,CAAEnO,GAAI,OAAQiO,SAAS,EAAOC,gBAAgB,EAAMC,MAAO,QAC3D,CAAEnO,GAAI,KAAMiO,SAAS,EAAOC,gBAAgB,EAAMC,MAAO,MACzD,CAAEnO,GAAI,QAASiO,SAAS,EAAOC,gBAAgB,EAAMC,MAAO,SAC5D,CAAEnO,GAAI,QAASiO,SAAS,EAAOC,gBAAgB,EAAMC,MAAO,SAC5D,CAAEnO,GAAI,OAAQiO,SAAS,EAAOC,gBAAgB,EAAMC,MAAO,QAC3D,CAAEnO,GAAI,UAAWiO,SAAS,EAAOC,gBAAgB,EAAOC,MAAO,YAGjE,SAASC,GAAkB/U,GACzB,IACEW,EAOEX,EAPFW,QACAqU,EAMEhV,EANFgV,iBACAZ,EAKEpU,EALFoU,MACAF,EAIElU,EAJFkU,QACAe,EAGEjV,EAHFiV,YACAC,EAEElV,EAFFkV,SACAC,EACEnV,EADFmV,cAMF,OACE,cAACC,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAWlT,QAAQ,WAAnB,SACE,cAACmT,GAAA,EAAD,CACEC,cAAeP,EAAc,GAAKA,EAAcC,EAChDO,QAASP,EAAW,GAAKD,IAAgBC,EACzClP,SAAUgP,EACV9N,WAAY,CAAE,aAAc,wBAG/BwI,GAAU3L,KAAI,SAAC2R,GAAD,OACb,cAACJ,GAAA,EAAD,CAEE1K,MAAO8K,EAASd,QAAU,QAAU,OACpCxS,QAASsT,EAASb,eAAiB,OAAS,UAC5Cc,cAAezB,IAAYwB,EAAS/O,IAAKyN,EAJ3C,SAME,eAACwB,GAAA,EAAD,CACEC,OAAQ3B,IAAYwB,EAAS/O,GAC7BqI,UAAWkF,IAAYwB,EAAS/O,GAAKyN,EAAQ,MAC7ChN,SAzBesJ,EAyBYgF,EAAS/O,GAzBR,SAACvC,GACvC+Q,EAAc/Q,EAAOsM,KAqBb,UAKGgF,EAASZ,MACTZ,IAAYwB,EAAS/O,GACpB,sBAAM9F,UAAWF,EAAQmV,eAAzB,SACa,SAAV1B,EAAmB,oBAAsB,qBAE1C,SAfDsB,EAAS/O,IAjBE,IAAC+J,UAmD7B,IAAMqF,GAAmB5V,aAAW,SAACC,GAAD,MAAY,CAC9CC,KAAM,CACJ2V,YAAa5V,EAAM0B,QAAQ,GAC3BmU,aAAc7V,EAAM0B,QAAQ,IAE9BoU,UACyB,SAAvB9V,EAAM+V,QAAQ1D,KACV,CACA1R,MAAOX,EAAM+V,QAAQC,UAAUC,KAC/B5V,gBAAiB6V,aAAQlW,EAAM+V,QAAQC,UAAUG,MAAO,MAExD,CACAxV,MAAOX,EAAM+V,QAAQK,KAAKnH,QAC1B5O,gBAAiBL,EAAM+V,QAAQC,UAAUK,MAE/CC,MAAO,CACLC,KAAM,gBAIJC,GAAuB,SAAC5W,GAC5B,IAAMW,EAAUoV,KACRd,EAAgBjV,EAAhBiV,YAER,OACE,eAAC/T,EAAA,EAAD,CACEL,UAAWiF,YAAKnF,EAAQN,KAAT,eACZM,EAAQuV,UAAYjB,EAAc,IAFvC,UAKGA,EAAc,EACb,eAAC9T,EAAA,EAAD,CACEN,UAAWF,EAAQ+V,MACnB3V,MAAM,UACNK,QAAQ,YACRvB,UAAU,MAJZ,UAMGoV,EANH,eASA,eAAC9T,EAAA,EAAD,CACEN,UAAWF,EAAQ+V,MACnBtV,QAAQ,KACRuF,GAAG,aACH9G,UAAU,MAJZ,kBAOE,cAAC,IAAD,CAAMI,GAAG,aAAT,SAAsB,8CAIzBgV,EAAc,EACb,cAAC4B,GAAA,EAAD,CAASH,MAAM,SAAf,SACE,cAAC5I,EAAA,EAAD,CAAYC,aAAW,SAAvB,SACE,cAAC,KAAD,QAIJ,cAAC8I,GAAA,EAAD,CAASH,MAAM,cAAf,SACE,cAAC5I,EAAA,EAAD,CAAYC,aAAW,cAAvB,SACE,cAAC,KAAD,YAcN7N,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJ4B,MAAO,OACP1B,UAAW,IAEbwO,MAAO,CACL9M,MAAO,OACPzB,aAAcJ,EAAM0B,QAAQ,IAE9BI,MAAO,CACL4U,SAAU,IACV7U,MAAM,eAAD,OAbW,IAaX,QAEP6T,eAAgB,CACdiB,OAAQ,EACRC,KAAM,gBACNxH,OAAQ,EACR3N,QAAS,EACToV,SAAU,SACV7U,QAAS,EACTtB,SAAU,WACVoW,IAAK,GACLjV,MAAO,OAII,SAASkV,KACtB,IAAMxW,EAAUT,KAChB,EAA0B7B,IAAMM,SAAS,OAAzC,mBAAOyV,EAAP,KAAcgD,EAAd,KACA,EAA8B/Y,IAAMM,SAAS,YAA7C,mBAAOuV,EAAP,KAAgBmD,EAAhB,KACA,EAAgChZ,IAAMM,SAAS,IAA/C,mBAAO2Y,EAAP,KAAiBC,EAAjB,KACA,EAAwBlZ,IAAMM,SAAS,GAAvC,mBAAO6Y,EAAP,KAAaC,EAAb,KACA,EAA0BpZ,IAAMM,UAAS,GAAzC,mBAAO+Y,EAAP,KAAcC,EAAd,KACA,EAAsCtZ,IAAMM,SAAS,IAArD,mBAAOiZ,EAAP,KAAoBC,EAApB,KAEA,EAA0BxZ,IAAMM,SAAS,IAAzC,mBAAOmZ,EAAP,KAAcC,EAAd,KAEA1Z,IAAMW,WAAU,YACE,uCAAG,4BAAA0E,EAAA,6DACXpB,EAAK7E,EAAS8E,YADH,SAEXD,EAAGqB,WAAW,SAASC,MAAMe,MACjC,SAACd,GAAD,OAAUkU,EAASlU,EAAKC,KAAKC,KAAI,SAACC,GAAD,OAASA,SAH3B,2CAAH,qDAOhBgU,KACC,IAMH,IAkDMC,EACJL,EACA9P,KAAK8I,IAAIgH,EAAaE,EAAMlQ,OAAS4P,EAAOI,GAE9C,OACE,sBAAK/W,UAAWF,EAAQN,KAAxB,UACE,eAAC6X,GAAA,EAAD,CAAOrX,UAAWF,EAAQoO,MAA1B,UACE,cAAC,GAAD,CAAsBkG,YAAaqC,EAAS1P,SAC5C,cAACuQ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CACEvX,UAAWF,EAAQuB,MACnB4H,kBAAgB,aAChBjF,KAAM6S,EAAQ,QAAU,SACxB3J,aAAW,iBAJb,UAME,cAACgH,GAAD,CACEpU,QAASA,EACTsU,YAAaqC,EAAS1P,OACtBwM,MAAOA,EACPF,QAASA,EACTc,iBAhEiB,SAAC5Q,GAC5B,GAAIA,EAAMG,OAAOkR,QAAjB,CACE,IAAM4C,EAAeP,EAAM/T,KAAI,SAACuU,GAAD,OAAOA,EAAEpT,QACxCqS,EAAYc,QAGdd,EAAY,KA2DFpC,cAvEc,SAAC/Q,EAAOsM,GAEhC0G,EADclD,IAAYxD,GAAsB,QAAV0D,EACrB,OAAS,OAC1BiD,EAAW3G,IAqEDwE,SAAU4C,EAAMlQ,SAElB,eAAC2Q,GAAA,EAAD,WACGlE,GAAWyD,EAAO3D,GAAcC,EAAOF,IACrCsE,MAAMhB,EAAOI,EAAaJ,EAAOI,EAAcA,GAC/C7T,KAAI,SAAC0U,EAAS/D,GACb,IA9BIxP,EA8BEhC,EAAOuV,EAAQ5U,OACf6U,GA/BFxT,EA+B8BhC,EAAKyD,IA/BE,IAA5B2Q,EAASqB,QAAQzT,IAgCxBa,EAAO,kCAA8B2O,GACvCkE,EAAI,iBAAaH,EAAQ9R,GAArB,UAER,OACE,eAAC0O,GAAA,EAAD,CACEwD,OAAK,EACLzR,QAAS,SAAChD,GAAD,OAvET,SAACA,EAAOc,GAC1B,IAAM4T,EAAgBxB,EAASqB,QAAQzT,GACnC6T,EAAc,IAEK,IAAnBD,EACFC,EAAcA,EAAYC,OAAO1B,EAAUpS,GAChB,IAAlB4T,EACTC,EAAcA,EAAYC,OAAO1B,EAASkB,MAAM,IACvCM,IAAkBxB,EAAS1P,OAAS,EAC7CmR,EAAcA,EAAYC,OAAO1B,EAASkB,MAAM,GAAI,IAC3CM,EAAgB,IACzBC,EAAcA,EAAYC,OACxB1B,EAASkB,MAAM,EAAGM,GAClBxB,EAASkB,MAAMM,EAAgB,KAInCvB,EAAYwB,GAsD0BE,CAAY7U,EAAOlB,EAAKyD,KAC5CuS,KAAK,WACLC,eAAcT,EACdU,UAAW,EAEX9B,SAAUoB,EAPZ,UASE,cAACpD,GAAA,EAAD,CAAWlT,QAAQ,WAAnB,SACE,cAACmT,GAAA,EAAD,CACEE,QAASiD,EACTxR,WAAY,CAAE,kBAAmBnB,OAGrC,cAACuP,GAAA,EAAD,CACEzV,UAAU,KACV8G,GAAIZ,EACJsT,MAAM,MACNjX,QAAQ,OAJV,SAMGc,EAAKgC,OAER,cAACoQ,GAAA,EAAD,CAAW1K,MAAM,QAAjB,SACG1H,EAAKiD,OAER,cAACmP,GAAA,EAAD,CAAW1K,MAAM,QAAjB,SACG1H,EAAKjD,KAER,cAACqV,GAAA,EAAD,CAAW1K,MAAM,QAAjB,SACG1H,EAAKiC,MAAMmU,KAAK,QAEnB,cAAChE,GAAA,EAAD,CAAW1K,MAAM,QAAjB,SAA0B2O,GAAarW,EAAKsW,SAC5C,cAAClE,GAAA,EAAD,CAAW1K,MAAM,QAAjB,SACGrJ,KAAO2B,EAAKH,KAAKkC,SAAU,cAAc+F,OACxC,SAGJ,cAACsK,GAAA,EAAD,CAAW1K,MAAM,QAAjB,SACE,cAAC,IAAD,CAAM3K,GAAI2Y,EAAV,SAAgB,iDAjCb1V,EAAKyD,OAsCjBsR,EAAY,GACX,cAAC5C,GAAA,EAAD,CAAUtK,MAAO,CAAEyE,QAASkI,EAAQ,GAAK,IAAMO,GAA/C,SACE,cAAC3C,GAAA,EAAD,CAAWmE,QAAS,eAM9B,cAACC,GAAA,EAAD,CACEC,mBAAoB,CAAC,EAAG,GAAI,IAC5B9Z,UAAU,MACV+Z,MAAO9B,EAAMlQ,OACbgQ,YAAaA,EACbJ,KAAMA,EACNqC,aA3GiB,SAACzV,EAAO0V,GAC/BrC,EAAQqC,IA2GFC,oBAxGwB,SAAC3V,GAC/ByT,EAAemC,SAAS5V,EAAMG,OAAOpF,MAAO,KAC5CsY,EAAQ,SAyGN,cAACwC,GAAA,EAAD,CACExI,QAAS,cAACyI,GAAA,EAAD,CAAQzE,QAASiC,EAAO1R,SAvGb,SAAC5B,GACzBuT,EAASvT,EAAMG,OAAOkR,YAuGlBX,MAAM,qBAMd,SAASyE,GAAaxV,GACpB,QAAYS,IAART,GAA6B,OAARA,EAAc,MAAO,GAE9C,IAAIwG,EAAS,IAAInE,IAAIC,OAAOC,QAAQvC,IAChCmE,EAAM,GAMV,OAJAqC,EAAOC,SAAQ,SAACC,GACdvC,EAAIwB,KAAKe,EAAEvF,SAGNgD,EAAIoR,KAAK,MC7ZH,SAASa,KACpB,OACI,gCACC,cAAChN,GAAD,IACG,cAACgK,GAAD,IACA,cAACzW,EAAD,O,cCNNR,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJE,UAAW,QAIA,SAAS6Z,GAAmBpa,GAIzC,IAHA,IAAMW,EAAUT,KACVma,EAAU,GAEPC,EAAI,EAAGA,EAAI,KAAMA,GAAQ,IAChC,IAAK,IAAI/S,EAAI,EAAGA,EAAI,GAAIA,GAAQ,GAAI,CAClC,IAAIlD,EAAM,GACA,IAANiW,EACFjW,EAAM,KAECiW,EAAI,MACXjW,EAAM,MAGRA,GAAaiW,EAAI/S,GACTK,OAAS,IAAGvD,EAAG,WAAOA,IAC9BgW,EAAQ3Q,KAAK,CAAEoL,MAAOzQ,EAAKlF,MAAOkF,IAKtC,OAFAgG,QAAQC,IAAI+P,GAGV,qBAAKxZ,UAAWF,EAAQN,KAAxB,SACE,cAAC,KAAD,CACEga,QAASA,EACTlb,MAAOa,EAAMmF,MACba,SAAU,SAAAqL,GAAC,OAAIrR,EAAMua,SAASlJ,IAC9BmJ,WAAW,aChCnB,IAAQC,GAASjZ,EAAQ,KAAjBiZ,KAEFva,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJE,UAAW,QAIA,SAASma,GAAe1a,GACrC,IAAMW,EAAUT,KACV2C,EAAUC,cACVR,EAAK7E,EAAS8E,YACpB,EAAwB5D,qBAAxB,mBAAOuG,EAAP,KAAayV,EAAb,KACA,EAAoBhc,qBAApB,mBAAOsB,EAAP,KAAW2a,EAAX,KACA,EAAwBjc,qBAAxB,mBAAOwH,EAAP,KAAa0U,EAAb,KACA,EAA0Blc,mBAAS,IAAnC,mBAAOwG,EAAP,KAAcoV,EAAd,KACA,EAA0B5b,mBAAS,GAAnC,mBAAO+D,EAAP,KAAcE,EAAd,KA+BA,OACE,uBAAM8Q,SAAU,SAAArC,IA9BG,SAACA,GAEpB,GADAA,EAAEiC,sBACW9O,IAATU,GAA+B,KAATA,QAAyBV,IAAV9B,GAAiC,KAAVA,QAAuB8B,IAAPvE,GAA2B,KAAPA,QAAsBuE,IAAT2B,GAA+B,KAATA,QAAyB3B,IAAVW,GAAwC,IAAjBA,EAAMyC,OAAc9C,MAAM,wCAClM,CACH,IAAI6B,EAAK8T,KAGTnY,EACGqB,WAAW,SACXkF,IAAI,CACHlC,GAAIA,EACJzB,KAAMA,EACNjF,GAAIA,EACJkG,KAAMA,EACNzD,MAAOsX,SAAStX,GAChByC,MAAOA,EAAMpB,KAAI,SAAC+W,GAAwB,OAAhBzQ,QAAQC,IAAIwQ,GAAWA,EAAE3b,SACnD4D,KAAM,IAAI1B,OAEXsD,MACC,SAAC8E,GAAD,OAEE5G,EAAQ6G,KAAK,UAAYD,EAAI9C,GAAK,aAErCqM,OACC,SAAC3B,GAAD,OAAOvM,MAAM,0BAMI6M,CAAaN,IAAMxQ,UAAWF,EAAQN,KAA7D,UACE,uBACA,uBACA,8CACA,uBACA,uBACE6E,KAAK,OACLuN,KAAK,OACLtT,MAAO+F,EACPe,UAAQ,EACRD,SAAU,SAAAqL,GAAC,OAAIsJ,EAAQtJ,EAAE9M,OAAOpF,UAElC,uBACA,uBACA,yCACA,uBACA,uBACE+F,KAAK,OACLuN,KAAK,OACLtT,MAAOgH,EACPF,UAAQ,EACRD,SAAU,SAAAqL,GAAC,OAAIwJ,EAAQxJ,EAAE9M,OAAOpF,UAElC,uBACA,uBACA,uCACA,uBACA,uBACE+F,KAAK,KACLuN,KAAK,OACLtT,MAAOc,EACPgG,UAAQ,EACRD,SAAU,SAAAqL,GAAC,OAAIuJ,EAAMvJ,EAAE9M,OAAOpF,UAEhC,uBACA,uBACA,oDACA,uBACA,uBACE+F,KAAK,QACLuN,KAAK,SACLtT,MAAOuD,EACPuD,UAAQ,EACRD,SAAU,SAAAqL,GAAC,OAAIzO,EAASyO,EAAE9M,OAAOpF,UAEnC,uBACA,uBACA,oDACA,uBACA,cAACib,GAAD,CAAoBG,SAAUA,EAAUpV,MAAOA,IAC/C,uBACA,uBACA,uBACEtE,UAAU,eACV4R,KAAK,SACLtT,MAAM,YCvGC,SAAS4b,KACpB,OACI,gCACI,cAAC5N,GAAD,IACA,cAACuN,GAAD,IACA,cAACha,EAAD,OCgBZ,SAASsT,GAAqBtQ,EAAGuQ,EAAGC,GAClC,OAAID,EAAEC,GAAWxQ,EAAEwQ,IACT,EAEND,EAAEC,GAAWxQ,EAAEwQ,GACV,EAEF,EAGT,SAASC,GAAcC,EAAOF,GAC5B,MAAiB,SAAVE,EACH,SAAC1Q,EAAGuQ,GAAJ,OAAUD,GAAqBtQ,EAAGuQ,EAAGC,IACrC,SAACxQ,EAAGuQ,GAAJ,OAAWD,GAAqBtQ,EAAGuQ,EAAGC,IAG5C,SAASG,GAAWC,EAAOC,GACzB,IAAMC,EAAc,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAAOvQ,KAAI,SAAC0Q,EAAIC,GAAL,MAAe,CAACD,EAAIC,MAMtD,OALc,OAAdF,QAAc,IAAdA,KAAgBG,MAAK,SAACjR,EAAGuQ,GACvB,IAAMG,EAAQG,EAAW7Q,EAAE,GAAIuQ,EAAE,IACjC,OAAc,IAAVG,EAAoBA,EACjB1Q,EAAE,GAAKuQ,EAAE,MAElB,OAAOO,QAAP,IAAOA,OAAP,EAAOA,EAAgBzQ,KAAI,SAAC0Q,GAAD,OAAQA,EAAG,MAGxC,IAAM/E,GAAY,CAChB,CACE/I,GAAI,OACJiO,SAAS,EACTC,gBAAgB,EAChBC,MAAO,QAET,CAAEnO,GAAI,QAASiO,SAAS,EAAMC,gBAAgB,EAAMC,MAAO,SAC3D,CAAEnO,GAAI,OAAQiO,SAAS,EAAMC,gBAAgB,EAAOC,MAAO,SAG7D,SAASC,GAAkB/U,GACzB,IACEW,EAOEX,EAPFW,QACAqU,EAMEhV,EANFgV,iBACAZ,EAKEpU,EALFoU,MACAF,EAIElU,EAJFkU,QACAe,EAGEjV,EAHFiV,YACAC,EAEElV,EAFFkV,SACAC,EACEnV,EADFmV,cAMF,OACE,cAACC,GAAA,EAAD,CAAWvU,UAAWF,EAAQN,KAA9B,SACE,eAACgV,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAWlT,QAAQ,WAAnB,SACE,cAACmT,GAAA,EAAD,CACEC,cAAeP,EAAc,GAAKA,EAAcC,EAChDO,QAASP,EAAW,GAAKD,IAAgBC,EACzClP,SAAUgP,EACV9N,WAAY,CAAE,aAAc,wBAG/BwI,GAAU3L,KAAI,SAAC2R,GAAD,OACb,cAACJ,GAAA,EAAD,CAEE1K,MAAO8K,EAASd,QAAU,QAAU,OACpCxS,QAASsT,EAASb,eAAiB,OAAS,UAC5Cc,cAAezB,IAAYwB,EAAS/O,IAAKyN,EAJ3C,SAME,eAACwB,GAAA,EAAD,CACEC,OAAQ3B,IAAYwB,EAAS/O,GAC7BqI,UAAWkF,IAAYwB,EAAS/O,GAAKyN,EAAQ,MAC7ChN,SAzBesJ,EAyBYgF,EAAS/O,GAzBR,SAACvC,GACvC+Q,EAAc/Q,EAAOsM,KAqBb,UAKGgF,EAASZ,MACTZ,IAAYwB,EAAS/O,GACpB,sBAAM9F,UAAWF,EAAQmV,eAAzB,SACa,SAAV1B,EAAmB,oBAAsB,qBAE1C,SAfDsB,EAAS/O,IAjBE,IAAC+J,UAmD7B,IAAMqF,GAAmB5V,aAAW,SAACC,GAAD,MAAY,CAC9CC,KAAM,CACJ2V,YAAa5V,EAAM0B,QAAQ,GAC3BmU,aAAc7V,EAAM0B,QAAQ,IAE9BoU,UACyB,SAAvB9V,EAAM+V,QAAQ1D,KACV,CACA1R,MAAOX,EAAM+V,QAAQC,UAAUC,KAC/B5V,gBAAiB6V,aAAQlW,EAAM+V,QAAQC,UAAUG,MAAO,MAExD,CACAxV,MAAOX,EAAM+V,QAAQK,KAAKnH,QAC1B5O,gBAAiBL,EAAM+V,QAAQC,UAAUK,MAE/CC,MAAO,CACLC,KAAM,gBAIJC,GAAuB,SAAC5W,GAC5B,IAAM2G,EAAO0L,cAAP1L,GACAhG,EAAUoV,KACRd,EAAgBjV,EAAhBiV,YACJ+F,EAAO,iBAAarU,EAAb,cAEX,OACE,eAACzF,EAAA,EAAD,CACEL,UAAWiF,YAAKnF,EAAQN,KAAT,eACZM,EAAQuV,UAAYjB,EAAc,IAFvC,UAKGA,EAAc,EACb,eAAC9T,EAAA,EAAD,CACEN,UAAWF,EAAQ+V,MACnB3V,MAAM,UACNK,QAAQ,YACRvB,UAAU,MAJZ,UAMGoV,EANH,eASA,eAAC9T,EAAA,EAAD,CACEN,UAAWF,EAAQ+V,MACnBtV,QAAQ,KACRuF,GAAG,aACH9G,UAAU,MAJZ,kBAOE,cAAC,IAAD,CAAMI,GAAI+a,EAAV,SAAmB,8CAItB/F,EAAc,EACb,cAAC4B,GAAA,EAAD,CAASH,MAAM,SAAf,SACE,cAAC5I,EAAA,EAAD,CAAYC,aAAW,SAAvB,SACE,cAAC,KAAD,QAIJ,cAAC8I,GAAA,EAAD,CAASH,MAAM,cAAf,SACE,cAAC5I,EAAA,EAAD,CAAYC,aAAW,cAAvB,SACE,cAAC,KAAD,YAcN7N,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJ4B,MAAO,OACP1B,UAAW,IAEbwO,MAAO,CACL9M,MAAO,OACPzB,aAAcJ,EAAM0B,QAAQ,IAE9BI,MAAO,CACL4U,SAAU,IACV7U,MAAM,eAAD,OAbW,IAaX,QAEP6T,eAAgB,CACdiB,OAAQ,EACRC,KAAM,gBACNxH,OAAQ,EACR3N,QAAS,EACToV,SAAU,SACV7U,QAAS,EACTtB,SAAU,WACVoW,IAAK,GACLjV,MAAO,OAII,SAASgZ,GAAejb,GAAQ,IAAD,QACtCW,EAAUT,KAChB,EAA0B7B,IAAMM,SAAS,OAAzC,mBAAOyV,EAAP,KAAcgD,EAAd,KACA,EAA8B/Y,IAAMM,SAAS,YAA7C,mBAAOuV,EAAP,KAAgBmD,EAAhB,KACA,EAAgChZ,IAAMM,SAAS,IAA/C,mBAAO2Y,EAAP,KAAiBC,EAAjB,KACA,EAAwBlZ,IAAMM,SAAS,GAAvC,mBAAO6Y,EAAP,KAAaC,EAAb,KACA,EAA0BpZ,IAAMM,UAAS,GAAzC,mBAAO+Y,EAAP,KAAcC,EAAd,KACA,EAAsCtZ,IAAMM,SAAS,IAArD,mBAAOiZ,EAAP,KAAoBC,EAApB,KAiEMI,EACJL,EACA9P,KAAK8I,IAAIgH,GAAa,UAAA5X,EAAMkD,KAAKsW,aAAX,eAAkB5R,QAAS4P,EAAOI,GAE1D,OACE,sBAAK/W,UAAWF,EAAQN,KAAxB,UACE,eAAC6X,GAAA,EAAD,CAAOrX,UAAWF,EAAQoO,MAA1B,UACE,cAAC,GAAD,CAAsBkG,YAAW,OAAEqC,QAAF,IAAEA,OAAF,EAAEA,EAAU1P,SAC7C,cAACuQ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CACEvX,UAAWF,EAAQuB,MACnB4H,kBAAgB,aAChBjF,KAAM6S,EAAQ,QAAU,SACxB3J,aAAW,iBAJb,UAME,cAAC,GAAD,CACEpN,QAASA,EACTsU,YAAW,OAAEqC,QAAF,IAAEA,OAAF,EAAEA,EAAU1P,OACvBwM,MAAOA,EACPF,QAASA,EACTc,iBAhEiB,SAAC5Q,GAC5B,GAAIA,EAAMG,OAAOkR,QAAjB,CAA2B,IAAD,EAClB4C,EAAY,UAAGrY,EAAMkD,KAAKsW,aAAd,aAAG,EAAkBzV,KAAI,SAACuU,GAAD,OAAOA,EAAEpT,QACpDqS,EAAYc,QAGdd,EAAY,KA2DFpC,cAvEc,SAAC/Q,EAAOsM,GAEhC0G,EADclD,IAAYxD,GAAsB,QAAV0D,EACrB,OAAS,OAC1BiD,EAAW3G,IAqEDwE,SAAQ,UAAElV,EAAMkD,KAAKsW,aAAb,aAAE,EAAkB5R,SAE9B,eAAC2Q,GAAA,EAAD,qBACGlE,QAAiC7P,IAArBxE,EAAMkD,KAAKsW,OAA4C,OAArBxZ,EAAMkD,KAAKsW,MAAkB,GAAKtT,MAAMC,KAAK,IAAIC,IAAIC,OAAOC,QAAQtG,EAAMkD,KAAKsW,QAAQlW,UAAW6Q,GAAcC,EAAOF,WADxK,aACG,EACGsE,MAAMhB,EAAOI,EAAaJ,EAAOI,EAAcA,GAChD7T,KAAI,SAACmX,EAAMxG,GACV,IA9BIxP,EA8BEwT,GA9BFxT,EA8B8BgW,EAAKvU,IA9BE,IAA5B2Q,EAASqB,QAAQzT,IA+BxBa,EAAO,kCAA8B2O,GAG3C,OADAwG,EAAO,IAAI9U,IAAIC,OAAOC,QAAQ4U,IAG5B,eAAC7F,GAAA,EAAD,CACEwD,OAAK,EACLzR,QAAS,SAAChD,GAAD,OAvET,SAACA,EAAOc,GAC1B,IAAM4T,EAAgBxB,EAASqB,QAAQzT,GACnC6T,EAAc,IAEK,IAAnBD,EACFC,EAAcA,EAAYC,OAAO1B,EAAUpS,GAChB,IAAlB4T,EACTC,EAAcA,EAAYC,OAAO1B,EAASkB,MAAM,IACvCM,KAA0B,OAARxB,QAAQ,IAARA,OAAA,EAAAA,EAAU1P,QAAS,EAC9CmR,EAAcA,EAAYC,OAAO1B,EAASkB,MAAM,GAAI,IAC3CM,EAAgB,IACzBC,EAAcA,EAAYC,OACxB1B,EAASkB,MAAM,EAAGM,GAClBxB,EAASkB,MAAMM,EAAgB,KAInCvB,EAAYwB,GAsD0BE,CAAY7U,EAAO8W,EAAKvU,KAC5CuS,KAAK,WACLC,eAAcT,EACdU,UAAW,EAEX9B,SAAUoB,EAPZ,UASE,cAACpD,GAAA,EAAD,CAAWlT,QAAQ,WAAnB,SACE,cAACmT,GAAA,EAAD,CACEE,QAASiD,EACTxR,WAAY,CAAE,kBAAmBnB,OAGrC,cAACuP,GAAA,EAAD,CACEzV,UAAU,KACV8G,GAAIZ,EACJsT,MAAM,MACNjX,QAAQ,OAJV,SAMG8Y,EAAKtX,IAAI,UAEZ,cAAC0R,GAAA,EAAD,CAAW1K,MAAM,QAAjB,SACGuQ,GAAaD,EAAKtX,IAAI,YAEzB,cAAC0R,GAAA,EAAD,CAAW1K,MAAM,QAAjB,SACGrJ,KAAO2Z,EAAKtX,IAAI,QAAQqB,SAAU,cAAc+F,OAC/C,WAtBCkQ,EAAKtX,IAAI,UA4BrBqU,EAAY,GACX,cAAC5C,GAAA,EAAD,CAAUtK,MAAO,CAAEyE,QAASkI,EAAQ,GAAK,IAAMO,GAA/C,SACE,cAAC3C,GAAA,EAAD,CAAWmE,QAAS,eAM9B,cAACC,GAAA,EAAD,CACEC,mBAAoB,CAAC,EAAG,GAAI,IAC5B9Z,UAAU,MACV+Z,MAAK,UAAE5Z,EAAMkD,KAAKsW,aAAb,aAAE,EAAkB5R,OACzBgQ,YAAaA,EACbJ,KAAMA,EACNqC,aAjGiB,SAACzV,EAAO0V,GAC/BrC,EAAQqC,IAiGFC,oBA9FwB,SAAC3V,GAC/ByT,EAAemC,SAAS5V,EAAMG,OAAOpF,MAAO,KAC5CsY,EAAQ,SA+FN,cAACwC,GAAA,EAAD,CACExI,QAAS,cAACyI,GAAA,EAAD,CAAQzE,QAASiC,EAAO1R,SA7Fb,SAAC5B,GACzBuT,EAASvT,EAAMG,OAAOkR,YA6FlBX,MAAM,qBAMd,SAASqG,GAAapX,GACpB,QAAYS,IAART,GAA6B,OAARA,EAAc,MAAO,GAC9C,IAAIwG,EAAS,IAAInE,IAAIC,OAAOC,QAAQvC,IAChCmE,EAAM,GAMV,OAJAqC,EAAOC,SAAQ,SAACC,GACdvC,EAAIwB,KAAKe,MAGJvC,EAAIoR,KAAK,MC1YH,SAAS8B,KACvB,IAGIzZ,EAHEgF,EAAO0L,cAAP1L,GAEN,EAAwBtI,IAAMM,WAA9B,mBAAOuE,EAAP,KAAamY,EAAb,KAuCA,OAnCAhd,IAAMW,WAAU,WAEHvB,EAAS8E,YACjBoB,WAAW,SAASK,IAAI2C,GAAI/C,MAAMe,MAAK,SAACX,GAC1CqG,QAAQC,IAAItG,GACRA,EAAIuO,QACP8I,EAAQrX,EAAIH,aAOb,SAIUW,IAATtB,GAA+B,OAATA,QACNsB,IAAftB,EAAKsW,OAAsC,OAAftW,EAAKsW,QACpCtW,EAAKsW,MAAQ,IAGd7X,EACC,gCACC,6BAAKuB,EAAKgC,OACV,cAAC+V,GAAD,CAAgB/X,KAAMA,QAKxBvB,EACC,iDAKD,gCACC,cAACwL,GAAD,IACCxL,EACD,cAACjB,EAAD,OChDH,IAAQ+Z,GAASjZ,EAAQ,KAAjBiZ,KAEFva,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJE,UAAW,QAkBA,SAAS+a,GAAmBtb,GACzC,IAAMW,EAAUT,KACV2C,EAAUC,cACVR,EAAK7E,EAAS8E,YACpB,EAAwB5D,qBAAxB,mBAAOuG,EAAP,KAAayV,EAAb,KACA,EAGIhc,mBAAS,IAAIyH,KAHjB,mBACEjB,EADF,KAEEoV,EAFF,KAoFA,OACE,uBAAM7G,SAAU,SAAArC,IA9DG,SAACA,GAEpB,GADAA,EAAEiC,sBACW9O,IAATU,GAA+B,KAATA,QAAyBV,IAAVW,GAAwC,IAAjBA,EAAMyC,OAAc9C,MAAM,wCACrF,CAAC,IAAD,QACC6B,EAAK8T,KAELjB,EAAK,oBAAGxZ,EAAMkD,YAAT,aAAG,EAAYsW,aAAf,QAAwB,GAIjCA,EAAMtU,GAAQ,CACZyB,GAAIA,EACJzB,KAAMA,EACNC,MAAOkB,OAAOkV,YAAYpW,GAC1BpC,KAAM,IAAI1B,MAmBZ,IAJA,IAAI6G,EAAMhC,MAAMC,KAAK,IAAIC,IAAIC,OAAOC,QAAQkT,IAAQlW,UAChDkY,EAAc,CAAC,GAAD,iBAAIxb,EAAMkD,YAAV,aAAI,EAAYiD,KAAhB,sBAAwBnG,EAAMkD,YAA9B,aAAwB,EAAYjD,KAClDwb,EAAiBvT,EAAKnE,KAAI,SAAC0C,GAAD,gCAAazG,EAAMkD,YAAnB,aAAa,EAAYiD,KAAzB,YAAiCM,EAAKvB,SAChEwW,EAAiB,GACZpB,EAAI,EAAGA,EAAIpS,EAAIN,OAAQ0S,IAAK,CAAC,IAAD,EAEnC,GADAoB,EAAehS,KAAf,UAAuBxB,EAAIoS,GAAGpV,KAA9B,sBAAsClF,EAAMkD,YAA5C,aAAsC,EAAYjD,KAC9Cqa,EAAIpS,EAAIN,OAAS,EACnB,IAAK,IAAIL,EAAI+S,EAAI,EAAG/S,EAAIW,EAAIN,OAAQL,IAClCmU,EAAehS,KAAf,UAAuBxB,EAAIoS,GAAGpV,KAA9B,YAAsCgD,EAAIX,GAAGrC,OAKnD,IAAIZ,EAAgBkX,EAAYxC,OAAOyC,EAAeC,GAGtDpZ,EACGqB,WAAW,SACXK,IAAIhE,EAAM2b,OACVjJ,OAAO,CAAE8G,MAAOA,EAAOlV,cAAeA,IACtCK,MACC,SAACX,GAAD,OAEEnB,EAAQ6G,KAAK,UAAY1J,EAAM2b,MAAQ,aAE1C3I,OACC,SAAC3B,GAAQvM,MAAM,sBAAuBuF,QAAQC,IAAI+G,OAOjCM,CAAaN,IAAMxQ,UAAWF,EAAQN,KAA7D,UACE,uBACA,uBACA,sDACA,uBACA,uBACE6E,KAAK,OACLuN,KAAK,OACLtT,MAAO+F,EACPe,UAAQ,EACRD,SAAU,SAAAqL,GAAC,OAAIsJ,EAAQtJ,EAAE9M,OAAOpF,UAElC,uBACA,uBACA,0CACA,uBACA,kCACE,+BACE,yCAAYa,EAAMkD,KAAKiD,KAAvB,SACA,wDAGAnG,EAAMkD,KAAKiC,MAAMpB,KAAI,SAACd,GACpB,OACE,+BACE,6BAAKA,IACL,6BACE,uBACEiC,KAAK,KACLuN,KAAK,SACLzM,SAAU,SAAAqL,GACRlM,EAAMyW,OAAO3Y,GACbsX,EAASpV,EAAM0W,IAAI5Y,EAAMoO,EAAE9M,OAAOpF,sBAUlD,uBACA,uBACA,uBACE0B,UAAU,eACV4R,KAAK,SACLtT,MAAM,YC7JC,SAAS2c,KACvB,IAIIna,EAJEgF,EAAO0L,cAAP1L,GAEN,EAAwBtI,IAAMM,WAA9B,mBAAOuE,EAAP,KAAamY,EAAb,KACA,EAA0Bhd,IAAMM,WAAhC,mBAAOgd,EAAP,KAAcI,EAAd,KAmDA,OA/BA1d,IAAMW,WAAU,WAEHvB,EAAS8E,YACjBoB,WAAW,SAASK,IAAI2C,GAAI/C,MAAMe,MAAK,SAACX,GAC1CqG,QAAQC,IAAItG,GACRA,EAAIuO,SACP8I,EAAQrX,EAAIH,QACZkY,EAAS/X,EAAI2C,UAOd,IAKFhF,OADY6C,IAATtB,GAA+B,OAATA,EAExB,gCACC,6BAAKA,EAAKgC,OACV,cAACoW,GAAD,CAAoBpY,KAAMA,EAAMyY,MAAOA,OAKxC,iDAKD,gCACC,cAACxO,GAAD,IACCxL,EACD,cAACjB,EAAD,OC9DH,IAAQ+Z,GAASjZ,EAAQ,KAAjBiZ,KAEFva,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJE,UAAW,QAIA,SAASyb,GAAehc,GACrC,IAAMW,EAAUT,KACV2C,EAAUC,cACVR,EAAK7E,EAAS8E,YACpB,EAAoB5D,qBAApB,mBAAOsB,EAAP,KAAW2a,EAAX,KACA,EAAwBjc,qBAAxB,mBAAOwH,EAAP,KAAa0U,EAAb,KAEA,EAA4Blc,mBAAS,IAAIyH,KAAzC,mBAAOG,EAAP,KAEM0V,GAFN,KAEqB,SAAC5Y,EAAUsH,GAC9BpE,EAAOqV,OAAOvY,GACdkD,EAAOsV,IAAIxY,EAAUsH,KAgCvB,OACE,uBAAM+I,SAAU,SAAArC,IA9BG,SAACA,GAEpB,GADAA,EAAEiC,sBACS9O,IAAPvE,GAA2B,KAAPA,QAAsBuE,IAAT2B,GAA+B,KAATA,QAA0B3B,IAAX+B,GAA0C,IAAlBA,EAAOqB,OAAc9C,MAAM,wCACxH,CACH,IAAI6B,EAAK8T,KACTpQ,QAAQC,IAAI/D,GAGZjE,EACGqB,WAAW,SACXkF,IAAI,CACHlC,GAAIA,EACJ1G,GAAIA,EACJkG,KAAMA,EACNI,OAAQF,OAAOkV,YAAYhV,GAC3BxD,KAAM,IAAI1B,OAEXsD,MACC,SAAC8E,GAAD,OAEE5G,EAAQ6G,KAAK,aAEhBsJ,OACC,SAAC3B,GAAD,OAAOvM,MAAM,0BAOI6M,CAAaN,IAAMxQ,UAAWF,EAAQN,KAA7D,UACE,uBACA,uBACA,yCACA,uBACA,uBACE6E,KAAK,OACLuN,KAAK,OACLtT,MAAOgH,EACPF,UAAQ,EACRD,SAAU,SAAAqL,GAAC,OAAIwJ,EAAQxJ,EAAE9M,OAAOpF,UAElC,uBACA,uBACA,uCACA,uBACA,uBACE+F,KAAK,KACLuN,KAAK,OACLtT,MAAOc,EACPgG,UAAQ,EACRD,SAAU,SAAAqL,GAAC,OAAIuJ,EAAMvJ,EAAE9M,OAAOpF,UAEhC,uBACA,uBACA,0CACA,uBACA,kCACE,gCACE,+BACE,0CACA,4CAGJ,kCACE,+BACE,qCACA,6BACE,uBACE+F,KAAK,KACLuN,KAAK,OACLzM,SAAU,SAAAqL,GAAC,OAAI4K,EAAa,MAAO5K,EAAE9M,OAAOpF,eAIlD,+BACE,qCACA,6BACE,uBACE+F,KAAK,KACLuN,KAAK,OACLzM,SAAU,SAAAqL,GAAC,OAAI4K,EAAa,MAAO5K,EAAE9M,OAAOpF,eAIlD,+BACE,qCACA,6BACE,uBACE+F,KAAK,KACLuN,KAAK,OACLzM,SAAU,SAAAqL,GAAC,OAAI4K,EAAa,MAAO5K,EAAE9M,OAAOpF,qBAMtD,uBACA,uBACA,uBACE0B,UAAU,eACV4R,KAAK,SACLtT,MAAM,YC3HC,SAAS+c,KACpB,OACI,gCACI,cAAC/O,GAAD,IACA,cAAC6O,GAAD,IACA,cAACtb,EAAD,O,0DCENmD,GAAO,CACT,CAAEV,MAAO,WAAYkN,aAAc,IACnC,CAAElN,MAAO,SAAUkN,aAAc,IACjC,CAAElN,MAAO,UAAWkN,aAAc,IAClC,CAAElN,MAAO,WAAYkN,aAAc,IACnC,CAAElN,MAAO,SAAUkN,aAAc,IACjC,CAAElN,MAAO,SAAUkN,aAAc,GACjC,CAAElN,MAAO,WAAYkN,aAAc,IACnC,CAAElN,MAAO,SAAUkN,aAAc,GACjC,CAAElN,MAAO,eAAgBkN,aAAc,IACvC,CAAElN,MAAO,SAAUkN,aAAc,KAGhB8L,G,oDACjB,WAAYnc,GAAQ,IAAD,+BACf,cAAMA,IAEDoc,MAAQ,CACTvY,SAJW,E,2CAQnB,WACI,IAAcwY,EAAcC,KAAKF,MAAzBvY,KAER,OACI,cAACqU,GAAA,EAAD,CAAOnN,MAAO,CAAEtK,gBAAiB,WAAjC,SACI,eAAC,KAAD,CACIoD,KAAMwY,EACNE,SAAO,EAFX,UAII,cAAC,KAAD,IACA,cAAC,KAAD,CAAWxL,IAAK,IAEhB,cAAC,KAAD,CACIyL,WAAW,eACXC,cAAc,UAElB,cAAC,KAAD,CAAO1R,MAAO,CAAEtK,gBAAiB,SAAW+V,KAAK,yBACjD,cAAC,KAAD,a,GA1BsBnY,iBCZpCwF,GAAO,CACT,CAAEV,MAAO,WAAYkN,aAAc,IACnC,CAAElN,MAAO,SAAUkN,aAAc,IACjC,CAAElN,MAAO,SAAUkN,aAAc,GACjC,CAAElN,MAAO,WAAYkN,aAAc,IACnC,CAAElN,MAAO,SAAUkN,aAAc,IACjC,CAAElN,MAAO,SAAUkN,aAAc,GACjC,CAAElN,MAAO,SAAUkN,aAAc,IACjC,CAAElN,MAAO,WAAYkN,aAAc,IACnC,CAAElN,MAAO,UAAWkN,aAAc,IAClC,CAAElN,MAAO,eAAgBkN,aAAc,KAGtBqM,G,oDACjB,WAAY1c,GAAQ,IAAD,+BACf,cAAMA,IAEDoc,MAAQ,CACTvY,SAJW,E,2CAQnB,WACI,IAAcwY,EAAcC,KAAKF,MAAzBvY,KAER,OACI,cAACqU,GAAA,EAAD,CAAOnN,MAAO,CAAEtK,gBAAiB,WAAjC,SACI,eAAC,KAAD,CACIoD,KAAMwY,EADV,UAGI,cAAC,KAAD,IACA,cAAC,KAAD,IAEA,cAAC,KAAD,CACIG,WAAW,eACXC,cAAc,UAElB,cAAC,KAAD,CACI1R,MAAO,CAAEtK,gBAAiB,SAC1B+V,KAAK,kCAET,cAAC,KAAD,IACA,cAAC,KAAD,a,GA7BsBnY,iBCrBpC6B,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,KAAM,CACFE,UAAW,IAEf+L,aAAa,yBACT3K,QAAS,OACT4K,WAAY,SACZnK,QAAShC,EAAM0B,QAAQ,EAAG,IAEvB1B,EAAMoM,OAAOC,SALR,IAMRC,eAAgB,iBAIT,SAASiQ,KACpB,IAAMhc,EAAUT,KAEhB,OACI,sBAAKW,UAAWF,EAAQN,KAAxB,UAEI,oBAAI0K,MAAO,CAAE6R,WAAY,UAAzB,8BACA,cAAC,GAAD,IACA,uBACA,cAAC,GAAD,OCnBG,SAASC,KACpB,OACI,eAAC,KAAD,WACI,cAAC1P,GAAD,IACA,cAAC,GAAD,IAEA,cAACzM,EAAD,O,8BCGG,SAASoc,KACpB,MAAwCze,WAAe,IAAvD,mBAAO0e,EAAP,KAAqBC,EAArB,KACA,EAA4B3e,WAAe,IAA3C,mBAAO4e,EAAP,KAAeC,EAAf,KAEA7e,aAAgB,YACI,uCAAG,sCAAAqF,EAAA,sDAMf,IALMpB,EAAK7E,IAAS8E,YAGhB4a,EAAQ,GAEH7C,EAAI,EAAGA,GAAK,EAAGA,IAChB8C,GAAU,IAAI7b,MAAS8b,SAAS/C,EAAG,QACvC6C,EAAMzT,KAAK0T,EAAQpS,OAAO,SACtB4F,EAAM,IAAIvP,MACV2B,QAAQ4N,EAAIjJ,UAAY2S,EAAI,IAC5BvJ,EAAM,IAAI1P,MACV2B,QAAQ+N,EAAIpJ,UAAY2S,GAERhY,EAAGqB,WAAW,gBAC7Bc,MAAM,cAAe,IAAKmM,GAC1BnM,MAAM,cAAe,IAAKsM,GAC1BnN,MACAe,MAAK,SAAC2Y,GACHN,GAAgB,SAAAZ,GAAK,6BAAQA,GAAR,CAAekB,EAASzY,aAGzDqY,EAAUC,GAtBK,2CAAH,qDAwBhBI,KACD,IAEH,IAAM1Z,EAAO,CACToZ,OAAQA,EACRO,SAAU,CACN,CACI1I,MAAO,sBACP2I,MAAM,EACNhd,gBAAiB,UACjBid,YAAa,UACb7Z,KAAMkZ,EACNY,YAAa,EACbC,YAAa,KAgBzB,OACI,cAAC,KAAD,CACIpO,OAAQ,IACR3L,KAAMA,EACNkH,MAAO,CACHtK,gBAAiB,WAErB4Z,QAAS,CACLwD,YAAY,EACZnH,MAAO,CACH/U,SAAS,EACT6U,KAAM,+BACNsH,SAAU,GACVC,UAAW,UACX3b,QAAS,IAEb4b,OAAQ,CACJrc,SAAS,EACTb,SAAU,SAEdmd,OAAQ,CACJC,MAAO,CACH,CACIC,MAAO,CACHJ,UAAW,QACXK,aAAa,EACbC,SAAU,KAItBC,MAAO,CACH,CACIH,MAAO,CACHJ,UAAW,eCxG5B,SAASQ,KACpB,MAAwClgB,IAAMM,SAAS,IAAvD,mBAAOoe,EAAP,KAAqBC,EAArB,KACA,EAA4B3e,IAAMM,SAAS,IAA3C,mBAAOse,EAAP,KAAeC,EAAf,KAEA7e,IAAMW,WAAU,YACI,uCAAG,sCAAA0E,EAAA,sDAKf,IAJMpB,EAAK7E,IAAS8E,YAEhB4a,EAAQ,GAEH7C,EAAI,EAAGA,GAAK,EAAGA,IAChB8C,GAAU,IAAI7b,MAAS8b,SAAS/C,EAAG,QACvC6C,EAAMzT,KAAK0T,EAAQpS,OAAO,SACtB4F,EAAM,IAAIvP,MACV2B,QAAQ4N,EAAIjJ,UAAY2S,EAAI,IAC5BvJ,EAAM,IAAI1P,MACV2B,QAAQ+N,EAAIpJ,UAAY2S,GAEZhY,EAAGqB,WAAW,gBACzBc,MAAM,cAAe,IAAKmM,GAC1BnM,MAAM,cAAe,IAAKsM,GAC1BnN,MACAe,MAAK,SAAC2Y,GACHN,GAAgB,SAAAZ,GAAK,6BAAQA,GAAR,CAAekB,EAASzY,aAGzDqY,EAAUC,GArBK,2CAAH,qDAuBhBI,KACD,IAEH,IAAM1Z,EAAO,CACToZ,OAAQA,EACRO,SAAU,CACN,CACI1I,MAAO,2BACP2I,MAAM,EACNhd,gBAAiB,UACjBid,YAAa,UACb7Z,KAAMkZ,EACNY,YAAa,EACbC,YAAa,KAKzB,OACI,cAAC,KAAD,CACIpO,OAAQ,IACR3L,KAAMA,EACNkH,MAAO,CACHtK,gBAAiB,WAErB4Z,QAAS,CACLwD,YAAY,EACZnH,MAAO,CACH/U,SAAS,EACT6U,KAAM,+BACNsH,SAAU,GACVC,UAAW,QACX3b,QAAS,IAEb4b,OAAQ,CACJrc,SAAS,EACTb,SAAU,SAEdmd,OAAQ,CACJC,MAAO,CACH,CACIC,MAAO,CACHJ,UAAW,QACXK,aAAa,EACbC,SAAU,KAItBC,MAAO,CACH,CACIH,MAAO,CACHJ,UAAW,eC/E3C,IAAM7d,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACnCC,KAAM,CACFE,UAAW,QAIJ,SAASie,KACpB,IAAM7d,EAAUT,KAChB,OACI,sBAAKW,UAAWF,EAAQN,KAAxB,UACI,4CACA,cAACyc,GAAD,IACA,uBACA,cAACyB,GAAD,OCZG,SAASE,KACpB,OACI,eAACzd,EAAA,EAAD,WACI,cAACmM,GAAD,IACA,cAACqR,GAAD,IACA,cAAC9d,EAAD,OCRZ,IAAMR,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACnCC,KAAM,CACFE,UAAW,QAIJ,SAASme,KACpB,IAAM/d,EAAUT,KAChB,OACI,sBAAKW,UAAWF,EAAQN,KAAxB,UACI,0CACA,wECRG,SAASse,KACpB,OACI,eAAC3d,EAAA,EAAD,WACI,cAACmM,GAAD,IACA,cAACuR,GAAD,IACA,cAAChe,EAAD,OCJZ,IAAMR,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,KAAM,CACFmP,OAAQ,IACRvN,MAAO,OACP1B,UAAW,IAEfoJ,OAAQ,CACJnJ,aAAc,YAIhB+Q,GAAU,CACZ,CAAE5B,MAAO,OAAQC,WAAY,OAAQ3N,MAAO,IAAK6N,UAAU,GAC3D,CAAEH,MAAO,KAAMC,WAAY,KAAM3N,MAAO,IAAK6N,UAAU,GACvD,CAAEH,MAAO,SAAUC,WAAY,SAAU3N,MAAO,IAAK6N,UAAU,EAAMC,YAAa,SAAAC,GAAM,iBAAQA,EAAOC,IAAI1J,OAAOqY,IAA1B,gBAAqC5O,EAAOC,IAAI1J,OAAOsY,IAAvD,iBAAmE7O,EAAOC,IAAI1J,OAAOuY,OAC7K,CAAEnP,MAAO,OAAQC,WAAY,OAAQ3N,MAAO,IAAK8N,YAAa,SAAAC,GAAM,gBAAOA,EAAOC,IAAIlN,KAAKkC,aAIhF,SAAS8Z,KACpB,IAAMpe,EAAUT,KAChB,EAA0B7B,IAAMM,SAAS,IAAzC,mBAAOqgB,EAAP,KAAcC,EAAd,KAWA,OATA5gB,IAAMM,UAAS,YACK,uCAAG,8BAAA+E,EAAA,6DACTpB,EAAK7E,EAAS8E,YADL,SAEID,EAAGqB,WAAW,SAASC,MAF3B,OAETC,EAFS,OAGfob,EAASpb,EAAKC,KAAKC,KAAI,SAAAC,GAAG,kCAAUA,EAAIH,QAAd,IAAsB8C,GAAI3C,EAAI2C,SAHzC,2CAAH,qDAKhBuY,KACD,IAGC,sBAAKre,UAAWF,EAAQN,KAAxB,UACI,oBAAI0K,MAAO,CAAEvK,aAAc,IAA3B,mBACA,cAAC2G,GAAA,EAAD,CACI/F,QAAQ,YACRL,MAAM,UACN4N,KAAK,aACL9N,UAAWF,EAAQgJ,OAJvB,sBAKA,cAAC,KAAD,CAAU2H,KAAM0N,EAAOzN,QAASA,QCzC7B,SAASL,KACpB,OACI,eAAClQ,EAAA,EAAD,WACI,cAACmM,GAAD,IACA,cAAC4R,GAAD,IACA,cAACre,EAAD,OCNZ,IAAMR,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACnCC,KAAM,CACFmP,OAAQ,IACRvN,MAAO,OACP1B,UAAW,IAEfoJ,OAAQ,CACJnJ,aAAc,QAmBtB,IAAM+Q,GAAU,CACZ,CAAE5B,MAAO,OAAQC,WAAY,OAAQ3N,MAAO,IAAK6N,UAAU,EAAMC,YAAa,SAAAC,GAAM,gBAAOA,EAAOC,IAAI9J,KAAlB,eAA6B6J,EAAOC,IAAIhQ,MAC5H,CAAE0P,MAAO,OAAQC,WAAY,OAAQ3N,MAAO,IAAK6N,UAAU,GAC3D,CAAEH,MAAO,KAAMC,WAAY,KAAM3N,MAAO,IAAK6N,UAAU,GACvD,CAAEH,MAAO,QAASC,WAAY,QAAS3N,MAAO,KAC9C,CAAE0N,MAAO,QAASC,WAAY,QAAS3N,MAAO,IAAK8N,YAAa,SAAAC,GAAM,gBApB1E,SAAsBjM,GAClB,QAAYS,IAART,GAA6B,OAARA,EAAc,MAAO,GAE9C,IAAIwG,EAAS,IAAInE,IAAIC,OAAOC,QAAQvC,IAChCmE,EAAM,GAMV,OAJAqC,EAAOC,SAAQ,SAACC,GACZvC,EAAIwB,KAAKe,EAAEvF,SAGRgD,EAUsEqR,CAAavJ,EAAOC,IAAIuJ,UACrG,CAAE7J,MAAO,OAAQC,WAAY,OAAQ3N,MAAO,IAAK8N,YAAa,SAAAC,GAAM,gBAAOA,EAAOC,IAAIlN,KAAKkC,YAC3F,CAAE0K,MAAO,GAAIC,WAAY,SAAU3N,MAAO,IAAK8N,YAAa,SAAAC,GAAM,gBAAOA,EAAOC,IAAI9I,WAGzE,SAASgY,KACpB,IAAMxe,EAAUT,KAChB,EAA0B7B,IAAMM,SAAS,IAAzC,mBAAOmZ,EAAP,KAAcC,EAAd,KAWA,OATA1Z,IAAMM,UAAS,YACK,uCAAG,8BAAA+E,EAAA,6DACTpB,EAAK7E,EAAS8E,YADL,SAEID,EAAGqB,WAAW,SAASC,MAF3B,OAETC,EAFS,OAGfkU,EAASlU,EAAKC,KAAKC,KAAI,SAAAC,GAAG,kCAAUA,EAAIH,QAAd,IAAsB8C,GAAI3C,EAAI2C,SAHzC,2CAAH,qDAKhBqR,KACD,IAGC,sBAAKnX,UAAWF,EAAQN,KAAxB,UACI,oBAAI0K,MAAO,CAAEvK,aAAc,IAA3B,mBACA,cAAC2G,GAAA,EAAD,CACI/F,QAAQ,YACRL,MAAM,UACN4N,KAAK,aACL9N,UAAWF,EAAQgJ,OAJvB,sBAKA,cAAC,KAAD,CAAU2H,KAAMwG,EAAOvG,QAASA,QCxD7B,SAAS6N,KACpB,OACI,eAACpe,EAAA,EAAD,WACI,cAACmM,GAAD,IACA,cAACgS,GAAD,IACA,cAACze,EAAD,OCcZ,IAAMN,GAAQif,YAAe,CAC3BlJ,QAAS,CACP9G,QAAS,CACPgH,KAAM,UACNI,KAAM,UACN6I,aAAc,OACd/I,MAAO,WAETH,UAAW,CACTG,MAAO,UACPF,KAAM,UACNI,KAAM,UACN6I,aAAc,QAEhBC,KAAM,CACJte,SAAU,OACVR,gBAAiB,UACjBmc,WAAY,aAOZ1c,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAK,yBAEHyd,SAAU,GACV7b,MAAO,QACJ7B,EAAMoM,OAAOC,SAJd,IAKFC,eAAgB,iBA8CL8S,OA1Cf,WACE,IAAM7e,EAAUT,KAEhB,OACE,cAACzB,EAAD,UACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAACuC,EAAA,EAAD,UACE,eAACye,EAAA,EAAD,CAAerf,MAAOA,GAAtB,UACE,sBAAKS,UAAWF,EAAQN,KAAxB,UACE,cAACV,EAAD,CAAc+f,OAAK,EAACC,KAAK,IAAI9f,UAAWgd,KACxC,cAACld,EAAD,CAAc+f,OAAK,EAACC,KAAK,gBAAgB9f,UAAW2R,KACpD,cAAC7R,EAAD,CAAc+f,OAAK,EAACC,KAAK,wBAAwB9f,UAAWoT,KAC5D,cAACtT,EAAD,CAAc+f,OAAK,EAACC,KAAK,SAAS9f,UAAWsa,KAC7C,cAACxa,EAAD,CAAc+f,OAAK,EAACC,KAAK,cAAc9f,UAAWuf,KAClD,cAACzf,EAAD,CAAc+f,OAAK,EAACC,KAAK,aAAa9f,UAAWkb,KACjD,cAACpb,EAAD,CAAc+f,OAAK,EAACC,KAAK,mBAAmB9f,UAAWub,KACvD,cAACzb,EAAD,CAAc+f,OAAK,EAACC,KAAK,uBAAuB9f,UAAWic,KAE3D,cAACnc,EAAD,CAAc+f,OAAK,EAACC,KAAK,SAAS9f,UAAWqR,KAC7C,cAACvR,EAAD,CAAc+f,OAAK,EAACC,KAAK,aAAa9f,UAAWqc,KACjD,cAACvc,EAAD,CAAc+f,OAAK,EAACC,KAAK,cAAc9f,UAAW4e,KAClD,cAAC9e,EAAD,CAAc+f,OAAK,EAACC,KAAK,YAAY9f,UAAW8e,KAChD,cAAChf,EAAD,CAAcggB,KAAK,2BAA2B9f,UAAW,SAACwR,GAExD,OADAuO,OAAOrS,KAAK,oDAAsDwF,mBAAmB1B,EAAEwO,MAAM7P,OAAO/H,UAAY,IAAK8K,mBAAmB1B,EAAEwO,MAAM7P,OAAOrJ,IAAK,UACrJiZ,OAAOE,SAASnR,KAAO,uBAGlC,8BACE,cAAC,IAAD,CAAO+Q,OAAK,EAACC,KAAK,SAAS9f,UAAWT,mBChFtD2gB,IAAShgB,OACP,cAAC,IAAMigB,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.a5ca4890.chunk.js","sourcesContent":["import firebase from \"firebase\"; //firebase/app\r\n// import \"firebase/firestore\";\r\n\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_SENDER_ID,\r\n  appId: process.env.REACT_APP_MESSAGING_APP_ID,\r\n  // measurementId: \"G-776MMG1FPL\",\r\n};\r\n\r\n//Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase;\r\n","import React from \"react\";\r\nimport firebase from \"../firebase.config\";\r\n\r\nconst auth = firebase.auth();\r\n\r\nconst AuthContext = React.createContext();\r\n\r\nexport function useAuth() {\r\n  return React.useContext(AuthContext);\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [currentUser, setCurrentUser] = React.useState();\r\n  const [loading, setLoading] = React.useState(true);\r\n\r\n  // function register(email, password) {\r\n  //   return auth.createUserWithEmailAndPassword(email, password);\r\n  // }\r\n\r\n  function login(email, password) {\r\n    return auth.signInWithEmailAndPassword(email, password);\r\n  }\r\n\r\n  function logout() {\r\n    return auth.signOut();\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged((user) => {\r\n      setCurrentUser(user);\r\n      setLoading(false);\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const value = {\r\n    currentUser,\r\n    // register,\r\n    login,\r\n    logout,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\n// export default AuthProvider;\r\n","import React from 'react'\r\nimport { Redirect, Route } from 'react-router'\r\nimport { useAuth } from './contexts/AuthContext'\r\n\r\nexport default function PrivateRoute({ component: Component, ...rest }) {\r\n    const { currentUser } = useAuth()\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={(props) => {\r\n                return currentUser ? (\r\n                    <Component {...props} />\r\n                ) : (\r\n                    <Redirect to='/login' />\r\n                );\r\n            }}\r\n        ></Route>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        marginTop: \"100px\",\r\n        marginBottom: \"10px\",\r\n        backgroundColor: \"#ad1457\",\r\n    },\r\n}));\r\n\r\nexport default function Footer() {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <AppBar className={classes.root} position=\"relative\" color=\"primary\">\r\n            <Container maxWidth=\"md\">\r\n                <Toolbar>\r\n                    <Typography variant=\"body1\" color=\"inherit\">\r\n                        First Source Technology {new Date().getFullYear()}\r\n                    </Typography>\r\n                </Toolbar>\r\n            </Container>\r\n        </AppBar>\r\n    );\r\n}\r\n\r\nexport { Footer };\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport DatePicker from 'react-date-picker';\r\nimport firebase from \"../../firebase.config\";\r\nimport { useHistory } from 'react-router-dom';\r\nvar moment = require(\"moment\");\r\nconst { v4: uuidv4 } = require(\"uuid\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  margin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  withoutLabel: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  textField: {\r\n    width: '25ch', //25ch\r\n    // fontSize: '11',\r\n  },\r\n  table: {\r\n    width: '100%',\r\n  },\r\n  pricesContainer: {\r\n    padding: theme.spacing(1),\r\n  }\r\n}));\r\n\r\n\r\nexport default function SearchTripForm(props) {\r\n  const db = firebase.firestore();\r\n  const classes = useStyles();\r\n  const [fare, setFare] = React.useState(null);\r\n  const [seats, setSeats] = React.useState({\r\n    seats: null, error: \"\"\r\n  });\r\n  const history = useHistory();\r\n  const [date, setDate] = React.useState(new Date());\r\n  const [values, setValues] = React.useState({\r\n    time: null,\r\n    trip: null,\r\n    route: null,\r\n    paymentReference: null,\r\n    currency: null\r\n  });\r\n  const [routes, setRoutes] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    const fetchRoutes = async () => {\r\n      const data = await db.collection(\"trips\").get();\r\n      setRoutes(data.docs.map((doc) => (doc.data())));\r\n    };\r\n    fetchRoutes();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const handleChange = (prop) => (event) => {\r\n    if (prop === \"trip\") {\r\n      //check if this trip has a fare\r\n      let str = routes[values.route]?.possibleTrips[event.target.value];\r\n\r\n      if (str !== undefined) {\r\n        db\r\n          .collection(\"fares\")\r\n          .where(\"possibleTrips\", \"array-contains\", str)\r\n          .limit(1)\r\n          .get().then(\r\n            (refs) => {\r\n              if (refs.size === 0) {\r\n                setFare(null);\r\n                setValues({ ...values, [prop]: null });\r\n                alert(\"Sorry the trip you selected does not have a fare associated with it, please select another one!\");\r\n              }\r\n              else {\r\n                setValues({ ...values, [prop]: event.target.value });\r\n                setFare(refs.docs[0].data());\r\n              }\r\n            }\r\n          );\r\n      }\r\n      else {\r\n        setFare(null);\r\n        setValues({ ...values, [prop]: null });\r\n        alert(\"Sorry the trip you selected does not have a fare associated with it, please select another one!\");\r\n      }\r\n    }\r\n    else setValues({ ...values, [prop]: event.target.value });\r\n\r\n    if (prop === \"time\") seatsAvailable(event.target.value);\r\n  };\r\n\r\n  const handleReserve = () => {\r\n    if (values.currency === null || values.trip === null || values.time === null || date === '' || values.route === null || fare === null || values.paymentReference === null) alert(\"Please fill in all input fields!\");\r\n    else {\r\n      //now reserve\r\n      const id = uuidv4();\r\n      var ticketId = ticketID();\r\n      let arr = routes[values.route].possibleTrips[values.trip].split('-');\r\n      let momentTravelDate = moment(date, \"YYYY-MM-DD\").toDate();\r\n      const timestamp = new Date();\r\n      var seatNo = generateRandomSeatNumber();\r\n      var refNo = generateRandomReferenceNumber();\r\n      let platform = 'Walk-in clients'\r\n\r\n      db\r\n        .collection(\"reservations\")\r\n        .add({\r\n          ID: id,\r\n          paymentReference: values.paymentReference,\r\n          TicketID: ticketId,\r\n          Currency: values.currency,\r\n          Amount: fare.prices[values.currency],\r\n          status: \"paid\",\r\n          Trip: routes[values.route].name,\r\n          TravellingFrom: arr[0],\r\n          TravellingTo: arr[1],\r\n          BookingTime: timestamp,\r\n          TravelTime: routes[values.route].times[values.time],\r\n          Date: momentTravelDate,\r\n          platform: platform,\r\n          seatNo: seatNo,\r\n          refNo: refNo,\r\n        })\r\n        .then((ref) => history.push(\"/reservations/\" + ref.id + \"/add\")\r\n        );\r\n    }\r\n  }\r\n\r\n  const seatsAvailable = (time) => {\r\n    let momentTravelDate = moment(date, \"YYYY-MM-DD\").toDate();\r\n    let trip = routes[values.route];\r\n\r\n    db\r\n      .collection(\"reservations\")\r\n      .where(\"Trip\", \"==\", trip.name)\r\n      .where(\"status\", \"==\", \"paid\")\r\n      .where(\"Date\", \"==\", momentTravelDate)\r\n      .where(\"TravelTime\", \"==\", trip.times[time])\r\n      .get().then((refs) => {\r\n        var paidCount = refs.size;\r\n\r\n        let d = new Date();\r\n        d.setMinutes(d.getMinutes() - 5);\r\n\r\n        db\r\n          .collection(\"reservations\")\r\n          .where(\"Trip\", \"==\", routes[values.route].name)\r\n          .where(\"status\", \"==\", \"pending\")\r\n          .where(\"Date\", \"==\", momentTravelDate)\r\n          .where(\"TravelTime\", \"==\", routes[values.route].times[time])\r\n          .where(\"BookingTime\", \">=\", d)\r\n          .get().then((refs) => {\r\n            let pendingCount = refs.size;\r\n\r\n            let num = trip.seats - paidCount - pendingCount;\r\n            let error = \"\";\r\n\r\n            if (num < 1) {\r\n              if (trip.seats === paidCount) {\r\n                error = \"There are no more seats available for the trip you selected!\"\r\n              }\r\n              else {\r\n                error = \"There are no seats available at the moment. Please check after 5 or so minutes\";\r\n              }\r\n            }\r\n\r\n            setSeats({ seats: num, error: error });\r\n          });\r\n      });\r\n\r\n  }\r\n\r\n  const displayFares = () => {\r\n    const getPrice = (currency, amount) => {\r\n      if (amount === undefined) return (<p>--</p>);\r\n\r\n      let formatter = new Intl.NumberFormat(\"en-US\", {\r\n        style: \"currency\",\r\n        currency: currency,\r\n      });\r\n\r\n      return formatter.format(amount).replace(currency, \"\").replace(\"$\", \"\");\r\n    }\r\n\r\n    const disp = () => {\r\n      if (fare.prices === undefined) return [];\r\n      let newMap = new Map(Object.entries(fare.prices));\r\n      let arr = [];\r\n\r\n      newMap.forEach((v, k) => {\r\n        arr.push((<tr><th>{k}</th><td align=\"right\">{getPrice(k, v)}</td></tr>));\r\n      });\r\n      return arr;\r\n    }\r\n\r\n    if (fare !== null) {\r\n      console.log(fare);\r\n      var arr = disp();\r\n      return (\r\n        <div className={clsx(classes.pricesContainer)}>\r\n          <h1>Prices</h1>\r\n          <table className={clsx(classes.table)}>\r\n            <tbody>\r\n              {\r\n                arr.map((item) => item)\r\n              }\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  let submitButton = null;\r\n  let selectedTripInfo = null;\r\n\r\n  if (values.route !== null) {\r\n    if (values.trip !== null && values.time !== null && date !== '' && fare !== null) {\r\n      if (seats['seats'] > 0) {\r\n        submitButton = (<Modal.Footer>\r\n          <p><b>Note:</b> Only click this button after the customer has made the necessary payments and please make sure the information entered is correct.</p>\r\n          <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n            <select\r\n              labelId=\"id\"\r\n              value={values.currency}\r\n              onChange={handleChange('currency')}\r\n              required\r\n            >\r\n              <option value=\"\">Select ...</option>\r\n              {(Array.from((new Map(Object.entries(fare?.prices ?? {}))).keys())).map((item) => {\r\n                return <option value={item}>{item}</option>;\r\n              })}\r\n            </select>\r\n            <FormHelperText id=\"standard-currency-helper-text\">Currency</FormHelperText>\r\n          </FormControl>\r\n          <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n            <Input\r\n              id=\"standard-adornment-payment-reference\"\r\n              placeholder=\"Payment reference\"\r\n              value={values.pickUp}\r\n              required\r\n              onChange={handleChange('paymentReference')}\r\n              endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n              aria-describedby=\"standard-payment-reference-helper-text\"\r\n              inputProps={{\r\n                'aria-label': 'Payment Reference',\r\n              }}\r\n            >\r\n            </Input>\r\n            <FormHelperText id=\"standard-payment-reference-helper-text\">Payment Reference</FormHelperText>\r\n          </FormControl>\r\n          <br />\r\n          <Button\r\n            onClick={handleReserve}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.button}>\r\n            Reserve\r\n            </Button>\r\n        </Modal.Footer>);\r\n      }\r\n      else {\r\n        if (seats['error'] !== '') alert(seats['error']);\r\n      }\r\n    }\r\n\r\n    selectedTripInfo = (\r\n      <div>\r\n        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n          <select\r\n            labelId=\"id\"\r\n            value={values.trip}\r\n            onChange={handleChange('trip')}\r\n            required\r\n          >\r\n            <option value=\"\">Select ...</option>\r\n            {routes[values.route]?.possibleTrips?.map((item, key) => {\r\n              return <option value={key}>{item.replace('-', \" to \")}</option>;\r\n            })}\r\n          </select>\r\n          <FormHelperText id=\"standard-date-helper-text\">Trips</FormHelperText>\r\n        </FormControl>\r\n        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n          <select\r\n            labelId=\"id\"\r\n            value={values.time}\r\n            onChange={handleChange('time')}\r\n            required\r\n          >\r\n            <option value=\"\">Select ...</option>\r\n            {routes[values.route]?.times?.map((item, counter) => {\r\n              return <option value={counter}>{item}</option>;\r\n            })}\r\n          </select>\r\n          <FormHelperText id=\"standard-date-helper-text\">Time (Bus leaves {routes[values.route]?.from} at )</FormHelperText>\r\n        </FormControl>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n      class=\"modal\"\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          Add a reservation\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <div className={classes.root}>\r\n          <div>\r\n            <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n              <select\r\n                labelId=\"id\"\r\n                value={values.route}\r\n                onChange={handleChange('route')}\r\n                required\r\n              >\r\n                <option value=\"\">Select ...</option>\r\n                {routes.map((item, counter) => {\r\n                  return <option value={counter}>{item.name}</option>;\r\n                })}\r\n              </select>\r\n              <FormHelperText id=\"standard-date-helper-text\">Route</FormHelperText>\r\n            </FormControl>\r\n            <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n              <DatePicker\r\n                onChange={setDate}\r\n                value={date}\r\n              />\r\n              <FormHelperText id=\"standard-date-helper-text\">Date of Travel</FormHelperText>\r\n            </FormControl>\r\n          </div>\r\n          {\r\n            selectedTripInfo\r\n          }\r\n          {\r\n            displayFares()\r\n          }\r\n        </div>\r\n      </Modal.Body>\r\n      {\r\n        submitButton\r\n      }\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction ticketID() {\r\n  //format: ExC-yymmdd-count\r\n\r\n  const d = new Date();\r\n  var dateString = formatDate(d);\r\n  var num = (Math.floor(Math.random() * 1000) + 1).toString();\r\n  num.length === 1 && (num = \"0\" + num);\r\n  num.length === 2 && (num = \"0\" + num);\r\n\r\n  return `ExC-${dateString}-${num}`;\r\n}\r\n\r\n//format date\r\nfunction formatDate(data) {\r\n  let str = \"\";\r\n  var y = data.getFullYear().toString();\r\n  var m = (data.getMonth() + 1).toString();\r\n  var d = data.getDate().toString();\r\n\r\n  d.length === 1 && (d = \"0\" + d);\r\n  m.length === 1 && (m = \"0\" + m);\r\n\r\n  str = y + m + d;\r\n  return str;\r\n}\r\n\r\nfunction generateRandomReferenceNumber() {\r\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(\r\n    /[xy]/g,\r\n    function (c) {\r\n      var r = (Math.random() * 16) | 0,\r\n        v = c === \"x\" ? r : (r & 0x3) | 0x8;\r\n      return v.toString(16);\r\n    }\r\n  );\r\n}\r\n\r\nfunction generateRandomSeatNumber() {\r\n  //temporary fix\r\n  var letters = [\r\n    \"A\",\r\n    \"B\",\r\n    \"C\",\r\n    \"D\",\r\n    \"E\",\r\n    \"F\",\r\n    \"G\",\r\n    \"H\",\r\n    \"I\",\r\n    \"J\",\r\n    \"K\",\r\n    \"L\",\r\n    \"M\",\r\n    \"N\",\r\n    \"O\",\r\n    \"P\",\r\n    \"Q\",\r\n    \"R\",\r\n    \"S\",\r\n    \"T\",\r\n    \"U\",\r\n    \"V\",\r\n    \"W\",\r\n    \"X\",\r\n    \"Y\",\r\n    \"Z\",\r\n  ];\r\n\r\n  var seat_letter = letters[Math.floor(Math.random() * 25).toString()];\r\n\r\n  var seat_number = (Math.floor(Math.random() * 100) + 1).toString();\r\n  seat_number.length === 1 && (seat_number = \"0\" + seat_number);\r\n\r\n  return seat_letter + seat_number;\r\n}","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport ExploreIcon from '@material-ui/icons/Explore';\r\nimport MonetizationOnIcon from \"@material-ui/icons/MonetizationOn\";\r\nimport DirectionsBusIcon from \"@material-ui/icons/DirectionsBus\";\r\nimport FlightIcon from '@material-ui/icons/Flight';\r\n// import PaymentIcon from \"@material-ui/icons/Payment\";\r\n// import AirlineSeatReclineNormalSharpIcon from '@material-ui/icons/AirlineSeatReclineNormalSharp';\r\n// import PaymentIcon from \"@material-ui/icons/Payment\";\r\nimport LoyaltyIcon from '@material-ui/icons/Loyalty';\r\nimport AssessmentIcon from '@material-ui/icons/Assessment';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { Alert } from \"react-bootstrap\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport SearchTripForm from \"../reservations/SearchTripForm\";\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\n// import { ArrowRightTwoTone } from '@material-ui/icons';\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n\r\n    },\r\n    appBar: {\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n        backgroundColor: \"#34495E\",\r\n    },\r\n    appBarShift: {\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        marginLeft: drawerWidth,\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    hide: {\r\n        display: 'none',\r\n    },\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n\r\n    },\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n        backgroundColor: \"#34495E\",\r\n        color: \"#ffffff\",\r\n    },\r\n    drawerHeader: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: theme.spacing(0, 1),\r\n        // necessary for content to be below app bar\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: 'flex-end',\r\n    },\r\n    content: {\r\n        flexGrow: 1,\r\n        padding: theme.spacing(3),\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n        marginLeft: -drawerWidth,\r\n    },\r\n    contentShift: {\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n        marginLeft: 0,\r\n    },\r\n    LogoutButton: {\r\n        color: \"#F7F9F9\",\r\n        backgroundColor: \"#E74C3C\",\r\n    },\r\n    profileButton: {\r\n        backgroundColor: \"#2874A6\",\r\n        color: \"#F7F9F9\",\r\n    },\r\n    dropdownTitle: {\r\n        color: \"#ff1744\",\r\n\r\n    },\r\n    dropDownMenu: {\r\n        \"& .MuiPaper-root\": {\r\n            backgroundColor: \"#34495e\",\r\n            color: \"#fff\",\r\n        },\r\n    },\r\n}));\r\n\r\nfunction ListItemLink(props) {\r\n    return <ListItem button component=\"a\" {...props} />;\r\n}\r\n\r\nexport default function Sidebar() {\r\n    const [modalShow, setModalShow] = React.useState(false);\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const [open, setOpen] = React.useState(false);\r\n    const [error, setError] = React.useState();\r\n    const { currentUser, logout } = useAuth();\r\n    const history = useHistory();\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    async function handleLogout() {\r\n        setError(\"\");\r\n\r\n        try {\r\n            await logout();\r\n            history.push(\"/login\");\r\n        } catch {\r\n            setError(\"Failed to log out\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n            <CssBaseline />\r\n            <AppBar\r\n                position=\"fixed\"\r\n                className={clsx(classes.appBar, {\r\n                    [classes.appBarShift]: open,\r\n                })}\r\n            >\r\n                <Toolbar>\r\n                    <IconButton\r\n                        color=\"inherit\"\r\n                        aria-label=\"open drawer\"\r\n                        onClick={handleDrawerOpen}\r\n                        edge=\"start\"\r\n                        className={clsx(classes.menuButton, open && classes.hide)}\r\n                    >\r\n                        <MenuIcon />\r\n                    </IconButton>\r\n                    <Typography variant=\"h6\" noWrap>\r\n                        Extracity Dashboard\r\n          </Typography>\r\n                    <Button\r\n                        aria-controls=\"simple-menu\"\r\n                        aria-haspopup=\"true\"\r\n                        onClick={handleClick}\r\n                        className={classes.dropdownTitle}\r\n                        endIcon={<ExpandMore />}\r\n                    >\r\n                        {currentUser.email}\r\n                    </Button>\r\n                    <Menu\r\n                        id=\"simple-menu\"\r\n                        anchorEl={anchorEl}\r\n                        keepMounted\r\n                        open={Boolean(anchorEl)}\r\n                        onClose={handleClose}\r\n                        className={classes.dropDownMenu}\r\n                    >\r\n                        <MenuItem\r\n                            component={Link}\r\n                            href=\"/update-profile\"\r\n                            style={{ color: \"black\", textDecoration: \"none\" }}\r\n                        >\r\n                            Update profile\r\n                     </MenuItem>\r\n                        <MenuItem\r\n                            component={Link}\r\n                            onClick={handleLogout}\r\n                            href=\"/logout\"\r\n                            style={{ color: \"red\", textDecoration: \"none\" }}\r\n                        >\r\n                            Logout\r\n                        </MenuItem>\r\n                    </Menu>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <Drawer\r\n                className={classes.drawer}\r\n                variant=\"persistent\"\r\n                anchor=\"left\"\r\n                open={open}\r\n                classes={{\r\n                    paper: classes.drawerPaper,\r\n                }}\r\n            >\r\n                <div className={classes.drawerHeader}>\r\n                    <IconButton onClick={handleDrawerClose}>\r\n                        {theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\r\n                    </IconButton>\r\n                </div>\r\n                <Divider />\r\n                <List>\r\n                    <ListItem>\r\n                        <Button variant=\"contained\" color=\"primary\" onClick={() => setModalShow(true)}>\r\n                            <AddCircleIcon />\r\n                            Add a reservation\r\n                        </Button>\r\n                    </ListItem>\r\n                    <ListItemLink href=\"/\">\r\n                        <ListItemIcon>\r\n                            <HomeIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Home\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n\r\n                    <ListItemLink href=\"/reservations\">\r\n                        <ListItemIcon>\r\n                            <ExploreIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Reservations\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n\r\n                    <Divider />\r\n\r\n                    <ListItemLink href=\"/statistics\">\r\n                        <ListItemIcon>\r\n                            <AssessmentIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Statistics\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n\r\n                    <ListItemLink href=\"/payments\">\r\n                        <ListItemIcon>\r\n                            <MonetizationOnIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Payments\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n\r\n                    <ListItemLink href=\"/trips-grid\">\r\n                        <ListItemIcon>\r\n                            <FlightIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Trip Grid\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n                    <ListItemLink href=\"/fares\">\r\n                        <ListItemIcon>\r\n                            <DirectionsBusIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Fares Grid\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n                    <ListItemLink href=\"/trips\">\r\n                        <ListItemIcon>\r\n                            <LoyaltyIcon color=\"primary\" />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Trip Stops\" />\r\n                    </ListItemLink>\r\n                    <Divider />\r\n                </List>\r\n                <SearchTripForm\r\n                    show={modalShow}\r\n                    onHide={() => setModalShow(false)}\r\n                />\r\n            </Drawer>\r\n        </div>\r\n    );\r\n}\r\n\r\n// <ListItemLink href=\"/reservations/add-reservation\">\r\n                    //     <ListItemIcon>\r\n                    //         <AirlineSeatReclineNormalSharpIcon color=\"primary\" />\r\n                    //     </ListItemIcon>\r\n                    //     <ListItemText primary=\"Add Reservation\" />\r\n                    // </ListItemLink>","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport firebase from \"../../firebase.config\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport DatePicker from 'react-date-picker';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nvar moment = require(\"moment\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: 400,\r\n        width: '100%',\r\n        marginTop: 80,\r\n    },\r\n    button: {\r\n        marginBottom: '10px',\r\n    },\r\n    filterBox: {\r\n        margin: theme.spacing(1),\r\n    }\r\n}));\r\n\r\nconst headCells = [\r\n    {\r\n        field: \"fullname\",\r\n        headerName: \"FULL NAME\",\r\n        description: 'This column has a value',\r\n        sortable: false,\r\n        width: 160,\r\n        valueGetter: (params) =>\r\n            `${params.row.firstName}  ${params.row.lastName}`,\r\n    },\r\n    { field: \"PhoneNumber\", headerName: \"PHONE #\", width: 130 },\r\n    { field: \"Trip\", headerName: \"TRIP\", width: 170 },\r\n    {\r\n        field: \"Date\", headerName: \"DATE\", width: 160, valueGetter: params => `${params.row.Date.toDate()}`,\r\n    },\r\n    { field: \"TravelTime\", headerName: \"TIME\", width: 110 },\r\n    { field: \"Amount\", headerName: \"AMOUNT\", width: 110, valueGetter: params => `${params.row.Currency} ${params.row.Amount}` },\r\n    { field: \"TicketID\", headerName: \"TICKET ID\", width: 180 },\r\n]\r\n\r\nexport default function DataTable() {\r\n    const classes = useStyles();\r\n    const [reservations, setReservations] = React.useState([]);\r\n    const [routes, setRoutes] = React.useState([]);\r\n    const [values, setValues] = React.useState({\r\n        route: 0,\r\n        trip: 0,\r\n        time: 0,\r\n        from: '',\r\n        to: '',\r\n        search: '',\r\n    });\r\n    const db = firebase.firestore();\r\n\r\n    const handleChange = (prop, value) => {\r\n        setValues({ ...values, [prop]: value });\r\n        fetchReservations(null, prop, value);\r\n    }\r\n\r\n    const handleTo = (value) => {\r\n        handleChange(\"to\", value);\r\n    }\r\n    const handleFrom = (value) => {\r\n        handleChange(\"from\", value);\r\n    }\r\n\r\n    React.useState(() => {\r\n        const fetchRoutes = async () => {\r\n            const data = await db.collection(\"trips\").get();\r\n            let rts = data.docs.map((doc) => (doc.data()));\r\n            setRoutes(rts);\r\n            fetchReservations(rts);\r\n        };\r\n\r\n        fetchRoutes();\r\n    }, []);\r\n\r\n    const fetchReservations = async (r = null, property = null, value = null) => {\r\n        let rts;\r\n        if (r === null) rts = routes;\r\n        else rts = r;\r\n\r\n\r\n        let from = values.from;\r\n        let to = values.to;\r\n        let route = values.route;\r\n        let trip = values.trip;\r\n        let time = values.time;\r\n        // eslint-disable-next-line\r\n        let search = values.search;\r\n\r\n        switch (property) {\r\n            case 'to':\r\n                to = value;\r\n                break;\r\n            case 'from':\r\n                from = value;\r\n                break;\r\n            case 'route':\r\n                route = value;\r\n                break;\r\n            case 'trip':\r\n                trip = value;\r\n                break;\r\n            case 'time':\r\n                time = value;\r\n                break;\r\n            case 'search':\r\n                // eslint-disable-next-line\r\n                search = value;\r\n                break;\r\n            default:\r\n                console.log('No data')\r\n        }\r\n\r\n        const data = db.collection('reservations');\r\n        let queryRef = data.where('status', '==', 'paid');\r\n\r\n        if (route !== '' && rts[route] !== undefined) {\r\n            queryRef = queryRef.where(\"Trip\", \"==\", rts[route]?.name);\r\n            if (trip !== '' && rts[route].possibleTrips[trip] !== undefined) {\r\n                let arr = rts[route].possibleTrips[trip].split('-');\r\n                queryRef = queryRef\r\n                    .where(\"TravellingFrom\", \"==\", arr[0])\r\n                    .where(\"TravellingTo\", \"==\", arr[1]);\r\n            }\r\n\r\n            if (time !== '' && rts[route].times[time] !== undefined) queryRef = queryRef.where(\"TravelTime\", \"==\", rts[route]?.times[time]);\r\n        }\r\n        console.log(from, to);\r\n        if (from !== '' && from !== null && from !== undefined && from === to) {\r\n            console.log('heer');\r\n            let min = moment(from, \"YYYY-MM-DD\").toDate();\r\n            min.setDays(min.getDays() - 1);\r\n            let max = moment(from, \"YYYY-MM-DD\").toDate();\r\n            max.setDays(max.getDays() + 1);\r\n\r\n            queryRef = queryRef.where(\"Date\", \">\", min).where(\"Date\", \"<\", max);\r\n        }\r\n        else {\r\n            if (from !== '' && from !== null && from !== undefined) queryRef = queryRef.where(\"Date\", \">=\", moment(from, \"YYYY-MM-DD\").toDate());\r\n            if (to !== '' && to !== null && to !== undefined) queryRef = queryRef.where(\"Date\", \"<=\", moment(to, \"YYYY-MM-DD\").toDate());\r\n        }\r\n        const query = await queryRef.get();\r\n        console.log(query.size);\r\n        if (query.empty) {\r\n            console.log('No matching documents.');\r\n            setReservations([]);\r\n            return;\r\n        }\r\n\r\n        setReservations(query.docs.map(doc => ({ ...doc.data(), id: doc.id })));\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <h3 style={{ marginBottom: 20, }}>Ticket Reservation List</h3>\r\n            {/* <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                href=\"/reservations/add-reservation\"\r\n                className={classes.button}>Add Reservation</Button> */}\r\n            <br />\r\n            <Grid container className={classes.filterBox} spacing={2}>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.route}\r\n                                onChange={(e) => handleChange('route', e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"\">All</option>\r\n                                {routes?.map((item, counter) => {\r\n                                    return <option value={counter}>{item.name}</option>;\r\n                                })}\r\n                            </select>\r\n                            <FormHelperText id=\"standard-date-helper-text\">Route</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.trip}\r\n                                onChange={(e) => handleChange('trip', e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"\">All</option>\r\n                                {routes[values.route]?.possibleTrips?.map((item, key) => {\r\n                                    return <option value={key}>{item.replace('-', \" to \")}</option>;\r\n                                })}\r\n                            </select>\r\n                            <FormHelperText id=\"standard-date-helper-text\">Trip</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.time}\r\n                                onChange={(e) => handleChange('time', e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"\">All</option>\r\n                                {routes[values.route]?.times?.map((item, counter) => {\r\n                                    return <option value={counter}>{item}</option>;\r\n                                })}\r\n                            </select>\r\n                            <FormHelperText id=\"standard-date-helper-text\">Time</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <DatePicker\r\n                                onChange={handleFrom}\r\n                                value={values.from}\r\n                            />\r\n                            <FormHelperText id=\"standard-date-helper-text\">From</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <DatePicker\r\n                                onChange={handleTo}\r\n                                value={values.to}\r\n                            />\r\n                            <FormHelperText id=\"standard-date-helper-text\">To</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container justify=\"left\" spacing={1}>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"standard-adornment-search\"\r\n                                placeholder=\"Search...\"\r\n                                value={values.search}\r\n                                required\r\n                                onChange={(e) => handleChange('search', e.target.value)}\r\n                                endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n                                aria-describedby=\"standard-payment-reference-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'Search',\r\n                                }}\r\n                            >\r\n                            </Input>\r\n                            <FormHelperText id=\"standard-search-helper-text\">Search</FormHelperText>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n            <DataGrid rows={reservations} columns={headCells} />\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport DataGrid from '../../components/reservations/DataGrid'\r\n\r\nexport default function Data() {\r\n    return (\r\n        <div>\r\n            <Sidebar />\r\n            <DataGrid />\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\n// import clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Grid from '@material-ui/core/Grid';\r\n// import Paper from '@material-ui/core/Paper';\r\nvar moment = require(\"moment\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    flexGrow: 1,\r\n  },\r\n  margin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  withoutLabel: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  table: {\r\n    width: '100%',\r\n  },\r\n  pricesContainer: {\r\n    padding: theme.spacing(1),\r\n  },\r\n  paper: {\r\n    height: 140,\r\n    width: 100,\r\n  },\r\n  control: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  fullWidth: {\r\n    width: '100%',\r\n    margin: theme.spacing(0.5),\r\n  },\r\n}));\r\n\r\n\r\nexport default function SearchTripForm(props) {\r\n  const classes = useStyles();\r\n\r\n  let submitButton = null;\r\n\r\n  if (props.values.trip !== null && props.values.time !== null) {\r\n    submitButton =\r\n      (<Modal.Footer>\r\n        <p><b>Note:</b> Please click the save button after you have confirmed the information displayed above.</p>\r\n        <Button\r\n          onClick={props.handleSubmit}\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          className={classes.button}>\r\n          Save\r\n        </Button>\r\n      </Modal.Footer>);\r\n  }\r\n  else {\r\n\r\n  }\r\n\r\n  let formatter = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: props.reservation.Currency,\r\n  });\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n      size=\"lg\"\r\n      class=\"modal\"\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          Confirm details\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <div className={classes.root}>\r\n          <Grid container className={classes.root} spacing={2}>\r\n            <Grid item lg={6}>\r\n              <Grid container justify=\"left\" spacing={1}>\r\n                <h3>Ticket information</h3>\r\n                <table className={classes.fullWidth}>\r\n                  <tr>\r\n                    <td><b>Route:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.Trip}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Travelling from:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.TravellingFrom}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Travelling to:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.TravellingTo}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Date:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{moment(props.reservation.Date.toDate()).format('LL')}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Time (Leaves Bulawayo at):</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.TravelTime}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Amount:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.reservation.Currency}{formatter.format(props.reservation.Amount).replace(props.reservation.Currency, \"\").replace(\"$\", \"\")}</td>\r\n                  </tr>\r\n                </table>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Grid container justify=\"left\" spacing={1}>\r\n                <h3>Personal information</h3>\r\n                <table className={classes.fullWidth}>\r\n                  <tr>\r\n                    <td><b>First name:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.firstname}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Last name:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.lastname}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Email:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.email}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Phone number:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.phoneNumber}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><b>Paid using:</b></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{props.values.paymentMethod}</td>\r\n                  </tr>\r\n                </table>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      </Modal.Body>\r\n      {\r\n        submitButton\r\n      }\r\n    </Modal>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { Button } from '@material-ui/core';\r\nimport firebase from \"../../firebase.config\";\r\nimport ConfirmReservation from './ConfirmReservation';\r\n// const { uuid } = require(\"uuidv4\");\r\n// eslint-disable-next-line\r\n// import firebase from \"../../firebase.config\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        marginTop: 80,\r\n    },\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    withoutLabel: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    textField: {\r\n        width: '25ch', //25ch\r\n        // fontSize: '11',\r\n    },\r\n}));\r\n\r\nexport default function ReservationAdd() {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const db = firebase.firestore();\r\n    const { id } = useParams();\r\n    const [reservation, setReservation] = React.useState(null);\r\n    const [modalShow, setModalShow] = React.useState(false);\r\n    // eslint-disable-next-line\r\n    const [values, setValues] = React.useState({\r\n        email: null,\r\n        paymentMethod: null,\r\n        phoneNumber: null,\r\n        firstname: null,\r\n        lastname: null,\r\n    });\r\n\r\n    React.useEffect(() => {\r\n        const fetchData = () => {\r\n            db.collection(\"reservations\").doc(id).get().then((doc) => {\r\n                if (doc.exists) {\r\n                    setReservation(doc.data());\r\n                }\r\n            }\r\n            );\r\n        };\r\n        fetchData();\r\n        // eslint-disable-next-line\r\n    }, []);\r\n\r\n    const handleChange = (prop) => (event) => {\r\n        setValues({ ...values, [prop]: event.target.value });\r\n    };\r\n\r\n\r\n    const handleSubmit = () => {\r\n        if (values.firstname === null || values.lastname === null || values.paymentMethod === null || values.phoneNumber === null || values.email === null) {\r\n            alert('Please fill in all input fields.')\r\n        }\r\n        else {\r\n            db\r\n                .collection(\"reservations\")\r\n                .doc(id)\r\n                .update({\r\n                    firstName: values.firstname,\r\n                    lastName: values.lastname,\r\n                    fullname: `${values.firstname} ${values.lastname}`,\r\n                    Email: values.email,\r\n                    PhoneNumber: values.phoneNumber,\r\n                    PaymentMethod: values.paymentMethod,\r\n                })\r\n                .then(ref => history.push(\"/downloads/\" + id + \"/\" + encodeURIComponent(reservation.TicketID))\r\n                ).catch(\r\n                    e => alert('An error occurred!')\r\n                );\r\n        }\r\n\r\n    }\r\n\r\n    if (reservation !== null) {\r\n        return (\r\n            <div>\r\n                <form className={classes.root}>\r\n                    <div>\r\n                        <h3>New Reservation</h3>\r\n\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"standard-adornment-first-name\"\r\n                                placeholder=\"Andile\"\r\n                                required\r\n                                value={values.firstname}\r\n                                onChange={handleChange('firstname')}\r\n                                endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n                                aria-describedby=\"standard-first-name-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'First name',\r\n                                }}\r\n                            />\r\n                            <FormHelperText id=\"standard-first-name-helper-text\">First Name</FormHelperText>\r\n                        </FormControl>\r\n\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"standard-adornment-last-name\"\r\n                                placeholder=\"Mbele\"\r\n                                value={values.lastname}\r\n                                onChange={handleChange('lastname')}\r\n                                required\r\n                                // endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n                                aria-describedby=\"standard-last-name-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'Last name',\r\n                                }}\r\n                            />\r\n                            <FormHelperText id=\"standard-last-name-helper-text\">Last Name</FormHelperText>\r\n                        </FormControl>\r\n\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"standard-adornment-phone-number\"\r\n                                placeholder=\"0776869521\"\r\n                                value={values.phoneNumber}\r\n                                required\r\n                                onChange={handleChange('phoneNumber')}\r\n                                endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n                                aria-describedby=\"standard-phone-number-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'Phone Number',\r\n                                }}\r\n                            />\r\n                            <FormHelperText id=\"standard-weight-helper-text\">Phone Number</FormHelperText>\r\n                        </FormControl>\r\n\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <Input\r\n                                id=\"standard-adornment-email\"\r\n                                placeholder=\"andile.m@outlook.com\"\r\n                                value={values.email}\r\n                                required\r\n                                onChange={handleChange('email')}\r\n                                endAdornment={<InputAdornment position=\"end\"></InputAdornment>}\r\n                                aria-describedby=\"standard-email-helper-text\"\r\n                                inputProps={{\r\n                                    'aria-label': 'Email',\r\n                                }}\r\n                            />\r\n                            <FormHelperText id=\"standard-weight-helper-text\">Email Address</FormHelperText>\r\n                        </FormControl>\r\n                    </div>\r\n                    <div>\r\n                        <FormControl className={clsx(classes.margin, classes.withoutLabel, classes.textField)}>\r\n                            <select\r\n                                labelId=\"id\"\r\n                                value={values.paymentMethod}\r\n                                onChange={handleChange('paymentMethod')}\r\n                                required\r\n                            >\r\n                                <option value=\"\">Select ...</option>\r\n                                <option>Swipe</option>\r\n                                <option>Ecocash</option>\r\n                                <option>One money</option>\r\n                                <option>Telecash</option>\r\n                                <option>Cash</option>\r\n                                <option>Other</option>\r\n                            </select>\r\n                            <FormHelperText id=\"standard-payment-method-helper-text\">Payment Method</FormHelperText>\r\n                        </FormControl>\r\n                        <br />\r\n                        <br />\r\n                        <Button\r\n                            input\r\n                            type='button'\r\n                            onClick={() => {\r\n                                if (values.firstname === null || values.lastname === null || values.paymentMethod === null || values.phoneNumber === null || values.email === null) alert(\"Please fill in all input fields.\");\r\n                                else setModalShow(true);\r\n                            }}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            className=\"submitButton\">Submit</Button>\r\n                        {/* <input className='submitButton' type='submit' value='Submit' /> */}\r\n                    </div>\r\n                </form>\r\n                <ConfirmReservation\r\n                    reservation={reservation}\r\n                    values={values}\r\n                    handleSubmit={handleSubmit}\r\n                    show={modalShow}\r\n                    onHide={() => setModalShow(false)} />\r\n            </div>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <div>\r\n                <h1>404</h1>\r\n                <h2>Page not found!</h2>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\n// import Navbar from '../../components/layout/Navbar'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport ReservationAdd from '../../components/reservations/ReservationAdd'\r\n\r\nexport default function AddReservation() {\r\n    return (\r\n        <div>\r\n            <Sidebar />\r\n            <ReservationAdd />\r\n            <Footer />\r\n        </div>\r\n\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport { Form, Button, Card, Alert } from \"react-bootstrap\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nexport default function Login() {\r\n    const emailRef = React.useRef();\r\n    const passwordRef = React.useRef();\r\n    const { login } = useAuth();\r\n    const [error, setError] = React.useState(\"\");\r\n    const [loading, setLoading] = React.useState(false);\r\n    const history = useHistory();\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            setError(\"\");\r\n            setLoading(true);\r\n            await login(emailRef.current.value, passwordRef.current.value);\r\n            history.push(\"/\");\r\n        } catch {\r\n            setError(\"Failed to log in.\");\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Card className={\"bg-dark text-white\"}>\r\n                <Card.Body>\r\n                    <h4 className=\"text-center mb-4\">Extracity Login</h4>\r\n\r\n                    {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                    <Form onSubmit={handleSubmit}>\r\n                        <Form.Group id=\"email\">\r\n                            <Form.Label>Email</Form.Label>\r\n                            <Form.Control type=\"email\" ref={emailRef} required />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group id=\"password\">\r\n                            <Form.Label>Password</Form.Label>\r\n                            <Form.Control type=\"password\" ref={passwordRef} required />\r\n                        </Form.Group>\r\n                        <Button disabled={loading} type=\"submit\" className=\"w-100\">\r\n                            Login\r\n            </Button>\r\n                    </Form>\r\n                </Card.Body>\r\n                <div className=\"w-100 text-center mt-2\">\r\n                    Forgot password? <Link to=\"/reset-password\">Click here</Link>\r\n                </div>\r\n            </Card>\r\n        </>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport Login from \"../../components/accounts/Login\";\r\nimport { Container } from \"react-bootstrap\";\r\n\r\nexport default function login() {\r\n    return (\r\n        <Container\r\n            className=\"d-flex align-items-center justify-content-center\"\r\n            style={{ minHeight: \"80vh\" }}\r\n        >\r\n            <div\r\n                className=\"w-100\"\r\n                style={{ maxWidth: \"350px\", alignItems: \"center\" }}\r\n            >\r\n                <Login />\r\n            </div>\r\n        </Container>\r\n    );\r\n}\r\nexport { login };\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport clsx from \"clsx\";\r\nimport { lighten, makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport firebase from \"../../firebase.config\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === \"desc\"\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n}\r\n\r\nconst headCells = [\r\n  {\r\n    id: \"name\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"TRIP\",\r\n  },\r\n  { id: \"from\", numeric: false, disablePadding: true, label: \"FROM\" },\r\n  { id: \"to\", numeric: false, disablePadding: true, label: \"TO\" },\r\n  { id: \"times\", numeric: false, disablePadding: true, label: \"TIMES\" },\r\n  { id: \"stops\", numeric: false, disablePadding: true, label: \"STOPS\" },\r\n  { id: \"date\", numeric: false, disablePadding: true, label: \"DATE\" },\r\n  { id: \"actions\", numeric: false, disablePadding: false, label: \"ACTIONS\" }\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const {\r\n    classes,\r\n    onSelectAllClick,\r\n    order,\r\n    orderBy,\r\n    numSelected,\r\n    rowCount,\r\n    onRequestSort,\r\n  } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n            checked={rowCount > 0 && numSelected === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ \"aria-label\": \"select all trips\" }}\r\n          />\r\n        </TableCell>\r\n        {headCells.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.numeric ? \"right\" : \"left\"}\r\n            padding={headCell.disablePadding ? \"none\" : \"default\"}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : \"asc\"}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === \"desc\" ? \"sorted descending\" : \"sorted ascending\"}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf([\"asc\", \"desc\"]).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === \"dark\" //initially light\r\n      ? {\r\n        color: theme.palette.secondary.main,\r\n        backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n      }\r\n      : {\r\n        color: theme.palette.text.primary,\r\n        backgroundColor: theme.palette.secondary.dark,\r\n      },\r\n  title: {\r\n    flex: \"1 1 100%\",\r\n  },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  const classes = useToolbarStyles();\r\n  const { numSelected } = props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography\r\n          className={classes.title}\r\n          color=\"inherit\"\r\n          variant=\"subtitle1\"\r\n          component=\"div\"\r\n        >\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography\r\n          className={classes.title}\r\n          variant=\"h5\"\r\n          id=\"tableTitle\"\r\n          component=\"div\"\r\n        >\r\n          Trips\r\n          <Link to=\"/trips/add\"><button>Add</button></Link>\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 ? (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      ) : (\r\n        <Tooltip title=\"Filter list\">\r\n          <IconButton aria-label=\"filter list\">\r\n            <FilterListIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};\r\n\r\nconst drawerWidth = 300;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    marginTop: 80,\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750, //750 initially\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\nexport default function TripsTable() {\r\n  const classes = useStyles();\r\n  const [order, setOrder] = React.useState(\"asc\");\r\n  const [orderBy, setOrderBy] = React.useState(\"calories\");\r\n  const [selected, setSelected] = React.useState([]);\r\n  const [page, setPage] = React.useState(0);\r\n  const [dense, setDense] = React.useState(false);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\r\n  //trips state\r\n  const [trips, setTrips] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    const fetchTrips = async () => {\r\n      const db = firebase.firestore();\r\n      await db.collection(\"trips\").get().then(\r\n        (data) => setTrips(data.docs.map((doc) => doc)\r\n        ))\r\n      //setTrips(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n    };\r\n    fetchTrips();\r\n  }, []);\r\n\r\n  // React.useEffect(() => {\r\n  //   fetchTrips();\r\n  // });\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === \"asc\";\r\n    setOrder(isAsc ? \"desc\" : \"asc\");\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = trips.map((n) => n.name);\r\n      setSelected(newSelecteds);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  const handleClick = (event, name) => {\r\n    const selectedIndex = selected.indexOf(name);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, name);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1)\r\n      );\r\n    }\r\n\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const handleChangeDense = (event) => {\r\n    setDense(event.target.checked);\r\n  };\r\n\r\n  const isSelected = (name) => selected.indexOf(name) !== -1;\r\n\r\n  const emptyRows =\r\n    rowsPerPage -\r\n    Math.min(rowsPerPage, trips.length - page * rowsPerPage);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <EnhancedTableToolbar numSelected={selected.length} />\r\n        <TableContainer>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size={dense ? \"small\" : \"medium\"}\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelected={selected.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={trips.length}\r\n            />\r\n            <TableBody>\r\n              {stableSort(trips, getComparator(order, orderBy))\r\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                .map((tripRef, index) => {\r\n                  const trip = tripRef.data();\r\n                  const isItemSelected = isSelected(trip.id);\r\n                  const labelId = `enhanced-table-checkbox-${index}`;\r\n                  let link = `/trips/${tripRef.id}/stops`;\r\n\r\n                  return (\r\n                    <TableRow\r\n                      hover\r\n                      onClick={(event) => handleClick(event, trip.id)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={isItemSelected}\r\n                      tabIndex={-1}\r\n                      key={trip.id}\r\n                      selected={isItemSelected}\r\n                    >\r\n                      <TableCell padding=\"checkbox\">\r\n                        <Checkbox\r\n                          checked={isItemSelected}\r\n                          inputProps={{ \"aria-labelledby\": labelId }}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell\r\n                        component=\"th\"\r\n                        id={labelId}\r\n                        scope=\"row\"\r\n                        padding=\"none\"\r\n                      >\r\n                        {trip.name}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {trip.from}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {trip.to}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {trip.times.join(\", \")}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">{displayStops(trip.stops)}</TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {moment(trip.date.toDate(), \"YYYY-MM-DD\").format(\r\n                          \"LLL\"\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        <Link to={link}><button>Stops</button></Link>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: (dense ? 33 : 53) * emptyRows }}>\r\n                  <TableCell colSpan={11} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[5, 10, 20]}\r\n          component=\"div\"\r\n          count={trips.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onChangePage={handleChangePage}\r\n          onChangeRowsPerPage={handleChangeRowsPerPage}\r\n        />\r\n      </Paper>\r\n      <FormControlLabel\r\n        control={<Switch checked={dense} onChange={handleChangeDense} />}\r\n        label=\"Dense padding\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction displayStops(map) {\r\n  if (map === undefined || map === null) return \"\";\r\n\r\n  var newMap = new Map(Object.entries(map));\r\n  var arr = []; // initially new Array()\r\n\r\n  newMap.forEach((v) => {\r\n    arr.push(v.name);\r\n  });\r\n\r\n  return arr.join(\", \");\r\n}","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripsTable from '../../components/trips/TripsTable'\r\n\r\nexport default function Trips() {\r\n    return (\r\n        <div>\r\n        \t<Sidebar />\r\n            <TripsTable />\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport MultiSelect from \"react-multi-select-component\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginTop: 80,\r\n  },\r\n}));\r\n\r\nexport default function MultipleTimeSelect(props) {\r\n  const classes = useStyles()\r\n  const options = [];\r\n\r\n  for (let x = 0; x < 2400; x = x + 100) {\r\n    for (let y = 0; y < 60; y = y + 15) {\r\n      var str = \"\";\r\n      if (x === 0) {\r\n        str = \"00\";\r\n      }\r\n      else if (x < 1000) {\r\n        str = \"0\"\r\n      }\r\n\r\n      str = str + (x + y);\r\n      if (str.length < 4) str = `0${str}`;\r\n      options.push({ label: str, value: str });\r\n    }\r\n  }\r\n  console.log(options);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <MultiSelect\r\n        options={options}\r\n        value={props.times}\r\n        onChange={e => props.setTimes(e)}\r\n        labelledBy=\"Select\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport MultipleTimeSelect from './MultipleTimeSelect';\r\nimport { useHistory } from 'react-router-dom';\r\nimport firebase from \"../../firebase.config\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nconst { uuid } = require(\"uuidv4\");\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginTop: 80,\r\n  },\r\n}));\r\n\r\nexport default function TripCreateForm(props) {\r\n  const classes = useStyles()\r\n  const history = useHistory();\r\n  const db = firebase.firestore();\r\n  const [name, setName] = useState();\r\n  const [to, setTo] = useState();\r\n  const [from, setFrom] = useState();\r\n  const [times, setTimes] = useState([]);\r\n  const [seats, setSeats] = useState(0);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (name === undefined || name === \"\" || seats === undefined || seats === \"\" || to === undefined || to === \"\" || from === undefined || from === \"\" || times === undefined || times.length === 0) alert(\"Please fill in all input fields!\");\r\n    else {\r\n      let id = uuid();\r\n\r\n      //save\r\n      db\r\n        .collection(\"trips\")\r\n        .add({\r\n          id: id,\r\n          name: name,\r\n          to: to,\r\n          from: from,\r\n          seats: parseInt(seats),\r\n          times: times.map((t) => { console.log(t); return t.value }),\r\n          date: new Date(),\r\n        })\r\n        .then(\r\n          (ref) =>\r\n            // fetching free slots\r\n            history.push(\"/trips/\" + ref.id + \"/stops\")\r\n        )\r\n        .catch(\r\n          (e) => alert(\"An error occurred!\")\r\n        );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={e => { handleSubmit(e) }} className={classes.root}>\r\n      <br />\r\n      <br />\r\n      <label>Trip name</label>\r\n      <br />\r\n      <input\r\n        name='name'\r\n        type='text'\r\n        value={name}\r\n        required\r\n        onChange={e => setName(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>From</label>\r\n      <br />\r\n      <input\r\n        name='from'\r\n        type='text'\r\n        value={from}\r\n        required\r\n        onChange={e => setFrom(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>To</label>\r\n      <br />\r\n      <input\r\n        name='to'\r\n        type='text'\r\n        value={to}\r\n        required\r\n        onChange={e => setTo(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>Number of seats</label>\r\n      <br />\r\n      <input\r\n        name='seats'\r\n        type='number'\r\n        value={seats}\r\n        required\r\n        onChange={e => setSeats(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>Departure times</label>\r\n      <br />\r\n      <MultipleTimeSelect setTimes={setTimes} times={times} />\r\n      <br />\r\n      <br />\r\n      <input\r\n        className='submitButton'\r\n        type='submit'\r\n        value='Save'\r\n      />\r\n    </form>\r\n  )\r\n}","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripCreateForm from '../../components/trips/TripCreateForm'\r\n\r\nexport default function AddTrip() {\r\n    return (\r\n        <div>\r\n            <Sidebar />\r\n            <TripCreateForm />\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport clsx from \"clsx\";\r\nimport { lighten, makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\n// import firebase from \"../../firebase.config\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === \"desc\"\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array?.map((el, index) => [el, index]);\r\n  stabilizedThis?.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis?.map((el) => el[0]);\r\n}\r\n\r\nconst headCells = [\r\n  {\r\n    id: \"name\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"STOP\",\r\n  },\r\n  { id: \"times\", numeric: true, disablePadding: true, label: \"TIMES\" },\r\n  { id: \"date\", numeric: true, disablePadding: false, label: \"DATE\" },\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const {\r\n    classes,\r\n    onSelectAllClick,\r\n    order,\r\n    orderBy,\r\n    numSelected,\r\n    rowCount,\r\n    onRequestSort,\r\n  } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead className={classes.root}>\r\n      <TableRow>\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n            checked={rowCount > 0 && numSelected === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ \"aria-label\": \"select all trips\" }}\r\n          />\r\n        </TableCell>\r\n        {headCells.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.numeric ? \"right\" : \"left\"}\r\n            padding={headCell.disablePadding ? \"none\" : \"default\"}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : \"asc\"}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === \"desc\" ? \"sorted descending\" : \"sorted ascending\"}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf([\"asc\", \"desc\"]).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === \"dark\" //initially light\r\n      ? {\r\n        color: theme.palette.secondary.main,\r\n        backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n      }\r\n      : {\r\n        color: theme.palette.text.primary,\r\n        backgroundColor: theme.palette.secondary.dark,\r\n      },\r\n  title: {\r\n    flex: \"1 1 100%\",\r\n  },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  let { id } = useParams();\r\n  const classes = useToolbarStyles();\r\n  const { numSelected } = props;\r\n  var addLink = `/trips/${id}/stops/add`;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography\r\n          className={classes.title}\r\n          color=\"inherit\"\r\n          variant=\"subtitle1\"\r\n          component=\"div\"\r\n        >\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography\r\n          className={classes.title}\r\n          variant=\"h5\"\r\n          id=\"tableTitle\"\r\n          component=\"div\"\r\n        >\r\n          Stops\r\n          <Link to={addLink}><button>Add</button></Link>\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 ? (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      ) : (\r\n        <Tooltip title=\"Filter list\">\r\n          <IconButton aria-label=\"filter list\">\r\n            <FilterListIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};\r\n\r\nconst drawerWidth = 300;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    marginTop: 80,\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750, //750 initially\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\nexport default function TripStopsTable(props) {\r\n  const classes = useStyles();\r\n  const [order, setOrder] = React.useState(\"asc\");\r\n  const [orderBy, setOrderBy] = React.useState(\"calories\");\r\n  const [selected, setSelected] = React.useState([]);\r\n  const [page, setPage] = React.useState(0);\r\n  const [dense, setDense] = React.useState(false);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\r\n  //trips state\r\n\r\n  // React.useEffect(() => {\r\n  //   const fetchTrips = async () => {\r\n  //     const db = firebase.firestore();\r\n  //     const data = await db.collection(\"trips\").get();\r\n  //     setTrips(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n  //   };\r\n  // }, []);\r\n\r\n  // React.useEffect(() => {\r\n  //   fetchTrips();\r\n  // });\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === \"asc\";\r\n    setOrder(isAsc ? \"desc\" : \"asc\");\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = props.trip.stops?.map((n) => n.name);\r\n      setSelected(newSelecteds);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  const handleClick = (event, name) => {\r\n    const selectedIndex = selected.indexOf(name);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, name);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected?.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1)\r\n      );\r\n    }\r\n\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const handleChangeDense = (event) => {\r\n    setDense(event.target.checked);\r\n  };\r\n\r\n  const isSelected = (name) => selected.indexOf(name) !== -1;\r\n\r\n  const emptyRows =\r\n    rowsPerPage -\r\n    Math.min(rowsPerPage, props.trip.stops?.length - page * rowsPerPage);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <EnhancedTableToolbar numSelected={selected?.length} />\r\n        <TableContainer>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size={dense ? \"small\" : \"medium\"}\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelected={selected?.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={props.trip.stops?.length}\r\n            />\r\n            <TableBody>\r\n              {stableSort((props.trip.stops === undefined || props.trip.stops === null) ? [] : Array.from(new Map(Object.entries(props.trip.stops)).values()), getComparator(order, orderBy))\r\n                ?.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                .map((stop, index) => {\r\n                  const isItemSelected = isSelected(stop.id);\r\n                  const labelId = `enhanced-table-checkbox-${index}`;\r\n\r\n                  stop = new Map(Object.entries(stop));\r\n                  return (\r\n\r\n                    <TableRow\r\n                      hover\r\n                      onClick={(event) => handleClick(event, stop.id)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={isItemSelected}\r\n                      tabIndex={-1}\r\n                      key={stop.get('id')}\r\n                      selected={isItemSelected}\r\n                    >\r\n                      <TableCell padding=\"checkbox\">\r\n                        <Checkbox\r\n                          checked={isItemSelected}\r\n                          inputProps={{ \"aria-labelledby\": labelId }}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell\r\n                        component=\"th\"\r\n                        id={labelId}\r\n                        scope=\"row\"\r\n                        padding=\"none\"\r\n                      >\r\n                        {stop.get('name')}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {displayTimes(stop.get('times'))}\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {moment(stop.get('date').toDate(), \"YYYY-MM-DD\").format(\r\n                          \"LLL\"\r\n                        )}\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: (dense ? 33 : 53) * emptyRows }}>\r\n                  <TableCell colSpan={11} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[5, 10, 20]}\r\n          component=\"div\"\r\n          count={props.trip.stops?.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onChangePage={handleChangePage}\r\n          onChangeRowsPerPage={handleChangeRowsPerPage}\r\n        />\r\n      </Paper>\r\n      <FormControlLabel\r\n        control={<Switch checked={dense} onChange={handleChangeDense} />}\r\n        label=\"Dense padding\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction displayTimes(map) {\r\n  if (map === undefined || map === null) return \"\";\r\n  var newMap = new Map(Object.entries(map));\r\n  var arr = [];\r\n\r\n  newMap.forEach((v) => {\r\n    arr.push(v);\r\n  });\r\n\r\n  return arr.join(\", \");\r\n}","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripStopsTable from '../../components/trips/TripStopsTable'\r\nimport firebase from \"../../firebase.config\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nexport default function TripStops() {\r\n\tlet { id } = useParams();\r\n\t// const db = firebase.firestore();\r\n\tconst [trip, setTrip] = React.useState();\r\n\tlet display;\r\n\r\n\t//get the trip\r\n\tReact.useEffect(() => {\r\n\t\tconst fetchData = () => {\r\n\t\t\tconst db = firebase.firestore();\r\n\t\t\tdb.collection(\"trips\").doc(id).get().then((doc) => {\r\n\t\t\t\tconsole.log(doc);\r\n\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\tsetTrip(doc.data());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t);\r\n\t\t};\r\n\t\tfetchData();\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\t//display the stops\r\n\r\n\tif (trip !== undefined && trip !== null) {\r\n\t\tif (trip.stops === undefined || trip.stops === null) {\r\n\t\t\ttrip.stops = [];\r\n\t\t}\r\n\r\n\t\tdisplay = (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>{trip.name}</h1>\r\n\t\t\t\t<TripStopsTable trip={trip} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\telse\r\n\t\tdisplay = (\r\n\t\t\t<h1>Trip not found!</h1>\r\n\t\t);\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Sidebar />\r\n\t\t\t{display}\r\n\t\t\t<Footer />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\n// import MultipleTimeSelect from './MultipleTimeSelect';\r\nimport { useHistory } from 'react-router-dom';\r\nimport firebase from \"../../firebase.config\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nconst { uuid } = require(\"uuidv4\");\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginTop: 80,\r\n  },\r\n}));\r\n\r\n\r\n// eslint-disable-next-line\r\nfunction keyMap(src, target) {\r\n  target = target || {};\r\n  Object.keys(src).forEach(function (propName) {\r\n    var prop = src[propName];\r\n    if (typeof prop == \"object\") {\r\n      target[propName] = Object.keys(prop).join(',');\r\n      keyMap(prop, target);\r\n    }\r\n  });\r\n  return target;\r\n};\r\n\r\nexport default function TripStopCreateForm(props) {\r\n  const classes = useStyles()\r\n  const history = useHistory();\r\n  const db = firebase.firestore();\r\n  const [name, setName] = useState();\r\n  const [\r\n    times,\r\n    setTimes\r\n  ] = useState(new Map());\r\n\r\n  /*\r\n   setFares = (currency, amount) => {\r\n            times.delete(currency);\r\n            if (amount!=\"\" && amount!=undefined && amount!=null){\r\n              times[currency] = amount;\r\n            }\r\n          }\r\n  setTimes = (departure, arrival) => {\r\n            times.delete(\"time\" + departure.toString());\r\n            if (arrival!=\"\" && arrival!=undefined && arrival!=null){\r\n              times[\"time\" + departure.toString()] = arrival;\r\n            }\r\n          }\r\n  */\r\n\r\n\r\n\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (name === undefined || name === \"\" || times === undefined || times.length === 0) alert(\"Please fill in all input fields!\");\r\n    else {\r\n      let id = uuid();\r\n\r\n      var stops = props.trip?.stops ?? {};\r\n\r\n      //console.log(stops);\r\n      //stops.delete(name);\r\n      stops[name] = {\r\n        id: id,\r\n        name: name,\r\n        times: Object.fromEntries(times),\r\n        date: new Date(),\r\n      }\r\n\r\n      //console.log(stops);\r\n      //stops.delete(name);\r\n      //         stops[name] = {\r\n      //           id: id,\r\n      //           name: name,\r\n      //           times: Object.fromEntries(times),\r\n      //           date: new Date(),\r\n      //         }\r\n\r\n      //create possible trips\r\n      //[from] to any other stop including [to]\r\n      //[stop] to any other [stop]\r\n      let arr = Array.from(new Map(Object.entries(stops)).values());\r\n      let to_to_stops = [`${props.trip?.from}-${props.trip?.to}`];\r\n      let from_to_stops = (arr).map((item) => `${props.trip?.from}-${item.name}`);\r\n      let stops_to_stops = []\r\n      for (var x = 0; x < arr.length; x++) {\r\n        stops_to_stops.push(`${arr[x].name}-${props.trip?.to}`);\r\n        if (x < arr.length - 1) {\r\n          for (var y = x + 1; y < arr.length; y++) {\r\n            stops_to_stops.push(`${arr[x].name}-${arr[y].name}`);\r\n          }\r\n        }\r\n      }\r\n\r\n      var possibleTrips = to_to_stops.concat(from_to_stops, stops_to_stops);\r\n\r\n      //save\r\n      db\r\n        .collection(\"trips\")\r\n        .doc(props.docID)\r\n        .update({ stops: stops, possibleTrips: possibleTrips })\r\n        .then(\r\n          (doc) =>\r\n            // fetching free slots\r\n            history.push(\"/trips/\" + props.docID + \"/stops\")\r\n        )\r\n        .catch(\r\n          (e) => { alert(\"An error occurred!\"); console.log(e); }\r\n        );\r\n\r\n    }\r\n\r\n  }\r\n  return (\r\n    <form onSubmit={e => { handleSubmit(e) }} className={classes.root}>\r\n      <br />\r\n      <br />\r\n      <label>City or town name</label>\r\n      <br />\r\n      <input\r\n        name='name'\r\n        type='text'\r\n        value={name}\r\n        required\r\n        onChange={e => setName(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>Times</label>\r\n      <br />\r\n      <table>\r\n        <tr>\r\n          <th>Leaves {props.trip.from} at</th>\r\n          <th>Leaves this stop at</th>\r\n        </tr>\r\n        {\r\n          props.trip.times.map((time) => {\r\n            return (\r\n              <tr>\r\n                <td>{time}</td>\r\n                <td>\r\n                  <input\r\n                    name='to'\r\n                    type=\"number\"\r\n                    onChange={e => {\r\n                      times.delete(time);\r\n                      setTimes(times.set(time, e.target.value))\r\n                    }\r\n                    }\r\n                  />\r\n                </td>\r\n              </tr>\r\n            )\r\n          })\r\n        }\r\n      </table>\r\n      <br />\r\n      <br />\r\n      <input\r\n        className='submitButton'\r\n        type='submit'\r\n        value='Save'\r\n      />\r\n    </form>\r\n  );\r\n}\r\n\r\n","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripStopCreateForm from '../../components/trips/TripStopCreateForm'\r\nimport firebase from \"../../firebase.config\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nexport default function AddTripStop() {\r\n\tlet { id } = useParams();\r\n\t// const db = firebase.firestore();\r\n\tconst [trip, setTrip] = React.useState();\r\n\tconst [docID, setDocID] = React.useState();\r\n\tlet display;\r\n\r\n\t//get the trip\r\n\t// const fetchData = () => {\r\n\t// \tconst db = firebase.firestore();\r\n\t// \tdb.collection(\"trips\").doc(id).get().then((doc) => {\r\n\t// \t\tconsole.log(doc);\r\n\t// \t\tif (doc.exists) {\r\n\t// \t\t\tsetTrip(doc.data());\r\n\t// \t\t\tsetDocID(doc.id);\r\n\t// \t\t}\r\n\t// \t}\r\n\t// \t);\r\n\t// }\r\n\r\n\t// React.useEffect(() => {\r\n\t// \tfetchData();\r\n\t// }, []);\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst fetchData = () => {\r\n\t\t\tconst db = firebase.firestore();\r\n\t\t\tdb.collection(\"trips\").doc(id).get().then((doc) => {\r\n\t\t\t\tconsole.log(doc);\r\n\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\tsetTrip(doc.data());\r\n\t\t\t\t\tsetDocID(doc.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t);\r\n\t\t};\r\n\t\tfetchData();\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\t//display the stops\r\n\r\n\tif (trip !== undefined && trip !== null)\r\n\t\tdisplay = (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>{trip.name}</h1>\r\n\t\t\t\t<TripStopCreateForm trip={trip} docID={docID} />\r\n\t\t\t</div>\r\n\t\t);\r\n\telse\r\n\t\tdisplay = (\r\n\t\t\t<h1>Trip not found!</h1>\r\n\t\t);\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Sidebar />\r\n\t\t\t{display}\r\n\t\t\t<Footer />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport firebase from \"../../firebase.config\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nconst { uuid } = require(\"uuidv4\");\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginTop: 80,\r\n  },\r\n}));\r\n\r\nexport default function FareCreateForm(props) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const db = firebase.firestore();\r\n  const [to, setTo] = useState();\r\n  const [from, setFrom] = useState();\r\n  // eslint-disable-next-line\r\n  const [prices, setPrices] = useState(new Map());\r\n\r\n  const updatePrices = (currency, amount) => {\r\n    prices.delete(currency);\r\n    prices.set(currency, amount);\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (to === undefined || to === \"\" || from === undefined || from === \"\" || prices === undefined || prices.length === 0) alert(\"Please fill in all input fields!\");\r\n    else {\r\n      let id = uuid();\r\n      console.log(prices);\r\n\r\n      //save\r\n      db\r\n        .collection(\"fares\")\r\n        .add({\r\n          id: id,\r\n          to: to,\r\n          from: from,\r\n          prices: Object.fromEntries(prices),\r\n          date: new Date(),\r\n        })\r\n        .then(\r\n          (ref) =>\r\n            // fetching free slots\r\n            history.push(\"/fares\")\r\n        )\r\n        .catch(\r\n          (e) => alert(\"An error occurred!\")\r\n        );\r\n\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={e => { handleSubmit(e) }} className={classes.root}>\r\n      <br />\r\n      <br />\r\n      <label>From</label>\r\n      <br />\r\n      <input\r\n        name='from'\r\n        type='text'\r\n        value={from}\r\n        required\r\n        onChange={e => setFrom(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>To</label>\r\n      <br />\r\n      <input\r\n        name='to'\r\n        type='text'\r\n        value={to}\r\n        required\r\n        onChange={e => setTo(e.target.value)}\r\n      />\r\n      <br />\r\n      <br />\r\n      <label>Fares</label>\r\n      <br />\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Currency</th>\r\n            <th>Price</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>USD</td>\r\n            <td>\r\n              <input\r\n                name='to'\r\n                type='text'\r\n                onChange={e => updatePrices(\"USD\", e.target.value)}\r\n              />\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>ZWL</td>\r\n            <td>\r\n              <input\r\n                name='to'\r\n                type='text'\r\n                onChange={e => updatePrices(\"ZWL\", e.target.value)}\r\n              />\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>ZAR</td>\r\n            <td>\r\n              <input\r\n                name='to'\r\n                type='text'\r\n                onChange={e => updatePrices(\"ZAR\", e.target.value)}\r\n              />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <br />\r\n      <br />\r\n      <input\r\n        className='submitButton'\r\n        type='submit'\r\n        value='Save'\r\n      />\r\n    </form>\r\n  )\r\n}","import React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport FareCreateForm from '../../components/fares/FareCreateForm'\r\n\r\nexport default function AddFare() {\r\n    return (\r\n        <div>\r\n            <Sidebar />\r\n            <FareCreateForm />\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n","import * as React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {\r\n    Chart,\r\n    BarSeries,\r\n    Title,\r\n    ArgumentAxis,\r\n    ValueAxis,\r\n} from '@devexpress/dx-react-chart-material-ui';\r\n\r\nimport { Animation } from '@devexpress/dx-react-chart';\r\n\r\nconst data = [\r\n    { route: 'Bulawayo', reservations: 30 },\r\n    { route: 'Harare', reservations: 34 },\r\n    { route: 'Chegutu', reservations: 11 },\r\n    { route: 'Victoria', reservations: 39 },\r\n    { route: 'Hwange', reservations: 13 },\r\n    { route: 'Kwekwe', reservations: 5 },\r\n    { route: 'Chiredzi', reservations: 13 },\r\n    { route: 'Kadoma', reservations: 9 },\r\n    { route: 'Johannesburg', reservations: 40 },\r\n    { route: 'Mutare', reservations: 22 },\r\n];\r\n\r\nexport default class StatsRotated extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            data,\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { data: chartData } = this.state;\r\n\r\n        return (\r\n            <Paper style={{ backgroundColor: '#003c6c' }}>\r\n                <Chart\r\n                    data={chartData}\r\n                    rotated\r\n                >\r\n                    <ArgumentAxis />\r\n                    <ValueAxis max={7} />\r\n\r\n                    <BarSeries\r\n                        valueField=\"reservations\"\r\n                        argumentField=\"route\"\r\n                    />\r\n                    <Title style={{ backgroundColor: 'white' }} text=\"Reservation Activity\" />\r\n                    <Animation />\r\n                </Chart>\r\n            </Paper>\r\n        );\r\n    }\r\n}","import * as React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {\r\n    Chart,\r\n    BarSeries,\r\n    Title,\r\n    ArgumentAxis,\r\n    ValueAxis,\r\n    Tooltip,\r\n} from '@devexpress/dx-react-chart-material-ui';\r\n\r\nimport { EventTracker } from '@devexpress/dx-react-chart';\r\n\r\nconst data = [\r\n    { route: 'Bulawayo', reservations: 30 },\r\n    { route: 'Harare', reservations: 34 },\r\n    { route: 'Kadoma', reservations: 9 },\r\n    { route: 'Victoria', reservations: 39 },\r\n    { route: 'Hwange', reservations: 13 },\r\n    { route: 'Kwekwe', reservations: 5 },\r\n    { route: 'Mutare', reservations: 22 },\r\n    { route: 'Chiredzi', reservations: 13 },\r\n    { route: 'Chegutu', reservations: 11 },\r\n    { route: 'Johannesburg', reservations: 40 },\r\n];\r\n\r\nexport default class StatsTooltip extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            data,\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { data: chartData } = this.state;\r\n\r\n        return (\r\n            <Paper style={{ backgroundColor: '#003c6c' }}>\r\n                <Chart\r\n                    data={chartData}\r\n                >\r\n                    <ArgumentAxis />\r\n                    <ValueAxis />\r\n\r\n                    <BarSeries\r\n                        valueField=\"reservations\"\r\n                        argumentField=\"route\"\r\n                    />\r\n                    <Title\r\n                        style={{ backgroundColor: 'white' }}\r\n                        text=\"Booking Reservations Activity\"\r\n                    />\r\n                    <EventTracker />\r\n                    <Tooltip />\r\n                </Chart>\r\n            </Paper>\r\n        );\r\n    }\r\n}","import { makeStyles } from '@material-ui/core'\r\nimport React from 'react'\r\nimport StatsRotated from './StatsRotated';\r\nimport StatsTooltip from './StatsTooltip';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        marginTop: 80,\r\n    },\r\n    drawerHeader: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: theme.spacing(0, 1),\r\n        // necessary for content to be below app bar\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: 'flex-end',\r\n    },\r\n}));\r\n\r\nexport default function Home() {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {/* <h2>Home</h2> */}\r\n            <h2 style={{ fontFamily: 'Roboto' }}>Infographic Data</h2>\r\n            <StatsRotated />\r\n            <hr />\r\n            <StatsTooltip />\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\n// import Navbar from \"../../components/layout/Navbar\";\r\nimport Home from \"../../components/home/Home\";\r\nimport Footer from \"../../components/layout/Footer\";\r\nimport { Container } from \"react-bootstrap\";\r\n// import ReservationTable from \"../../components/reservations/ReservationTable\";\r\nimport Sidebar from \"../../components/layout/Sidebar\";\r\n// import DataGrid from '../../components/reservations/DataGrid'\r\n\r\nexport default function Homepage() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <Home />\r\n            {/* <DataGrid /> */}\r\n            <Footer />\r\n        </Container>\r\n    );\r\n}\r\nexport { Homepage };\r\n","import * as React from 'react';\r\n// import Paper from '@material-ui/core/Paper';\r\nimport firebase from 'firebase';\r\nimport { Line } from \"react-chartjs-2\";\r\n// import {\r\n//     Chart,\r\n//     BarSeries,\r\n//     Title,\r\n//     ArgumentAxis,\r\n//     ValueAxis,\r\n//     Tooltip,\r\n// } from '@devexpress/dx-react-chart-material-ui';\r\n\r\n// import { EventTracker } from '@devexpress/dx-react-chart';\r\nimport moment from 'moment';\r\n\r\n\r\n\r\nexport default function StatsChart() {\r\n    const [activityData, setActivityData] = React.useState([]);\r\n    const [labels, setLabels] = React.useState([]);\r\n\r\n    React.useEffect(() => {\r\n        const fetchStats = async () => {\r\n            const db = firebase.firestore();\r\n            // eslint-disable-next-line\r\n            // let activitiesRef;\r\n            let dates = [];\r\n\r\n            for (let x = 6; x >= 0; x--) {\r\n                let minDate = new moment().subtract(x, \"days\");\r\n                dates.push(minDate.format('ddd'));\r\n                let min = new Date();\r\n                min.setDate(min.getDate() - x - 1);\r\n                let max = new Date();\r\n                max.setDate(max.getDate() - x);\r\n                // eslint-disable-next-line\r\n                let activitiesRef = db.collection('reservations')\r\n                    .where(\"BookingTime\", \">\", min)\r\n                    .where(\"BookingTime\", \"<\", max)\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        setActivityData(state => [...state, snapshot.size]);\r\n                    });\r\n            }\r\n            setLabels(dates);\r\n        };\r\n        fetchStats();\r\n    }, []);\r\n\r\n    const data = {\r\n        labels: labels,\r\n        datasets: [\r\n            {\r\n                label: \"No. of reservations\",\r\n                fill: true,\r\n                backgroundColor: \"#b71c1c\",\r\n                borderColor: \"#b71c1c\",\r\n                data: activityData,\r\n                borderWidth: 1,\r\n                pointRadius: 0,\r\n            }\r\n\r\n        ],\r\n    };\r\n    // constructor(props) {\r\n    //     super(props);\r\n\r\n    //     this.state = {\r\n    //         data,\r\n    //     };\r\n    // }\r\n\r\n    // render() {\r\n    //     const { data: chartData } = this.state;\r\n\r\n    return (\r\n        <Line\r\n            height={200}\r\n            data={data}\r\n            style={{\r\n                backgroundColor: '#003c6c'\r\n            }}\r\n            options={{\r\n                responsive: true,\r\n                title: {\r\n                    display: true,\r\n                    text: \"Activity for the past 7 days\",\r\n                    fontSize: 17,\r\n                    fontColor: \"#5f0937\",\r\n                    padding: 10,\r\n                },\r\n                legend: {\r\n                    display: false,\r\n                    position: \"right\",\r\n                },\r\n                scales: {\r\n                    yAxes: [\r\n                        {\r\n                            ticks: {\r\n                                fontColor: \"white\",\r\n                                beginAtZero: true,\r\n                                stepSize: 1\r\n                            },\r\n                        },\r\n                    ],\r\n                    xAxes: [\r\n                        {\r\n                            ticks: {\r\n                                fontColor: \"white\",\r\n                            },\r\n                        },\r\n                    ],\r\n                },\r\n            }}\r\n        />\r\n    )\r\n}\r\n// }","import React from 'react';\r\nimport moment from 'moment';\r\nimport firebase from 'firebase';\r\nimport { Line } from \"react-chartjs-2\";\r\n\r\nexport default function ActivityChart() {\r\n    const [activityData, setActivityData] = React.useState([]);\r\n    const [labels, setLabels] = React.useState([]);\r\n\r\n    React.useEffect(() => {\r\n        const fetchStats = async () => {\r\n            const db = firebase.firestore();\r\n            let activitiesRef;\r\n            let dates = [];\r\n\r\n            for (var x = 6; x >= 0; x--) {\r\n                var minDate = new moment().subtract(x, \"days\");\r\n                dates.push(minDate.format('ddd'));\r\n                var min = new Date();\r\n                min.setDate(min.getDate() - x - 1);\r\n                var max = new Date();\r\n                max.setDate(max.getDate() - x);\r\n                // eslint-disable-next-line\r\n                activitiesRef = db.collection(\"reservations\")\r\n                    .where(\"BookingTime\", \">\", min)\r\n                    .where(\"BookingTime\", \"<\", max)\r\n                    .get()\r\n                    .then((snapshot) => {\r\n                        setActivityData(state => [...state, snapshot.size]);\r\n                    });\r\n            }\r\n            setLabels(dates);\r\n        };\r\n        fetchStats();\r\n    }, []);\r\n\r\n    const data = {\r\n        labels: labels,\r\n        datasets: [\r\n            {\r\n                label: \"No. of seat reservations\",\r\n                fill: true,\r\n                backgroundColor: \"#04e7ff\",\r\n                borderColor: \"#04e7ff\",\r\n                data: activityData,\r\n                borderWidth: 1,\r\n                pointRadius: 0,\r\n            }\r\n        ],\r\n    };\r\n\r\n    return (\r\n        <Line\r\n            height={200}\r\n            data={data}\r\n            style={{\r\n                backgroundColor: '#003c6c'\r\n            }}\r\n            options={{\r\n                responsive: true,\r\n                title: {\r\n                    display: true,\r\n                    text: \"Activity for the past 7 days\",\r\n                    fontSize: 17,\r\n                    fontColor: \"white\",\r\n                    padding: 10,\r\n                },\r\n                legend: {\r\n                    display: false,\r\n                    position: \"right\",\r\n                },\r\n                scales: {\r\n                    yAxes: [\r\n                        {\r\n                            ticks: {\r\n                                fontColor: \"white\",\r\n                                beginAtZero: true,\r\n                                stepSize: 1\r\n                            },\r\n                        },\r\n                    ],\r\n                    xAxes: [\r\n                        {\r\n                            ticks: {\r\n                                fontColor: \"white\",\r\n                            },\r\n                        },\r\n                    ],\r\n                },\r\n            }}\r\n        />\r\n    )\r\n}","import React from 'react'\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport StatsChart from './StatsChart';\r\nimport ActivityChart from './ActivityChart';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        marginTop: 80,\r\n    },\r\n}));\r\n\r\nexport default function StatsData() {\r\n    const classes = useStyles()\r\n    return (\r\n        <div className={classes.root}>\r\n            <h2>Statistics</h2>\r\n            <StatsChart />\r\n            <hr />\r\n            <ActivityChart />\r\n        </div>\r\n    )\r\n}\r\n","import { Container } from '@material-ui/core'\r\nimport React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport StatsData from '../../components/statistics/StatsData'\r\n\r\nexport default function Statistics() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <StatsData />\r\n            <Footer />\r\n        </Container>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        marginTop: 80,\r\n    },\r\n}));\r\n\r\nexport default function PaymentsData() {\r\n    const classes = useStyles();\r\n    return (\r\n        <div className={classes.root}>\r\n            <h2>Payments</h2>\r\n            <p>Some payments data is coming here...</p>\r\n        </div>\r\n    )\r\n}\r\n","import { Container } from '@material-ui/core'\r\nimport React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport PaymentsData from '../../components/payments/PaymentsData'\r\n\r\nexport default function Payments() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <PaymentsData />\r\n            <Footer />\r\n        </Container>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport firebase from '../../firebase.config'\r\n// import moment from 'moment'\r\nimport { Button, makeStyles } from '@material-ui/core'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: 400,\r\n        width: '100%',\r\n        marginTop: 80,\r\n    },\r\n    button: {\r\n        marginBottom: '10px',\r\n    },\r\n}));\r\n\r\nconst columns = [\r\n    { field: 'from', headerName: 'FROM', width: 130, sortable: true },\r\n    { field: 'to', headerName: 'TO', width: 130, sortable: true },\r\n    { field: 'prices', headerName: 'PRICES', width: 200, sortable: true, valueGetter: params => `$${params.row.prices.USD}, ZAR${params.row.prices.ZAR}, ZWL$${params.row.prices.ZWL}` },\r\n    { field: \"date\", headerName: \"DATE\", width: 160, valueGetter: params => `${params.row.date.toDate()}`, },\r\n\r\n\r\n]\r\nexport default function FaresGrid() {\r\n    const classes = useStyles();\r\n    const [fares, setFares] = React.useState([]);\r\n\r\n    React.useState(() => {\r\n        const fetchFares = async () => {\r\n            const db = firebase.firestore();\r\n            const data = await db.collection('fares').get();\r\n            setFares(data.docs.map(doc => ({ ...doc.data(), id: doc.id })))\r\n        };\r\n        fetchFares();\r\n    }, []);\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <h3 style={{ marginBottom: 20, }}>Fares</h3>\r\n            <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                href=\"/fares/add\"\r\n                className={classes.button}>Add Fare</Button>\r\n            <DataGrid rows={fares} columns={columns} />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Container } from '@material-ui/core'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport FaresGrid from '../../components/fares/FaresGrid'\r\n\r\nexport default function Grid() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <FaresGrid />\r\n            <Footer />\r\n        </Container>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport firebase from '../../firebase.config'\r\nimport { Button, makeStyles } from '@material-ui/core'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        height: 400,\r\n        width: '100%',\r\n        marginTop: 80,\r\n    },\r\n    button: {\r\n        marginBottom: 10,\r\n    },\r\n}))\r\n\r\nfunction displayStops(map) {\r\n    if (map === undefined || map === null) return [];\r\n\r\n    var newMap = new Map(Object.entries(map));\r\n    var arr = []; // initially new Array()\r\n\r\n    newMap.forEach((v) => {\r\n        arr.push(v.name);\r\n    });\r\n\r\n    return arr\r\n}\r\n\r\n// let link = `/trips/${tripRef.id}/stops`;\r\n\r\nconst columns = [\r\n    { field: 'trip', headerName: 'TRIP', width: 200, sortable: true, valueGetter: params => `${params.row.from} to ${params.row.to}` },\r\n    { field: 'from', headerName: 'FROM', width: 130, sortable: true },\r\n    { field: 'to', headerName: 'TO', width: 130, sortable: true },\r\n    { field: \"times\", headerName: \"TIMES\", width: 160 },\r\n    { field: \"stops\", headerName: \"STOPS\", width: 200, valueGetter: params => `${displayStops(params.row.stops)}` },\r\n    { field: \"date\", headerName: \"DATE\", width: 160, valueGetter: params => `${params.row.date.toDate()}`, },\r\n    { field: \"\", headerName: \"ACTION\", width: 160, valueGetter: params => `${params.row.Button}` },\r\n]\r\n\r\nexport default function TripsGrid() {\r\n    const classes = useStyles();\r\n    const [trips, setTrips] = React.useState([]);\r\n\r\n    React.useState(() => {\r\n        const fetchTrips = async () => {\r\n            const db = firebase.firestore();\r\n            const data = await db.collection('trips').get()\r\n            setTrips(data.docs.map(doc => ({ ...doc.data(), id: doc.id })))\r\n        };\r\n        fetchTrips();\r\n    }, [])\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <h3 style={{ marginBottom: 20, }}>Trips</h3>\r\n            <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                href=\"/fares/add\"\r\n                className={classes.button}>Add Fare</Button>\r\n            <DataGrid rows={trips} columns={columns} />\r\n        </div>\r\n    )\r\n}\r\n","import { Container } from '@material-ui/core'\r\nimport React from 'react'\r\nimport Footer from '../../components/layout/Footer'\r\nimport Sidebar from '../../components/layout/Sidebar'\r\nimport TripsGrid from '../../components/trips/TripsGrid'\r\n\r\nexport default function TripGrid() {\r\n    return (\r\n        <Container>\r\n            <Sidebar />\r\n            <TripsGrid />\r\n            <Footer />\r\n        </Container>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport \"./App.css\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\r\nimport PrivateRoute from './PrivateRoute';\r\nimport Data from './pages/reservations/Data'\r\nimport AddReservation from './pages/reservations/AddReservation';\r\nimport { AuthProvider } from \"./contexts/AuthContext\";\r\nimport { login } from \"./pages/accounts/login\";\r\n// import { register } from \"./pages/accounts/register\";\r\nimport Trips from './pages/trips/Trips';\r\nimport AddTrip from './pages/trips/AddTrip';\r\nimport TripStops from './pages/trips/TripStops';\r\nimport AddTripStop from './pages/trips/AddTripStop';\r\n// import Fares from './pages/fares/Fares';\r\nimport AddFare from './pages/fares/AddFare';\r\nimport Homepage from \"./pages/home/homepage\";\r\nimport \"@fontsource/roboto\";\r\nimport Statistics from \"./pages/statistics/Statistics\";\r\nimport Payments from \"./pages/payments/Payments\";\r\nimport Grid from './pages/fares/Grid'\r\nimport TripGrid from './pages/trips/TripGrid'\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: \"#ff3d00\",\r\n      dark: '#002884',\r\n      contrastText: '#fff',\r\n      light: '#757ce8',\r\n    },\r\n    secondary: {\r\n      light: '#ff7961',\r\n      main: \"#ff4569\",\r\n      dark: '#ba000d',\r\n      contrastText: '#000',\r\n    },\r\n    body: {\r\n      maxWidth: \"100%\",\r\n      backgroundColor: \"#34495E\",\r\n      fontFamily: 'Roboto',\r\n    },\r\n  },\r\n});\r\n\r\n// const drawerWidth = 200;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    // marginTop: 80,\r\n    fontSize: 13,\r\n    width: '100%',\r\n    ...theme.mixins.toolbar,\r\n    justifyContent: 'flex-end',\r\n  },\r\n}));\r\n\r\nfunction App() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <AuthProvider>\r\n      <Router>\r\n        <Switch>\r\n          <Container>\r\n            <ThemeProvider theme={theme}>\r\n              <div className={classes.root}>\r\n                <PrivateRoute exact path=\"/\" component={Homepage} />\r\n                <PrivateRoute exact path='/reservations' component={Data} />\r\n                <PrivateRoute exact path='/reservations/:id/add' component={AddReservation} />\r\n                <PrivateRoute exact path='/trips' component={Trips} />\r\n                <PrivateRoute exact path='/trips-grid' component={TripGrid} />\r\n                <PrivateRoute exact path='/trips/add' component={AddTrip} />\r\n                <PrivateRoute exact path='/trips/:id/stops' component={TripStops} />\r\n                <PrivateRoute exact path='/trips/:id/stops/add' component={AddTripStop} />\r\n                {/* <PrivateRoute exact path='/fares' component={Fares} /> */}\r\n                <PrivateRoute exact path=\"/fares\" component={Grid} />\r\n                <PrivateRoute exact path='/fares/add' component={AddFare} />\r\n                <PrivateRoute exact path=\"/statistics\" component={Statistics} />\r\n                <PrivateRoute exact path=\"/payments\" component={Payments} />\r\n                <PrivateRoute path='/downloads/:id/:ticketID' component={(e) => {\r\n                  window.open(\"https://extracitywebhook.herokuapp.com/downloads/\" + encodeURIComponent(e.match.params.ticketID) + \"/\" +encodeURIComponent(e.match.params.id), \"_blank\"); \r\n                  return window.location.href = \"/reservations/\"; \r\n              }}/>\r\n              </div>\r\n              <div>\r\n                <Route exact path='/login' component={login} />\r\n                {/* <Route exact path='/register' component={register} /> */}\r\n              </div>\r\n            </ThemeProvider>\r\n          </Container>\r\n        </Switch>\r\n      </Router>\r\n    </AuthProvider>\r\n\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n// import './index.css';\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport App from \"./App\";\r\n\r\n// import reportWebVitals from \"./reportWebVitals\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}